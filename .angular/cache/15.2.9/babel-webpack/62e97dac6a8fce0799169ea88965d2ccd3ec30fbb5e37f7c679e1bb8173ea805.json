{"ast":null,"code":"\"use strict\";\n\n// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT license.\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.AvatarSynthesisAdapter = void 0;\nconst Exports_js_1 = require(\"../sdk/Exports.js\");\nconst Exports_js_2 = require(\"./Exports.js\");\nclass AvatarSynthesisAdapter extends Exports_js_2.SynthesisAdapterBase {\n  constructor(authentication, connectionFactory, synthesizerConfig, avatarSynthesizer, avatarConfig) {\n    super(authentication, connectionFactory, synthesizerConfig, undefined);\n    this.privAvatarSynthesizer = avatarSynthesizer;\n    this.privSynthesizer = avatarSynthesizer;\n    this.privAvatarConfig = avatarConfig;\n  }\n  setSynthesisContextSynthesisSection() {\n    this.privSynthesisContext.setSynthesisSection(undefined);\n  }\n  setSpeechConfigSynthesisSection() {\n    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r;\n    this.privSynthesizerConfig.synthesisVideoSection = {\n      format: {\n        bitrate: (_a = this.privAvatarConfig.videoFormat) === null || _a === void 0 ? void 0 : _a.bitrate,\n        codec: (_b = this.privAvatarConfig.videoFormat) === null || _b === void 0 ? void 0 : _b.codec,\n        crop: {\n          bottomRight: {\n            x: (_e = (_d = (_c = this.privAvatarConfig.videoFormat) === null || _c === void 0 ? void 0 : _c.cropRange) === null || _d === void 0 ? void 0 : _d.bottomRight) === null || _e === void 0 ? void 0 : _e.x,\n            y: (_h = (_g = (_f = this.privAvatarConfig.videoFormat) === null || _f === void 0 ? void 0 : _f.cropRange) === null || _g === void 0 ? void 0 : _g.bottomRight) === null || _h === void 0 ? void 0 : _h.y\n          },\n          topLeft: {\n            x: (_l = (_k = (_j = this.privAvatarConfig.videoFormat) === null || _j === void 0 ? void 0 : _j.cropRange) === null || _k === void 0 ? void 0 : _k.topLeft) === null || _l === void 0 ? void 0 : _l.x,\n            y: (_p = (_o = (_m = this.privAvatarConfig.videoFormat) === null || _m === void 0 ? void 0 : _m.cropRange) === null || _o === void 0 ? void 0 : _o.topLeft) === null || _p === void 0 ? void 0 : _p.y\n          }\n        },\n        resolution: {\n          height: (_q = this.privAvatarConfig.videoFormat) === null || _q === void 0 ? void 0 : _q.height,\n          width: (_r = this.privAvatarConfig.videoFormat) === null || _r === void 0 ? void 0 : _r.width\n        }\n      },\n      protocol: {\n        name: \"WebRTC\",\n        webrtcConfig: {\n          clientDescription: btoa(this.privSynthesizerConfig.parameters.getProperty(Exports_js_1.PropertyId.TalkingAvatarService_WebRTC_SDP)),\n          iceServers: this.privAvatarSynthesizer.iceServers\n        }\n      },\n      talkingAvatar: {\n        background: {\n          color: this.privAvatarConfig.backgroundColor\n        },\n        character: this.privAvatarConfig.character,\n        customized: this.privAvatarConfig.customized,\n        style: this.privAvatarConfig.style\n      }\n    };\n  }\n  onAvatarEvent(metadata) {\n    if (!!this.privAvatarSynthesizer.avatarEventReceived) {\n      const avatarEventArgs = new Exports_js_1.AvatarEventArgs(metadata.Data.Offset, metadata.Data.Name);\n      try {\n        this.privAvatarSynthesizer.avatarEventReceived(this.privAvatarSynthesizer, avatarEventArgs);\n      } catch (error) {\n        // Not going to let errors in the event handler\n        // trip things up.\n      }\n    }\n  }\n}\nexports.AvatarSynthesisAdapter = AvatarSynthesisAdapter;\n\n//# sourceMappingURL=AvatarSynthesisAdapter.js.map","map":null,"metadata":{},"sourceType":"script","externalDependencies":[]}