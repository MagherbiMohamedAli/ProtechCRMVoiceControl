{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/chat/chat-service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"../services/local-storage\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/forms\";\nimport * as i6 from \"../navbar/navbar.component\";\nimport * as i7 from \"../footer/footer.component\";\nconst _c0 = [\"chatHistory\"];\nconst _c1 = function (a0, a1) {\n  return {\n    \"text-right\": a0,\n    \"text-left\": a1\n  };\n};\nconst _c2 = function (a0, a1) {\n  return {\n    \"my-message\": a0,\n    \"other-message\": a1\n  };\n};\nfunction ChatComponent_li_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\", 22)(1, \"div\", 23);\n    i0.ɵɵelement(2, \"span\", 24)(3, \"img\", 25);\n    i0.ɵɵelementStart(4, \"div\", 7)(5, \"div\", 26)(6, \"b\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(8, \"br\");\n    i0.ɵɵelementStart(9, \"span\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd()()()()();\n  }\n  if (rf & 2) {\n    const message_r2 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(4, _c1, message_r2.myMsg, !message_r2.myMsg));\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(7, _c2, message_r2.myMsg, !message_r2.myMsg));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(message_r2.from);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(message_r2.msg);\n  }\n}\nexport let ChatComponent = /*#__PURE__*/(() => {\n  var _class;\n  class ChatComponent {\n    constructor(chatService, router, localStr) {\n      this.chatService = chatService;\n      this.router = router;\n      this.newMsg = '';\n    }\n    ngAfterViewInit() {\n      this.scrollToBottom();\n    }\n    scrollToBottom() {\n      if (this.chatHistoryElements && this.chatHistoryElements.length > 0) {\n        const chatHistory = this.chatHistoryRef.nativeElement;\n        chatHistory.scrollTop = chatHistory.scrollHeight;\n      }\n    }\n    ngOnInit() {\n      this.messages = this.chatService.getChatMessages();\n      this.messages.subscribe(messages => {\n        console.log('Received Messages:', messages);\n        setTimeout(() => {\n          this.scrollToBottom();\n        });\n      });\n    }\n    sendMessage() {\n      this.chatService.addChatMessage(this.newMsg).then(() => {\n        this.newMsg = '';\n        this.scrollToBottom();\n      });\n    }\n    onKeyDown(event) {\n      if (event.key === 'Enter') {\n        event.preventDefault();\n        if (this.newMsg.trim() !== '') {\n          this.sendMessage();\n        }\n      }\n    }\n    signOut() {\n      this.chatService.signOut().then(() => {\n        this.router.navigateByUrl('/', {\n          replaceUrl: true\n        });\n      });\n    }\n  }\n  _class = ChatComponent;\n  _class.ɵfac = function ChatComponent_Factory(t) {\n    return new (t || _class)(i0.ɵɵdirectiveInject(i1.ChatService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.LocalStorage));\n  };\n  _class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: _class,\n    selectors: [[\"app-chat\"]],\n    viewQuery: function ChatComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 5);\n        i0.ɵɵviewQuery(_c0, 5);\n      }\n      if (rf & 2) {\n        let _t;\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.chatHistoryRef = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.chatHistoryElements = _t);\n      }\n    },\n    decls: 29,\n    vars: 5,\n    consts: [[\"href\", \"https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css\", \"rel\", \"stylesheet\"], [1, \"container\"], [1, \"row\", \"clearfix\"], [1, \"col-lg-12\"], [1, \"card\", \"chat-app\"], [1, \"chat\"], [1, \"chat-header\", \"clearfix\"], [1, \"row\"], [1, \"col-lg-6\"], [\"src\", \"https://bootdey.com/img/Content/avatar/avatar2.png\", \"alt\", \"avatar\"], [1, \"chat-about\"], [1, \"m-b-0\"], [1, \"chat-history\", 2, \"max-height\", \"400px\", \"overflow-y\", \"scroll\"], [\"chatHistory\", \"\"], [\"class\", \"clearfix\", 4, \"ngFor\", \"ngForOf\"], [1, \"chat-message\", \"clearfix\"], [1, \"input-group\", \"mb-0\"], [1, \"input-group-prepend\"], [\"type\", \"text\", \"placeholder\", \"Ecrivez votre message ici...\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\", \"keydown\"], [2, \"border-color\", \"white\", 3, \"disabled\", \"click\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"width\", \"24\", \"height\", \"24\", \"viewBox\", \"0 0 24 24\", 2, \"fill\", \"#1E73BE\"], [\"d\", \"m21.426 11.095-17-8A1 1 0 0 0 3.03 4.242l1.212 4.849L12 12l-7.758 2.909-1.212 4.849a.998.998 0 0 0 1.396 1.147l17-8a1 1 0 0 0 0-1.81z\"], [1, \"clearfix\"], [1, \"message-data\", 3, \"ngClass\"], [1, \"message-data-time\"], [\"src\", \"https://bootdey.com/img/Content/avatar/avatar7.png\", \"alt\", \"avatar\"], [1, \"col\", 3, \"ngClass\"]],\n    template: function ChatComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelement(0, \"app-navbar\")(1, \"link\", 0);\n        i0.ɵɵelementStart(2, \"div\", 1)(3, \"div\", 2)(4, \"div\", 3)(5, \"div\", 4)(6, \"div\", 5)(7, \"div\", 6)(8, \"div\", 7)(9, \"div\", 8);\n        i0.ɵɵelement(10, \"img\", 9);\n        i0.ɵɵelementStart(11, \"div\", 10)(12, \"h6\", 11);\n        i0.ɵɵtext(13, \"Support protech-it\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(14, \"small\");\n        i0.ɵɵtext(15, \"Disponible\");\n        i0.ɵɵelementEnd()()()()();\n        i0.ɵɵelementStart(16, \"div\", 12, 13)(18, \"ul\", 11);\n        i0.ɵɵtemplate(19, ChatComponent_li_19_Template, 11, 10, \"li\", 14);\n        i0.ɵɵpipe(20, \"async\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(21, \"div\", 15)(22, \"div\", 16);\n        i0.ɵɵelement(23, \"div\", 17);\n        i0.ɵɵelementStart(24, \"textarea\", 18);\n        i0.ɵɵlistener(\"ngModelChange\", function ChatComponent_Template_textarea_ngModelChange_24_listener($event) {\n          return ctx.newMsg = $event;\n        })(\"keydown\", function ChatComponent_Template_textarea_keydown_24_listener($event) {\n          return ctx.onKeyDown($event);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(25, \"button\", 19);\n        i0.ɵɵlistener(\"click\", function ChatComponent_Template_button_click_25_listener() {\n          return ctx.sendMessage();\n        });\n        i0.ɵɵnamespaceSVG();\n        i0.ɵɵelementStart(26, \"svg\", 20);\n        i0.ɵɵelement(27, \"path\", 21);\n        i0.ɵɵelementEnd()()()()()()()()();\n        i0.ɵɵnamespaceHTML();\n        i0.ɵɵelement(28, \"app-footer\");\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(19);\n        i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(20, 3, ctx.messages));\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngModel\", ctx.newMsg);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"disabled\", ctx.newMsg === \"\");\n      }\n    },\n    dependencies: [i4.NgClass, i4.NgForOf, i5.DefaultValueAccessor, i5.NgControlStatus, i5.NgModel, i6.NavbarComponent, i7.FooterComponent, i4.AsyncPipe],\n    styles: [\"body[_ngcontent-%COMP%]{background-color:#f4f7f6;margin-top:20px}.card[_ngcontent-%COMP%]{background:#fff;transition:.5s;border:0;margin-bottom:30px;border-radius:.55rem;position:relative;width:100%;box-shadow:0 1px 2px #0000001a}.chat-app[_ngcontent-%COMP%]   .people-list[_ngcontent-%COMP%]{width:280px;position:absolute;left:0;top:0;padding:20px;z-index:7}.chat-app[_ngcontent-%COMP%]   .chat[_ngcontent-%COMP%]{margin-left:280px;border-left:1px solid #eaeaea}.people-list[_ngcontent-%COMP%]{transition:.5s}.people-list[_ngcontent-%COMP%]   .chat-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:10px 15px;list-style:none;border-radius:3px}.people-list[_ngcontent-%COMP%]   .chat-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background:#efefef;cursor:pointer}.people-list[_ngcontent-%COMP%]   .chat-list[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]{background:#efefef}.people-list[_ngcontent-%COMP%]   .chat-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:15px}.people-list[_ngcontent-%COMP%]   .chat-list[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:45px;border-radius:50%}.people-list[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{float:left;border-radius:50%}.people-list[_ngcontent-%COMP%]   .about[_ngcontent-%COMP%]{float:left;padding-left:8px}.people-list[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]{color:#999;font-size:13px}.chat[_ngcontent-%COMP%]   .chat-header[_ngcontent-%COMP%]{padding:15px 20px;border-bottom:2px solid #f4f7f6}.chat[_ngcontent-%COMP%]   .chat-header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{float:left;border-radius:40px;width:40px}.chat[_ngcontent-%COMP%]   .chat-header[_ngcontent-%COMP%]   .chat-about[_ngcontent-%COMP%]{float:left;padding-left:10px}.chat[_ngcontent-%COMP%]   .chat-history[_ngcontent-%COMP%]{padding:20px;border-bottom:2px solid #fff}.chat[_ngcontent-%COMP%]   .chat-history[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding:0}.chat[_ngcontent-%COMP%]   .chat-history[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none;margin-bottom:30px}.chat[_ngcontent-%COMP%]   .chat-history[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{margin-bottom:0}.chat[_ngcontent-%COMP%]   .chat-history[_ngcontent-%COMP%]   .message-data[_ngcontent-%COMP%]{margin-bottom:15px}.chat[_ngcontent-%COMP%]   .chat-history[_ngcontent-%COMP%]   .message-data[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:40px;width:40px}.chat[_ngcontent-%COMP%]   .chat-history[_ngcontent-%COMP%]   .message-data-time[_ngcontent-%COMP%]{color:#434651;padding-left:6px}.chat[_ngcontent-%COMP%]   .chat-history[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{color:#444;padding:18px 20px;line-height:26px;font-size:16px;border-radius:7px;display:inline-block;position:relative}.chat[_ngcontent-%COMP%]   .chat-history[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]:after{bottom:100%;left:7%;border:solid transparent;content:\\\" \\\";height:0;width:0;position:absolute;pointer-events:none;border-bottom-color:#fff;border-width:10px;margin-left:-10px}.chat[_ngcontent-%COMP%]   .chat-history[_ngcontent-%COMP%]   .my-message[_ngcontent-%COMP%]{background:#efefef}.chat[_ngcontent-%COMP%]   .chat-history[_ngcontent-%COMP%]   .my-message[_ngcontent-%COMP%]:after{bottom:100%;left:30px;border:solid transparent;content:\\\" \\\";height:0;width:0;position:absolute;pointer-events:none;border-bottom-color:#efefef;border-width:10px;margin-left:-10px}.chat[_ngcontent-%COMP%]   .chat-history[_ngcontent-%COMP%]   .other-message[_ngcontent-%COMP%]{background:#e8f1f3;text-align:right}.chat[_ngcontent-%COMP%]   .chat-history[_ngcontent-%COMP%]   .other-message[_ngcontent-%COMP%]:after{border-bottom-color:#e8f1f3;left:93%}.chat[_ngcontent-%COMP%]   .chat-message[_ngcontent-%COMP%]{padding:20px}.online[_ngcontent-%COMP%], .offline[_ngcontent-%COMP%], .me[_ngcontent-%COMP%]{margin-right:2px;font-size:8px;vertical-align:middle}.online[_ngcontent-%COMP%]{color:#86c541}.offline[_ngcontent-%COMP%]{color:#e47297}.me[_ngcontent-%COMP%]{color:#1d8ecd}.float-right[_ngcontent-%COMP%]{float:right}.clearfix[_ngcontent-%COMP%]:after{visibility:hidden;display:block;font-size:0;content:\\\" \\\";clear:both;height:0}@media only screen and (max-width: 767px){.chat-app[_ngcontent-%COMP%]   .people-list[_ngcontent-%COMP%]{height:465px;width:100%;overflow-x:auto;background:#fff;left:-400px;display:none}.chat-app[_ngcontent-%COMP%]   .people-list.open[_ngcontent-%COMP%]{left:0}.chat-app[_ngcontent-%COMP%]   .chat[_ngcontent-%COMP%]{margin:0}.chat-app[_ngcontent-%COMP%]   .chat[_ngcontent-%COMP%]   .chat-header[_ngcontent-%COMP%]{border-radius:.55rem .55rem 0 0}.chat-app[_ngcontent-%COMP%]   .chat-history[_ngcontent-%COMP%]{height:300px;overflow-x:auto}}@media only screen and (min-width: 768px) and (max-width: 992px){.chat-app[_ngcontent-%COMP%]   .chat-list[_ngcontent-%COMP%]{height:650px;overflow-x:auto}.chat-app[_ngcontent-%COMP%]   .chat-history[_ngcontent-%COMP%]{height:600px;overflow-x:auto}}@media only screen and (min-device-width: 768px) and (max-device-width: 1024px) and (orientation: landscape) and (-webkit-min-device-pixel-ratio: 1){.chat-app[_ngcontent-%COMP%]   .chat-list[_ngcontent-%COMP%]{height:480px;overflow-x:auto}.chat-app[_ngcontent-%COMP%]   .chat-history[_ngcontent-%COMP%]{height:calc(100vh - 350px);overflow-x:auto}}.my-message[_ngcontent-%COMP%]{background-color:#dcf8c6;color:#000;border-radius:15px;padding:10px;max-width:70%;align-self:flex-end;margin-bottom:10px;text-align:right}.other-message[_ngcontent-%COMP%]{background-color:#e0e0e0;color:#000;border-radius:15px;padding:10px;max-width:70%;align-self:flex-start;margin-bottom:10px;text-align:left}\"]\n  });\n  return ChatComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}