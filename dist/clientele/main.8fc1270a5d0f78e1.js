(self.webpackChunkclientele=self.webpackChunkclientele||[]).push([[179],{2011:(ne,p,y)=>{"use strict";y.d(p,{Dh:()=>S,GT:()=>P,cc:()=>N,hO:()=>T,on:()=>m,pX:()=>b,xv:()=>h});var o=y(4650),v=y(1274),_=y(710);ne=y.hmd(ne);const A=["ngOnDestroy"],b=(q,X,ce,fe={})=>new Proxy(q,{get:(pe,Ae)=>ce.runOutsideAngular(()=>{var ke;if(q[Ae])return!(null===(ke=fe?.spy)||void 0===ke)&&ke.get&&fe.spy.get(Ae,q[Ae]),q[Ae];if(A.indexOf(Ae)>-1)return()=>{};const Fe=X.toPromise().then(we=>{const Le=we&&we[Ae];return"function"==typeof Le?Le.bind(we):Le&&Le.then?Le.then(tt=>ce.run(()=>tt)):ce.run(()=>Le)});return new Proxy(()=>{},{get:(we,Le)=>Fe[Le],apply:(we,Le,tt)=>Fe.then(Ye=>{var ot;const Xe=Ye&&Ye(...tt);return!(null===(ot=fe?.spy)||void 0===ot)&&ot.apply&&fe.spy.apply(Ae,tt,Xe),Xe})})})}),P=(q,X)=>{X.forEach(ce=>{Object.getOwnPropertyNames(ce.prototype||ce).forEach(fe=>{Object.defineProperty(q.prototype,fe,Object.getOwnPropertyDescriptor(ce.prototype||ce,fe))})})};class w{constructor(X){return X}}const S=new o.OlP("angularfire2.app.options"),h=new o.OlP("angularfire2.app.name");function m(q,X,ce){const pe="object"==typeof ce&&ce||{};pe.name=pe.name||"string"==typeof ce&&ce||"[DEFAULT]";const ke=v.Z.apps.filter(Fe=>Fe&&Fe.name===pe.name)[0]||X.runOutsideAngular(()=>v.Z.initializeApp(q,pe));try{JSON.stringify(q)!==JSON.stringify(ke.options)&&I("error",`${ke.name} Firebase App already initialized with different options${ne.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new w(ke)}const I=(q,...X)=>{(0,o.X6Q)()&&typeof console<"u"&&console[q](...X)},M={provide:w,useFactory:m,deps:[S,o.R0b,[new o.FiY,h]]};let T=(()=>{class q{constructor(ce){v.Z.registerVersion("angularfire",_.q4.full,"core"),v.Z.registerVersion("angularfire",_.q4.full,"app-compat"),v.Z.registerVersion("angular",o.q4F.full,ce.toString())}static initializeApp(ce,fe){return{ngModule:q,providers:[{provide:S,useValue:ce},{provide:h,useValue:fe}]}}}return q.\u0275fac=function(ce){return new(ce||q)(o.LFG(o.Lbi))},q.\u0275mod=o.oAB({type:q}),q.\u0275inj=o.cJS({providers:[M]}),q})();function N(q,X,ce,fe,pe){const[,Ae,ke]=globalThis.\u0275AngularfireInstanceCache.find(Fe=>Fe[0]===q)||[];if(Ae)return function L(q,X){try{return q.toString()===X.toString()}catch{return q===X}}(pe,ke)||(V("error",`${X} was already initialized on the ${ce} Firebase App with different settings.${z?" You may need to reload as Firebase is not HMR aware.":""}`),V("warn",{is:pe,was:ke})),Ae;{const Fe=fe();return globalThis.\u0275AngularfireInstanceCache.push([q,Fe,pe]),Fe}}const z=!!ne.hot,V=(q,...X)=>{(0,o.X6Q)()&&typeof console<"u"&&console[q](...X)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},710:(ne,p,y)=>{"use strict";y.d(p,{q4:()=>pa,iC:()=>td,HU:()=>vs,vb:()=>tl,JM:()=>el});var o=y(4650),v=y(8140),_=y(5861),A=y(9681),b=y(2090),P=y(4859),w=y(1877);const S=(F,H)=>H.some(J=>F instanceof J);let h,m;const T=new WeakMap,N=new WeakMap,L=new WeakMap,z=new WeakMap,V=new WeakMap;let ce={get(F,H,J){if(F instanceof IDBTransaction){if("done"===H)return N.get(F);if("objectStoreNames"===H)return F.objectStoreNames||L.get(F);if("store"===H)return J.objectStoreNames[1]?void 0:J.objectStore(J.objectStoreNames[0])}return ke(F[H])},set:(F,H,J)=>(F[H]=J,!0),has:(F,H)=>F instanceof IDBTransaction&&("done"===H||"store"===H)||H in F};function Ae(F){return"function"==typeof F?function pe(F){return F!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function M(){return m||(m=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(F)?function(...H){return F.apply(Fe(this),H),ke(T.get(this))}:function(...H){return ke(F.apply(Fe(this),H))}:function(H,...J){const re=F.call(Fe(this),H,...J);return L.set(re,H.sort?H.sort():[H]),ke(re)}}(F):(F instanceof IDBTransaction&&function X(F){if(N.has(F))return;const H=new Promise((J,re)=>{const he=()=>{F.removeEventListener("complete",Ce),F.removeEventListener("error",Pe),F.removeEventListener("abort",Pe)},Ce=()=>{J(),he()},Pe=()=>{re(F.error||new DOMException("AbortError","AbortError")),he()};F.addEventListener("complete",Ce),F.addEventListener("error",Pe),F.addEventListener("abort",Pe)});N.set(F,H)}(F),S(F,function I(){return h||(h=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(F,ce):F)}function ke(F){if(F instanceof IDBRequest)return function q(F){const H=new Promise((J,re)=>{const he=()=>{F.removeEventListener("success",Ce),F.removeEventListener("error",Pe)},Ce=()=>{J(ke(F.result)),he()},Pe=()=>{re(F.error),he()};F.addEventListener("success",Ce),F.addEventListener("error",Pe)});return H.then(J=>{J instanceof IDBCursor&&T.set(J,F)}).catch(()=>{}),V.set(H,F),H}(F);if(z.has(F))return z.get(F);const H=Ae(F);return H!==F&&(z.set(F,H),V.set(H,F)),H}const Fe=F=>V.get(F),tt=["get","getKey","getAll","getAllKeys","count"],Ye=["put","add","delete","clear"],ot=new Map;function Xe(F,H){if(!(F instanceof IDBDatabase)||H in F||"string"!=typeof H)return;if(ot.get(H))return ot.get(H);const J=H.replace(/FromIndex$/,""),re=H!==J,he=Ye.includes(J);if(!(J in(re?IDBIndex:IDBObjectStore).prototype)||!he&&!tt.includes(J))return;const Ce=function(){var Pe=(0,_.Z)(function*(ut,...it){const Tt=this.transaction(ut,he?"readwrite":"readonly");let qt=Tt.store;return re&&(qt=qt.index(it.shift())),(yield Promise.all([qt[J](...it),he&&Tt.done]))[0]});return function(it){return Pe.apply(this,arguments)}}();return ot.set(H,Ce),Ce}!function fe(F){ce=F(ce)}(F=>({...F,get:(H,J,re)=>Xe(H,J)||F.get(H,J,re),has:(H,J)=>!!Xe(H,J)||F.has(H,J)}));const wn="@firebase/installations",yr="0.6.4",vn=1e4,Cr=`w:${yr}`,Ee="FIS_v2",De="https://firebaseinstallations.googleapis.com/v1",be=36e5,dt=new b.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function vt(F){return F instanceof b.ZR&&F.code.includes("request-failed")}function Sn({projectId:F}){return`${De}/projects/${F}/installations`}function Dt(F){return{token:F.token,requestStatus:2,expiresIn:Ve(F.expiresIn),creationTime:Date.now()}}function Gt(F,H){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,_.Z)(function*(F,H){const re=(yield H.json()).error;return dt.create("request-failed",{requestName:F,serverCode:re.code,serverMessage:re.message,serverStatus:re.status})})).apply(this,arguments)}function Ft({apiKey:F}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":F})}function Cn(F){return kn.apply(this,arguments)}function kn(){return(kn=(0,_.Z)(function*(F){const H=yield F();return H.status>=500&&H.status<600?F():H})).apply(this,arguments)}function Ve(F){return Number(F.replace("s","000"))}function at(){return(at=(0,_.Z)(function*({appConfig:F,heartbeatServiceProvider:H},{fid:J}){const re=Sn(F),he=Ft(F),Ce=H.getImmediate({optional:!0});if(Ce){const Tt=yield Ce.getHeartbeatsHeader();Tt&&he.append("x-firebase-client",Tt)}const ut={method:"POST",headers:he,body:JSON.stringify({fid:J,authVersion:Ee,appId:F.appId,sdkVersion:Cr})},it=yield Cn(()=>fetch(re,ut));if(it.ok){const Tt=yield it.json();return{fid:Tt.fid||J,registrationStatus:2,refreshToken:Tt.refreshToken,authToken:Dt(Tt.authToken)}}throw yield Gt("Create Installation",it)})).apply(this,arguments)}function Tr(F){return new Promise(H=>{setTimeout(H,F)})}const Vn=/^[cdef][\w-]{21}$/,Vt="";function gn(){try{const F=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(F),F[0]=112+F[0]%16;const J=function Yt(F){return function Bi(F){return btoa(String.fromCharCode(...F)).replace(/\+/g,"-").replace(/\//g,"_")}(F).substr(0,22)}(F);return Vn.test(J)?J:Vt}catch{return Vt}}function Jt(F){return`${F.appName}!${F.appId}`}const lt=new Map;function Ct(F,H){const J=Jt(F);sn(J,H),function bn(F,H){const J=function cr(){return!Dn&&"BroadcastChannel"in self&&(Dn=new BroadcastChannel("[Firebase] FID Change"),Dn.onmessage=F=>{sn(F.data.key,F.data.fid)}),Dn}();J&&J.postMessage({key:F,fid:H}),function ln(){0===lt.size&&Dn&&(Dn.close(),Dn=null)}()}(J,H)}function sn(F,H){const J=lt.get(F);if(J)for(const re of J)re(H)}let Dn=null;const ti="firebase-installations-database",Qt=1,tr="firebase-installations-store";let mn=null;function Ne(){return mn||(mn=function we(F,H,{blocked:J,upgrade:re,blocking:he,terminated:Ce}={}){const Pe=indexedDB.open(F,H),ut=ke(Pe);return re&&Pe.addEventListener("upgradeneeded",it=>{re(ke(Pe.result),it.oldVersion,it.newVersion,ke(Pe.transaction))}),J&&Pe.addEventListener("blocked",()=>J()),ut.then(it=>{Ce&&it.addEventListener("close",()=>Ce()),he&&it.addEventListener("versionchange",()=>he())}).catch(()=>{}),ut}(ti,Qt,{upgrade:(F,H)=>{0===H&&F.createObjectStore(tr)}})),mn}function de(F,H){return je.apply(this,arguments)}function je(){return(je=(0,_.Z)(function*(F,H){const J=Jt(F),he=(yield Ne()).transaction(tr,"readwrite"),Ce=he.objectStore(tr),Pe=yield Ce.get(J);return yield Ce.put(H,J),yield he.done,(!Pe||Pe.fid!==H.fid)&&Ct(F,H.fid),H})).apply(this,arguments)}function nt(F){return ht.apply(this,arguments)}function ht(){return(ht=(0,_.Z)(function*(F){const H=Jt(F),re=(yield Ne()).transaction(tr,"readwrite");yield re.objectStore(tr).delete(H),yield re.done})).apply(this,arguments)}function wt(F,H){return yn.apply(this,arguments)}function yn(){return(yn=(0,_.Z)(function*(F,H){const J=Jt(F),he=(yield Ne()).transaction(tr,"readwrite"),Ce=he.objectStore(tr),Pe=yield Ce.get(J),ut=H(Pe);return void 0===ut?yield Ce.delete(J):yield Ce.put(ut,J),yield he.done,ut&&(!Pe||Pe.fid!==ut.fid)&&Ct(F,ut.fid),ut})).apply(this,arguments)}function ue(F){return ae.apply(this,arguments)}function ae(){return ae=(0,_.Z)(function*(F){let H;const J=yield wt(F.appConfig,re=>{const he=function ge(F){return Ln(F||{fid:gn(),registrationStatus:0})}(re),Ce=function Ue(F,H){if(0===H.registrationStatus){if(!navigator.onLine)return{installationEntry:H,registrationPromise:Promise.reject(dt.create("app-offline"))};const J={fid:H.fid,registrationStatus:1,registrationTime:Date.now()},re=function Ie(F,H){return We.apply(this,arguments)}(F,J);return{installationEntry:J,registrationPromise:re}}return 1===H.registrationStatus?{installationEntry:H,registrationPromise:kt(F)}:{installationEntry:H}}(F,he);return H=Ce.registrationPromise,Ce.installationEntry});return J.fid===Vt?{installationEntry:yield H}:{installationEntry:J,registrationPromise:H}}),ae.apply(this,arguments)}function We(){return We=(0,_.Z)(function*(F,H){try{const J=yield function fn(F,H){return at.apply(this,arguments)}(F,H);return de(F.appConfig,J)}catch(J){throw vt(J)&&409===J.customData.serverCode?yield nt(F.appConfig):yield de(F.appConfig,{fid:H.fid,registrationStatus:0}),J}}),We.apply(this,arguments)}function kt(F){return En.apply(this,arguments)}function En(){return(En=(0,_.Z)(function*(F){let H=yield sr(F.appConfig);for(;1===H.registrationStatus;)yield Tr(100),H=yield sr(F.appConfig);if(0===H.registrationStatus){const{installationEntry:J,registrationPromise:re}=yield ue(F);return re||J}return H})).apply(this,arguments)}function sr(F){return wt(F,H=>{if(!H)throw dt.create("installation-not-found");return Ln(H)})}function Ln(F){return function Tn(F){return 1===F.registrationStatus&&F.registrationTime+vn<Date.now()}(F)?{fid:F.fid,registrationStatus:0}:F}function Nr(){return(Nr=(0,_.Z)(function*({appConfig:F,heartbeatServiceProvider:H},J){const re=function bi(F,{fid:H}){return`${Sn(F)}/${H}/authTokens:generate`}(F,J),he=function Un(F,{refreshToken:H}){const J=Ft(F);return J.append("Authorization",function _n(F){return`${Ee} ${F}`}(H)),J}(F,J),Ce=H.getImmediate({optional:!0});if(Ce){const Tt=yield Ce.getHeartbeatsHeader();Tt&&he.append("x-firebase-client",Tt)}const ut={method:"POST",headers:he,body:JSON.stringify({installation:{sdkVersion:Cr,appId:F.appId}})},it=yield Cn(()=>fetch(re,ut));if(it.ok)return Dt(yield it.json());throw yield Gt("Generate Auth Token",it)})).apply(this,arguments)}function So(F){return Pc.apply(this,arguments)}function Pc(){return Pc=(0,_.Z)(function*(F,H=!1){let J;const re=yield wt(F.appConfig,Ce=>{if(!Ks(Ce))throw dt.create("not-registered");const Pe=Ce.authToken;if(!H&&function Rt(F){return 2===F.requestStatus&&!function kr(F){const H=Date.now();return H<F.creationTime||F.creationTime+F.expiresIn<H+be}(F)}(Pe))return Ce;if(1===Pe.requestStatus)return J=function Dc(F,H){return Zs.apply(this,arguments)}(F,H),Ce;{if(!navigator.onLine)throw dt.create("app-offline");const ut=function qn(F){const H={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},F),{authToken:H})}(Ce);return J=function ni(F,H){return ri.apply(this,arguments)}(F,ut),ut}});return J?yield J:re.authToken}),Pc.apply(this,arguments)}function Zs(){return(Zs=(0,_.Z)(function*(F,H){let J=yield Ms(F.appConfig);for(;1===J.authToken.requestStatus;)yield Tr(100),J=yield Ms(F.appConfig);const re=J.authToken;return 0===re.requestStatus?So(F,H):re})).apply(this,arguments)}function Ms(F){return wt(F,H=>{if(!Ks(H))throw dt.create("not-registered");return function Kr(F){return 1===F.requestStatus&&F.requestTime+vn<Date.now()}(H.authToken)?Object.assign(Object.assign({},H),{authToken:{requestStatus:0}}):H})}function ri(){return ri=(0,_.Z)(function*(F,H){try{const J=yield function on(F,H){return Nr.apply(this,arguments)}(F,H),re=Object.assign(Object.assign({},H),{authToken:J});return yield de(F.appConfig,re),J}catch(J){if(!vt(J)||401!==J.customData.serverCode&&404!==J.customData.serverCode){const re=Object.assign(Object.assign({},H),{authToken:{requestStatus:0}});yield de(F.appConfig,re)}else yield nt(F.appConfig);throw J}}),ri.apply(this,arguments)}function Ks(F){return void 0!==F&&2===F.registrationStatus}function qo(){return(qo=(0,_.Z)(function*(F){const H=F,{installationEntry:J,registrationPromise:re}=yield ue(H);return re?re.catch(console.error):So(H).catch(console.error),J.fid})).apply(this,arguments)}function ns(){return ns=(0,_.Z)(function*(F,H=!1){const J=F;return yield function ii(F){return ft.apply(this,arguments)}(J),(yield So(J,H)).token}),ns.apply(this,arguments)}function ft(){return(ft=(0,_.Z)(function*(F){const{registrationPromise:H}=yield ue(F);H&&(yield H)})).apply(this,arguments)}function Ti(F){return dt.create("missing-app-config-values",{valueName:F})}const Kt="installations",rs=F=>{const H=F.getProvider("app").getImmediate(),J=function Zo(F){if(!F||!F.options)throw Ti("App Configuration");if(!F.name)throw Ti("App Name");const H=["projectId","apiKey","appId"];for(const J of H)if(!F.options[J])throw Ti(J);return{appName:F.name,projectId:F.options.projectId,apiKey:F.options.apiKey,appId:F.options.appId}}(H);return{app:H,appConfig:J,heartbeatServiceProvider:(0,A.qX)(H,"heartbeat"),_delete:()=>Promise.resolve()}},Jo=F=>{const H=F.getProvider("app").getImmediate(),J=(0,A.qX)(H,Kt).getImmediate();return{getId:()=>function nr(F){return qo.apply(this,arguments)}(J),getToken:he=>function Du(F){return ns.apply(this,arguments)}(J,he)}};(function oi(){(0,A.Xd)(new P.wA(Kt,rs,"PUBLIC")),(0,A.Xd)(new P.wA("installations-internal",Jo,"PRIVATE"))})(),(0,A.KN)(wn,yr),(0,A.KN)(wn,yr,"esm2017");const rr="@firebase/remote-config",Lr=new b.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Ru{constructor(H,J,re,he){this.client=H,this.storage=J,this.storageCache=re,this.logger=he}isCachedDataFresh(H,J){if(!J)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const re=Date.now()-J,he=re<=H;return this.logger.debug(`Config fetch cache check. Cache age millis: ${re}. Cache max age millis (minimumFetchIntervalMillis setting): ${H}. Is cache hit: ${he}.`),he}fetch(H){var J=this;return(0,_.Z)(function*(){const[re,he]=yield Promise.all([J.storage.getLastSuccessfulFetchTimestampMillis(),J.storage.getLastSuccessfulFetchResponse()]);if(he&&J.isCachedDataFresh(H.cacheMaxAgeMillis,re))return he;H.eTag=he&&he.eTag;const Ce=yield J.client.fetch(H),Pe=[J.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Ce.status&&Pe.push(J.storage.setLastSuccessfulFetchResponse(Ce)),yield Promise.all(Pe),Ce})()}}function xs(F=navigator){return F.languages&&F.languages[0]||F.language}class xc{constructor(H,J,re,he,Ce,Pe){this.firebaseInstallations=H,this.sdkVersion=J,this.namespace=re,this.projectId=he,this.apiKey=Ce,this.appId=Pe}fetch(H){var J=this;return(0,_.Z)(function*(){const[re,he]=yield Promise.all([J.firebaseInstallations.getId(),J.firebaseInstallations.getToken()]),Pe=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${J.projectId}/namespaces/${J.namespace}:fetch?key=${J.apiKey}`,ut={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":H.eTag||"*"},it={sdk_version:J.sdkVersion,app_instance_id:re,app_instance_id_token:he,app_id:J.appId,language_code:xs()},Tt={method:"POST",headers:ut,body:JSON.stringify(it)},qt=fetch(Pe,Tt),Ht=new Promise(($r,Bs)=>{H.signal.addEventListener(()=>{const il=new Error("The operation was aborted.");il.name="AbortError",Bs(il)})});let xi;try{yield Promise.race([qt,Ht]),xi=yield qt}catch($r){let Bs="fetch-client-network";throw"AbortError"===$r?.name&&(Bs="fetch-timeout"),Lr.create(Bs,{originalErrorMessage:$r?.message})}let Hr=xi.status;const ys=xi.headers.get("ETag")||void 0;let Qr,su;if(200===xi.status){let $r;try{$r=yield xi.json()}catch(Bs){throw Lr.create("fetch-client-parse",{originalErrorMessage:Bs?.message})}Qr=$r.entries,su=$r.state}if("INSTANCE_STATE_UNSPECIFIED"===su?Hr=500:"NO_CHANGE"===su?Hr=304:("NO_TEMPLATE"===su||"EMPTY_CONFIG"===su)&&(Qr={}),304!==Hr&&200!==Hr)throw Lr.create("fetch-status",{httpStatus:Hr});return{status:Hr,eTag:ys,config:Qr}})()}}class Mu{constructor(H,J){this.client=H,this.storage=J}fetch(H){var J=this;return(0,_.Z)(function*(){const re=(yield J.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return J.attemptFetch(H,re)})()}attemptFetch(H,{throttleEndTimeMillis:J,backoffCount:re}){var he=this;return(0,_.Z)(function*(){yield function Nl(F,H){return new Promise((J,re)=>{const he=Math.max(H-Date.now(),0),Ce=setTimeout(J,he);F.addEventListener(()=>{clearTimeout(Ce),re(Lr.create("fetch-throttle",{throttleEndTimeMillis:H}))})})}(H.signal,J);try{const Ce=yield he.client.fetch(H);return yield he.storage.deleteThrottleMetadata(),Ce}catch(Ce){if(!function To(F){if(!(F instanceof b.ZR&&F.customData))return!1;const H=Number(F.customData.httpStatus);return 429===H||500===H||503===H||504===H}(Ce))throw Ce;const Pe={throttleEndTimeMillis:Date.now()+(0,b.$s)(re),backoffCount:re+1};return yield he.storage.setThrottleMetadata(Pe),he.attemptFetch(H,Pe)}})()}}class Ou{constructor(H,J,re,he,Ce){this.app=H,this._client=J,this._storageCache=re,this._storage=he,this._logger=Ce,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Ys(F,H){const J=F.target.error||void 0;return Lr.create(H,{originalErrorMessage:J&&J?.message})}const is="app_namespace_store";class xu{constructor(H,J,re,he=function Fa(){return new Promise((F,H)=>{try{const J=indexedDB.open("firebase_remote_config",1);J.onerror=re=>{H(Ys(re,"storage-open"))},J.onsuccess=re=>{F(re.target.result)},J.onupgradeneeded=re=>{0===re.oldVersion&&re.target.result.createObjectStore(is,{keyPath:"compositeKey"})}}catch(J){H(Lr.create("storage-open",{originalErrorMessage:J?.message}))}})}()){this.appId=H,this.appName=J,this.namespace=re,this.openDbPromise=he}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(H){return this.set("last_fetch_status",H)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(H){return this.set("last_successful_fetch_timestamp_millis",H)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(H){return this.set("last_successful_fetch_response",H)}getActiveConfig(){return this.get("active_config")}setActiveConfig(H){return this.set("active_config",H)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(H){return this.set("active_config_etag",H)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(H){return this.set("throttle_metadata",H)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(H){var J=this;return(0,_.Z)(function*(){const re=yield J.openDbPromise;return new Promise((he,Ce)=>{const ut=re.transaction([is],"readonly").objectStore(is),it=J.createCompositeKey(H);try{const Tt=ut.get(it);Tt.onerror=qt=>{Ce(Ys(qt,"storage-get"))},Tt.onsuccess=qt=>{const Ht=qt.target.result;he(Ht?Ht.value:void 0)}}catch(Tt){Ce(Lr.create("storage-get",{originalErrorMessage:Tt?.message}))}})})()}set(H,J){var re=this;return(0,_.Z)(function*(){const he=yield re.openDbPromise;return new Promise((Ce,Pe)=>{const it=he.transaction([is],"readwrite").objectStore(is),Tt=re.createCompositeKey(H);try{const qt=it.put({compositeKey:Tt,value:J});qt.onerror=Ht=>{Pe(Ys(Ht,"storage-set"))},qt.onsuccess=()=>{Ce()}}catch(qt){Pe(Lr.create("storage-set",{originalErrorMessage:qt?.message}))}})})()}delete(H){var J=this;return(0,_.Z)(function*(){const re=yield J.openDbPromise;return new Promise((he,Ce)=>{const ut=re.transaction([is],"readwrite").objectStore(is),it=J.createCompositeKey(H);try{const Tt=ut.delete(it);Tt.onerror=qt=>{Ce(Ys(qt,"storage-delete"))},Tt.onsuccess=()=>{he()}}catch(Tt){Ce(Lr.create("storage-delete",{originalErrorMessage:Tt?.message}))}})})()}createCompositeKey(H){return[this.appId,this.appName,this.namespace,H].join()}}class Ep{constructor(H){this.storage=H}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var H=this;return(0,_.Z)(function*(){const J=H.storage.getLastFetchStatus(),re=H.storage.getLastSuccessfulFetchTimestampMillis(),he=H.storage.getActiveConfig(),Ce=yield J;Ce&&(H.lastFetchStatus=Ce);const Pe=yield re;Pe&&(H.lastSuccessfulFetchTimestampMillis=Pe);const ut=yield he;ut&&(H.activeConfig=ut)})()}setLastFetchStatus(H){return this.lastFetchStatus=H,this.storage.setLastFetchStatus(H)}setLastSuccessfulFetchTimestampMillis(H){return this.lastSuccessfulFetchTimestampMillis=H,this.storage.setLastSuccessfulFetchTimestampMillis(H)}setActiveConfig(H){return this.activeConfig=H,this.storage.setActiveConfig(H)}}function Nu(){return ss.apply(this,arguments)}function ss(){return(ss=(0,_.Z)(function*(){if(!(0,b.hl)())return!1;try{return yield(0,b.eu)()}catch{return!1}})).apply(this,arguments)}!function kc(){(0,A.Xd)(new P.wA("remote-config",function F(H,{instanceIdentifier:J}){const re=H.getProvider("app").getImmediate(),he=H.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Lr.create("registration-window");if(!(0,b.hl)())throw Lr.create("indexed-db-unavailable");const{projectId:Ce,apiKey:Pe,appId:ut}=re.options;if(!Ce)throw Lr.create("registration-project-id");if(!Pe)throw Lr.create("registration-api-key");if(!ut)throw Lr.create("registration-app-id");const it=new xu(ut,re.name,J=J||"firebase"),Tt=new Ep(it),qt=new w.Yd(rr);qt.logLevel=w.in.ERROR;const Ht=new xc(he,A.Jn,J,Ce,Pe,ut),xi=new Mu(Ht,it),Hr=new Ru(xi,it,Tt,qt),ys=new Ou(re,Hr,Tt,it,qt);return function Jr(F){const H=(0,b.m9)(F);H._initializePromise||(H._initializePromise=H._storageCache.loadFromStorage().then(()=>{H._isInitializationComplete=!0}))}(ys),ys},"PUBLIC").setMultipleInstances(!0)),(0,A.KN)(rr,"0.4.4"),(0,A.KN)(rr,"0.4.4","esm2017")}();const Ao=(F,H)=>H.some(J=>F instanceof J);let Di,na;const Lc=new WeakMap,os=new WeakMap,ai=new WeakMap,Qs=new WeakMap,Po=new WeakMap;let Xs={get(F,H,J){if(F instanceof IDBTransaction){if("done"===H)return os.get(F);if("objectStoreNames"===H)return F.objectStoreNames||ai.get(F);if("store"===H)return J.objectStoreNames[1]?void 0:J.objectStore(J.objectStoreNames[0])}return Yr(F[H])},set:(F,H,J)=>(F[H]=J,!0),has:(F,H)=>F instanceof IDBTransaction&&("done"===H||"store"===H)||H in F};function Fc(F){return"function"==typeof F?function Ns(F){return F!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function mi(){return na||(na=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(F)?function(...H){return F.apply(Kn(this),H),Yr(Lc.get(this))}:function(...H){return Yr(F.apply(Kn(this),H))}:function(H,...J){const re=F.call(Kn(this),H,...J);return ai.set(re,H.sort?H.sort():[H]),Yr(re)}}(F):(F instanceof IDBTransaction&&function Ua(F){if(os.has(F))return;const H=new Promise((J,re)=>{const he=()=>{F.removeEventListener("complete",Ce),F.removeEventListener("error",Pe),F.removeEventListener("abort",Pe)},Ce=()=>{J(),he()},Pe=()=>{re(F.error||new DOMException("AbortError","AbortError")),he()};F.addEventListener("complete",Ce),F.addEventListener("error",Pe),F.addEventListener("abort",Pe)});os.set(F,H)}(F),Ao(F,function kl(){return Di||(Di=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(F,Xs):F)}function Yr(F){if(F instanceof IDBRequest)return function zn(F){const H=new Promise((J,re)=>{const he=()=>{F.removeEventListener("success",Ce),F.removeEventListener("error",Pe)},Ce=()=>{J(Yr(F.result)),he()},Pe=()=>{re(F.error),he()};F.addEventListener("success",Ce),F.addEventListener("error",Pe)});return H.then(J=>{J instanceof IDBCursor&&Lc.set(J,F)}).catch(()=>{}),Po.set(H,F),H}(F);if(Qs.has(F))return Qs.get(F);const H=Fc(F);return H!==F&&(Qs.set(F,H),Po.set(H,F)),H}const Kn=F=>Po.get(F);function ku(F,H,{blocked:J,upgrade:re,blocking:he,terminated:Ce}={}){const Pe=indexedDB.open(F,H),ut=Yr(Pe);return re&&Pe.addEventListener("upgradeneeded",it=>{re(Yr(Pe.result),it.oldVersion,it.newVersion,Yr(Pe.transaction))}),J&&Pe.addEventListener("blocked",()=>J()),ut.then(it=>{Ce&&it.addEventListener("close",()=>Ce()),he&&it.addEventListener("versionchange",()=>he())}).catch(()=>{}),ut}function as(F,{blocked:H}={}){const J=indexedDB.deleteDatabase(F);return H&&J.addEventListener("blocked",()=>H()),Yr(J).then(()=>{})}const Gi=["get","getKey","getAll","getAllKeys","count"],_r=["put","add","delete","clear"],cs=new Map;function ra(F,H){if(!(F instanceof IDBDatabase)||H in F||"string"!=typeof H)return;if(cs.get(H))return cs.get(H);const J=H.replace(/FromIndex$/,""),re=H!==J,he=_r.includes(J);if(!(J in(re?IDBIndex:IDBObjectStore).prototype)||!he&&!Gi.includes(J))return;const Ce=function(){var Pe=(0,_.Z)(function*(ut,...it){const Tt=this.transaction(ut,he?"readwrite":"readonly");let qt=Tt.store;return re&&(qt=qt.index(it.shift())),(yield Promise.all([qt[J](...it),he&&Tt.done]))[0]});return function(it){return Pe.apply(this,arguments)}}();return cs.set(H,Ce),Ce}!function or(F){Xs=F(Xs)}(F=>({...F,get:(H,J,re)=>ra(H,J)||F.get(H,J,re),has:(H,J)=>!!ra(H,J)||F.has(H,J)}));const Ut="/firebase-messaging-sw.js",Ba="/firebase-cloud-messaging-push-scope",Ll="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",eo="https://fcmregistrations.googleapis.com/v1",Lu="google.c.a.c_id",Va="google.c.a.c_l",jc="google.c.a.ts",Uc="google.c.a.e";var Re=(()=>{return(F=Re||(Re={})).PUSH_RECEIVED="push-received",F.NOTIFICATION_CLICKED="notification-clicked",Re;var F})();function Wt(F){const H=new Uint8Array(F);return btoa(String.fromCharCode(...H)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Fl(F){const J=(F+"=".repeat((4-F.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),re=atob(J),he=new Uint8Array(re.length);for(let Ce=0;Ce<re.length;++Ce)he[Ce]=re.charCodeAt(Ce);return he}const Do="fcm_token_details_db",Jn=5,Vc="fcm_token_object_Store";function vi(){return vi=(0,_.Z)(function*(F){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Ce=>Ce.name).includes(Do))return null;let H=null;return(yield ku(Do,Jn,{upgrade:(re=(0,_.Z)(function*(he,Ce,Pe,ut){var it;if(Ce<2||!he.objectStoreNames.contains(Vc))return;const Tt=ut.objectStore(Vc),qt=yield Tt.index("fcmSenderId").get(F);if(yield Tt.clear(),qt)if(2===Ce){const Ht=qt;if(!Ht.auth||!Ht.p256dh||!Ht.endpoint)return;H={token:Ht.fcmToken,createTime:null!==(it=Ht.createTime)&&void 0!==it?it:Date.now(),subscriptionOptions:{auth:Ht.auth,p256dh:Ht.p256dh,endpoint:Ht.endpoint,swScope:Ht.swScope,vapidKey:"string"==typeof Ht.vapidKey?Ht.vapidKey:Wt(Ht.vapidKey)}}}else if(3===Ce){const Ht=qt;H={token:Ht.fcmToken,createTime:Ht.createTime,subscriptionOptions:{auth:Wt(Ht.auth),p256dh:Wt(Ht.p256dh),endpoint:Ht.endpoint,swScope:Ht.swScope,vapidKey:Wt(Ht.vapidKey)}}}else if(4===Ce){const Ht=qt;H={token:Ht.fcmToken,createTime:Ht.createTime,subscriptionOptions:{auth:Wt(Ht.auth),p256dh:Wt(Ht.p256dh),endpoint:Ht.endpoint,swScope:Ht.swScope,vapidKey:Wt(Ht.vapidKey)}}}}),function(Ce,Pe,ut,it){return re.apply(this,arguments)})})).close(),yield as(Do),yield as("fcm_vapid_details_db"),yield as("undefined"),function za(F){if(!F||!F.subscriptionOptions)return!1;const{subscriptionOptions:H}=F;return"number"==typeof F.createTime&&F.createTime>0&&"string"==typeof F.token&&F.token.length>0&&"string"==typeof H.auth&&H.auth.length>0&&"string"==typeof H.p256dh&&H.p256dh.length>0&&"string"==typeof H.endpoint&&H.endpoint.length>0&&"string"==typeof H.swScope&&H.swScope.length>0&&"string"==typeof H.vapidKey&&H.vapidKey.length>0}(H)?H:null;var re}),vi.apply(this,arguments)}const to="firebase-messaging-database",Fu=1,Wi="firebase-messaging-store";let Ro=null;function lr(){return Ro||(Ro=ku(to,Fu,{upgrade:(F,H)=>{0===H&&F.createObjectStore(Wi)}})),Ro}function jr(F){return us.apply(this,arguments)}function us(){return us=(0,_.Z)(function*(F){const H=sa(F),re=yield(yield lr()).transaction(Wi).objectStore(Wi).get(H);if(re)return re;{const he=yield function ia(F){return vi.apply(this,arguments)}(F.appConfig.senderId);if(he)return yield ls(F,he),he}}),us.apply(this,arguments)}function ls(F,H){return ci.apply(this,arguments)}function ci(){return(ci=(0,_.Z)(function*(F,H){const J=sa(F),he=(yield lr()).transaction(Wi,"readwrite");return yield he.objectStore(Wi).put(H,J),yield he.done,H})).apply(this,arguments)}function no(){return(no=(0,_.Z)(function*(F){const H=sa(F),re=(yield lr()).transaction(Wi,"readwrite");yield re.objectStore(Wi).delete(H),yield re.done})).apply(this,arguments)}function sa({appConfig:F}){return F.appId}const Yn=new b.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function $a(F,H){return Mo.apply(this,arguments)}function Mo(){return(Mo=(0,_.Z)(function*(F,H){const J=yield ds(F),re=qa(H),he={method:"POST",headers:J,body:JSON.stringify(re)};let Ce;try{Ce=yield(yield fetch(oa(F.appConfig),he)).json()}catch(Pe){throw Yn.create("token-subscribe-failed",{errorInfo:Pe?.toString()})}if(Ce.error)throw Yn.create("token-subscribe-failed",{errorInfo:Ce.error.message});if(!Ce.token)throw Yn.create("token-subscribe-no-token");return Ce.token})).apply(this,arguments)}function Wa(){return(Wa=(0,_.Z)(function*(F,H){const J=yield ds(F),re=qa(H.subscriptionOptions),he={method:"PATCH",headers:J,body:JSON.stringify(re)};let Ce;try{Ce=yield(yield fetch(`${oa(F.appConfig)}/${H.token}`,he)).json()}catch(Pe){throw Yn.create("token-update-failed",{errorInfo:Pe?.toString()})}if(Ce.error)throw Yn.create("token-update-failed",{errorInfo:Ce.error.message});if(!Ce.token)throw Yn.create("token-update-no-token");return Ce.token})).apply(this,arguments)}function Oo(F,H){return xo.apply(this,arguments)}function xo(){return(xo=(0,_.Z)(function*(F,H){const re={method:"DELETE",headers:yield ds(F)};try{const Ce=yield(yield fetch(`${oa(F.appConfig)}/${H}`,re)).json();if(Ce.error)throw Yn.create("token-unsubscribe-failed",{errorInfo:Ce.error.message})}catch(he){throw Yn.create("token-unsubscribe-failed",{errorInfo:he?.toString()})}})).apply(this,arguments)}function oa({projectId:F}){return`${eo}/projects/${F}/registrations`}function ds(F){return zc.apply(this,arguments)}function zc(){return(zc=(0,_.Z)(function*({appConfig:F,installations:H}){const J=yield H.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":F.apiKey,"x-goog-firebase-installations-auth":`FIS ${J}`})})).apply(this,arguments)}function qa({p256dh:F,auth:H,endpoint:J,vapidKey:re}){const he={web:{endpoint:J,auth:H,p256dh:F}};return re!==Ll&&(he.web.applicationPubKey=re),he}const ju=6048e5;function Uu(){return Uu=(0,_.Z)(function*(F){const H=yield function Bu(F,H){return Gc.apply(this,arguments)}(F.swRegistration,F.vapidKey),J={vapidKey:F.vapidKey,swScope:F.swRegistration.scope,endpoint:H.endpoint,auth:Wt(H.getKey("auth")),p256dh:Wt(H.getKey("p256dh"))},re=yield jr(F.firebaseDependencies);if(re){if(function Xd(F,H){return H.vapidKey===F.vapidKey&&H.endpoint===F.endpoint&&H.auth===F.auth&&H.p256dh===F.p256dh}(re.subscriptionOptions,J))return Date.now()>=re.createTime+ju?function jn(F,H){return $c.apply(this,arguments)}(F,{token:re.token,createTime:Date.now(),subscriptionOptions:J}):re.token;try{yield Oo(F.firebaseDependencies,re.token)}catch(he){console.warn(he)}return hs(F.firebaseDependencies,J)}return hs(F.firebaseDependencies,J)}),Uu.apply(this,arguments)}function qi(){return qi=(0,_.Z)(function*(F){const H=yield jr(F.firebaseDependencies);H&&(yield Oo(F.firebaseDependencies,H.token),yield function Ha(F){return no.apply(this,arguments)}(F.firebaseDependencies));const J=yield F.swRegistration.pushManager.getSubscription();return!J||J.unsubscribe()}),qi.apply(this,arguments)}function $c(){return $c=(0,_.Z)(function*(F,H){try{const J=yield function Ga(F,H){return Wa.apply(this,arguments)}(F.firebaseDependencies,H),re=Object.assign(Object.assign({},H),{token:J,createTime:Date.now()});return yield ls(F.firebaseDependencies,re),J}catch(J){throw yield function dr(F){return qi.apply(this,arguments)}(F),J}}),$c.apply(this,arguments)}function hs(F,H){return Za.apply(this,arguments)}function Za(){return(Za=(0,_.Z)(function*(F,H){const re={token:yield $a(F,H),createTime:Date.now(),subscriptionOptions:H};return yield ls(F,re),re.token})).apply(this,arguments)}function Gc(){return(Gc=(0,_.Z)(function*(F,H){return(yield F.pushManager.getSubscription())||F.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Fl(H)})})).apply(this,arguments)}function No(F){const H={from:F.from,collapseKey:F.collapse_key,messageId:F.fcmMessageId};return function Wc(F,H){if(!H.notification)return;F.notification={};const J=H.notification.title;J&&(F.notification.title=J);const re=H.notification.body;re&&(F.notification.body=re);const he=H.notification.image;he&&(F.notification.image=he);const Ce=H.notification.icon;Ce&&(F.notification.icon=Ce)}(H,F),function Ka(F,H){H.data&&(F.data=H.data)}(H,F),function aa(F,H){var J,re,he,Ce,Pe;if(!(H.fcmOptions||null!==(J=H.notification)&&void 0!==J&&J.click_action))return;F.fcmOptions={};const ut=null!==(he=null===(re=H.fcmOptions)||void 0===re?void 0:re.link)&&void 0!==he?he:null===(Ce=H.notification)||void 0===Ce?void 0:Ce.click_action;ut&&(F.fcmOptions.link=ut);const it=null===(Pe=H.fcmOptions)||void 0===Pe?void 0:Pe.analytics_label;it&&(F.fcmOptions.analyticsLabel=it)}(H,F),H}function ks(F,H){const J=[];for(let re=0;re<F.length;re++)J.push(F.charAt(re)),re<H.length&&J.push(H.charAt(re));return J.join("")}function Br(F){return Yn.create("missing-app-config-values",{valueName:F})}ks("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),ks("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Qn{constructor(H,J,re){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const he=function Ur(F){if(!F||!F.options)throw Br("App Configuration Object");if(!F.name)throw Br("App Name");const H=["projectId","apiKey","appId","messagingSenderId"],{options:J}=F;for(const re of H)if(!J[re])throw Br(re);return{appName:F.name,projectId:J.projectId,apiKey:J.apiKey,appId:J.appId,senderId:J.messagingSenderId}}(H);this.firebaseDependencies={app:H,appConfig:he,installations:J,analyticsProvider:re}}_delete(){return Promise.resolve()}}function Ya(F){return ca.apply(this,arguments)}function ca(){return(ca=(0,_.Z)(function*(F){try{F.swRegistration=yield navigator.serviceWorker.register(Ut,{scope:Ba}),F.swRegistration.update().catch(()=>{})}catch(H){throw Yn.create("failed-service-worker-registration",{browserErrorMessage:H?.message})}})).apply(this,arguments)}function qc(){return(qc=(0,_.Z)(function*(F,H){if(!H&&!F.swRegistration&&(yield Ya(F)),H||!F.swRegistration){if(!(H instanceof ServiceWorkerRegistration))throw Yn.create("invalid-sw-registration");F.swRegistration=H}})).apply(this,arguments)}function ua(){return(ua=(0,_.Z)(function*(F,H){H?F.vapidKey=H:F.vapidKey||(F.vapidKey=Ll)})).apply(this,arguments)}function ps(){return ps=(0,_.Z)(function*(F,H){if(!navigator)throw Yn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Yn.create("permission-blocked");return yield function Zc(F,H){return ua.apply(this,arguments)}(F,H?.vapidKey),yield function Vu(F,H){return qc.apply(this,arguments)}(F,H?.serviceWorkerRegistration),function Hc(F){return Uu.apply(this,arguments)}(F)}),ps.apply(this,arguments)}function B(){return(B=(0,_.Z)(function*(F,H,J){const re=function Q(F){switch(F){case Re.NOTIFICATION_CLICKED:return"notification_open";case Re.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(H);(yield F.firebaseDependencies.analyticsProvider.get()).logEvent(re,{message_id:J[Lu],message_name:J[Va],message_time:J[jc],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function xe(){return xe=(0,_.Z)(function*(F,H){const J=H.data;if(!J.isFirebaseMessaging)return;F.onMessageHandler&&J.messageType===Re.PUSH_RECEIVED&&("function"==typeof F.onMessageHandler?F.onMessageHandler(No(J)):F.onMessageHandler.next(No(J)));const re=J.data;(function Ja(F){return"object"==typeof F&&!!F&&Lu in F})(re)&&"1"===re[Uc]&&(yield function j(F,H,J){return B.apply(this,arguments)}(F,J.messageType,re))}),xe.apply(this,arguments)}const St="@firebase/messaging",Hn=F=>{const H=new Qn(F.getProvider("app").getImmediate(),F.getProvider("installations-internal").getImmediate(),F.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",J=>function se(F,H){return xe.apply(this,arguments)}(H,J)),H},$n=F=>{const H=F.getProvider("messaging").getImmediate();return{getToken:re=>function ko(F,H){return ps.apply(this,arguments)}(H,re)}};function Kc(){return Ul.apply(this,arguments)}function Ul(){return(Ul=(0,_.Z)(function*(){try{yield(0,b.eu)()}catch{return!1}return typeof window<"u"&&(0,b.hl)()&&(0,b.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Zi(){(0,A.Xd)(new P.wA("messaging",Hn,"PUBLIC")),(0,A.Xd)(new P.wA("messaging-internal",$n,"PRIVATE")),(0,A.KN)(St,"0.12.4"),(0,A.KN)(St,"0.12.4","esm2017")}();const Ls="analytics",Lo="firebase_id",Hu="origin",Bl=6e4,nh="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",$u="https://www.googletagmanager.com/gtag/js",Vr=new w.Yd("@firebase/analytics"),hr=new b.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function rh(F){if(!F.startsWith($u)){const H=hr.create("invalid-gtag-resource",{gtagURL:F});return Vr.warn(H.message),""}return F}function Xa(F){return Promise.all(F.map(H=>H.catch(J=>J)))}function ec(){return(ec=(0,_.Z)(function*(F,H,J,re,he,Ce){const Pe=re[he];try{if(Pe)yield H[Pe];else{const it=(yield Xa(J)).find(Tt=>Tt.measurementId===he);it&&(yield H[it.appId])}}catch(ut){Vr.error(ut)}F("config",he,Ce)})).apply(this,arguments)}function Gu(){return(Gu=(0,_.Z)(function*(F,H,J,re,he){try{let Ce=[];if(he&&he.send_to){let Pe=he.send_to;Array.isArray(Pe)||(Pe=[Pe]);const ut=yield Xa(J);for(const it of Pe){const Tt=ut.find(Ht=>Ht.measurementId===it),qt=Tt&&H[Tt.appId];if(!qt){Ce=[];break}Ce.push(qt)}}0===Ce.length&&(Ce=Object.values(H)),yield Promise.all(Ce),F("event",re,he||{})}catch(Ce){Vr.error(Ce)}})).apply(this,arguments)}const Yc=30,da=new class nc{constructor(H={},J=1e3){this.throttleMetadata=H,this.intervalMillis=J}getThrottleMetadata(H){return this.throttleMetadata[H]}setThrottleMetadata(H,J){this.throttleMetadata[H]=J}deleteThrottleMetadata(H){delete this.throttleMetadata[H]}};function pr(F){return new Headers({Accept:"application/json","x-goog-api-key":F})}function dn(){return(dn=(0,_.Z)(function*(F){var H;const{appId:J,apiKey:re}=F,he={method:"GET",headers:pr(re)},Ce=nh.replace("{app-id}",J),Pe=yield fetch(Ce,he);if(200!==Pe.status&&304!==Pe.status){let ut="";try{const it=yield Pe.json();null!==(H=it.error)&&void 0!==H&&H.message&&(ut=it.error.message)}catch{}throw hr.create("config-fetch-failed",{httpStatus:Pe.status,responseMessage:ut})}return Pe.json()})).apply(this,arguments)}function Wu(){return(Wu=(0,_.Z)(function*(F,H=da,J){const{appId:re,apiKey:he,measurementId:Ce}=F.options;if(!re)throw hr.create("no-app-id");if(!he){if(Ce)return{measurementId:Ce,appId:re};throw hr.create("no-api-key")}const Pe=H.getThrottleMetadata(re)||{backoffCount:0,throttleEndTimeMillis:Date.now()},ut=new ch;return setTimeout((0,_.Z)(function*(){ut.abort()}),void 0!==J?J:Bl),Vl({appId:re,apiKey:he,measurementId:Ce},Pe,ut,H)})).apply(this,arguments)}function Vl(F,H,J){return zl.apply(this,arguments)}function zl(){return zl=(0,_.Z)(function*(F,{throttleEndTimeMillis:H,backoffCount:J},re,he=da){var Ce;const{appId:Pe,measurementId:ut}=F;try{yield function Wg(F,H){return new Promise((J,re)=>{const he=Math.max(H-Date.now(),0),Ce=setTimeout(J,he);F.addEventListener(()=>{clearTimeout(Ce),re(hr.create("fetch-throttle",{throttleEndTimeMillis:H}))})})}(re,H)}catch(it){if(ut)return Vr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ut} provided in the "measurementId" field in the local Firebase config. [${it?.message}]`),{appId:Pe,measurementId:ut};throw it}try{const it=yield function ah(F){return dn.apply(this,arguments)}(F);return he.deleteThrottleMetadata(Pe),it}catch(it){const Tt=it;if(!function _y(F){if(!(F instanceof b.ZR&&F.customData))return!1;const H=Number(F.customData.httpStatus);return 429===H||500===H||503===H||504===H}(Tt)){if(he.deleteThrottleMetadata(Pe),ut)return Vr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ut} provided in the "measurementId" field in the local Firebase config. [${Tt?.message}]`),{appId:Pe,measurementId:ut};throw it}const qt=503===Number(null===(Ce=Tt?.customData)||void 0===Ce?void 0:Ce.httpStatus)?(0,b.$s)(J,he.intervalMillis,Yc):(0,b.$s)(J,he.intervalMillis),Ht={throttleEndTimeMillis:Date.now()+qt,backoffCount:J+1};return he.setThrottleMetadata(Pe,Ht),Vr.debug(`Calling attemptFetch again in ${qt} millis`),Vl(F,Ht,re,he)}}),zl.apply(this,arguments)}class ch{constructor(){this.listeners=[]}addEventListener(H){this.listeners.push(H)}abort(){this.listeners.forEach(H=>H())}}let Fo,ic;function qu(){return(qu=(0,_.Z)(function*(F,H,J,re,he){if(he&&he.global)F("event",J,re);else{const Ce=yield H;F("event",J,Object.assign(Object.assign({},re),{send_to:Ce}))}})).apply(this,arguments)}function js(){return(js=(0,_.Z)(function*(){if(!(0,b.hl)())return Vr.warn(hr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,b.eu)()}catch(F){return Vr.warn(hr.create("indexeddb-unavailable",{errorInfo:F?.toString()}).message),!1}return!0})).apply(this,arguments)}function bt(){return bt=(0,_.Z)(function*(F,H,J,re,he,Ce,Pe){var ut;const it=function Gg(F){return Wu.apply(this,arguments)}(F);it.then(Hr=>{J[Hr.measurementId]=Hr.appId,F.options.measurementId&&Hr.measurementId!==F.options.measurementId&&Vr.warn(`The measurement ID in the local Firebase config (${F.options.measurementId}) does not match the measurement ID fetched from the server (${Hr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Hr=>Vr.error(Hr)),H.push(it);const Tt=function Ji(){return js.apply(this,arguments)}().then(Hr=>{if(Hr)return re.getId()}),[qt,Ht]=yield Promise.all([it,Tt]);(function Ri(F){const H=window.document.getElementsByTagName("script");for(const J of Object.values(H))if(J.src&&J.src.includes($u)&&J.src.includes(F))return J;return null})(Ce)||function ro(F,H){const J=function Ap(F,H){let J;return window.trustedTypes&&(J=window.trustedTypes.createPolicy(F,H)),J}("firebase-js-sdk-policy",{createScriptURL:rh}),re=document.createElement("script"),he=`${$u}?l=${F}&id=${H}`;re.src=J?J?.createScriptURL(he):he,re.async=!0,document.head.appendChild(re)}(Ce,qt.measurementId),ic&&(he("consent","default",ic),function Rp(F){ic=F}(void 0)),he("js",new Date);const xi=null!==(ut=Pe?.config)&&void 0!==ut?ut:{};return xi[Hu]="firebase",xi.update=!0,null!=Ht&&(xi[Lo]=Ht),he("config",qt.measurementId,xi),Fo&&(he("set",Fo),function Mp(F){Fo=F}(void 0)),qt.measurementId}),bt.apply(this,arguments)}class gs{constructor(H){this.app=H}_delete(){return delete Gn[this.app.options.appId],Promise.resolve()}}let Gn={},Ku=[];const ms={};let Mi,It,Dr="dataLayer",zr="gtag",io=!1;function Op(F,H,J){!function Oi(){const F=[];if((0,b.ru)()&&F.push("This is a browser extension environment."),(0,b.zI)()||F.push("Cookies are not available."),F.length>0){const H=F.map((re,he)=>`(${he+1}) ${re}`).join(" "),J=hr.create("invalid-analytics-context",{errorInfo:H});Vr.warn(J.message)}}();const re=F.options.appId;if(!re)throw hr.create("no-app-id");if(!F.options.apiKey){if(!F.options.measurementId)throw hr.create("no-api-key");Vr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${F.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Gn[re])throw hr.create("already-exists",{id:re});if(!io){!function ih(F){let H=[];Array.isArray(window[F])?H=window[F]:window[F]=H}(Dr);const{wrappedGtag:Ce,gtagCore:Pe}=function tc(F,H,J,re,he){let Ce=function(...Pe){window[re].push(arguments)};return window[he]&&"function"==typeof window[he]&&(Ce=window[he]),window[he]=function la(F,H,J,re){function Ce(){return Ce=(0,_.Z)(function*(Pe,...ut){try{if("event"===Pe){const[it,Tt]=ut;yield function Pp(F,H,J,re,he){return Gu.apply(this,arguments)}(F,H,J,it,Tt)}else if("config"===Pe){const[it,Tt]=ut;yield function sh(F,H,J,re,he,Ce){return ec.apply(this,arguments)}(F,H,J,re,it,Tt)}else if("consent"===Pe){const[it]=ut;F("consent","update",it)}else if("get"===Pe){const[it,Tt,qt]=ut;F("get",it,Tt,qt)}else if("set"===Pe){const[it]=ut;F("set",it)}else F(Pe,...ut)}catch(it){Vr.error(it)}}),Ce.apply(this,arguments)}return function he(Pe){return Ce.apply(this,arguments)}}(Ce,F,H,J),{gtagCore:Ce,wrappedGtag:window[he]}}(Gn,Ku,ms,Dr,zr);It=Ce,Mi=Pe,io=!0}return Gn[re]=function An(F,H,J,re,he,Ce,Pe){return bt.apply(this,arguments)}(F,Ku,ms,H,Mi,Dr,J),new gs(F)}function lh(){return so.apply(this,arguments)}function so(){return(so=(0,_.Z)(function*(){if((0,b.ru)()||!(0,b.zI)()||!(0,b.hl)())return!1;try{return yield(0,b.eu)()}catch{return!1}})).apply(this,arguments)}const Uo="@firebase/analytics";!function fr(){(0,A.Xd)(new P.wA(Ls,(H,{options:J})=>Op(H.getProvider("app").getImmediate(),H.getProvider("installations-internal").getImmediate(),J),"PUBLIC")),(0,A.Xd)(new P.wA("analytics-internal",function F(H){try{const J=H.getProvider(Ls).getImmediate();return{logEvent:(re,he,Ce)=>function Gl(F,H,J,re){F=(0,b.m9)(F),function Hl(F,H,J,re,he){return qu.apply(this,arguments)}(It,Gn[F.app.options.appId],H,J,re).catch(he=>Vr.error(he))}(J,re,he,Ce)}}catch(J){throw hr.create("interop-component-reg-failed",{reason:J})}},"PRIVATE")),(0,A.KN)(Uo,"0.10.0"),(0,A.KN)(Uo,"0.10.0","esm2017")}();var Wl=y(4408),oo=y(7565);const Zl=new class Qu extends oo.v{}(class ql extends Wl.o{constructor(H,J){super(H,J),this.scheduler=H,this.work=J}schedule(H,J=0){return J>0?super.schedule(H,J):(this.delay=J,this.state=H,this.scheduler.flush(this),this)}execute(H,J){return J>0||this.closed?super.execute(H,J):this._execute(H,J)}requestAsyncId(H,J,re=0){return null!=re&&re>0||null==re&&this.delay>0?super.requestAsyncId(H,J,re):(H.flush(this),0)}});var Kl=y(4986),dh=y(8505),hh=y(9468),ph=y(5363);const pa=new o.GfV("7.6.1"),fa="__angularfire_symbol__analyticsIsSupportedValue",Jl="__angularfire_symbol__analyticsIsSupported",ru="__angularfire_symbol__remoteConfigIsSupportedValue",Xu="__angularfire_symbol__remoteConfigIsSupported",kp="__angularfire_symbol__messagingIsSupportedValue",Yl="__angularfire_symbol__messagingIsSupported";function el(F,H,J){if(H){if(1===H.length)return H[0];const Ce=H.filter(Pe=>Pe.app===J);if(1===Ce.length)return Ce[0]}return J.container.getProvider(F).getImmediate({optional:!0})}globalThis[Jl]||(globalThis[Jl]=lh().then(F=>globalThis[fa]=F).catch(()=>globalThis[fa]=!1)),globalThis[Yl]||(globalThis[Yl]=Kc().then(F=>globalThis[kp]=F).catch(()=>globalThis[kp]=!1)),globalThis[Xu]||(globalThis[Xu]=Nu().then(F=>globalThis[ru]=F).catch(()=>globalThis[ru]=!1));const tl=(F,H)=>{const J=H?[H]:(0,v.C6)(),re=[];return J.forEach(he=>{he.container.getProvider(F).instances.forEach(Pe=>{re.includes(Pe)||re.push(Pe)})}),re};function cc(){}class Xl{constructor(H,J=Zl){this.zone=H,this.delegate=J}now(){return this.delegate.now()}schedule(H,J,re){const he=this.zone;return this.delegate.schedule(function(Pe){he.runGuarded(()=>{H.apply(this,[Pe])})},J,re)}}class nl{constructor(H){this.zone=H,this.task=null}call(H,J){const re=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",cc,{},cc,cc)),J.pipe((0,dh.b)({next:re,complete:re,error:re})).subscribe(H).add(re)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let vs=(()=>{class F{constructor(J){this.ngZone=J,this.outsideAngular=J.runOutsideAngular(()=>new Xl(Zone.current)),this.insideAngular=J.run(()=>new Xl(Zone.current,Kl.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return F.\u0275fac=function(J){return new(J||F)(o.LFG(o.R0b))},F.\u0275prov=o.Yz7({token:F,factory:F.\u0275fac,providedIn:"root"}),F})();function ao(){const F=globalThis.\u0275AngularFireScheduler;if(!F)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return F}function td(F){return ao(),function nd(F){return function(J){return(J=J.lift(new nl(F.ngZone))).pipe((0,hh.R)(F.outsideAngular),(0,ph.Q)(F.insideAngular))}}(ao())(F)}},2090:(ne,p,y)=>{"use strict";y.d(p,{$s:()=>nt,BH:()=>Ae,G6:()=>Cr,L:()=>h,LL:()=>Qe,Pz:()=>pe,Sg:()=>ke,UG:()=>Le,US:()=>P,ZB:()=>M,ZR:()=>Ke,aH:()=>fe,b$:()=>ot,eu:()=>De,hl:()=>Ee,jU:()=>tt,m9:()=>yn,ne:()=>Jt,pd:()=>gn,r3:()=>kn,ru:()=>Ye,tV:()=>m,uI:()=>we,vZ:()=>at,w1:()=>wn,xO:()=>Vn,xb:()=>_n,z$:()=>Fe,zI:()=>be,zd:()=>Vt});const A=function(ue){const ae=[];let ge=0;for(let Ue=0;Ue<ue.length;Ue++){let Ie=ue.charCodeAt(Ue);Ie<128?ae[ge++]=Ie:Ie<2048?(ae[ge++]=Ie>>6|192,ae[ge++]=63&Ie|128):55296==(64512&Ie)&&Ue+1<ue.length&&56320==(64512&ue.charCodeAt(Ue+1))?(Ie=65536+((1023&Ie)<<10)+(1023&ue.charCodeAt(++Ue)),ae[ge++]=Ie>>18|240,ae[ge++]=Ie>>12&63|128,ae[ge++]=Ie>>6&63|128,ae[ge++]=63&Ie|128):(ae[ge++]=Ie>>12|224,ae[ge++]=Ie>>6&63|128,ae[ge++]=63&Ie|128)}return ae},P={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(ue,ae){if(!Array.isArray(ue))throw Error("encodeByteArray takes an array as a parameter");this.init_();const ge=ae?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ue=[];for(let Ie=0;Ie<ue.length;Ie+=3){const We=ue[Ie],kt=Ie+1<ue.length,En=kt?ue[Ie+1]:0,sr=Ie+2<ue.length,Ln=sr?ue[Ie+2]:0;let Nr=(15&En)<<2|Ln>>6,bi=63&Ln;sr||(bi=64,kt||(Nr=64)),Ue.push(ge[We>>2],ge[(3&We)<<4|En>>4],ge[Nr],ge[bi])}return Ue.join("")},encodeString(ue,ae){return this.HAS_NATIVE_SUPPORT&&!ae?btoa(ue):this.encodeByteArray(A(ue),ae)},decodeString(ue,ae){return this.HAS_NATIVE_SUPPORT&&!ae?atob(ue):function(ue){const ae=[];let ge=0,Ue=0;for(;ge<ue.length;){const Ie=ue[ge++];if(Ie<128)ae[Ue++]=String.fromCharCode(Ie);else if(Ie>191&&Ie<224){const We=ue[ge++];ae[Ue++]=String.fromCharCode((31&Ie)<<6|63&We)}else if(Ie>239&&Ie<365){const sr=((7&Ie)<<18|(63&ue[ge++])<<12|(63&ue[ge++])<<6|63&ue[ge++])-65536;ae[Ue++]=String.fromCharCode(55296+(sr>>10)),ae[Ue++]=String.fromCharCode(56320+(1023&sr))}else{const We=ue[ge++],kt=ue[ge++];ae[Ue++]=String.fromCharCode((15&Ie)<<12|(63&We)<<6|63&kt)}}return ae.join("")}(this.decodeStringToByteArray(ue,ae))},decodeStringToByteArray(ue,ae){this.init_();const ge=ae?this.charToByteMapWebSafe_:this.charToByteMap_,Ue=[];for(let Ie=0;Ie<ue.length;){const We=ge[ue.charAt(Ie++)],En=Ie<ue.length?ge[ue.charAt(Ie)]:0;++Ie;const Ln=Ie<ue.length?ge[ue.charAt(Ie)]:64;++Ie;const on=Ie<ue.length?ge[ue.charAt(Ie)]:64;if(++Ie,null==We||null==En||null==Ln||null==on)throw new w;Ue.push(We<<2|En>>4),64!==Ln&&(Ue.push(En<<4&240|Ln>>2),64!==on&&Ue.push(Ln<<6&192|on))}return Ue},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let ue=0;ue<this.ENCODED_VALS.length;ue++)this.byteToCharMap_[ue]=this.ENCODED_VALS.charAt(ue),this.charToByteMap_[this.byteToCharMap_[ue]]=ue,this.byteToCharMapWebSafe_[ue]=this.ENCODED_VALS_WEBSAFE.charAt(ue),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[ue]]=ue,ue>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(ue)]=ue,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(ue)]=ue)}}};class w extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const h=function(ue){return function(ue){const ae=A(ue);return P.encodeByteArray(ae,!0)}(ue).replace(/\./g,"")},m=function(ue){try{return P.decodeString(ue,!0)}catch(ae){console.error("base64Decode failed: ",ae)}return null};function M(ue,ae){if(!(ae instanceof Object))return ae;switch(ae.constructor){case Date:return new Date(ae.getTime());case Object:void 0===ue&&(ue={});break;case Array:ue=[];break;default:return ae}for(const ge in ae)!ae.hasOwnProperty(ge)||!T(ge)||(ue[ge]=M(ue[ge],ae[ge]));return ue}function T(ue){return"__proto__"!==ue}const q=()=>{try{return function N(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const ue=process.env.__FIREBASE_DEFAULTS__;return ue?JSON.parse(ue):void 0})()||(()=>{if(typeof document>"u")return;let ue;try{ue=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const ae=ue&&m(ue[1]);return ae&&JSON.parse(ae)})()}catch(ue){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${ue}`)}},fe=()=>{var ue;return null===(ue=q())||void 0===ue?void 0:ue.config},pe=ue=>{var ae;return null===(ae=q())||void 0===ae?void 0:ae[`_${ue}`]};class Ae{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((ae,ge)=>{this.resolve=ae,this.reject=ge})}wrapCallback(ae){return(ge,Ue)=>{ge?this.reject(ge):this.resolve(Ue),"function"==typeof ae&&(this.promise.catch(()=>{}),1===ae.length?ae(ge):ae(ge,Ue))}}}function ke(ue,ae){if(ue.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ue=ae||"demo-project",Ie=ue.iat||0,We=ue.sub||ue.user_id;if(!We)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const kt=Object.assign({iss:`https://securetoken.google.com/${Ue}`,aud:Ue,iat:Ie,exp:Ie+3600,auth_time:Ie,sub:We,user_id:We,firebase:{sign_in_provider:"custom",identities:{}}},ue);return[h(JSON.stringify({alg:"none",type:"JWT"})),h(JSON.stringify(kt)),""].join(".")}function Fe(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function we(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Fe())}function Le(){var ue;const ae=null===(ue=q())||void 0===ue?void 0:ue.forceEnvironment;if("node"===ae)return!0;if("browser"===ae)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function tt(){return"object"==typeof self&&self.self===self}function Ye(){const ue="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof ue&&void 0!==ue.id}function ot(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function wn(){const ue=Fe();return ue.indexOf("MSIE ")>=0||ue.indexOf("Trident/")>=0}function Cr(){return!Le()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ee(){try{return"object"==typeof indexedDB}catch{return!1}}function De(){return new Promise((ue,ae)=>{try{let ge=!0;const Ue="validate-browser-context-for-indexeddb-analytics-module",Ie=self.indexedDB.open(Ue);Ie.onsuccess=()=>{Ie.result.close(),ge||self.indexedDB.deleteDatabase(Ue),ue(!0)},Ie.onupgradeneeded=()=>{ge=!1},Ie.onerror=()=>{var We;ae((null===(We=Ie.error)||void 0===We?void 0:We.message)||"")}}catch(ge){ae(ge)}})}function be(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Ke extends Error{constructor(ae,ge,Ue){super(ge),this.code=ae,this.customData=Ue,this.name="FirebaseError",Object.setPrototypeOf(this,Ke.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Qe.prototype.create)}}class Qe{constructor(ae,ge,Ue){this.service=ae,this.serviceName=ge,this.errors=Ue}create(ae,...ge){const Ue=ge[0]||{},Ie=`${this.service}/${ae}`,We=this.errors[ae],kt=We?function dt(ue,ae){return ue.replace(vt,(ge,Ue)=>{const Ie=ae[Ue];return null!=Ie?String(Ie):`<${Ue}?>`})}(We,Ue):"Error";return new Ke(Ie,`${this.serviceName}: ${kt} (${Ie}).`,Ue)}}const vt=/\{\$([^}]+)}/g;function kn(ue,ae){return Object.prototype.hasOwnProperty.call(ue,ae)}function _n(ue){for(const ae in ue)if(Object.prototype.hasOwnProperty.call(ue,ae))return!1;return!0}function at(ue,ae){if(ue===ae)return!0;const ge=Object.keys(ue),Ue=Object.keys(ae);for(const Ie of ge){if(!Ue.includes(Ie))return!1;const We=ue[Ie],kt=ae[Ie];if(Tr(We)&&Tr(kt)){if(!at(We,kt))return!1}else if(We!==kt)return!1}for(const Ie of Ue)if(!ge.includes(Ie))return!1;return!0}function Tr(ue){return null!==ue&&"object"==typeof ue}function Vn(ue){const ae=[];for(const[ge,Ue]of Object.entries(ue))Array.isArray(Ue)?Ue.forEach(Ie=>{ae.push(encodeURIComponent(ge)+"="+encodeURIComponent(Ie))}):ae.push(encodeURIComponent(ge)+"="+encodeURIComponent(Ue));return ae.length?"&"+ae.join("&"):""}function Vt(ue){const ae={};return ue.replace(/^\?/,"").split("&").forEach(Ue=>{if(Ue){const[Ie,We]=Ue.split("=");ae[decodeURIComponent(Ie)]=decodeURIComponent(We)}}),ae}function gn(ue){const ae=ue.indexOf("?");if(!ae)return"";const ge=ue.indexOf("#",ae);return ue.substring(ae,ge>0?ge:void 0)}function Jt(ue,ae){const ge=new lt(ue,ae);return ge.subscribe.bind(ge)}class lt{constructor(ae,ge){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=ge,this.task.then(()=>{ae(this)}).catch(Ue=>{this.error(Ue)})}next(ae){this.forEachObserver(ge=>{ge.next(ae)})}error(ae){this.forEachObserver(ge=>{ge.error(ae)}),this.close(ae)}complete(){this.forEachObserver(ae=>{ae.complete()}),this.close()}subscribe(ae,ge,Ue){let Ie;if(void 0===ae&&void 0===ge&&void 0===Ue)throw new Error("Missing Observer.");Ie=function rn(ue,ae){if("object"!=typeof ue||null===ue)return!1;for(const ge of ae)if(ge in ue&&"function"==typeof ue[ge])return!0;return!1}(ae,["next","error","complete"])?ae:{next:ae,error:ge,complete:Ue},void 0===Ie.next&&(Ie.next=zt),void 0===Ie.error&&(Ie.error=zt),void 0===Ie.complete&&(Ie.complete=zt);const We=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Ie.error(this.finalError):Ie.complete()}catch{}}),this.observers.push(Ie),We}unsubscribeOne(ae){void 0===this.observers||void 0===this.observers[ae]||(delete this.observers[ae],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(ae){if(!this.finalized)for(let ge=0;ge<this.observers.length;ge++)this.sendOne(ge,ae)}sendOne(ae,ge){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[ae])try{ge(this.observers[ae])}catch(Ue){typeof console<"u"&&console.error&&console.error(Ue)}})}close(ae){this.finalized||(this.finalized=!0,void 0!==ae&&(this.finalError=ae),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function zt(){}const mn=1e3,Ne=2,de=144e5,je=.5;function nt(ue,ae=mn,ge=Ne){const Ue=ae*Math.pow(ge,ue),Ie=Math.round(je*Ue*(Math.random()-.5)*2);return Math.min(de,Ue+Ie)}function yn(ue){return ue&&ue._delegate?ue._delegate:ue}},6657:(ne,p,y)=>{"use strict";var o=y(4650);let v=null;function _(){return v}class b{}const P=new o.OlP("DocumentToken");let w=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=o.Yz7({token:n,factory:function(){return function S(){return(0,o.LFG)(m)}()},providedIn:"platform"}),n})();const h=new o.OlP("Location Initialized");let m=(()=>{class n extends w{constructor(t){super(),this._doc=t,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return _().getBaseHref(this._doc)}onPopState(t){const r=_().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=_().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){I()?this._history.pushState(t,r,i):this._location.hash=i}replaceState(t,r,i){I()?this._history.replaceState(t,r,i):this._location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(P))},n.\u0275prov=o.Yz7({token:n,factory:function(){return function M(){return new m((0,o.LFG)(P))}()},providedIn:"platform"}),n})();function I(){return!!window.history.pushState}function T(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function N(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function L(n){return n&&"?"!==n[0]?"?"+n:n}let z=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=o.Yz7({token:n,factory:function(){return(0,o.f3M)(q)},providedIn:"root"}),n})();const V=new o.OlP("appBaseHref");let q=(()=>{class n extends z{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,o.f3M)(P).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return T(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+L(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,u){const d=this.prepareExternalUrl(i+L(u));this._platformLocation.pushState(t,r,d)}replaceState(t,r,i,u){const d=this.prepareExternalUrl(i+L(u));this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(w),o.LFG(V,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),X=(()=>{class n extends z{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=T(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,u){let d=this.prepareExternalUrl(i+L(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(t,r,d)}replaceState(t,r,i,u){let d=this.prepareExternalUrl(i+L(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(w),o.LFG(V,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),ce=(()=>{class n{constructor(t){this._subject=new o.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function ke(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(N(Ae(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+L(r))}normalize(t){return n.stripTrailingSlash(function pe(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,Ae(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+L(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+L(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=L,n.joinWithSlash=T,n.stripTrailingSlash=N,n.\u0275fac=function(t){return new(t||n)(o.LFG(z))},n.\u0275prov=o.Yz7({token:n,factory:function(){return function fe(){return new ce((0,o.LFG)(z))}()},providedIn:"root"}),n})();function Ae(n){return n.replace(/\/index.html$/,"")}function ns(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(u)}return null}const ii=/\s+/,ft=[];let jt=(()=>{class n{constructor(t,r,i,u){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=u,this.initialClasses=ft,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(ii):ft}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(ii):t}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const r of t)this._updateState(r,!0);else if(null!=t)for(const r of Object.keys(t))this._updateState(r,Boolean(t[r]));this._applyStateDiff()}_updateState(t,r){const i=this.stateMap.get(t);void 0!==i?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){(t=t.trim()).length>0&&t.split(ii).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(o.ZZ4),o.Y36(o.aQg),o.Y36(o.SBq),o.Y36(o.Qsj))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class ur{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Vi=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,u,d)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new ur(i.item,this._ngForOf,-1,-1),null===d?void 0:d);else if(null==d)r.remove(null===u?void 0:u);else if(null!==u){const D=r.get(u);r.move(D,d),Zn(D,i)}});for(let i=0,u=r.length;i<u;i++){const D=r.get(i).context;D.index=i,D.count=u,D.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{Zn(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(o.s_b),o.Y36(o.Rgc),o.Y36(o.ZZ4))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Zn(n,e){n.context.$implicit=e.item}let Ti=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Kt,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Ko("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Ko("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(o.s_b),o.Y36(o.Rgc))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class Kt{constructor(){this.$implicit=null,this.ngIf=null}}function Ko(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,o.AaK)(e)}'.`)}class Rc{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}}class xa{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}}const Fr=new xa,Os=new Rc;let Js=(()=>{class n{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,o.QGY)(t))return Fr;if((0,o.F4k)(t))return Os;throw function Hi(n,e){return new o.vHH(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(o.sBO,16))},n.\u0275pipe=o.Yjl({name:"async",type:n,pure:!1,standalone:!0}),n})(),is=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})();const La="server";function kc(n){return n===La}let ss=(()=>{class n{}return n.\u0275prov=(0,o.Yz7)({token:n,providedIn:"root",factory:()=>new Ao((0,o.LFG)(P),window)}),n})();class Ao{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function na(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const u=i.shadowRoot;if(u){const d=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(d)return d}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],i-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Di(this.window.history)||Di(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Di(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class mi{}class aa extends b{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Ja extends aa{static makeCurrent(){!function A(n){v||(v=n)}(new Ja)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Ur(){return ks=ks||document.querySelector("base"),ks?ks.getAttribute("href"):null}();return null==t?null:function Qn(n){Br=Br||document.createElement("a"),Br.setAttribute("href",n);const e=Br.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){ks=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return ns(document.cookie,e)}}let Br,ks=null;const Ya=new o.OlP("TRANSITION_ID"),Vu=[{provide:o.ip1,useFactory:function ca(n,e,t){return()=>{t.get(o.CZH).donePromise.then(()=>{const r=_(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<i.length;u++)r.remove(i[u])})}},deps:[Ya,P,o.zs3],multi:!0}];let Zc=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const ua=new o.OlP("EventManagerPlugins");let ko=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let u=0;u<i.length;u++){const d=i[u];if(d.supports(t))return this._eventNameToPlugin.set(t,d),d}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(ua),o.LFG(o.R0b))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();class ps{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=_().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let j=(()=>{class n{constructor(){this.usageCount=new Map}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)0===this.changeUsageCount(r,-1)&&this.onStyleRemoved(r)}onStyleRemoved(t){}onStyleAdded(t){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(t,r){const i=this.usageCount;let u=i.get(t)??0;return u+=r,u>0?i.set(t,u):i.delete(t),u}ngOnDestroy(){for(const t of this.getAllStyles())this.onStyleRemoved(t);this.usageCount.clear()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),B=(()=>{class n extends j{constructor(t){super(),this.doc=t,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.forEach(u=>u.remove()),r.delete(t)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}addStyleToHost(t,r){const i=this.doc.createElement("style");i.textContent=r,t.appendChild(i);const u=this.styleRef.get(r);u?u.push(i):this.styleRef.set(r,[i])}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(P))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const Q={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},se=/%COMP%/g,Zi=new o.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function eh(n,e){return e.flat(100).map(t=>t.replace(se,n))}function zu(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Ki=(()=>{class n{constructor(t,r,i,u){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestory=u,this.rendererByCompId=new Map,this.defaultRenderer=new Ip(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;const i=this.getOrCreateRenderer(t,r);return i instanceof Lo?i.applyToHost(t):i instanceof Ls&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let u=i.get(r.id);if(!u){const d=this.eventManager,D=this.sharedStylesHost,k=this.removeStylesOnCompDestory;switch(r.encapsulation){case o.ifc.Emulated:u=new Lo(d,D,r,this.appId,k);break;case o.ifc.ShadowDom:return new Tp(d,D,t,r);default:u=new Ls(d,D,r,k)}u.onDestroy=()=>i.delete(r.id),i.set(r.id,u)}return u}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(ko),o.LFG(B),o.LFG(o.AFp),o.LFG(Zi))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();class Ip{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Q[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(bp(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(bp(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const u=Q[i];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Q[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(o.JOm.DashCase|o.JOm.Important)?e.style.setProperty(t,r,i&o.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&o.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,zu(r)):this.eventManager.addEventListener(e,t,zu(r))}}function bp(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Tp extends Ip{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=eh(i.id,i.styles);for(const d of u){const D=document.createElement("style");D.textContent=d,this.shadowRoot.appendChild(D)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Ls extends Ip{constructor(e,t,r,i,u=r.id){super(e),this.sharedStylesHost=t,this.removeStylesOnCompDestory=i,this.rendererUsageCount=0,this.styles=eh(u,r.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class Lo extends Ls{constructor(e,t,r,i,u){const d=i+"-"+r.id;super(e,t,r,u,d),this.contentAttr=function Kc(n){return"_ngcontent-%COMP%".replace(se,n)}(d),this.hostAttr=function Ul(n){return"_nghost-%COMP%".replace(se,n)}(d)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let Hu=(()=>{class n extends ps{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(P))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const Bl=["alt","control","meta","shift"],nh={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},$u={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Vr=(()=>{class n extends ps{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const u=n.parseEventName(r),d=n.eventCallback(u.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>_().onAndCancel(t,u.domEventName,d))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const u=n._normalizeKey(r.pop());let d="",D=r.indexOf("code");if(D>-1&&(r.splice(D,1),d="code."),Bl.forEach(G=>{const Z=r.indexOf(G);Z>-1&&(r.splice(Z,1),d+=G+".")}),d+=u,0!=r.length||0===u.length)return null;const k={};return k.domEventName=i,k.fullKey=d,k}static matchEventFullKeyCode(t,r){let i=nh[t.key]||t.key,u="";return r.indexOf("code.")>-1&&(i=t.code,u="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Bl.forEach(d=>{d!==i&&(0,$u[d])(t)&&(u+=d+".")}),u+=i,u===r)}static eventCallback(t,r,i){return u=>{n.matchEventFullKeyCode(u,t)&&i.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(P))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const Pp=(0,o.eFA)(o._c5,"browser",[{provide:o.Lbi,useValue:"browser"},{provide:o.g9A,useValue:function ro(){Ja.makeCurrent()},multi:!0},{provide:P,useFactory:function sh(){return(0,o.RDi)(document),document},deps:[]}]),Gu=new o.OlP(""),la=[{provide:o.rWj,useClass:class qc{addToWindow(e){o.dqk.getAngularTestability=(r,i=!0)=>{const u=e.findTestabilityInTree(r,i);if(null==u)throw new Error("Could not find testability for element.");return u},o.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),o.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),o.dqk.frameworkStabilizers||(o.dqk.frameworkStabilizers=[]),o.dqk.frameworkStabilizers.push(r=>{const i=o.dqk.getAllAngularTestabilities();let u=i.length,d=!1;const D=function(k){d=d||k,u--,0==u&&r(d)};i.forEach(function(k){k.whenStable(D)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?_().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:o.lri,useClass:o.dDg,deps:[o.R0b,o.eoX,o.rWj]},{provide:o.dDg,useClass:o.dDg,deps:[o.R0b,o.eoX,o.rWj]}],tc=[{provide:o.zSh,useValue:"root"},{provide:o.qLn,useFactory:function ih(){return new o.qLn},deps:[]},{provide:ua,useClass:Hu,multi:!0,deps:[P,o.R0b,o.Lbi]},{provide:ua,useClass:Vr,multi:!0,deps:[P]},{provide:Ki,useClass:Ki,deps:[ko,B,o.AFp,Zi]},{provide:o.FYo,useExisting:Ki},{provide:j,useExisting:B},{provide:B,useClass:B,deps:[P]},{provide:ko,useClass:ko,deps:[ua,o.R0b]},{provide:mi,useClass:Zc,deps:[]},[]];let Ri=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:o.AFp,useValue:t.appId},{provide:Ya,useExisting:o.AFp},Vu]}}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(Gu,12))},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[...tc,...la],imports:[is,o.hGG]}),n})(),pr=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(P))},n.\u0275prov=o.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function da(){return new pr((0,o.LFG)(P))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var js=y(7669),An=y(8996);function bt(...n){const e=(0,js.yG)(n);return(0,An.D)(n,e)}var gs=y(9751),Gn=y(5577),Ku=y(576);function ms(n,e){return(0,Ku.m)(e)?(0,Gn.z)(n,e,1):(0,Gn.z)(n,1)}var Dr=y(4482),zr=y(5403);function Mi(n,e){return(0,Dr.e)((t,r)=>{let i=0;t.subscribe((0,zr.x)(r,u=>n.call(e,u,i++)&&r.next(u)))})}var It=y(4004);class io{}class tu{}class Oi{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),u=i.toLowerCase(),d=t.slice(r+1).trim();this.maybeSetNormalizedName(i,u),this.headers.has(u)?this.headers.get(u).push(d):this.headers.set(u,[d])}})}:()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{let i;if(i="string"==typeof r?[r]:"number"==typeof r?[r.toString()]:r.map(u=>u.toString()),i.length>0){const u=t.toLowerCase();this.headers.set(u,i),this.maybeSetNormalizedName(t,u)}})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Oi?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Oi;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Oi?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const u=e.value;if(u){let d=this.headers.get(t);if(!d)return;d=d.filter(D=>-1===u.indexOf(D)),0===d.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,d)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class Ju{encodeKey(e){return Yu(e)}encodeValue(e){return Yu(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const lh=/%(\d[a-f0-9])/gi,so={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Yu(n){return encodeURIComponent(n).replace(lh,(e,t)=>so[t]??e)}function sc(n){return`${n}`}class Us{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Ju,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function $l(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const u=i.indexOf("="),[d,D]=-1==u?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,u)),e.decodeValue(i.slice(u+1))],k=t.get(d)||[];k.push(D),t.set(d,k)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(sc):[sc(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(u=>{t.push({param:r,value:u,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Us({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(sc(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(sc(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class jo{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function Np(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function Gl(n){return typeof Blob<"u"&&n instanceof Blob}function ac(n){return typeof FormData<"u"&&n instanceof FormData}class ha{constructor(e,t,r,i){let u;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function oc(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,u=i):u=r,u&&(this.reportProgress=!!u.reportProgress,this.withCredentials=!!u.withCredentials,u.responseType&&(this.responseType=u.responseType),u.headers&&(this.headers=u.headers),u.context&&(this.context=u.context),u.params&&(this.params=u.params)),this.headers||(this.headers=new Oi),this.context||(this.context=new jo),this.params){const d=this.params.toString();if(0===d.length)this.urlWithParams=t;else{const D=t.indexOf("?");this.urlWithParams=t+(-1===D?"?":D<t.length-1?"&":"")+d}}else this.params=new Us,this.urlWithParams=t}serializeBody(){return null===this.body?null:Np(this.body)||Gl(this.body)||ac(this.body)||function Uo(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Us?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||ac(this.body)?null:Gl(this.body)?this.body.type||null:Np(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Us?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,u=void 0!==e.body?e.body:this.body,d=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,D=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let k=e.headers||this.headers,G=e.params||this.params;const Z=e.context??this.context;return void 0!==e.setHeaders&&(k=Object.keys(e.setHeaders).reduce((te,le)=>te.set(le,e.setHeaders[le]),k)),e.setParams&&(G=Object.keys(e.setParams).reduce((te,le)=>te.set(le,e.setParams[le]),G)),new ha(t,r,u,{params:G,headers:k,context:Z,reportProgress:D,responseType:i,withCredentials:d})}}var fr=(()=>((fr=fr||{})[fr.Sent=0]="Sent",fr[fr.UploadProgress=1]="UploadProgress",fr[fr.ResponseHeader=2]="ResponseHeader",fr[fr.DownloadProgress=3]="DownloadProgress",fr[fr.Response=4]="Response",fr[fr.User=5]="User",fr))();class Wl{constructor(e,t=200,r="OK"){this.headers=e.headers||new Oi,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class ql extends Wl{constructor(e={}){super(e),this.type=fr.ResponseHeader}clone(e={}){return new ql({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class oo extends Wl{constructor(e={}){super(e),this.type=fr.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new oo({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Qu extends Wl{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function Zl(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let nu=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let u;if(t instanceof ha)u=t;else{let k,G;k=i.headers instanceof Oi?i.headers:new Oi(i.headers),i.params&&(G=i.params instanceof Us?i.params:new Us({fromObject:i.params})),u=new ha(t,r,void 0!==i.body?i.body:null,{headers:k,context:i.context,params:G,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const d=bt(u).pipe(ms(k=>this.handler.handle(k)));if(t instanceof ha||"events"===i.observe)return d;const D=d.pipe(Mi(k=>k instanceof oo));switch(i.observe||"body"){case"body":switch(u.responseType){case"arraybuffer":return D.pipe((0,It.U)(k=>{if(null!==k.body&&!(k.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return k.body}));case"blob":return D.pipe((0,It.U)(k=>{if(null!==k.body&&!(k.body instanceof Blob))throw new Error("Response is not a Blob.");return k.body}));case"text":return D.pipe((0,It.U)(k=>{if(null!==k.body&&"string"!=typeof k.body)throw new Error("Response is not a string.");return k.body}));default:return D.pipe((0,It.U)(k=>k.body))}case"response":return D;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Us).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,Zl(i,r))}post(t,r,i={}){return this.request("POST",t,Zl(i,r))}put(t,r,i={}){return this.request("PUT",t,Zl(i,r))}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(io))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();function Kl(n,e){return e(n)}function dh(n,e){return(t,r)=>e.intercept(t,{handle:i=>n(i,r)})}const ph=new o.OlP("HTTP_INTERCEPTORS"),pa=new o.OlP("HTTP_INTERCEPTOR_FNS");function fa(){let n=null;return(e,t)=>(null===n&&(n=((0,o.f3M)(ph,{optional:!0})??[]).reduceRight(dh,Kl)),n(e,t))}let Jl=(()=>{class n extends io{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=Array.from(new Set(this.injector.get(pa)));this.chain=r.reduceRight((i,u)=>function hh(n,e,t){return(r,i)=>t.runInContext(()=>e(r,u=>n(u,i)))}(i,u,this.injector),Kl)}return this.chain(t,r=>this.backend.handle(r))}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(tu),o.LFG(o.lqb))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const Xl=/^\)\]\}',?\n/;let vs=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new gs.y(r=>{const i=this.xhrFactory.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach((ye,Oe)=>i.setRequestHeader(ye,Oe.join(","))),t.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const ye=t.detectContentTypeHeader();null!==ye&&i.setRequestHeader("Content-Type",ye)}if(t.responseType){const ye=t.responseType.toLowerCase();i.responseType="json"!==ye?ye:"text"}const u=t.serializeBody();let d=null;const D=()=>{if(null!==d)return d;const ye=i.statusText||"OK",Oe=new Oi(i.getAllResponseHeaders()),qe=function nl(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||t.url;return d=new ql({headers:Oe,status:i.status,statusText:ye,url:qe}),d},k=()=>{let{headers:ye,status:Oe,statusText:qe,url:Je}=D(),Et=null;204!==Oe&&(Et=typeof i.response>"u"?i.responseText:i.response),0===Oe&&(Oe=Et?200:0);let Nt=Oe>=200&&Oe<300;if("json"===t.responseType&&"string"==typeof Et){const xt=Et;Et=Et.replace(Xl,"");try{Et=""!==Et?JSON.parse(Et):null}catch($t){Et=xt,Nt&&(Nt=!1,Et={error:$t,text:Et})}}Nt?(r.next(new oo({body:Et,headers:ye,status:Oe,statusText:qe,url:Je||void 0})),r.complete()):r.error(new Qu({error:Et,headers:ye,status:Oe,statusText:qe,url:Je||void 0}))},G=ye=>{const{url:Oe}=D(),qe=new Qu({error:ye,status:i.status||0,statusText:i.statusText||"Unknown Error",url:Oe||void 0});r.error(qe)};let Z=!1;const te=ye=>{Z||(r.next(D()),Z=!0);let Oe={type:fr.DownloadProgress,loaded:ye.loaded};ye.lengthComputable&&(Oe.total=ye.total),"text"===t.responseType&&i.responseText&&(Oe.partialText=i.responseText),r.next(Oe)},le=ye=>{let Oe={type:fr.UploadProgress,loaded:ye.loaded};ye.lengthComputable&&(Oe.total=ye.total),r.next(Oe)};return i.addEventListener("load",k),i.addEventListener("error",G),i.addEventListener("timeout",G),i.addEventListener("abort",G),t.reportProgress&&(i.addEventListener("progress",te),null!==u&&i.upload&&i.upload.addEventListener("progress",le)),i.send(u),r.next({type:fr.Sent}),()=>{i.removeEventListener("error",G),i.removeEventListener("abort",G),i.removeEventListener("load",k),i.removeEventListener("timeout",G),t.reportProgress&&(i.removeEventListener("progress",te),null!==u&&i.upload&&i.upload.removeEventListener("progress",le)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(mi))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const ao=new o.OlP("XSRF_ENABLED"),Bo=new o.OlP("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),iu=new o.OlP("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class td{}let nd=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=ns(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(P),o.LFG(o.Lbi),o.LFG(Bo))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();function rl(n,e){const t=n.url.toLowerCase();if(!(0,o.f3M)(ao)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const r=(0,o.f3M)(td).getToken(),i=(0,o.f3M)(iu);return null!=r&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}var F=(()=>((F=F||{})[F.Interceptors=0]="Interceptors",F[F.LegacyInterceptors=1]="LegacyInterceptors",F[F.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",F[F.NoXsrfProtection=3]="NoXsrfProtection",F[F.JsonpSupport=4]="JsonpSupport",F[F.RequestsMadeViaParent=5]="RequestsMadeViaParent",F))();function H(n,e){return{\u0275kind:n,\u0275providers:e}}function J(...n){const e=[nu,vs,Jl,{provide:io,useExisting:Jl},{provide:tu,useExisting:vs},{provide:pa,useValue:rl,multi:!0},{provide:ao,useValue:!0},{provide:td,useClass:nd}];for(const t of n)e.push(...t.\u0275providers);return(0,o.MR2)(e)}const he=new o.OlP("LEGACY_INTERCEPTOR_FN");let Ht=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[J(H(F.LegacyInterceptors,[{provide:he,useFactory:fa},{provide:pa,useExisting:he,multi:!0}]))]}),n})();var ys=y(7579);class Qr extends ys.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const $r=(0,y(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"}),{isArray:Bs}=Array,{getPrototypeOf:il,prototype:Sy,keys:rd}=Object;function Zg(n){if(1===n.length){const e=n[0];if(Bs(e))return{args:e,keys:null};if(function Ey(n){return n&&"object"==typeof n&&il(n)===Sy}(e)){const t=rd(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var ou=y(4671);const{isArray:Fp}=Array;function au(n){return(0,It.U)(e=>function mh(n,e){return Fp(e)?n(...e):n(e)}(n,e))}function vh(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var Kg=y(9672);function Jg(...n){const e=(0,js.yG)(n),t=(0,js.jO)(n),{args:r,keys:i}=Zg(n);if(0===r.length)return(0,An.D)([],e);const u=new gs.y(function jp(n,e,t=ou.y){return r=>{Up(e,()=>{const{length:i}=n,u=new Array(i);let d=i,D=i;for(let k=0;k<i;k++)Up(e,()=>{const G=(0,An.D)(n[k],e);let Z=!1;G.subscribe((0,zr.x)(r,te=>{u[k]=te,Z||(Z=!0,D--),D||r.next(t(u.slice()))},()=>{--d||r.complete()}))},r)},r)}}(r,e,i?d=>vh(i,d):ou.y));return t?u.pipe(au(t)):u}function Up(n,e,t){n?(0,Kg.f)(t,n,e):e()}var id=y(8189);function Bp(...n){return function Iy(){return(0,id.J)(1)}()((0,An.D)(n,(0,js.yG)(n)))}var yh=y(8421);function Yg(n){return new gs.y(e=>{(0,yh.Xf)(n()).subscribe(e)})}var Ch=y(9635);function ga(n,e){const t=(0,Ku.m)(n)?n:()=>n,r=i=>i.error(t());return new gs.y(e?i=>e.schedule(r,0,i):r)}var ma=y(515),sl=y(727);function Vp(){return(0,Dr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,zr.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,u=t;t=null,i&&(!u||i===u)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class zp extends gs.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Dr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new sl.w0;const t=this.getSubject();e.add(this.source.subscribe((0,zr.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=sl.w0.EMPTY)}return e}refCount(){return Vp()(this)}}function Rr(n,e){return(0,Dr.e)((t,r)=>{let i=null,u=0,d=!1;const D=()=>d&&!i&&r.complete();t.subscribe((0,zr.x)(r,k=>{i?.unsubscribe();let G=0;const Z=u++;(0,yh.Xf)(n(k,Z)).subscribe(i=(0,zr.x)(r,te=>r.next(e?e(k,te,Z,G++):te),()=>{i=null,D()}))},()=>{d=!0,D()}))})}function va(n){return n<=0?()=>ma.E:(0,Dr.e)((e,t)=>{let r=0;e.subscribe((0,zr.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Vo(...n){const e=(0,js.yG)(n);return(0,Dr.e)((t,r)=>{(e?Bp(n,t,e):Bp(n,t)).subscribe(r)})}function _h(n){return(0,Dr.e)((e,t)=>{let r=!1;e.subscribe((0,zr.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function sd(n=Qg){return(0,Dr.e)((e,t)=>{let r=!1;e.subscribe((0,zr.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function Qg(){return new $r}function co(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Mi((i,u)=>n(i,u,r)):ou.y,va(1),t?_h(e):sd(()=>new $r))}var Mr=y(8505);function ya(n){return(0,Dr.e)((e,t)=>{let u,r=null,i=!1;r=e.subscribe((0,zr.x)(t,void 0,void 0,d=>{u=(0,yh.Xf)(n(d,ya(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,u.subscribe(t))})}function ol(n,e){return(0,Dr.e)(function Xg(n,e,t,r,i){return(u,d)=>{let D=t,k=e,G=0;u.subscribe((0,zr.x)(d,Z=>{const te=G++;k=D?n(k,Z,te):(D=!0,Z),r&&d.next(k)},i&&(()=>{D&&d.next(k),d.complete()})))}}(n,e,arguments.length>=2,!0))}function wh(n){return n<=0?()=>ma.E:(0,Dr.e)((e,t)=>{let r=[];e.subscribe((0,zr.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Sh(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Mi((i,u)=>n(i,u,r)):ou.y,wh(1),t?_h(e):sd(()=>new $r))}function al(n){return(0,Dr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Xt="primary",Cs=Symbol("RouteTitle");class Hp{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function uc(n){return new Hp(n)}function cu(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let u=0;u<r.length;u++){const d=r[u],D=n[u];if(d.startsWith(":"))i[d.substring(1)]=D;else if(d!==D.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function _s(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let u=0;u<t.length;u++)if(i=t[u],!tm(n[i],e[i]))return!1;return!0}function tm(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,u)=>r[u]===i)}return n===e}function nm(n){return Array.prototype.concat.apply([],n)}function Eh(n){return n.length>0?n[n.length-1]:null}function Xr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function ws(n){return(0,o.CqO)(n)?n:(0,o.QGY)(n)?(0,An.D)(Promise.resolve(n)):bt(n)}const cl=!1,ul={exact:function $p(n,e,t){if(!lc(n.segments,e.segments)||!Ca(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!$p(n.children[r],e.children[r],t))return!1;return!0},subset:sm},rm={exact:function yw(n,e){return _s(n,e)},subset:function ad(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>tm(n[t],e[t]))},ignored:()=>!0};function im(n,e,t){return ul[t.paths](n.root,e.root,t.matrixParams)&&rm[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function sm(n,e,t){return Gp(n,e,e.segments,t)}function Gp(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!lc(i,t)||e.hasChildren()||!Ca(i,t,r))}if(n.segments.length===t.length){if(!lc(n.segments,t)||!Ca(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!sm(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(lc(n.segments,i)&&Ca(n.segments,i,r)&&n.children[Xt])&&Gp(n.children[Xt],e,u,r)}}function Ca(n,e,t){return e.every((r,i)=>rm[t](n[i].parameters,r.parameters))}class Vs{constructor(e=new un([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=uc(this.queryParams)),this._queryParamMap}toString(){return Py.serialize(this)}}class un{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Xr(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return bh(this)}}class ll{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=uc(this.parameters)),this._parameterMap}toString(){return Ry(this)}}function lc(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let ud=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=o.Yz7({token:n,factory:function(){return new Ih},providedIn:"root"}),n})();class Ih{parse(e){const t=new Yi(e);return new Vs(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${zs(e.root,!0)}`,r=function am(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${dc(t)}=${dc(i)}`).join("&"):`${dc(t)}=${dc(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Cw(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Py=new Ih;function bh(n){return n.segments.map(e=>Ry(e)).join("/")}function zs(n,e){if(!n.hasChildren())return bh(n);if(e){const t=n.children[Xt]?zs(n.children[Xt],!1):"",r=[];return Xr(n.children,(i,u)=>{u!==Xt&&r.push(`${u}:${zs(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Ay(n,e){let t=[];return Xr(n.children,(r,i)=>{i===Xt&&(t=t.concat(e(r,i)))}),Xr(n.children,(r,i)=>{i!==Xt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Xt?[zs(n.children[Xt],!1)]:[`${i}:${zs(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Xt]?`${bh(n)}/${t[0]}`:`${bh(n)}/(${t.join("//")})`}}function dl(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function dc(n){return dl(n).replace(/%3B/gi,";")}function Wp(n){return dl(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function qp(n){return decodeURIComponent(n)}function Dy(n){return qp(n.replace(/\+/g,"%20"))}function Ry(n){return`${Wp(n.path)}${function om(n){return Object.keys(n).map(e=>`;${Wp(e)}=${Wp(n[e])}`).join("")}(n.parameters)}`}const Zp=/^[^\/()?;=#]+/;function hl(n){const e=n.match(Zp);return e?e[0]:""}const cm=/^[^=?&#]+/,uo=/^[^&#]+/;class Yi{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new un([],{}):new un([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Xt]=new un(e,t)),r}parseSegment(){const e=hl(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new o.vHH(4009,cl);return this.capture(e),new ll(qp(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=hl(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=hl(this.remaining);i&&(r=i,this.capture(r))}e[qp(t)]=qp(r)}parseQueryParam(e){const t=function Kp(n){const e=n.match(cm);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const d=function ld(n){const e=n.match(uo);return e?e[0]:""}(this.remaining);d&&(r=d,this.capture(r))}const i=Dy(t),u=Dy(r);if(e.hasOwnProperty(i)){let d=e[i];Array.isArray(d)||(d=[d],e[i]=d),d.push(u)}else e[i]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=hl(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new o.vHH(4010,cl);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Xt);const d=this.parseChildren();t[u]=1===Object.keys(d).length?d[Xt]:new un([],d),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new o.vHH(4011,cl)}}function hc(n){return n.segments.length>0?new un([],{[Xt]:n}):n}function pl(n){const e={};for(const r of Object.keys(n.children)){const u=pl(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function _w(n){if(1===n.numberOfChildren&&n.children[Xt]){const e=n.children[Xt];return new un(n.segments.concat(e.segments),e.children)}return n}(new un(n.segments,e))}function pc(n){return n instanceof Vs}const Th=!1;function uu(n,e,t,r,i){if(0===t.length)return fl(e.root,e.root,e.root,r,i);const u=function yi(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Jp(!0,0,n);let e=0,t=!1;const r=n.reduce((i,u,d)=>{if("object"==typeof u&&null!=u){if(u.outlets){const D={};return Xr(u.outlets,(k,G)=>{D[G]="string"==typeof k?k.split("/"):k}),[...i,{outlets:D}]}if(u.segmentPath)return[...i,u.segmentPath]}return"string"!=typeof u?[...i,u]:0===d?(u.split("/").forEach((D,k)=>{0==k&&"."===D||(0==k&&""===D?t=!0:".."===D?e++:""!=D&&i.push(D))}),i):[...i,u]},[]);return new Jp(t,e,r)}(t);return u.toRoot()?fl(e.root,e.root,new un([],{}),r,i):function d(k){const G=function Qp(n,e,t,r){if(n.isAbsolute)return new lo(e.root,!0,0);if(-1===r)return new lo(t,t===e.root,0);return function zo(n,e,t){let r=n,i=e,u=t;for(;u>i;){if(u-=i,r=r.parent,!r)throw new o.vHH(4005,Th&&"Invalid number of '../'");i=r.segments.length}return new lo(r,!1,i-u)}(t,r+(lu(n.commands[0])?0:1),n.numberOfDoubleDots)}(u,e,n.snapshot?._urlSegment,k),Z=G.processChildren?du(G.segmentGroup,G.index,u.commands):Ah(G.segmentGroup,G.index,u.commands);return fl(e.root,G.segmentGroup,Z,r,i)}(n.snapshot?._lastPathIndex)}function lu(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function hd(n){return"object"==typeof n&&null!=n&&n.outlets}function fl(n,e,t,r,i){let d,u={};r&&Xr(r,(k,G)=>{u[G]=Array.isArray(k)?k.map(Z=>`${Z}`):`${k}`}),d=n===e?t:lm(n,e,t);const D=hc(pl(d));return new Vs(D,u,i)}function lm(n,e,t){const r={};return Xr(n.children,(i,u)=>{r[u]=i===e?t:lm(i,e,t)}),new un(n.segments,r)}class Jp{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&lu(r[0]))throw new o.vHH(4003,Th&&"Root segment cannot have matrix parameters");const i=r.find(hd);if(i&&i!==Eh(r))throw new o.vHH(4004,Th&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class lo{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Ah(n,e,t){if(n||(n=new un([],{})),0===n.segments.length&&n.hasChildren())return du(n,e,t);const r=function Xp(n,e,t){let r=0,i=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return u;const d=n.segments[i],D=t[r];if(hd(D))break;const k=`${D}`,G=r<t.length-1?t[r+1]:null;if(i>0&&void 0===k)break;if(k&&G&&"object"==typeof G&&void 0===G.outlets){if(!hm(k,G,d))return u;r+=2}else{if(!hm(k,{},d))return u;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new un(n.segments.slice(0,r.pathIndex),{});return u.children[Xt]=new un(n.segments.slice(r.pathIndex),n.children),du(u,0,i)}return r.match&&0===i.length?new un(n.segments,{}):r.match&&!n.hasChildren()?gl(n,e,t):r.match?du(n,0,i):gl(n,e,t)}function du(n,e,t){if(0===t.length)return new un(n.segments,{});{const r=function ir(n){return hd(n[0])?n[0].outlets:{[Xt]:n}}(t),i={};if(!r[Xt]&&n.children[Xt]&&1===n.numberOfChildren&&0===n.children[Xt].segments.length){const u=du(n.children[Xt],e,t);return new un(n.segments,u.children)}return Xr(r,(u,d)=>{"string"==typeof u&&(u=[u]),null!==u&&(i[d]=Ah(n.children[d],e,u))}),Xr(n.children,(u,d)=>{void 0===r[d]&&(i[d]=u)}),new un(n.segments,i)}}function gl(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const u=t[i];if(hd(u)){const k=Oy(u.outlets);return new un(r,k)}if(0===i&&lu(t[0])){r.push(new ll(n.segments[e].path,dm(t[0]))),i++;continue}const d=hd(u)?u.outlets[Xt]:`${u}`,D=i<t.length-1?t[i+1]:null;d&&D&&lu(D)?(r.push(new ll(d,dm(D))),i+=2):(r.push(new ll(d,{})),i++)}return new un(r,{})}function Oy(n){const e={};return Xr(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=gl(new un([],{}),0,t))}),e}function dm(n){const e={};return Xr(n,(t,r)=>e[r]=`${t}`),e}function hm(n,e,t){return n==t.path&&_s(e,t.parameters)}const pd="imperative";class R{constructor(e,t){this.id=e,this.url=t}}class g extends R{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class C extends R{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class O extends R{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class W extends R{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class Y extends R{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class oe extends R{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ve extends R{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $e extends R{constructor(e,t,r,i,u){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class ze extends R{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ct extends R{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class gt{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class cn{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class ui{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ho{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ph{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class fd{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Dh{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let pm=(()=>{class n{createUrlTree(t,r,i,u,d,D){return uu(t||r.root,i,u,d,D)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),ml=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=o.Yz7({token:n,factory:function(e){return pm.\u0275fac(e)},providedIn:"root"}),n})();class tf{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=gd(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=gd(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=fc(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return fc(e,this._root).map(t=>t.value)}}function gd(n,e){if(n===e.value)return e;for(const t of e.children){const r=gd(n,t);if(r)return r}return null}function fc(n,e){if(n===e.value)return[e];for(const t of e.children){const r=fc(n,t);if(r.length)return r.unshift(e),r}return[]}class Ni{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function md(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class fm extends tf{constructor(e,t){super(e),this.snapshot=t,nf(this,e)}toString(){return this.snapshot.toString()}}function ww(n,e){const t=function PI(n,e){const d=new gm([],{},{},"",{},Xt,e,null,n.root,-1,{});return new Sw("",new Ni(d,[]))}(n,e),r=new Qr([new ll("",{})]),i=new Qr({}),u=new Qr({}),d=new Qr({}),D=new Qr(""),k=new vl(r,i,d,D,u,Xt,e,t.root);return k.snapshot=t.root,new fm(new Ni(k,[]),t)}class vl{constructor(e,t,r,i,u,d,D,k){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=u,this.outlet=d,this.component=D,this.title=this.data?.pipe((0,It.U)(G=>G[Cs]))??bt(void 0),this._futureSnapshot=k}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,It.U)(e=>uc(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,It.U)(e=>uc(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function vd(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],u=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(u.component)break;r--}}return function DI(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class gm{get title(){return this.data?.[Cs]}constructor(e,t,r,i,u,d,D,k,G,Z,te){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=u,this.outlet=d,this.component=D,this.routeConfig=k,this._urlSegment=G,this._lastPathIndex=Z,this._resolve=te}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=uc(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=uc(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Sw extends tf{constructor(e,t){super(t),this.url=e,nf(this,t)}toString(){return Ew(this._root)}}function nf(n,e){e.value._routerState=n,e.children.forEach(t=>nf(n,t))}function Ew(n){const e=n.children.length>0?` { ${n.children.map(Ew).join(", ")} } `:"";return`${n.value}${e}`}function mm(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,_s(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),_s(e.params,t.params)||n.params.next(t.params),function by(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!_s(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),_s(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function xy(n,e){const t=_s(n.params,e.params)&&function cd(n,e){return lc(n,e)&&n.every((t,r)=>_s(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||xy(n.parent,e.parent))}function vm(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function RI(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return vm(n,r,i);return vm(n,r)})}(n,e,t);return new Ni(r,i)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const d=u.route;return d.value._futureSnapshot=e.value,d.children=e.children.map(D=>vm(n,D)),d}}const r=function rf(n){return new vl(new Qr(n.url),new Qr(n.params),new Qr(n.queryParams),new Qr(n.fragment),new Qr(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(u=>vm(n,u));return new Ni(r,i)}}const Ny="ngNavigationCancelingError";function yd(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=pc(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=Mh(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function Mh(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[Ny]=!0,r.cancellationCode=e,t&&(r.url=t),r}function bw(n){return ky(n)&&pc(n.url)}function ky(n){return n&&n[Ny]}class MI{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new sf,this.attachRef=null}}let sf=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new MI,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const ym=!1;let Cm=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Xt,this.activateEvents=new o.vpe,this.deactivateEvents=new o.vpe,this.attachEvents=new o.vpe,this.detachEvents=new o.vpe,this.parentContexts=(0,o.f3M)(sf),this.location=(0,o.f3M)(o.s_b),this.changeDetector=(0,o.f3M)(o.sBO),this.environmentInjector=(0,o.f3M)(o.lqb)}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new o.vHH(4012,ym);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new o.vHH(4012,ym);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new o.vHH(4012,ym);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new o.vHH(4013,ym);this._activatedRoute=t;const i=this.location,d=t.snapshot.component,D=this.parentContexts.getOrCreateContext(this.name).children,k=new Tw(t,D,i.injector);if(r&&function Ly(n){return!!n.resolveComponentFactory}(r)){const G=r.resolveComponentFactory(d);this.activated=i.createComponent(G,i.length,k)}else this.activated=i.createComponent(d,{index:i.length,injector:k,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=o.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[o.TTD]}),n})();class Tw{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===vl?this.route:e===sf?this.childContexts:this.parent.get(e,t)}}let af=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[o.jDz],decls:1,vars:0,template:function(t,r){1&t&&o._UZ(0,"router-outlet")},dependencies:[Cm],encapsulation:2}),n})();function Aw(n,e){return n.providers&&!n._injector&&(n._injector=(0,o.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function jy(n){const e=n.children&&n.children.map(jy),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Xt&&(t.component=af),t}function ki(n){return n.outlet||Xt}function gc(n,e){const t=n.filter(r=>ki(r)===e);return t.push(...n.filter(r=>ki(r)!==e)),t}function cf(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class ID{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),mm(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=md(t);e.children.forEach(u=>{const d=u.value.outlet;this.deactivateRoutes(u,i[d],r),delete i[d]}),Xr(i,(u,d)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const i=e.value,u=t?t.value:null;if(i===u)if(i.component){const d=r.getContext(i.outlet);d&&this.deactivateChildRoutes(e,t,d.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,u=md(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],i);if(r&&r.outlet){const d=r.outlet.detach(),D=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:d,route:e,contexts:D})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,u=md(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=md(t);e.children.forEach(u=>{this.activateRoutes(u,i[u.value.outlet],r),this.forwardEvent(new fd(u.value.snapshot))}),e.children.length&&this.forwardEvent(new Ho(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,u=t?t.value:null;if(mm(i),i===u)if(i.component){const d=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,d.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const d=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const D=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),d.children.onOutletReAttached(D.contexts),d.attachRef=D.componentRef,d.route=D.route.value,d.outlet&&d.outlet.attach(D.componentRef,D.route.value),mm(D.route.value),this.activateChildRoutes(e,null,d.children)}else{const D=cf(i.snapshot),k=D?.get(o._Vd)??null;d.attachRef=null,d.route=i,d.resolver=k,d.injector=D,d.outlet&&d.outlet.activateWith(i,d.injector),this.activateChildRoutes(e,null,d.children)}}else this.activateChildRoutes(e,null,r)}}class LI{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class uf{constructor(e,t){this.component=e,this.route=t}}function bD(n,e,t){const r=n._root;return lf(r,e?e._root:null,t,[r.value])}function Cd(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,o.Z0I)(n)?e.get(n):n:r}function lf(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const u=md(e);return n.children.forEach(d=>{(function Rw(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,d=e?e.value:null,D=t?t.getContext(n.value.outlet):null;if(d&&u.routeConfig===d.routeConfig){const k=function FI(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!lc(n.url,e.url);case"pathParamsOrQueryParamsChange":return!lc(n.url,e.url)||!_s(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!xy(n,e)||!_s(n.queryParams,e.queryParams);default:return!xy(n,e)}}(d,u,u.routeConfig.runGuardsAndResolvers);k?i.canActivateChecks.push(new LI(r)):(u.data=d.data,u._resolvedData=d._resolvedData),lf(n,e,u.component?D?D.children:null:t,r,i),k&&D&&D.outlet&&D.outlet.isActivated&&i.canDeactivateChecks.push(new uf(D.outlet.component,d))}else d&&df(e,D,i),i.canActivateChecks.push(new LI(r)),lf(n,null,u.component?D?D.children:null:t,r,i)})(d,u[d.value.outlet],t,r.concat([d.value]),i),delete u[d.value.outlet]}),Xr(u,(d,D)=>df(d,t.getContext(D),i)),i}function df(n,e,t){const r=md(n),i=n.value;Xr(r,(u,d)=>{df(u,i.component?e?e.children.getContext(d):null:e,t)}),t.canDeactivateChecks.push(new uf(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Ss(n){return"function"==typeof n}function Uy(n){return n instanceof $r||"EmptyError"===n?.name}const wm=Symbol("INITIAL_VALUE");function Zt(){return Rr(n=>Jg(n.map(e=>e.pipe(va(1),Vo(wm)))).pipe((0,It.U)(e=>{for(const t of e)if(!0!==t){if(t===wm)return wm;if(!1===t||t instanceof Vs)return t}return!0}),Mi(e=>e!==wm),va(1)))}function Fw(n){return(0,Ch.z)((0,Mr.b)(e=>{if(pc(e))throw yd(0,e)}),(0,It.U)(e=>!0===e))}const Sm={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function By(n,e,t,r,i){const u=hu(n,e,t);return u.matched?function TD(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?bt(i.map(d=>{const D=Cd(d,n);return ws(function zI(n){return n&&Ss(n.canMatch)}(D)?D.canMatch(e,t):n.runInContext(()=>D(e,t)))})).pipe(Zt(),Fw()):bt(!0)}(r=Aw(e,r),e,t).pipe((0,It.U)(d=>!0===d?u:{...Sm})):bt(u)}function hu(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Sm}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||cu)(t,n,e);if(!i)return{...Sm};const u={};Xr(i.posParams,(D,k)=>{u[k]=D.path});const d=i.consumed.length>0?{...u,...i.consumed[i.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:d,positionalParamSegments:i.posParams??{}}}function Em(n,e,t,r){if(t.length>0&&function KI(n,e,t){return t.some(r=>Hy(n,e,r)&&ki(r)!==Xt)}(n,t,r)){const u=new un(e,function zy(n,e,t,r){const i={};i[Xt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&ki(u)!==Xt){const d=new un([],{});d._sourceSegment=n,d._segmentIndexShift=e.length,i[ki(u)]=d}return i}(n,e,r,new un(t,n.children)));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:[]}}if(0===t.length&&function AD(n,e,t){return t.some(r=>Hy(n,e,r))}(n,t,r)){const u=new un(n.segments,function Vy(n,e,t,r,i){const u={};for(const d of r)if(Hy(n,t,d)&&!i[ki(d)]){const D=new un([],{});D._sourceSegment=n,D._segmentIndexShift=e.length,u[ki(d)]=D}return{...i,...u}}(n,e,t,r,n.children));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}const i=new un(n.segments,n.children);return i._sourceSegment=n,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:t}}function Hy(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function JI(n,e,t,r){return!!(ki(n)===r||r!==Xt&&Hy(e,t,n))&&("**"===n.path||hu(e,n,t).matched)}function jw(n,e,t){return 0===e.length&&!n.children[t]}const hf=!1;class $y{constructor(e){this.segmentGroup=e||null}}class Uw{constructor(e){this.urlTree=e}}function mc(n){return ga(new $y(n))}function Bw(n){return ga(new Uw(n))}class zw{constructor(e,t,r,i,u){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=u,this.allowRedirects=!0}apply(){const e=Em(this.urlTree.root,[],[],this.config).segmentGroup,t=new un(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Xt).pipe((0,It.U)(u=>this.createUrlTree(pl(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ya(u=>{if(u instanceof Uw)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof $y?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Xt).pipe((0,It.U)(i=>this.createUrlTree(pl(i),e.queryParams,e.fragment))).pipe(ya(i=>{throw i instanceof $y?this.noMatchError(i):i}))}noMatchError(e){return new o.vHH(4002,hf)}createUrlTree(e,t,r){const i=hc(e);return new Vs(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,It.U)(u=>new un([],u))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const u of Object.keys(r.children))"primary"===u?i.unshift(u):i.push(u);return(0,An.D)(i).pipe(ms(u=>{const d=r.children[u],D=gc(t,u);return this.expandSegmentGroup(e,D,d,u).pipe((0,It.U)(k=>({segment:k,outlet:u})))}),ol((u,d)=>(u[d.outlet]=d.segment,u),{}),Sh())}expandSegment(e,t,r,i,u,d){return(0,An.D)(r).pipe(ms(D=>this.expandSegmentAgainstRoute(e,t,r,D,i,u,d).pipe(ya(G=>{if(G instanceof $y)return bt(null);throw G}))),co(D=>!!D),ya((D,k)=>{if(Uy(D))return jw(t,i,u)?bt(new un([],{})):mc(t);throw D}))}expandSegmentAgainstRoute(e,t,r,i,u,d,D){return JI(i,t,u,d)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,u,d):D&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,u,d):mc(t):mc(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,u,d){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,d):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,u,d)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Bw(u):this.lineralizeSegments(r,u).pipe((0,Gn.z)(d=>{const D=new un(d,{});return this.expandSegment(e,D,t,d,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,u,d){const{matched:D,consumedSegments:k,remainingSegments:G,positionalParamSegments:Z}=hu(t,i,u);if(!D)return mc(t);const te=this.applyRedirectCommands(k,i.redirectTo,Z);return i.redirectTo.startsWith("/")?Bw(te):this.lineralizeSegments(i,te).pipe((0,Gn.z)(le=>this.expandSegment(e,t,r,le.concat(G),d,!1)))}matchSegmentAgainstRoute(e,t,r,i,u){return"**"===r.path?(e=Aw(r,e),r.loadChildren?(r._loadedRoutes?bt({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,It.U)(D=>(r._loadedRoutes=D.routes,r._loadedInjector=D.injector,new un(i,{})))):bt(new un(i,{}))):By(t,r,i,e).pipe(Rr(({matched:d,consumedSegments:D,remainingSegments:k})=>d?this.getChildConfig(e=r._injector??e,r,i).pipe((0,Gn.z)(Z=>{const te=Z.injector??e,le=Z.routes,{segmentGroup:ye,slicedSegments:Oe}=Em(t,D,k,le),qe=new un(ye.segments,ye.children);if(0===Oe.length&&qe.hasChildren())return this.expandChildren(te,le,qe).pipe((0,It.U)(xt=>new un(D,xt)));if(0===le.length&&0===Oe.length)return bt(new un(D,{}));const Je=ki(r)===u;return this.expandSegment(te,qe,le,Oe,Je?Xt:u,!0).pipe((0,It.U)(Nt=>new un(D.concat(Nt.segments),Nt.children)))})):mc(t)))}getChildConfig(e,t,r){return t.children?bt({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?bt({routes:t._loadedRoutes,injector:t._loadedInjector}):function ZI(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?bt(!0):bt(i.map(d=>{const D=Cd(d,n);return ws(function Mw(n){return n&&Ss(n.canLoad)}(D)?D.canLoad(e,t):n.runInContext(()=>D(e,t)))})).pipe(Zt(),Fw())}(e,t,r).pipe((0,Gn.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,Mr.b)(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function Im(n){return ga(Mh(hf,3))}())):bt({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return bt(r);if(i.numberOfChildren>1||!i.children[Xt])return e.redirectTo,ga(new o.vHH(4e3,hf));i=i.children[Xt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const u=this.createSegmentGroup(e,t.root,r,i);return new Vs(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Xr(e,(i,u)=>{if("string"==typeof i&&i.startsWith(":")){const D=i.substring(1);r[u]=t[D]}else r[u]=i}),r}createSegmentGroup(e,t,r,i){const u=this.createSegments(e,t.segments,r,i);let d={};return Xr(t.children,(D,k)=>{d[k]=this.createSegmentGroup(e,D,r,i)}),new un(u,d)}createSegments(e,t,r,i){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,i):this.findOrReturn(u,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new o.vHH(4001,hf);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class XI{}class $w{constructor(e,t,r,i,u,d,D){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=u,this.paramsInheritanceStrategy=d,this.urlSerializer=D}recognize(){const e=Em(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Xt).pipe((0,It.U)(t=>{if(null===t)return null;const r=new gm([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Xt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Ni(r,t),u=new Sw(this.url,i);return this.inheritParamsAndData(u._root),u}))}inheritParamsAndData(e){const t=e.value,r=vd(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,An.D)(Object.keys(r.children)).pipe(ms(i=>{const u=r.children[i],d=gc(t,i);return this.processSegmentGroup(e,d,u,i)}),ol((i,u)=>i&&u?(i.push(...u),i):null),function em(n,e=!1){return(0,Dr.e)((t,r)=>{let i=0;t.subscribe((0,zr.x)(r,u=>{const d=n(u,i++);(d||e)&&r.next(u),!d&&r.complete()}))})}(i=>null!==i),_h(null),Sh(),(0,It.U)(i=>{if(null===i)return null;const u=bm(i);return function nb(n){n.sort((e,t)=>e.value.outlet===Xt?-1:t.value.outlet===Xt?1:e.value.outlet.localeCompare(t.value.outlet))}(u),u}))}processSegment(e,t,r,i,u){return(0,An.D)(t).pipe(ms(d=>this.processSegmentAgainstRoute(d._injector??e,d,r,i,u)),co(d=>!!d),ya(d=>{if(Uy(d))return jw(r,i,u)?bt([]):bt(null);throw d}))}processSegmentAgainstRoute(e,t,r,i,u){if(t.redirectTo||!JI(t,r,i,u))return bt(null);let d;if("**"===t.path){const D=i.length>0?Eh(i).parameters:{},k=qw(r)+i.length;d=bt({snapshot:new gm(i,D,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,_d(t),ki(t),t.component??t._loadedComponent??null,t,Tm(r),k,Gy(t)),consumedSegments:[],remainingSegments:[]})}else d=By(r,t,i,e).pipe((0,It.U)(({matched:D,consumedSegments:k,remainingSegments:G,parameters:Z})=>{if(!D)return null;const te=qw(r)+k.length;return{snapshot:new gm(k,Z,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,_d(t),ki(t),t.component??t._loadedComponent??null,t,Tm(r),te,Gy(t)),consumedSegments:k,remainingSegments:G}}));return d.pipe(Rr(D=>{if(null===D)return bt(null);const{snapshot:k,consumedSegments:G,remainingSegments:Z}=D;e=t._injector??e;const te=t._loadedInjector??e,le=function Gw(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:ye,slicedSegments:Oe}=Em(r,G,Z,le.filter(Je=>void 0===Je.redirectTo));if(0===Oe.length&&ye.hasChildren())return this.processChildren(te,le,ye).pipe((0,It.U)(Je=>null===Je?null:[new Ni(k,Je)]));if(0===le.length&&0===Oe.length)return bt([new Ni(k,[])]);const qe=ki(t)===u;return this.processSegment(te,le,ye,Oe,qe?Xt:u).pipe((0,It.U)(Je=>null===Je?null:[new Ni(k,Je)]))}))}}function Ww(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function bm(n){const e=[],t=new Set;for(const r of n){if(!Ww(r)){e.push(r);continue}const i=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=bm(r.children);e.push(new Ni(r.value,i))}return e.filter(r=>!t.has(r))}function Tm(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function qw(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function _d(n){return n.data||{}}function Gy(n){return n.resolve||{}}function Pm(n){return"string"==typeof n.title||null===n.title}function wd(n){return Rr(e=>{const t=n(e);return t?(0,An.D)(t).pipe((0,It.U)(()=>e)):bt(e)})}const pu=new o.OlP("ROUTES");let Rm=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,o.f3M)(o.Sil)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return bt(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=ws(t.loadComponent()).pipe((0,It.U)(Mm),(0,Mr.b)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),al(()=>{this.componentLoaders.delete(t)})),i=new zp(r,()=>new ys.x).pipe(Vp());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return bt({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,It.U)(D=>{this.onLoadEndListener&&this.onLoadEndListener(r);let k,G,Z=!1;Array.isArray(D)?G=D:(k=D.create(t).injector,G=nm(k.get(pu,[],o.XFs.Self|o.XFs.Optional)));return{routes:G.map(jy),injector:k}}),al(()=>{this.childrenLoaders.delete(r)})),d=new zp(u,()=>new ys.x).pipe(Vp());return this.childrenLoaders.set(r,d),d}loadModuleFactoryOrRoutes(t){return ws(t()).pipe((0,It.U)(Mm),(0,Gn.z)(r=>r instanceof o.YKP||Array.isArray(r)?bt(r):(0,An.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Mm(n){return function Wy(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let pf=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new ys.x,this.configLoader=(0,o.f3M)(Rm),this.environmentInjector=(0,o.f3M)(o.lqb),this.urlSerializer=(0,o.f3M)(ud),this.rootContexts=(0,o.f3M)(sf),this.navigationId=0,this.afterPreactivation=()=>bt(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new cn(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new gt(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t){return this.transitions=new Qr({id:0,targetPageId:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:pd,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Mi(r=>0!==r.id),(0,It.U)(r=>({...r,extractedUrl:t.urlHandlingStrategy.extract(r.rawUrl)})),Rr(r=>{let i=!1,u=!1;return bt(r).pipe((0,Mr.b)(d=>{this.currentNavigation={id:d.id,initialUrl:d.rawUrl,extractedUrl:d.extractedUrl,trigger:d.source,extras:d.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Rr(d=>{const D=t.browserUrlTree.toString(),k=!t.navigated||d.extractedUrl.toString()!==D||D!==t.currentUrlTree.toString();if(!k&&"reload"!==(d.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const Z="";return this.events.next(new W(d.id,t.serializeUrl(r.rawUrl),Z,0)),t.rawUrlTree=d.rawUrl,d.resolve(null),ma.E}if(t.urlHandlingStrategy.shouldProcessUrl(d.rawUrl))return Om(d.source)&&(t.browserUrlTree=d.extractedUrl),bt(d).pipe(Rr(Z=>{const te=this.transitions?.getValue();return this.events.next(new g(Z.id,this.urlSerializer.serialize(Z.extractedUrl),Z.source,Z.restoredState)),te!==this.transitions?.getValue()?ma.E:Promise.resolve(Z)}),function QI(n,e,t,r){return Rr(i=>function YI(n,e,t,r,i){return new zw(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,It.U)(u=>({...i,urlAfterRedirects:u}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,t.config),(0,Mr.b)(Z=>{this.currentNavigation={...this.currentNavigation,finalUrl:Z.urlAfterRedirects},r.urlAfterRedirects=Z.urlAfterRedirects}),function rb(n,e,t,r,i){return(0,Gn.z)(u=>function tb(n,e,t,r,i,u,d="emptyOnly"){return new $w(n,e,t,r,i,d,u).recognize().pipe(Rr(D=>null===D?function eb(n){return new gs.y(e=>e.error(n))}(new XI):bt(D)))}(n,e,t,u.urlAfterRedirects,r.serialize(u.urlAfterRedirects),r,i).pipe((0,It.U)(d=>({...u,targetSnapshot:d}))))}(this.environmentInjector,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),(0,Mr.b)(Z=>{if(r.targetSnapshot=Z.targetSnapshot,"eager"===t.urlUpdateStrategy){if(!Z.extras.skipLocationChange){const le=t.urlHandlingStrategy.merge(Z.urlAfterRedirects,Z.rawUrl);t.setBrowserUrl(le,Z)}t.browserUrlTree=Z.urlAfterRedirects}const te=new oe(Z.id,this.urlSerializer.serialize(Z.extractedUrl),this.urlSerializer.serialize(Z.urlAfterRedirects),Z.targetSnapshot);this.events.next(te)}));if(k&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:Z,extractedUrl:te,source:le,restoredState:ye,extras:Oe}=d,qe=new g(Z,this.urlSerializer.serialize(te),le,ye);this.events.next(qe);const Je=ww(te,this.rootComponentType).snapshot;return bt(r={...d,targetSnapshot:Je,urlAfterRedirects:te,extras:{...Oe,skipLocationChange:!1,replaceUrl:!1}})}{const Z="";return this.events.next(new W(d.id,t.serializeUrl(r.extractedUrl),Z,1)),t.rawUrlTree=d.rawUrl,d.resolve(null),ma.E}}),(0,Mr.b)(d=>{const D=new ve(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(D)}),(0,It.U)(d=>r={...d,guards:bD(d.targetSnapshot,d.currentSnapshot,this.rootContexts)}),function Ow(n,e){return(0,Gn.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:u,canDeactivateChecks:d}}=t;return 0===d.length&&0===u.length?bt({...t,guardsResult:!0}):function xw(n,e,t,r){return(0,An.D)(n).pipe((0,Gn.z)(i=>function Lw(n,e,t,r,i){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?bt(u.map(D=>{const k=cf(e)??i,G=Cd(D,k);return ws(function VI(n){return n&&Ss(n.canDeactivate)}(G)?G.canDeactivate(n,e,t,r):k.runInContext(()=>G(n,e,t,r))).pipe(co())})).pipe(Zt()):bt(!0)}(i.component,i.route,t,e,r)),co(i=>!0!==i,!0))}(d,r,i,n).pipe((0,Gn.z)(D=>D&&function jI(n){return"boolean"==typeof n}(D)?function Nw(n,e,t,r){return(0,An.D)(e).pipe(ms(i=>Bp(function WI(n,e){return null!==n&&e&&e(new ui(n)),bt(!0)}(i.route.parent,r),function GI(n,e){return null!==n&&e&&e(new Ph(n)),bt(!0)}(i.route,r),function qI(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(d=>function Dw(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(d)).filter(d=>null!==d).map(d=>Yg(()=>bt(d.guards.map(k=>{const G=cf(d.node)??t,Z=Cd(k,G);return ws(function BI(n){return n&&Ss(n.canActivateChild)}(Z)?Z.canActivateChild(r,n):G.runInContext(()=>Z(r,n))).pipe(co())})).pipe(Zt())));return bt(u).pipe(Zt())}(n,i.path,t),function kw(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return bt(!0);const i=r.map(u=>Yg(()=>{const d=cf(e)??t,D=Cd(u,d);return ws(function UI(n){return n&&Ss(n.canActivate)}(D)?D.canActivate(e,n):d.runInContext(()=>D(e,n))).pipe(co())}));return bt(i).pipe(Zt())}(n,i.route,t))),co(i=>!0!==i,!0))}(r,u,n,e):bt(D)),(0,It.U)(D=>({...t,guardsResult:D})))})}(this.environmentInjector,d=>this.events.next(d)),(0,Mr.b)(d=>{if(r.guardsResult=d.guardsResult,pc(d.guardsResult))throw yd(0,d.guardsResult);const D=new $e(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot,!!d.guardsResult);this.events.next(D)}),Mi(d=>!!d.guardsResult||(t.restoreHistory(d),this.cancelNavigationTransition(d,"",3),!1)),wd(d=>{if(d.guards.canActivateChecks.length)return bt(d).pipe((0,Mr.b)(D=>{const k=new ze(D.id,this.urlSerializer.serialize(D.extractedUrl),this.urlSerializer.serialize(D.urlAfterRedirects),D.targetSnapshot);this.events.next(k)}),Rr(D=>{let k=!1;return bt(D).pipe(function Zw(n,e){return(0,Gn.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return bt(t);let u=0;return(0,An.D)(i).pipe(ms(d=>function ib(n,e,t,r){const i=n.routeConfig,u=n._resolve;return void 0!==i?.title&&!Pm(i)&&(u[Cs]=i.title),function sb(n,e,t,r){const i=function Am(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return bt({});const u={};return(0,An.D)(i).pipe((0,Gn.z)(d=>function Oh(n,e,t,r){const i=cf(e)??r,u=Cd(n,i);return ws(u.resolve?u.resolve(e,t):i.runInContext(()=>u(e,t)))}(n[d],e,t,r).pipe(co(),(0,Mr.b)(D=>{u[d]=D}))),wh(1),function od(n){return(0,It.U)(()=>n)}(u),ya(d=>Uy(d)?ma.E:ga(d)))}(u,n,e,r).pipe((0,It.U)(d=>(n._resolvedData=d,n.data=vd(n,t).resolve,i&&Pm(i)&&(n.data[Cs]=i.title),null)))}(d.route,r,n,e)),(0,Mr.b)(()=>u++),wh(1),(0,Gn.z)(d=>u===i.length?bt(t):ma.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),(0,Mr.b)({next:()=>k=!0,complete:()=>{k||(t.restoreHistory(D),this.cancelNavigationTransition(D,"",2))}}))}),(0,Mr.b)(D=>{const k=new ct(D.id,this.urlSerializer.serialize(D.extractedUrl),this.urlSerializer.serialize(D.urlAfterRedirects),D.targetSnapshot);this.events.next(k)}))}),wd(d=>{const D=k=>{const G=[];k.routeConfig?.loadComponent&&!k.routeConfig._loadedComponent&&G.push(this.configLoader.loadComponent(k.routeConfig).pipe((0,Mr.b)(Z=>{k.component=Z}),(0,It.U)(()=>{})));for(const Z of k.children)G.push(...D(Z));return G};return Jg(D(d.targetSnapshot.root)).pipe(_h(),va(1))}),wd(()=>this.afterPreactivation()),(0,It.U)(d=>{const D=function Iw(n,e,t){const r=vm(n,e._root,t?t._root:void 0);return new fm(r,e)}(t.routeReuseStrategy,d.targetSnapshot,d.currentRouterState);return r={...d,targetRouterState:D}}),(0,Mr.b)(d=>{t.currentUrlTree=d.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl),t.routerState=d.targetRouterState,"deferred"===t.urlUpdateStrategy&&(d.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,d),t.browserUrlTree=d.urlAfterRedirects)}),((n,e,t)=>(0,It.U)(r=>(new ID(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,t.routeReuseStrategy,d=>this.events.next(d)),va(1),(0,Mr.b)({next:d=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new C(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(d.targetRouterState.snapshot),d.resolve(!0)},complete:()=>{i=!0}}),al(()=>{i||u||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),ya(d=>{if(u=!0,ky(d)){bw(d)||(t.navigated=!0,t.restoreHistory(r,!0));const D=new O(r.id,this.urlSerializer.serialize(r.extractedUrl),d.message,d.cancellationCode);if(this.events.next(D),bw(d)){const k=t.urlHandlingStrategy.merge(d.url,t.rawUrlTree),G={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||Om(r.source)};t.scheduleNavigation(k,pd,null,G,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{t.restoreHistory(r,!0);const D=new Y(r.id,this.urlSerializer.serialize(r.extractedUrl),d,r.targetSnapshot??void 0);this.events.next(D);try{r.resolve(t.errorHandler(d))}catch(k){r.reject(k)}}return ma.E}))}))}cancelNavigationTransition(t,r,i){const u=new O(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(u),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Om(n){return n!==pd}let Kw=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(u=>u.outlet===Xt);return r}getResolvedTitleForRoute(t){return t.data[Cs]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=o.Yz7({token:n,factory:function(){return(0,o.f3M)(ob)},providedIn:"root"}),n})(),ob=(()=>{class n extends Kw{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(pr))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Jw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=o.Yz7({token:n,factory:function(){return(0,o.f3M)(Yw)},providedIn:"root"}),n})();class ab{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let Yw=(()=>{class n extends ab{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=o.n5z(n)))(r||n)}}(),n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const xm=new o.OlP("",{providedIn:"root",factory:()=>({})});let cb=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=o.Yz7({token:n,factory:function(){return(0,o.f3M)(ho)},providedIn:"root"}),n})(),ho=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function ub(n){throw n}function DD(n,e,t){return e.parse("/")}const Zy={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Xw={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let wr=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,o.f3M)(o.c2e),this.isNgZoneEnabled=!1,this.options=(0,o.f3M)(xm,{optional:!0})||{},this.errorHandler=this.options.errorHandler||ub,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||DD,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,o.f3M)(cb),this.routeReuseStrategy=(0,o.f3M)(Jw),this.urlCreationStrategy=(0,o.f3M)(ml),this.titleStrategy=(0,o.f3M)(Kw),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=nm((0,o.f3M)(pu,{optional:!0})??[]),this.navigationTransitions=(0,o.f3M)(pf),this.urlSerializer=(0,o.f3M)(ud),this.location=(0,o.f3M)(ce),this.isNgZoneEnabled=(0,o.f3M)(o.R0b)instanceof o.R0b&&o.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Vs,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=ww(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId??0},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),pd,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const u={replaceUrl:!0},d=i?.navigationId?i:null;if(i){const k={...i};delete k.navigationId,delete k.\u0275routerPageId,0!==Object.keys(k).length&&(u.state=k)}const D=this.parseUrl(t);this.scheduleNavigation(D,r,d,u)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(t){this.config=t.map(jy),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:u,fragment:d,queryParamsHandling:D,preserveFragment:k}=r,G=k?this.currentUrlTree.fragment:d;let Z=null;switch(D){case"merge":Z={...this.currentUrlTree.queryParams,...u};break;case"preserve":Z=this.currentUrlTree.queryParams;break;default:Z=u||null}return null!==Z&&(Z=this.removeEmptyProps(Z)),this.urlCreationStrategy.createUrlTree(i,this.routerState,this.currentUrlTree,t,Z,G??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=pc(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(u,pd,null,r)}navigate(t,r={skipLocationChange:!1}){return function lb(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new o.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...Zy}:!1===r?{...Xw}:r,pc(t))return im(this.currentUrlTree,t,i);const u=this.parseUrl(t);return im(this.currentUrlTree,u,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const u=t[i];return null!=u&&(r[i]=u),r},{})}scheduleNavigation(t,r,i,u,d){if(this.disposed)return Promise.resolve(!1);let D,k,G,Z;return d?(D=d.resolve,k=d.reject,G=d.promise):G=new Promise((te,le)=>{D=te,k=le}),Z="computed"===this.canceledNavigationResolution?i&&i.\u0275routerPageId?i.\u0275routerPageId:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:Z,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:u,resolve:D,reject:k,promise:G,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),G.catch(te=>Promise.reject(te))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const d={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",d)}else{const u={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.go(i,"",u)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const u=this.currentPageId-(this.browserPageId??this.currentPageId);0!==u?this.location.historyGo(u):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===u&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),yl=(()=>{class n{constructor(t,r,i,u,d,D){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=u,this.el=d,this.locationStrategy=D,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new ys.x;const k=d.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===k||"area"===k,this.isAnchorElement?this.subscription=t.events.subscribe(G=>{G instanceof C&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,o.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,o.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,o.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,u,d){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||i||u||d||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:(0,o.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const i=this.renderer,u=this.el.nativeElement;null!==r?i.setAttribute(u,t,r):i.removeAttribute(u,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(wr),o.Y36(vl),o.$8M("tabindex"),o.Y36(o.Qsj),o.Y36(o.SBq),o.Y36(z))},n.\u0275dir=o.lG2({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(t,r){1&t&&o.NdJ("click",function(u){return r.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&t&&o.uIk("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[o.TTD]}),n})();class t0{}let hb=(()=>{class n{constructor(t,r,i,u,d){this.router=t,this.injector=i,this.preloadingStrategy=u,this.loader=d}setUpPreloading(){this.subscription=this.router.events.pipe(Mi(t=>t instanceof C),ms(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const u of r){u.providers&&!u._injector&&(u._injector=(0,o.MMx)(u.providers,t,`Route: ${u.path}`));const d=u._injector??t,D=u._loadedInjector??d;(u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent)&&i.push(this.preloadConfig(d,u)),(u.children||u._loadedRoutes)&&i.push(this.processRoutes(D,u.children??u._loadedRoutes))}return(0,An.D)(i).pipe((0,id.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):bt(null);const u=i.pipe((0,Gn.z)(d=>null===d?bt(void 0):(r._loadedRoutes=d.routes,r._loadedInjector=d.injector,this.processRoutes(d.injector??t,d.routes))));if(r.loadComponent&&!r._loadedComponent){const d=this.loader.loadComponent(r);return(0,An.D)([u,d]).pipe((0,id.J)())}return u})}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(wr),o.LFG(o.Sil),o.LFG(o.lqb),o.LFG(t0),o.LFG(Rm))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Ky=new o.OlP("");let r0=(()=>{class n{constructor(t,r,i,u,d={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=u,this.options=d,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},d.scrollPositionRestoration=d.scrollPositionRestoration||"disabled",d.anchorScrolling=d.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof g?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof C&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Dh&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Dh(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){o.$Z()},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();var po=(()=>((po=po||{})[po.COMPLETE=0]="COMPLETE",po[po.FAILED=1]="FAILED",po[po.REDIRECTING=2]="REDIRECTING",po))();const Cl=!1;function fu(n,e){return{\u0275kind:n,\u0275providers:e}}const Jy=new o.OlP("",{providedIn:"root",factory:()=>!1});function a0(){const n=(0,o.f3M)(o.zs3);return e=>{const t=n.get(o.z2F);if(e!==t.components[0])return;const r=n.get(wr),i=n.get(c0);1===n.get(Nh)&&r.initialNavigation(),n.get(Lm,null,o.XFs.Optional)?.setUpPreloading(),n.get(Ky,null,o.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const c0=new o.OlP(Cl?"bootstrap done indicator":"",{factory:()=>new ys.x}),Nh=new o.OlP(Cl?"initial navigation":"",{providedIn:"root",factory:()=>1});function xD(){let n=[];return n=Cl?[{provide:o.Xts,multi:!0,useFactory:()=>{const e=(0,o.f3M)(wr);return()=>e.events.subscribe(t=>{console.group?.(`Router Event: ${t.constructor.name}`),console.log(function ef(n){if(!("type"in n))return`Unknown Router Event: ${n.constructor.name}`;switch(n.type){case 14:return`ActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state}, shouldActivate: ${n.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 2:return`NavigationCancel(id: ${n.id}, url: '${n.url}')`;case 16:return`NavigationSkipped(id: ${n.id}, url: '${n.url}')`;case 1:return`NavigationEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${n.id}, url: '${n.url}', error: ${n.error})`;case 0:return`NavigationStart(id: ${n.id}, url: '${n.url}')`;case 6:return`ResolveEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 5:return`ResolveStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 10:return`RouteConfigLoadEnd(path: ${n.route.path})`;case 9:return`RouteConfigLoadStart(path: ${n.route.path})`;case 4:return`RoutesRecognized(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 15:return`Scroll(anchor: '${n.anchor}', position: '${n.position?`${n.position[0]}, ${n.position[1]}`:null}')`}}(t)),console.log(t),console.groupEnd?.()})}}]:[],fu(1,n)}const Lm=new o.OlP(Cl?"router preloader":"");function ND(n){return fu(0,[{provide:Lm,useExisting:hb},{provide:t0,useExisting:n}])}const kh=!1,yc=new o.OlP(kh?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),Fm=[ce,{provide:ud,useClass:Ih},wr,sf,{provide:vl,useFactory:function s0(n){return n.routerState.root},deps:[wr]},Rm,kh?{provide:Jy,useValue:!0}:[]];function jm(){return new o.PXZ("Router",wr)}let Sd=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[Fm,kh&&r?.enableTracing?xD().\u0275providers:[],{provide:pu,multi:!0,useValue:t},{provide:yc,useFactory:yb,deps:[[wr,new o.FiY,new o.tp0]]},{provide:xm,useValue:r||{}},r?.useHash?{provide:z,useClass:X}:{provide:z,useClass:q},{provide:Ky,useFactory:()=>{const n=(0,o.f3M)(ss),e=(0,o.f3M)(o.R0b),t=(0,o.f3M)(xm),r=(0,o.f3M)(pf),i=(0,o.f3M)(ud);return t.scrollOffset&&n.setOffset(t.scrollOffset),new r0(i,r,n,e,t)}},r?.preloadingStrategy?ND(r.preloadingStrategy).\u0275providers:[],{provide:o.PXZ,multi:!0,useFactory:jm},r?.initialNavigation?Cb(r):[],[{provide:Lh,useFactory:a0},{provide:o.tb,multi:!0,useExisting:Lh}]]}}static forChild(t){return{ngModule:n,providers:[{provide:pu,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(yc,8))},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[af]}),n})();function yb(n){if(kh&&n)throw new o.vHH(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function Cb(n){return["disabled"===n.initialNavigation?fu(3,[{provide:o.ip1,multi:!0,useFactory:()=>{const e=(0,o.f3M)(wr);return()=>{e.setUpLocationChangeListener()}}},{provide:Nh,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?fu(2,[{provide:Nh,useValue:0},{provide:o.ip1,multi:!0,deps:[o.zs3],useFactory:e=>{const t=e.get(h,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(wr),u=e.get(c0);(function vc(n,e){n.events.pipe(Mi(t=>t instanceof C||t instanceof O||t instanceof Y||t instanceof W),(0,It.U)(t=>t instanceof C||t instanceof W?po.COMPLETE:t instanceof O&&(0===t.code||1===t.code)?po.REDIRECTING:po.FAILED),Mi(t=>t!==po.REDIRECTING),va(1)).subscribe(()=>{e()})})(i,()=>{r(!0)}),e.get(pf).afterPreactivation=()=>(r(!0),u.closed?bt(void 0):u),i.initialNavigation()}))}}]).\u0275providers:[]]}const Lh=new o.OlP(kh?"Router Initializer":"");var wb=y(5226),wa=y.n(wb),h0=y(2748);function Yy(n){this.message=n}(Yy.prototype=new Error).name="InvalidCharacterError";var p0=typeof window<"u"&&window.atob&&window.atob.bind(window)||function(n){var e=String(n).replace(/=+$/,"");if(e.length%4==1)throw new Yy("'atob' failed: The string to be decoded is not correctly encoded.");for(var t,r,i=0,u=0,d="";r=e.charAt(u++);~r&&(t=i%4?64*t+r:r,i++%4)?d+=String.fromCharCode(255&t>>(-2*i&6)):0)r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(r);return d};function Um(n){this.message=n}(Um.prototype=new Error).name="InvalidTokenError";const Xy="AuthUserId",ff="AuthAuthorities",eC="AuthUser",tC="AuthToken",nC="AuthUsername";let gu=(()=>{var n;class e{constructor(r){this.route=r,this.roles=[]}Signout(){localStorage.clear(),this.route.navigate([""])}getToken(){return localStorage.getItem(tC)}saveToken(r){window.localStorage.removeItem(tC),window.localStorage.setItem(tC,r)}getUsername(){return localStorage.getItem(nC)}saveUsername(r){window.localStorage.removeItem(nC),window.localStorage.setItem(nC,r)}getUserId(){return Number(localStorage.getItem(Xy))}saveUserId(r){window.localStorage.removeItem(Xy),window.localStorage.setItem(Xy,r.toString())}getUser(){return JSON.parse(localStorage.getItem(eC))}saveUser(r){window.localStorage.removeItem(eC),window.localStorage.setItem(eC,JSON.stringify(r))}getAuthorities(){return JSON.parse(localStorage.getItem(ff))}saveAuthorities(r){window.localStorage.removeItem(ff),window.localStorage.setItem(ff,JSON.stringify(r))}isLoggedIn(){return!!this.getToken()}isTokenExpired(){const r=this.getToken();if(void 0!==r){const i=function f0(n,e){if("string"!=typeof n)throw new Um("Invalid token specified");var t=!0===(e=e||{}).header?0:1;try{return JSON.parse(function Sb(n){var e=n.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw"Illegal base64url string!"}try{return decodeURIComponent(p0(e).replace(/(.)/g,function(r,i){var u=i.charCodeAt(0).toString(16).toUpperCase();return u.length<2&&(u="0"+u),"%"+u}))}catch{return p0(e)}}(n.split(".")[t]))}catch(r){throw new Um("Invalid token specified: "+r.message)}}(r);return void 0===i.exp?(console.log("decoded.exp undefined"),!1):new Date(0).setUTCSeconds(i.exp).valueOf()>(new Date).valueOf()||(window.localStorage.clear(),console.log("localStorage clear"),!1)}return!1}}return(n=e).\u0275fac=function(r){return new(r||n)(o.LFG(wr))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),e})();const mu="http://localhost:8080/api/user";let _l=(()=>{var n;class e{constructor(r){this.http=r}getAllUsers(){return this.http.get(mu+"/getallusers")}getUserById(r){return this.http.get(mu+"/getUserById/"+r)}getClients(){return this.http.get(mu+"/getClients")}getAdmins(){return this.http.get(mu+"/getAdmins")}countAdmins(){return this.http.get(mu+"/countAdmins")}countClients(){return this.http.get(mu+"/countClients")}deleteClient(r){return this.http.delete(mu+`/deleteUser/${r}`)}modifierProfil(r){return this.http.put(mu+"/updateUser",r)}getClientByName(r){return this.http.get(mu+"/getBytitre/"+r)}}return(n=e).\u0275fac=function(r){return new(r||n)(o.LFG(nu))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),e})();function Eb(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"li",29)(1,"div",11),o.O4$(),o.TgZ(2,"svg",30)(3,"style"),o._uU(4," svg { fill: #ffffff } "),o.qZA(),o._UZ(5,"path",31),o.qZA(),o.TgZ(6,"svg",32)(7,"style"),o._uU(8," svg { fill: #ffffff } "),o.qZA(),o._UZ(9,"path",33),o.qZA(),o.kcU(),o.TgZ(10,"div",14)(11,"a",34),o._uU(12,"Mon Profile"),o.qZA(),o.TgZ(13,"a",35),o._uU(14,"Modifier mon profil"),o.qZA(),o.TgZ(15,"a",36),o.NdJ("click",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.signOut())}),o._uU(16,"Se d\xe9connecter"),o.qZA()()()()}}function g0(n,e){1&n&&(o.TgZ(0,"li")(1,"a",37)(2,"b",7),o._uU(3,"Se connecter"),o.qZA()()())}let vu=(()=>{var n;class e{constructor(r,i,u){this.localSt=r,this.userSer=i,this.route=u,this.title="azure-voice-recognition",this.recognizedText="",this.x="",this.connecter=!!r.isLoggedIn()}signOut(){this.localSt.Signout(),this.connecter=!1,this.route.navigate(["login"])}startRecognition(){const r=h0.SpeechConfig.fromSubscription("f8b231305ab9465fa950e75e6234f5fc","francecentral");r.speechRecognitionLanguage="fr-FR";const i=new h0.SpeechRecognizer(r);let u;i.recognizeOnceAsync(d=>{this.recognizedText=d.text,"Accueil."==this.recognizedText?(this.route.navigate(["/home"]),console.log(this.recognizedText)):"Message."==this.recognizedText?(this.route.navigate(["/chat"]),console.log(this.recognizedText)):"Administrateur."==this.recognizedText?(this.route.navigate(["/admindashboard"]),console.log(this.recognizedText)):"Formulaire."==this.recognizedText?(this.route.navigate(["/form"]),console.log(this.recognizedText)):"Question."==this.recognizedText?(this.route.navigate(["/faq"]),console.log(this.recognizedText)):"Connecter."==this.recognizedText?(this.route.navigate(["/login"]),console.log(this.recognizedText)):"Inscrire."==this.recognizedText?(this.route.navigate(["/signup"]),console.log(this.recognizedText)):"Utilisateur."==this.recognizedText?(this.route.navigate(["/userslist"]),console.log(this.recognizedText)):"Modifier."==this.recognizedText?(this.route.navigate(["/editprofile"]),console.log(this.recognizedText)):"Profil."==this.recognizedText?(this.route.navigate(["/profile"]),console.log(this.recognizedText)):"Aide."==this.recognizedText?(this.route.navigate(["/aide"]),console.log(this.recognizedText)):wa().fire({icon:"error",title:"Invalide!",text:this.x=this.recognizedText+" n'est pas une commande, vous pouvez dire 'AIDE' pour voir la liste des commandes"})},d=>{console.log(`ERROR: ${d}`)}),u=setTimeout(()=>{i&&i.stopContinuousRecognitionAsync(()=>{console.log("Speech recognition stopped")},d=>{console.log(`ERROR: ${d}`)})},2e3)}}return(n=e).\u0275fac=function(r){return new(r||n)(o.Y36(gu),o.Y36(_l),o.Y36(wr))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-navbar"]],decls:49,vars:2,consts:[[1,"navbar","navbar-expand-lg",2,"background-color","#1e73be","height","100px"],["routerLink","/home",1,"navbar-brand"],["src","../assets/images/protext.png","alt","protech-it",2,"width","162px","height","22px","margin-left","100px"],["id","navbarSupportedContent",1,"collapse","navbar-collapse",2,"margin-top","20px","margin-left","300px"],[1,"navbar-nav","mr-auto"],[1,"nav-item","active"],["routerLink","/home"],[2,"color","white"],["href","/footer"],[2,"color","white","margin-left","30px"],[1,"nav-item","dropdown"],[1,"dropdown"],["href","https://protech-it.org/category/formations/"],[1,"fa","fa-caret-down"],[1,"dropdown-content"],["href","http://protech-it.org/category/formations/formation-web/",1,"dropdown-item"],["href","http://protech-it.org/category/formations/formation-full-stack/",1,"dropdown-item"],[1,"dropdown-divider"],["href","http://protech-it.org/category/formations/data-sciences-i-a/",1,"dropdown-item"],["href","https://protech-it.org/category/services/"],["href","http://protech-it.org/marketing-digital-2/",1,"dropdown-item"],["href","http://protech-it.org/etude-des-projets/",1,"dropdown-item"],["href","http://protech-it.org/formations/",1,"dropdown-item"],["href","http://protech-it.org/applications-et-site-web/",1,"dropdown-item"],[2,"margin-left","100px",3,"click"],["xmlns","http://www.w3.org/2000/svg","height","20","width","15","viewBox","0 0 384 512"],["fill","#ffffff","d","M192 0C139 0 96 43 96 96V256c0 53 43 96 96 96s96-43 96-96V96c0-53-43-96-96-96zM64 216c0-13.3-10.7-24-24-24s-24 10.7-24 24v40c0 89.1 66.2 162.7 152 174.4V464H120c-13.3 0-24 10.7-24 24s10.7 24 24 24h72 72c13.3 0 24-10.7 24-24s-10.7-24-24-24H216V430.4c85.8-11.7 152-85.3 152-174.4V216c0-13.3-10.7-24-24-24s-24 10.7-24 24v40c0 70.7-57.3 128-128 128s-128-57.3-128-128V216z"],["class","nav-item dropdown","style","margin-left: 120px;",4,"ngIf"],[4,"ngIf"],[1,"nav-item","dropdown",2,"margin-left","120px"],["xmlns","http://www.w3.org/2000/svg","height","1.5em","viewBox","0 0 512 512",2,"margin-right","8px"],["d","M495.9 166.6c3.2 8.7 .5 18.4-6.4 24.6l-43.3 39.4c1.1 8.3 1.7 16.8 1.7 25.4s-.6 17.1-1.7 25.4l43.3 39.4c6.9 6.2 9.6 15.9 6.4 24.6c-4.4 11.9-9.7 23.3-15.8 34.3l-4.7 8.1c-6.6 11-14 21.4-22.1 31.2c-5.9 7.2-15.7 9.6-24.5 6.8l-55.7-17.7c-13.4 10.3-28.2 18.9-44 25.4l-12.5 57.1c-2 9.1-9 16.3-18.2 17.8c-13.8 2.3-28 3.5-42.5 3.5s-28.7-1.2-42.5-3.5c-9.2-1.5-16.2-8.7-18.2-17.8l-12.5-57.1c-15.8-6.5-30.6-15.1-44-25.4L83.1 425.9c-8.8 2.8-18.6 .3-24.5-6.8c-8.1-9.8-15.5-20.2-22.1-31.2l-4.7-8.1c-6.1-11-11.4-22.4-15.8-34.3c-3.2-8.7-.5-18.4 6.4-24.6l43.3-39.4C64.6 273.1 64 264.6 64 256s.6-17.1 1.7-25.4L22.4 191.2c-6.9-6.2-9.6-15.9-6.4-24.6c4.4-11.9 9.7-23.3 15.8-34.3l4.7-8.1c6.6-11 14-21.4 22.1-31.2c5.9-7.2 15.7-9.6 24.5-6.8l55.7 17.7c13.4-10.3 28.2-18.9 44-25.4l12.5-57.1c2-9.1 9-16.3 18.2-17.8C227.3 1.2 241.5 0 256 0s28.7 1.2 42.5 3.5c9.2 1.5 16.2 8.7 18.2 17.8l12.5 57.1c15.8 6.5 30.6 15.1 44 25.4l55.7-17.7c8.8-2.8 18.6-.3 24.5 6.8c8.1 9.8 15.5 20.2 22.1 31.2l4.7 8.1c6.1 11 11.4 22.4 15.8 34.3zM256 336a80 80 0 1 0 0-160 80 80 0 1 0 0 160z"],["xmlns","http://www.w3.org/2000/svg","height","1em","viewBox","0 0 320 512"],["d","M137.4 374.6c12.5 12.5 32.8 12.5 45.3 0l128-128c9.2-9.2 11.9-22.9 6.9-34.9s-16.6-19.8-29.6-19.8L32 192c-12.9 0-24.6 7.8-29.6 19.8s-2.2 25.7 6.9 34.9l128 128z"],["routerLink","/profile",1,"dropdown-item"],["routerLink","/editprofile",1,"dropdown-item"],[1,"dropdown-item",3,"click"],["routerLink","/login","role","button","aria-pressed","true",1,"btn","btn-light",2,"margin-left","50px","background-color","#14213d","border-color","#14213d","border-radius","0%"]],template:function(r,i){1&r&&(o.TgZ(0,"nav",0)(1,"a",1),o._UZ(2,"img",2),o.qZA(),o.TgZ(3,"div",3)(4,"ul",4)(5,"li",5)(6,"a",6)(7,"b",7),o._uU(8,"Accueil"),o.qZA()()(),o.TgZ(9,"li",5)(10,"a",8)(11,"b",9),o._uU(12," A propos de nous "),o.qZA()()(),o.TgZ(13,"li",10)(14,"div",11)(15,"a",12)(16,"b",9),o._uU(17," Nos formations "),o._UZ(18,"i",13),o.qZA()(),o.TgZ(19,"div",14)(20,"a",15),o._uU(21,"formation web"),o.qZA(),o.TgZ(22,"a",16),o._uU(23,"Formation Full stack"),o.qZA(),o._UZ(24,"div",17),o.TgZ(25,"a",18),o._uU(26,"Data sciences & I.A"),o.qZA()()()(),o.TgZ(27,"li",10)(28,"div",11)(29,"a",19)(30,"b",9),o._uU(31," Nos services "),o._UZ(32,"i",13),o.qZA()(),o.TgZ(33,"div",14)(34,"a",20),o._uU(35,"Marketing digital"),o.qZA(),o.TgZ(36,"a",21),o._uU(37,"Etude des projets"),o.qZA(),o._UZ(38,"div",17),o.TgZ(39,"a",22),o._uU(40,"Formations"),o.qZA(),o.TgZ(41,"a",23),o._uU(42,"Applications et site web"),o.qZA()()()(),o.TgZ(43,"a",24),o.NdJ("click",function(){return i.startRecognition()}),o.O4$(),o.TgZ(44,"svg",25),o._UZ(45,"path",26),o.qZA()(),o.kcU(),o._UZ(46,"li"),o.YNc(47,Eb,17,0,"li",27),o.YNc(48,g0,4,0,"li",28),o.qZA()()()),2&r&&(o.xp6(47),o.Q6J("ngIf",i.connecter),o.xp6(1),o.Q6J("ngIf",!i.connecter))},dependencies:[Ti,yl],styles:[".dropdown[_ngcontent-%COMP%]{position:relative;display:inline-block}.dropdown-content[_ngcontent-%COMP%]{display:none;position:absolute;background-color:#14213d;color:#fff;min-width:160px;box-shadow:0 8px 16px #0003;padding:12px 16px;z-index:1}.dropdown[_ngcontent-%COMP%]:hover   .dropdown-content[_ngcontent-%COMP%]{display:block}a[_ngcontent-%COMP%]:link, a[_ngcontent-%COMP%]:visited{color:#fff;text-decoration:none}a[_ngcontent-%COMP%]:hover, a[_ngcontent-%COMP%]:active{text-decoration:underline}"]}),e})(),yu=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-footer"]],decls:59,vars:0,consts:[[1,"container-fluid"],[1,"row",2,"background-color","#15264a"],[1,"col-2",2,"margin-left","200px","margin-top","65px"],["href","http://protech-it.org/",1,"navbar-brand"],["src","/../assets/images/protext.png","alt","protech-it",2,"width","162px","height","22px","margin-bottom","40px"],[2,"color","white"],[1,"col-2",2,"margin-left","170px","margin-top","50px","margin-bottom","40px"],[2,"color","white","margin-bottom","30px"],[2,"margin-bottom","15px"],["href","https://protech-it.org/"],["href","https://protech-it.org/about-us/"],["href","https://protech-it.org/category/formations/"],["href","https://protech-it.org/category/formations/formation-web/"],["href","https://protech-it.org/category/formations/formation-full-stack/"],["href","https://protech-it.org/category/formations/data-sciences-i-a/"],["href","https://protech-it.org/category/services/"],["href","https://protech-it.org/marketing-digital-2/"],["href","https://protech-it.org/etude-des-projets/"],["href","https://protech-it.org/formations/"],["href","https://protech-it.org/applications-et-site-web/"],[1,"col-2",2,"margin-left","170px","margin-top","50px"],[1,"row",2,"background-color","#061431","color","white","padding-top","20px","padding-bottom","20px"],["id","x","href","https://protech-it.org/",2,"text-align","center","display","inline"]],template:function(r,i){1&r&&(o.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"a",3),o._UZ(4,"img",4),o.qZA(),o.TgZ(5,"p",5),o._uU(6," Protech-it est la bonne adresse si vous cherchez un marketing efficace ou vous cherchez une solution pour booster votre entreprise "),o.qZA()(),o.TgZ(7,"div",6)(8,"h4",7),o._uU(9,"Liens utiles"),o.qZA(),o.TgZ(10,"div",8)(11,"a",9),o._uU(12,"Accueil"),o.qZA()(),o.TgZ(13,"div",8)(14,"a",10),o._uU(15,"A propos de nous"),o.qZA()(),o.TgZ(16,"div",8)(17,"a",11),o._uU(18,"Nos formations"),o.qZA()(),o.TgZ(19,"div",8)(20,"a",12),o._uU(21,"formation web"),o.qZA()(),o.TgZ(22,"div",8)(23,"a",13),o._uU(24,"Formation Full stack"),o.qZA()(),o.TgZ(25,"div",8)(26,"a",14),o._uU(27,"Data sciences & I.A"),o.qZA()(),o.TgZ(28,"div",8)(29,"a",15),o._uU(30,"Nos Services"),o.qZA()(),o.TgZ(31,"div",8)(32,"a",16),o._uU(33,"Marketing digital"),o.qZA()(),o.TgZ(34,"div",8)(35,"a",17),o._uU(36,"Etude des projets"),o.qZA()(),o.TgZ(37,"div",8)(38,"a",18),o._uU(39,"Formations"),o.qZA()(),o.TgZ(40,"div",8)(41,"a",19),o._uU(42,"Applications et site web"),o.qZA()()(),o.TgZ(43,"div",20)(44,"h4",7),o._uU(45,"Contactez nous"),o.qZA(),o.TgZ(46,"p",5),o._uU(47," T\xe9l\xe9phone : +(216) 31597990"),o.qZA(),o.TgZ(48,"p",5),o._uU(49,"Email : contact@protech-it.org"),o.qZA(),o.TgZ(50,"p",5),o._uU(51," Adresse : IMMEUBLE les pyramides el Manzel GABES"),o.qZA(),o.TgZ(52,"p",5),o._uU(53," 4\xe9me \xe9tage "),o.qZA(),o.TgZ(54,"p",5),o._uU(55," Horaires : 9h \u2013 17H (Lun \u2013 Ven) / 9h \u2013 14H samedi"),o.qZA()()(),o.TgZ(56,"div",21)(57,"a",22),o._uU(58,"\xa9 2023 Protech-IT"),o.qZA()()())},styles:["a[_ngcontent-%COMP%]{color:#fff;text-decoration:none}"]}),e})(),Ib=(()=>{var n;class e{callus(){wa().fire("Appelez-nous sur +216 31597990 ou bien +216 28609284")}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-home"]],decls:41,vars:0,consts:[[2,"text-align","center","margin-top","20px"],["href","/faq",1,"btn","btn-danger",2,"width","100px","font-family","'Courier New', Courier, monospace"],[1,"container-fluid",2,"margin-top","20px","margin-bottom","100px"],[1,"row",2,"margin-left","50px"],[1,"col-4"],[1,"card",2,"width","25rem","height","500px"],["src","../assets/images/chat.png","alt","chat",1,"card-img-top",2,"height","1000px"],[1,"card-body",2,"text-align","center"],[1,"card-title"],[1,"card-text"],["href","/chat","role","button","aria-pressed","true",1,"btn","btn-light",2,"padding-top","5px","background-color","#14213d","margin-top","-5px","border-radius","0%"],[2,"color","white"],["src","../assets/images/form.jpg","alt","formulaire",1,"card-img-top",2,"height","295px"],[1,"card-text",2,"margin-bottom","20px","margin-top","30px"],["href","/form","role","button","aria-pressed","true",1,"btn","btn-light",2,"margin-left","20px","padding-top","5px","background-color","#14213d","margin-top","10px","border-radius","0%"],["src","../assets/images/contact-us.png","alt","phone",1,"card-img-top",2,"height","300px"],[1,"card-text",2,"margin-bottom","20px","margin-top","40px"],["role","button","aria-pressed","true",1,"btn","btn-light",2,"margin-left","20px","padding-top","5px","background-color","#14213d","margin-top","20px","border-radius","0%",3,"click"]],template:function(r,i){1&r&&(o._UZ(0,"app-navbar"),o.TgZ(1,"div",0)(2,"a",1)(3,"b"),o._uU(4,"FAQ"),o.qZA()()(),o.TgZ(5,"div",2)(6,"div",3)(7,"div",4)(8,"div",5),o._UZ(9,"img",6),o.TgZ(10,"div",7)(11,"h5",8),o._uU(12,"Chatter avec un personnel "),o.qZA(),o.TgZ(13,"p",9),o._uU(14,"Parlez en temps r\xe9el avec un des peronnels de Protech-it si vous n'avez pas trouvez votre question dans la section FAQ. Vous devez vous connecter pour utilis\xe9 cette fonctionnalit\xe9."),o.qZA(),o.TgZ(15,"a",10)(16,"b",11),o._uU(17,"Chatter!"),o.qZA()()()()(),o.TgZ(18,"div",4)(19,"div",5),o._UZ(20,"img",12),o.TgZ(21,"div",7)(22,"h5",8),o._uU(23,"Remplir le formulaire"),o.qZA(),o.TgZ(24,"p",13),o._uU(25,"Remplissez un formulaire, on vous r\xe9pond sur un e-mail au bout de 24 heures"),o.qZA(),o.TgZ(26,"a",14)(27,"b",11),o._uU(28,"Remplir le formulaire"),o.qZA()()()()(),o.TgZ(29,"div",4)(30,"div",5),o._UZ(31,"img",15),o.TgZ(32,"div",7)(33,"h5",8),o._uU(34,"T\xe9l\xe9phoner "),o.qZA(),o.TgZ(35,"p",16),o._uU(36,"Appelez-nous sur nos lignes t\xe9l\xe9phoniques"),o.qZA(),o.TgZ(37,"a",17),o.NdJ("click",function(){return i.callus()}),o.TgZ(38,"b",11),o._uU(39,"Appelez-nous"),o.qZA()()()()()()(),o._UZ(40,"app-footer"))},dependencies:[vu,yu]}),e})();var Be=y(5861),kD=y(6451),Ed=y(5363),bb=y(6063);class Tb extends ys.x{constructor(e=1/0,t=1/0,r=bb.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:u,_windowTime:d}=this;t||(r.push(e),!i&&r.push(u.now()+d)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,u=i.slice();for(let d=0;d<u.length&&!e.closed;d+=r?1:2)e.next(u[d]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,u=(i?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!i){const d=t.now();let D=0;for(let k=1;k<r.length&&r[k]<=d;k+=2)D=k;D&&r.splice(0,D+1)}}}var rC=y(3099);function m0(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,rC.B)({connector:()=>new Tb(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function Sa(n,e){return(0,Ku.m)(e)?Rr(()=>n,e):Rr(()=>n)}var Id=y(9468),Rn=y(710),Li=y(2011);y(8140);var Bh=y(9681),wf=y(4859),Mn=y(2090),Sl=y(1877);const sC=new Map,oC={activated:!1,tokenObservers:[]},xb={initialized:!1,enabled:!1};function Sr(n){return sC.get(n)||Object.assign({},oC)}function Vh(){return xb}const cC="https://content-firebaseappcheck.googleapis.com/v1",uC="exchangeDebugToken",v0={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class dC{constructor(e,t,r,i,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=i,i>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Be.Z)(function*(){t.stop();try{t.pending=new Mn.BH,yield function y0(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Mn.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const li=new Mn.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function zm(n){if(!Sr(n).activated)throw li.create("use-before-activation",{appName:n.name})}function Hm(n,e){return $m.apply(this,arguments)}function $m(){return($m=(0,Be.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const te=yield i.getHeartbeatsHeader();te&&(r["X-Firebase-Client"]=te)}const u={method:"POST",body:JSON.stringify(e),headers:r};let d,D;try{d=yield fetch(n,u)}catch(te){throw li.create("fetch-network-error",{originalErrorMessage:te?.message})}if(200!==d.status)throw li.create("fetch-status-error",{httpStatus:d.status});try{D=yield d.json()}catch(te){throw li.create("fetch-parse-error",{originalErrorMessage:te?.message})}const k=D.ttl.match(/^([\d.]+)(s)$/);if(!k||!k[2]||isNaN(Number(k[1])))throw li.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${D.ttl}`});const G=1e3*Number(k[1]),Z=Date.now();return{token:D.token,expireTimeMillis:Z+G,issuedAtTimeMillis:Z}})).apply(this,arguments)}function hC(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${cC}/projects/${t}/apps/${r}:${uC}?key=${i}`,body:{debug_token:e}}}const Nb="firebase-app-check-database",kb=1,bf="firebase-app-check-store";let zh=null;function gC(n,e){return Gm.apply(this,arguments)}function Gm(){return(Gm=(0,Be.Z)(function*(n,e){const r=(yield function fC(){return zh||(zh=new Promise((n,e)=>{try{const t=indexedDB.open(Nb,kb);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(li.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(bf,{keyPath:"compositeKey"})}}catch(t){e(li.create("storage-open",{originalErrorMessage:t?.message}))}}),zh)}()).transaction(bf,"readwrite"),u=r.objectStore(bf).put({compositeKey:n,value:e});return new Promise((d,D)=>{u.onsuccess=k=>{d()},r.onerror=k=>{var G;D(li.create("storage-set",{originalErrorMessage:null===(G=k.target.error)||void 0===G?void 0:G.message}))}})})).apply(this,arguments)}const Tf=new Sl.Yd("@firebase/app-check");function _u(n,e){return(0,Mn.hl)()?function E0(n,e){return gC(function Cu(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Tf.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function Pf(){return Vh().enabled}function T0(){return A0.apply(this,arguments)}function A0(){return(A0=(0,Be.Z)(function*(){const n=Vh();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const jb={error:"UNKNOWN_ERROR"};function P0(n){return Mn.US.encodeString(JSON.stringify(n),!1)}function Wm(n){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,Be.Z)(function*(n,e=!1){const t=n.app;zm(t);const r=Sr(t);let u,i=r.token;if(i&&!Ea(i)&&(r.token=void 0,i=void 0),!i){const k=yield r.cachedTokenPromise;k&&(Ea(k)?i=k:yield _u(t,void 0))}if(!e&&i&&Ea(i))return{token:i.token};let D,d=!1;if(Pf()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Hm(hC(t,yield T0()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),d=!0);const k=yield r.exchangeTokenPromise;return yield _u(t,k),r.token=k,{token:k.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),d=!0),i=yield Sr(t).exchangeTokenPromise}catch(k){"appCheck/throttled"===k.code?Tf.warn(k.message):Tf.error(k),u=k}return i?u?D=Ea(i)?{token:i.token,internalError:u}:M0(u):(D={token:i.token},r.token=i,yield _u(t,i)):D=M0(u),d&&function SC(n,e){const t=Sr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,D),D})).apply(this,arguments)}function CC(n){return _C.apply(this,arguments)}function _C(){return(_C=(0,Be.Z)(function*(n){const e=n.app;zm(e);const{provider:t}=Sr(e);if(Pf()){const r=yield T0(),{token:i}=yield Hm(hC(e,r),n.heartbeatServiceProvider);return{token:i}}{const{token:r}=yield t.getToken();return{token:r}}})).apply(this,arguments)}function qm(n,e){const t=Sr(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function D0(n){const{app:e}=n,t=Sr(e);let r=t.tokenRefresher;r||(r=function R0(n){const{app:e}=n;return new dC((0,Be.Z)(function*(){let r;if(r=Sr(e).token?yield Wm(n,!0):yield Wm(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Sr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},v0.RETRIAL_MIN_WAIT,v0.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Ea(n){return n.expireTimeMillis-Date.now()>0}function M0(n){return{token:P0(jb),error:n}}class Ub{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Sr(this.app);for(const t of e)qm(this.app,t.next);return Promise.resolve()}}const bC="app-check-internal";!function V0(){(0,Bh.Xd)(new wf.wA("app-check",n=>function O0(n,e){return new Ub(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(bC).initialize()})),(0,Bh.Xd)(new wf.wA(bC,n=>function Bb(n){return{getToken:e=>Wm(n,e),getLimitedUseToken:()=>CC(n),addTokenListener:e=>function wC(n,e,t,r){const{app:i}=n,u=Sr(i);if(u.tokenObservers=[...u.tokenObservers,{next:t,error:r,type:e}],u.token&&Ea(u.token)){const D=u.token;Promise.resolve().then(()=>{t({token:D.token}),D0(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>D0(n))}(n,"INTERNAL",e),removeTokenListener:e=>qm(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Bh.KN)("@firebase/app-check","0.8.0")}();class Df{constructor(){return(0,Rn.vb)("app-check")}}typeof window<"u"&&window;var G0=y(1274);const W0=new o.OlP("angularfire2.auth.use-emulator"),q0=new o.OlP("angularfire2.auth.settings"),Z0=new o.OlP("angularfire2.auth.tenant-id"),K0=new o.OlP("angularfire2.auth.langugage-code"),J0=new o.OlP("angularfire2.auth.use-device-language"),Y0=new o.OlP("angularfire.auth.persistence"),Q0=(n,e,t,r,i,u,d,D)=>(0,Li.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const k=e.runOutsideAngular(()=>n.auth());if(t&&k.useEmulator(...t),r&&(k.tenantId=r),k.languageCode=i,u&&k.useDeviceLanguage(),d)for(const[G,Z]of Object.entries(d))k.settings[G]=Z;return D&&k.setPersistence(D),k},[t,r,i,u,d,D]);let bd=(()=>{class n{constructor(t,r,i,u,d,D,k,G,Z,te,le,ye){const Oe=new ys.x,qe=bt(void 0).pipe((0,Ed.Q)(d.outsideAngular),Rr(()=>u.runOutsideAngular(()=>Promise.resolve().then(y.bind(y,1146)))),(0,It.U)(()=>(0,Li.on)(t,u,r)),(0,It.U)(Je=>Q0(Je,u,D,G,Z,te,k,le)),m0({bufferSize:1,refCount:!1}));if(kc(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=bt(null);else{qe.pipe(co()).subscribe();const Et=qe.pipe(Rr($t=>$t.getRedirectResult().then(hn=>hn,()=>null)),Rn.iC,m0({bufferSize:1,refCount:!1})),Nt=qe.pipe(Rr($t=>new gs.y(hn=>({unsubscribe:u.runOutsideAngular(()=>$t.onAuthStateChanged(On=>hn.next(On),On=>hn.error(On),()=>hn.complete()))})))),xt=qe.pipe(Rr($t=>new gs.y(hn=>({unsubscribe:u.runOutsideAngular(()=>$t.onIdTokenChanged(On=>hn.next(On),On=>hn.error(On),()=>hn.complete()))}))));this.authState=Et.pipe(Sa(Nt),(0,Id.R)(d.outsideAngular),(0,Ed.Q)(d.insideAngular)),this.user=Et.pipe(Sa(xt),(0,Id.R)(d.outsideAngular),(0,Ed.Q)(d.insideAngular)),this.idToken=this.user.pipe(Rr($t=>$t?(0,An.D)($t.getIdToken()):bt(null))),this.idTokenResult=this.user.pipe(Rr($t=>$t?(0,An.D)($t.getIdTokenResult()):bt(null))),this.credential=(0,kD.T)(Et,Oe,this.authState.pipe(Mi($t=>!$t))).pipe((0,It.U)($t=>$t?.user?$t:null),(0,Id.R)(d.outsideAngular),(0,Ed.Q)(d.insideAngular))}return(0,Li.pX)(this,qe,u,{spy:{apply:(Je,Et,Nt)=>{(Je.startsWith("signIn")||Je.startsWith("createUser"))&&Nt.then(xt=>Oe.next(xt))}}})}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(Li.Dh),o.LFG(Li.xv,8),o.LFG(o.Lbi),o.LFG(o.R0b),o.LFG(Rn.HU),o.LFG(W0,8),o.LFG(q0,8),o.LFG(Z0,8),o.LFG(K0,8),o.LFG(J0,8),o.LFG(Y0,8),o.LFG(Df,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),X0=(()=>{class n{constructor(){G0.Z.registerVersion("angularfire",Rn.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[bd]}),n})();var eS=y(4986);function Xm(){return(0,Dr.e)((n,e)=>{let t,r=!1;n.subscribe((0,zr.x)(e,i=>{const u=t;t=i,r&&e.next([u,i]),r=!0}))})}function nS(n,e){return n===e}y(1146),y(6101),y(9752);var yt,iS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Go={},wu=wu||{},en=iS||self;function ev(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function _c(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Mf="closure_uid_"+(1e9*Math.random()>>>0),ZD=0;function sS(n,e,t){return n.call.apply(n.bind,arguments)}function oS(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Is(n,e,t){return(Is=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?sS:oS).apply(null,arguments)}function Lt(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Ci(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,i,u){for(var d=Array(arguments.length-2),D=2;D<arguments.length;D++)d[D-2]=arguments[D];return e.prototype[i].apply(r,d)}}function El(){this.s=this.s,this.o=this.o}El.prototype.s=!1,El.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function qD(n){Object.prototype.hasOwnProperty.call(n,Mf)&&n[Mf]||(n[Mf]=++ZD)}(this)},El.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Td=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function TC(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Of(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(ev(r)){const i=n.length||0,u=r.length||0;n.length=i+u;for(let d=0;d<u;d++)n[i+d]=r[d]}else n.push(r)}}function di(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}di.prototype.h=function(){this.defaultPrevented=!0};var Or=function(){if(!en.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{en.addEventListener("test",()=>{},e),en.removeEventListener("test",()=>{},e)}catch{}return n}();function tv(n){return/^[\s\xa0]*$/.test(n)}function xf(){var n=en.navigator;return n&&(n=n.userAgent)?n:""}function ba(n){return-1!=xf().indexOf(n)}function AC(n){return AC[" "](n),n}AC[" "]=function(){};var RC,n,cS=ba("Opera"),Ad=ba("Trident")||ba("MSIE"),PC=ba("Edge"),DC=PC||Ad,uS=ba("Gecko")&&!(-1!=xf().toLowerCase().indexOf("webkit")&&!ba("Edge"))&&!(ba("Trident")||ba("MSIE"))&&!ba("Edge"),Qb=-1!=xf().toLowerCase().indexOf("webkit")&&!ba("Edge");function Wh(){var n=en.document;return n?n.documentMode:void 0}e:{var MC="",OC=(n=xf(),uS?/rv:([^\);]+)(\)|;)/.exec(n):PC?/Edge\/([\d\.]+)/.exec(n):Ad?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Qb?/WebKit\/(\S+)/.exec(n):cS?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(OC&&(MC=OC?OC[1]:""),Ad){var qh=Wh();if(null!=qh&&qh>parseFloat(MC)){RC=String(qh);break e}}RC=MC}var lS=en.document&&Ad&&(Wh()||parseInt(RC,10))||void 0;function Nf(n,e){if(di.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(uS){e:{try{AC(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:kf[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Nf.$.h.call(this)}}Ci(Nf,di);var kf={2:"touch",3:"pen",4:"mouse"};Nf.prototype.h=function(){Nf.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Su="closure_listenable_"+(1e6*Math.random()|0),Xb=0;function eT(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=i,this.key=++Xb,this.fa=this.ia=!1}function rv(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function iv(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function NC(n){const e={};for(const t in n)e[t]=n[t];return e}const hS="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function kC(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let u=0;u<hS.length;u++)t=hS[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function sv(n){this.src=n,this.g={},this.h=0}function LC(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],i=Td(r,e);(u=0<=i)&&Array.prototype.splice.call(r,i,1),u&&(rv(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function pS(n,e,t,r){for(var i=0;i<n.length;++i){var u=n[i];if(!u.fa&&u.listener==e&&u.capture==!!t&&u.la==r)return i}return-1}sv.prototype.add=function(n,e,t,r,i){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var d=pS(n,e,r,i);return-1<d?(e=n[d],t||(e.ia=!1)):((e=new eT(e,this.src,u,!!r,i)).ia=t,n.push(e)),e};var fS="closure_lm_"+(1e6*Math.random()|0),gS={};function tT(n,e,t,r,i){if(r&&r.once)return mS(n,e,t,r,i);if(Array.isArray(e)){for(var u=0;u<e.length;u++)tT(n,e[u],t,r,i);return null}return t=BC(t),n&&n[Su]?n.O(e,t,_c(r)?!!r.capture:!!r,i):FC(n,e,t,!1,r,i)}function FC(n,e,t,r,i,u){if(!e)throw Error("Invalid event type");var d=_c(i)?!!i.capture:!!i,D=jC(n);if(D||(n[fS]=D=new sv(n)),(t=D.add(e,t,r,d,u)).proxy)return t;if(r=function ov(){const e=nT;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)Or||(i=d),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(Zh(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function mS(n,e,t,r,i){if(Array.isArray(e)){for(var u=0;u<e.length;u++)mS(n,e[u],t,r,i);return null}return t=BC(t),n&&n[Su]?n.P(e,t,_c(r)?!!r.capture:!!r,i):FC(n,e,t,!0,r,i)}function vS(n,e,t,r,i){if(Array.isArray(e))for(var u=0;u<e.length;u++)vS(n,e[u],t,r,i);else r=_c(r)?!!r.capture:!!r,t=BC(t),n&&n[Su]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=pS(u=n.g[e],t,r,i))&&(rv(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=jC(n))&&(e=n.g[e.toString()],n=-1,e&&(n=pS(e,t,r,i)),(t=-1<n?e[n]:null)&&av(t))}function av(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[Su])LC(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Zh(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=jC(e))?(LC(t,n),0==t.h&&(t.src=null,e[fS]=null)):rv(n)}}}function Zh(n){return n in gS?gS[n]:gS[n]="on"+n}function nT(n,e){if(n.fa)n=!0;else{e=new Nf(e,this);var t=n.listener,r=n.la||n.src;n.ia&&av(n),n=t.call(r,e)}return n}function jC(n){return(n=n[fS])instanceof sv?n:null}var UC="__closure_events_fn_"+(1e9*Math.random()>>>0);function BC(n){return"function"==typeof n?n:(n[UC]||(n[UC]=function(e){return n.handleEvent(e)}),n[UC])}function Fi(){El.call(this),this.i=new sv(this),this.S=this,this.J=null}function ji(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new di(e,n);else if(e instanceof di)e.target=e.target||n;else{var i=e;kC(e=new di(r,n),i)}if(i=!0,t)for(var u=t.length-1;0<=u;u--){var d=e.g=t[u];i=Lf(d,r,!0,e)&&i}if(i=Lf(d=e.g=n,r,!0,e)&&i,i=Lf(d,r,!1,e)&&i,t)for(u=0;u<t.length;u++)i=Lf(d=e.g=t[u],r,!1,e)&&i}function Lf(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,u=0;u<e.length;++u){var d=e[u];if(d&&!d.fa&&d.capture==t){var D=d.listener,k=d.la||d.src;d.ia&&LC(n.i,d),i=!1!==D.call(k,r)&&i}}return i&&!r.defaultPrevented}Ci(Fi,El),Fi.prototype[Su]=!0,Fi.prototype.removeEventListener=function(n,e,t,r){vS(this,n,e,t,r)},Fi.prototype.N=function(){if(Fi.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)rv(t[r]);delete n.g[e],n.h--}}this.J=null},Fi.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Fi.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var VC=en.JSON.stringify;function Ff(){var n=Uf;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var zC=new class rT{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new sT,n=>n.reset());class sT{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function yS(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function oT(n){en.setTimeout(()=>{throw n},0)}let Kh,jf=!1,Uf=new class iT{constructor(){this.h=this.g=null}add(e,t){const r=zC.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},CS=()=>{const n=en.Promise.resolve(void 0);Kh=()=>{n.then(_S)}};var _S=()=>{for(var n;n=Ff();){try{n.h.call(n.g)}catch(t){oT(t)}var e=zC;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}jf=!1};function Bf(n,e){Fi.call(this),this.h=n||1,this.g=e||en,this.j=Is(this.qb,this),this.l=Date.now()}function HC(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function $C(n,e,t){if("function"==typeof n)t&&(n=Is(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Is(n.handleEvent,n)}return 2147483647<Number(e)?-1:en.setTimeout(n,e||0)}function wS(n){n.g=$C(()=>{n.g=null,n.i&&(n.i=!1,wS(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Ci(Bf,Fi),(yt=Bf.prototype).ga=!1,yt.T=null,yt.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),ji(this,"tick"),this.ga&&(HC(this),this.start()))}},yt.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},yt.N=function(){Bf.$.N.call(this),HC(this),delete this.g};class GC extends El{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:wS(this)}N(){super.N(),this.g&&(en.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Vf(n){El.call(this),this.h=n,this.g={}}Ci(Vf,El);var WC=[];function SS(n,e,t,r){Array.isArray(t)||(t&&(WC[0]=t.toString()),t=WC);for(var i=0;i<t.length;i++){var u=tT(e,t[i],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function ES(n){iv(n.g,function(e,t){this.g.hasOwnProperty(t)&&av(e)},n),n.g={}}function cv(){this.g=!0}function Jh(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function lT(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var u=i[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var d=1;d<i.length;d++)i[d]=""}}}return VC(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Vf.prototype.N=function(){Vf.$.N.call(this),ES(this)},Vf.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},cv.prototype.Ea=function(){this.g=!1},cv.prototype.info=function(){};var Il={},qC=null;function uv(){return qC=qC||new Fi}function IS(n){di.call(this,Il.Ta,n)}function Yh(n){const e=uv();ji(e,new IS(e))}function bS(n,e){di.call(this,Il.STAT_EVENT,n),this.stat=e}function bs(n){const e=uv();ji(e,new bS(e,n))}function TS(n,e){di.call(this,Il.Ua,n),this.size=e}function Pd(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return en.setTimeout(function(){n()},e)}Il.Ta="serverreachability",Ci(IS,di),Il.STAT_EVENT="statevent",Ci(bS,di),Il.Ua="timingevent",Ci(TS,di);var Qh={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},ZC={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function zf(){}function PS(){}zf.prototype.h=null;var bl,Dd={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function KC(){di.call(this,"d")}function lv(){di.call(this,"c")}function Hf(){}function $f(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new Vf(this),this.P=DS,this.V=new Bf(n=DC?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new dT}function dT(){this.i=null,this.g="",this.h=!1}Ci(KC,di),Ci(lv,di),Ci(Hf,zf),Hf.prototype.g=function(){return new XMLHttpRequest},Hf.prototype.i=function(){return{}},bl=new Hf;var DS=45e3,Gf={},dv={};function Wf(n,e,t){n.L=1,n.v=Kf(Tl(e)),n.s=t,n.S=!0,RS(n,null)}function RS(n,e){n.G=Date.now(),Xh(n),n.A=Tl(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),n_(t.i,"t",r),n.C=0,t=n.l.J,n.h=new dT,n.g=$S(n.l,t?e:null,!n.s),0<n.O&&(n.M=new GC(Is(n.Pa,n,n.g),n.O)),SS(n.U,n.g,"readystatechange",n.nb),e=n.I?NC(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),Yh(),function aT(n,e,t,r,i,u){n.info(function(){if(n.g)if(u)for(var d="",D=u.split("&"),k=0;k<D.length;k++){var G=D[k].split("=");if(1<G.length){var Z=G[0];G=G[1];var te=Z.split("_");d=2<=te.length&&"type"==te[1]?d+(Z+"=")+G+"&":d+(Z+"=redacted&")}}else d=null;else d=u;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+d})}(n.j,n.u,n.A,n.m,n.W,n.s)}function JC(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function hv(n,e,t){let i,r=!0;for(;!n.J&&n.C<t.length;){if(i=MS(n,t),i==dv){4==e&&(n.o=4,bs(14),r=!1),Jh(n.j,n.m,null,"[Incomplete Response]");break}if(i==Gf){n.o=4,bs(15),Jh(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Jh(n.j,n.m,i,null),QC(n,i)}JC(n)&&i!=dv&&i!=Gf&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,bs(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),p_(e),e.M=!0,bs(11))):(Jh(n.j,n.m,t,"[Invalid Chunked Response]"),Rd(n),Zf(n))}function MS(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?dv:(t=Number(e.substring(t,r)),isNaN(t)?Gf:(r+=1)+t>e.length?dv:(e=e.slice(r,r+t),n.C=r+t,e))}function Xh(n){n.Y=Date.now()+n.P,YC(n,n.P)}function YC(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Pd(Is(n.lb,n),e)}function qf(n){n.B&&(en.clearTimeout(n.B),n.B=null)}function Zf(n){0==n.l.H||n.J||g_(n.l,n)}function Rd(n){qf(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,HC(n.V),ES(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function QC(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||i_(t.i,n)))if(!n.K&&i_(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;f_(t),bv(t)}h_(t),bs(18)}}else t.Fa=i[1],0<t.Fa-t.V&&37500>i[2]&&t.G&&0==t.A&&!t.v&&(t.v=Pd(Is(t.ib,t),6e3));if(1>=LS(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else Ta(t,11)}else if((n.K||t.g==n)&&f_(t),!tv(e))for(i=t.Ja.g.parse(e),e=0;e<i.length;e++){let G=i[e];if(t.V=G[0],G=G[1],2==t.H)if("c"==G[0]){t.K=G[1],t.pa=G[2];const Z=G[3];null!=Z&&(t.ra=Z,t.l.info("VER="+t.ra));const te=G[4];null!=te&&(t.Ga=te,t.l.info("SVER="+t.Ga));const le=G[5];null!=le&&"number"==typeof le&&0<le&&(t.L=r=1.5*le,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const ye=n.g;if(ye){const Oe=ye.g?ye.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Oe){var u=r.i;u.g||-1==Oe.indexOf("spdy")&&-1==Oe.indexOf("quic")&&-1==Oe.indexOf("h2")||(u.j=u.l,u.g=new Set,u.h&&(xd(u,u.h),u.h=null))}if(r.F){const qe=ye.g?ye.g.getResponseHeader("X-HTTP-Session-Id"):null;qe&&(r.Da=qe,ar(r.I,r.F,qe))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var d=n;if((r=t).wa=Av(r,r.J?r.pa:null,r.Y),d.K){FS(r.i,d);var D=d,k=r.L;k&&D.setTimeout(k),D.B&&(qf(D),Xh(D)),r.g=d}else Nd(r);0<t.j.length&&ig(t)}else"stop"!=G[0]&&"close"!=G[0]||Ta(t,7);else 3==t.H&&("stop"==G[0]||"close"==G[0]?"stop"==G[0]?Ta(t,7):Iv(t):"noop"!=G[0]&&t.h&&t.h.Aa(G),t.A=0)}Yh()}catch{}}function pT(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(ev(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function OS(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(ev(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function hT(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(ev(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,u=0;u<i;u++)e.call(void 0,r[u],t&&t[u],n)}(yt=$f.prototype).setTimeout=function(n){this.P=n},yt.nb=function(n){n=n.target;const e=this.M;e&&3==Sc(n)?e.l():this.Pa(n)},yt.Pa=function(n){try{if(n==this.g)e:{const Z=Sc(this.g);var e=this.g.Ia();if(this.g.da(),!(3>Z)&&(3!=Z||DC||this.g&&(this.h.h||this.g.ja()||VS(this.g)))){this.J||4!=Z||7==e||Yh(),qf(this);var t=this.g.da();this.ca=t;t:if(JC(this)){var r=VS(this.g);n="";var i=r.length,u=4==Sc(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Rd(this),Zf(this);var d="";break t}this.h.i=new en.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,d=this.h.g}else d=this.g.ja();if(this.i=200==t,function cT(n,e,t,r,i,u,d){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+u+" "+d})}(this.j,this.u,this.A,this.m,this.W,Z,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var D,k=this.g;if((D=k.g?k.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!tv(D)){var G=D;break t}}G=null}if(!(t=G)){this.i=!1,this.o=3,bs(12),Rd(this),Zf(this);break e}Jh(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,QC(this,t)}this.S?(hv(this,Z,d),DC&&this.i&&3==Z&&(SS(this.U,this.V,"tick",this.mb),this.V.start())):(Jh(this.j,this.m,d,null),QC(this,d)),4==Z&&Rd(this),this.i&&!this.J&&(4==Z?g_(this.l,this):(this.i=!1,Xh(this)))}else(function zS(n){const e={};n=(n.g&&2<=Sc(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(tv(n[r]))continue;var t=yS(n[r]);const i=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const u=e[i]||[];e[i]=u,u.push(t)}!function dS(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<d.indexOf("Unknown SID")?(this.o=3,bs(12)):(this.o=0,bs(13)),Rd(this),Zf(this)}}}catch{}},yt.mb=function(){if(this.g){var n=Sc(this.g),e=this.g.ja();this.C<e.length&&(qf(this),hv(this,n,e),this.i&&4!=n&&Xh(this))}},yt.cancel=function(){this.J=!0,Rd(this)},yt.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function uT(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(Yh(),bs(17)),Rd(this),this.o=2,Zf(this)):YC(this,this.Y-n)};var XC=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Md(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Md){this.h=n.h,pv(this,n.j),this.s=n.s,this.g=n.g,fv(this,n.m),this.l=n.l;var e=n.i,t=new ep;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),xS(this,t),this.o=n.o}else n&&(e=String(n).match(XC))?(this.h=!1,pv(this,e[1]||"",!0),this.s=Jf(e[2]||""),this.g=Jf(e[3]||"",!0),fv(this,e[4]),this.l=Jf(e[5]||"",!0),xS(this,e[6]||"",!0),this.o=Jf(e[7]||"")):(this.h=!1,this.i=new ep(null,this.h))}function Tl(n){return new Md(n)}function pv(n,e,t){n.j=t?Jf(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function fv(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function xS(n,e,t){e instanceof ep?(n.i=e,function CT(n,e){e&&!n.j&&(Eu(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(e_(this,r),n_(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Yf(e,yT)),n.i=new ep(e,n.h))}function ar(n,e,t){n.i.set(e,t)}function Kf(n){return ar(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Jf(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Yf(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,gT),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function gT(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Md.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Yf(e,NS,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Yf(e,NS,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Yf(t,"/"==t.charAt(0)?vT:mT,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Yf(t,Qf)),n.join("")};var NS=/[#\/\?@]/g,mT=/[#\?:]/g,vT=/[#\?]/g,yT=/[#\?@]/g,Qf=/#/g;function ep(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Eu(n){n.g||(n.g=new Map,n.h=0,n.i&&function fT(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var u=n[t].substring(0,r);i=n[t].substring(r+1)}else u=n[t];e(u,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function e_(n,e){Eu(n),e=Od(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function t_(n,e){return Eu(n),e=Od(n,e),n.g.has(e)}function n_(n,e,t){e_(n,e),0<t.length&&(n.i=null,n.g.set(Od(n,e),TC(t)),n.h+=t.length)}function Od(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function r_(n){this.l=n||_T,n=en.PerformanceNavigationTiming?0<(n=en.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(en.g&&en.g.Ka&&en.g.Ka()&&en.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(yt=ep.prototype).add=function(n,e){Eu(this),this.i=null,n=Od(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},yt.forEach=function(n,e){Eu(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},yt.ta=function(){Eu(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let u=0;u<i.length;u++)t.push(e[r])}return t},yt.Z=function(n){Eu(this);let e=[];if("string"==typeof n)t_(this,n)&&(e=e.concat(this.g.get(Od(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},yt.set=function(n,e){return Eu(this),this.i=null,t_(this,n=Od(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},yt.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},yt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const u=encodeURIComponent(String(r)),d=this.Z(r);for(r=0;r<d.length;r++){var i=u;""!==d[r]&&(i+="="+encodeURIComponent(String(d[r]))),n.push(i)}}return this.i=n.join("&")};var _T=10;function kS(n){return!!n.h||!!n.g&&n.g.size>=n.j}function LS(n){return n.h?1:n.g?n.g.size:0}function i_(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function xd(n,e){n.g?n.g.add(e):n.h=e}function FS(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function gv(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return TC(n.i)}r_.prototype.cancel=function(){if(this.i=gv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var wc=class{stringify(n){return en.JSON.stringify(n,void 0)}parse(n){return en.JSON.parse(n,void 0)}};function wT(){this.g=new wc}function s_(n,e,t){const r=t||"";try{pT(n,function(i,u){let d=i;_c(i)&&(d=VC(i)),e.push(r+u+"="+encodeURIComponent(d))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function mv(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function eg(n){this.l=n.fc||null,this.j=n.ob||!1}function vv(n,e){Fi.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=tp,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ci(eg,zf),eg.prototype.g=function(){return new vv(this.l,this.j)},eg.prototype.i=function(n){return function(){return n}}({}),Ci(vv,Fi);var tp=0;function tg(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function ng(n){n.readyState=4,n.l=null,n.j=null,n.A=null,rg(n)}function rg(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(yt=vv.prototype).open=function(n,e){if(this.readyState!=tp)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,rg(this)},yt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||en).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},yt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ng(this)),this.readyState=tp},yt.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,rg(this)),this.g&&(this.readyState=3,rg(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof en.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;tg(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},yt.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?ng(this):rg(this),3==this.readyState&&tg(this)}},yt.Za=function(n){this.g&&(this.response=this.responseText=n,ng(this))},yt.Ya=function(n){this.g&&(this.response=n,ng(this))},yt.ka=function(){this.g&&ng(this)},yt.setRequestHeader=function(n,e){this.v.append(n,e)},yt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},yt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(vv.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var jS=en.JSON.parse;function Er(n){Fi.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=yv,this.L=this.M=!1}Ci(Er,Fi);var yv="",US=/^https?$/i,o_=["POST","PUT"];function c_(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Cv(n),wv(n)}function Cv(n){n.F||(n.F=!0,ji(n,"complete"),ji(n,"error"))}function _v(n){if(n.h&&typeof wu<"u"&&(!n.C[1]||4!=Sc(n)||2!=n.da()))if(n.v&&4==Sc(n))$C(n.La,0,n);else if(ji(n,"readystatechange"),4==Sc(n)){n.h=!1;try{const d=n.da();e:switch(d){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===d){var i=String(n.I).match(XC)[1]||null;!i&&en.self&&en.self.location&&(i=en.self.location.protocol.slice(0,-1)),r=!US.test(i?i.toLowerCase():"")}t=r}if(t)ji(n,"complete"),ji(n,"success");else{n.m=6;try{var u=2<Sc(n)?n.g.statusText:""}catch{u=""}n.j=u+" ["+n.da()+"]",Cv(n)}}finally{wv(n)}}}function wv(n,e){if(n.g){BS(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||ji(n,"ready");try{t.onreadystatechange=r}catch{}}}function BS(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(en.clearTimeout(n.A),n.A=null)}function Sc(n){return n.g?n.g.readyState:0}function VS(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case yv:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function Sv(n){let e="";return iv(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function Ev(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=Sv(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):ar(n,e,t))}function np(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function u_(n){this.Ga=0,this.j=[],this.l=new cv,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=np("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=np("baseRetryDelayMs",5e3,n),this.hb=np("retryDelaySeedMs",1e4,n),this.eb=np("forwardChannelMaxRetries",2,n),this.xa=np("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new r_(n&&n.concurrentRequestLimit),this.Ja=new wT,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Iv(n){if(l_(n),3==n.H){var e=n.W++,t=Tl(n.I);if(ar(t,"SID",n.K),ar(t,"RID",e),ar(t,"TYPE","terminate"),sg(n,t),(e=new $f(n,n.l,e)).L=2,e.v=Kf(Tl(t)),t=!1,en.navigator&&en.navigator.sendBeacon)try{t=en.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&en.Image&&((new Image).src=e.v,t=!0),t||(e.g=$S(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Xh(e)}HS(n)}function bv(n){n.g&&(p_(n),n.g.cancel(),n.g=null)}function l_(n){bv(n),n.u&&(en.clearTimeout(n.u),n.u=null),f_(n),n.i.cancel(),n.m&&("number"==typeof n.m&&en.clearTimeout(n.m),n.m=null)}function ig(n){if(!kS(n.i)&&!n.m){n.m=!0;var e=n.Na;Kh||CS(),jf||(Kh(),jf=!0),Uf.add(e,n),n.C=0}}function d_(n,e){var t;t=e?e.m:n.W++;const r=Tl(n.I);ar(r,"SID",n.K),ar(r,"RID",t),ar(r,"AID",n.V),sg(n,r),n.o&&n.s&&Ev(r,n.o,n.s),t=new $f(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=Qi(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),xd(n.i,t),Wf(t,r,e)}function sg(n,e){n.na&&iv(n.na,function(t,r){ar(e,r,t)}),n.h&&pT({},function(t,r){ar(e,r,t)})}function Qi(n,e,t){t=Math.min(n.j.length,t);var r=n.h?Is(n.h.Va,n.h,n):null;e:{var i=n.j;let u=-1;for(;;){const d=["count="+t];-1==u?0<t?(u=i[0].g,d.push("ofs="+u)):u=0:d.push("ofs="+u);let D=!0;for(let k=0;k<t;k++){let G=i[k].g;const Z=i[k].map;if(G-=u,0>G)u=Math.max(0,i[k].g-100),D=!1;else try{s_(Z,d,"req"+G+"_")}catch{r&&r(Z)}}if(D){r=d.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function Nd(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;Kh||CS(),jf||(Kh(),jf=!0),Uf.add(e,n),n.A=0}}function h_(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=Pd(Is(n.Ma,n),Tv(n,n.A)),n.A++,0))}function p_(n){null!=n.B&&(en.clearTimeout(n.B),n.B=null)}function ET(n){n.g=new $f(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=Tl(n.wa);ar(e,"RID","rpc"),ar(e,"SID",n.K),ar(e,"AID",n.V),ar(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&ar(e,"TO",n.qa),ar(e,"TYPE","xmlhttp"),sg(n,e),n.o&&n.s&&Ev(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=Kf(Tl(e)),t.s=null,t.S=!0,RS(t,n)}function f_(n){null!=n.v&&(en.clearTimeout(n.v),n.v=null)}function g_(n,e){var t=null;if(n.g==e){f_(n),p_(n),n.g=null;var r=2}else{if(!i_(n.i,e))return;t=e.F,FS(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var i=n.C;ji(r=uv(),new TS(r,t)),ig(n)}else Nd(n);else if(3==(i=e.o)||0==i&&0<e.ca||!(1==r&&function ST(n,e){return!(LS(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=Pd(Is(n.Na,n,e),Tv(n,n.C)),n.C++,0)))}(n,e)||2==r&&h_(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:Ta(n,5);break;case 4:Ta(n,10);break;case 3:Ta(n,6);break;default:Ta(n,2)}}function Tv(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function Ta(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=Is(n.pb,n);t||(t=new Md("//www.google.com/images/cleardot.gif"),en.location&&"http"==en.location.protocol||pv(t,"https"),Kf(t)),function Xf(n,e){const t=new cv;if(en.Image){const r=new Image;r.onload=Lt(mv,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Lt(mv,t,r,"TestLoadImage: error",!1,e),r.onabort=Lt(mv,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Lt(mv,t,r,"TestLoadImage: timeout",!1,e),en.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else bs(2);n.H=0,n.h&&n.h.za(e),HS(n),l_(n)}function HS(n){if(n.H=0,n.ma=[],n.h){const e=gv(n.i);(0!=e.length||0!=n.j.length)&&(Of(n.ma,e),Of(n.ma,n.j),n.i.i.length=0,TC(n.j),n.j.length=0),n.h.ya()}}function Av(n,e,t){var r=t instanceof Md?Tl(t):new Md(t);if(""!=r.g)e&&(r.g=e+"."+r.g),fv(r,r.m);else{var i=en.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var u=new Md(null);r&&pv(u,r),e&&(u.g=e),i&&fv(u,i),t&&(u.l=t),r=u}return e=n.Da,(t=n.F)&&e&&ar(r,t,e),ar(r,"VER",n.ra),sg(n,r),r}function $S(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Er(t&&n.Ha&&!n.va?new eg({ob:!0}):n.va)).Oa(n.J),e}function m_(){}function Pv(){if(Ad&&!(10<=Number(lS)))throw Error("Environmental error: no available transport.")}function go(n,e){Fi.call(this),this.g=new u_(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!tv(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!tv(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new kd(this)}function GS(n){KC.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Dv(){lv.call(this),this.status=1}function kd(n){this.g=n}function Hs(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function og(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(i=0;16>i;++i)r[i]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var u=n.g[3],d=(e=n.g[0])+(u^(t=n.g[1])&((i=n.g[2])^u))+r[0]+3614090360&4294967295;d=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=t+(d<<7&4294967295|d>>>25))+((d=u+(i^e&(t^i))+r[1]+3905402710&4294967295)<<12&4294967295|d>>>20))+((d=i+(t^u&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|d>>>15))+((d=t+(e^i&(u^e))+r[3]+3250441966&4294967295)<<22&4294967295|d>>>10))+((d=e+(u^t&(i^u))+r[4]+4118548399&4294967295)<<7&4294967295|d>>>25))+((d=u+(i^e&(t^i))+r[5]+1200080426&4294967295)<<12&4294967295|d>>>20))+((d=i+(t^u&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|d>>>15))+((d=t+(e^i&(u^e))+r[7]+4249261313&4294967295)<<22&4294967295|d>>>10))+((d=e+(u^t&(i^u))+r[8]+1770035416&4294967295)<<7&4294967295|d>>>25))+((d=u+(i^e&(t^i))+r[9]+2336552879&4294967295)<<12&4294967295|d>>>20))+((d=i+(t^u&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|d>>>15))+((d=t+(e^i&(u^e))+r[11]+2304563134&4294967295)<<22&4294967295|d>>>10))+((d=e+(u^t&(i^u))+r[12]+1804603682&4294967295)<<7&4294967295|d>>>25))+((d=u+(i^e&(t^i))+r[13]+4254626195&4294967295)<<12&4294967295|d>>>20))+((d=i+(t^u&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|d>>>15))+((d=t+(e^i&(u^e))+r[15]+1236535329&4294967295)<<22&4294967295|d>>>10))+((d=e+(i^u&(t^i))+r[1]+4129170786&4294967295)<<5&4294967295|d>>>27))+((d=u+(t^i&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|d>>>23))+((d=i+(e^t&(u^e))+r[11]+643717713&4294967295)<<14&4294967295|d>>>18))+((d=t+(u^e&(i^u))+r[0]+3921069994&4294967295)<<20&4294967295|d>>>12))+((d=e+(i^u&(t^i))+r[5]+3593408605&4294967295)<<5&4294967295|d>>>27))+((d=u+(t^i&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|d>>>23))+((d=i+(e^t&(u^e))+r[15]+3634488961&4294967295)<<14&4294967295|d>>>18))+((d=t+(u^e&(i^u))+r[4]+3889429448&4294967295)<<20&4294967295|d>>>12))+((d=e+(i^u&(t^i))+r[9]+568446438&4294967295)<<5&4294967295|d>>>27))+((d=u+(t^i&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|d>>>23))+((d=i+(e^t&(u^e))+r[3]+4107603335&4294967295)<<14&4294967295|d>>>18))+((d=t+(u^e&(i^u))+r[8]+1163531501&4294967295)<<20&4294967295|d>>>12))+((d=e+(i^u&(t^i))+r[13]+2850285829&4294967295)<<5&4294967295|d>>>27))+((d=u+(t^i&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|d>>>23))+((d=i+(e^t&(u^e))+r[7]+1735328473&4294967295)<<14&4294967295|d>>>18))+((d=t+(u^e&(i^u))+r[12]+2368359562&4294967295)<<20&4294967295|d>>>12))+((d=e+(t^i^u)+r[5]+4294588738&4294967295)<<4&4294967295|d>>>28))+((d=u+(e^t^i)+r[8]+2272392833&4294967295)<<11&4294967295|d>>>21))+((d=i+(u^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|d>>>16))+((d=t+(i^u^e)+r[14]+4259657740&4294967295)<<23&4294967295|d>>>9))+((d=e+(t^i^u)+r[1]+2763975236&4294967295)<<4&4294967295|d>>>28))+((d=u+(e^t^i)+r[4]+1272893353&4294967295)<<11&4294967295|d>>>21))+((d=i+(u^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|d>>>16))+((d=t+(i^u^e)+r[10]+3200236656&4294967295)<<23&4294967295|d>>>9))+((d=e+(t^i^u)+r[13]+681279174&4294967295)<<4&4294967295|d>>>28))+((d=u+(e^t^i)+r[0]+3936430074&4294967295)<<11&4294967295|d>>>21))+((d=i+(u^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|d>>>16))+((d=t+(i^u^e)+r[6]+76029189&4294967295)<<23&4294967295|d>>>9))+((d=e+(t^i^u)+r[9]+3654602809&4294967295)<<4&4294967295|d>>>28))+((d=u+(e^t^i)+r[12]+3873151461&4294967295)<<11&4294967295|d>>>21))+((d=i+(u^e^t)+r[15]+530742520&4294967295)<<16&4294967295|d>>>16))+((d=t+(i^u^e)+r[2]+3299628645&4294967295)<<23&4294967295|d>>>9))+((d=e+(i^(t|~u))+r[0]+4096336452&4294967295)<<6&4294967295|d>>>26))+((d=u+(t^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|d>>>22))+((d=i+(e^(u|~t))+r[14]+2878612391&4294967295)<<15&4294967295|d>>>17))+((d=t+(u^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|d>>>11))+((d=e+(i^(t|~u))+r[12]+1700485571&4294967295)<<6&4294967295|d>>>26))+((d=u+(t^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|d>>>22))+((d=i+(e^(u|~t))+r[10]+4293915773&4294967295)<<15&4294967295|d>>>17))+((d=t+(u^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|d>>>11))+((d=e+(i^(t|~u))+r[8]+1873313359&4294967295)<<6&4294967295|d>>>26))+((d=u+(t^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|d>>>22))+((d=i+(e^(u|~t))+r[6]+2734768916&4294967295)<<15&4294967295|d>>>17))+((d=t+(u^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|d>>>11))+((u=(e=t+((d=e+(i^(t|~u))+r[4]+4149444226&4294967295)<<6&4294967295|d>>>26))+((d=u+(t^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|d>>>22))^((i=u+((d=i+(e^(u|~t))+r[2]+718787259&4294967295)<<15&4294967295|d>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(i+(d<<21&4294967295|d>>>11))&4294967295,n.g[2]=n.g[2]+i&4294967295,n.g[3]=n.g[3]+u&4294967295}function Wn(n,e){this.h=e;for(var t=[],r=!0,i=n.length-1;0<=i;i--){var u=0|n[i];r&&u==e||(t[i]=u,r=!1)}this.g=t}(yt=Er.prototype).Oa=function(n){this.M=n},yt.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():bl.g(),this.C=function AS(n){return n.h||(n.h=n.i())}(this.u?this.u:bl),this.g.onreadystatechange=Is(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(u){return void c_(this,u)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const u of r.keys())t.set(u,r.get(u))}r=Array.from(t.keys()).find(u=>"content-type"==u.toLowerCase()),i=en.FormData&&n instanceof en.FormData,!(0<=Td(o_,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,d]of t)this.g.setRequestHeader(u,d);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{BS(this),0<this.B&&((this.L=function a_(n){return Ad&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Is(this.ua,this)):this.A=$C(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){c_(this,u)}},yt.ua=function(){typeof wu<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ji(this,"timeout"),this.abort(8))},yt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,ji(this,"complete"),ji(this,"abort"),wv(this))},yt.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),wv(this,!0)),Er.$.N.call(this)},yt.La=function(){this.s||(this.G||this.v||this.l?_v(this):this.kb())},yt.kb=function(){_v(this)},yt.isActive=function(){return!!this.g},yt.da=function(){try{return 2<Sc(this)?this.g.status:-1}catch{return-1}},yt.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},yt.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),jS(e)}},yt.Ia=function(){return this.m},yt.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(yt=u_.prototype).ra=8,yt.H=1,yt.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const i=new $f(this,this.l,n);let u=this.s;if(this.U&&(u?(u=NC(u),kC(u,this.U)):u=this.U),null!==this.o||this.O||(i.I=u,u=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Qi(this,i,e),ar(t=Tl(this.I),"RID",n),ar(t,"CVER",22),this.F&&ar(t,"X-HTTP-Session-Id",this.F),sg(this,t),u&&(this.O?e="headers="+encodeURIComponent(String(Sv(u)))+"&"+e:this.o&&Ev(t,this.o,u)),xd(this.i,i),this.bb&&ar(t,"TYPE","init"),this.P?(ar(t,"$req",e),ar(t,"SID","null"),i.aa=!0,Wf(i,t,null)):Wf(i,t,e),this.H=2}}else 3==this.H&&(n?d_(this,n):0==this.j.length||kS(this.i)||d_(this))},yt.Ma=function(){if(this.u=null,ET(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=Pd(Is(this.jb,this),n)}},yt.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,bs(10),bv(this),ET(this))},yt.ib=function(){null!=this.v&&(this.v=null,bv(this),h_(this),bs(19))},yt.pb=function(n){n?(this.l.info("Successfully pinged google.com"),bs(2)):(this.l.info("Failed to ping google.com"),bs(1))},yt.isActive=function(){return!!this.h&&this.h.isActive(this)},(yt=m_.prototype).Ba=function(){},yt.Aa=function(){},yt.za=function(){},yt.ya=function(){},yt.isActive=function(){return!0},yt.Va=function(){},Pv.prototype.g=function(n,e){return new go(n,e)},Ci(go,Fi),go.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;bs(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=Av(n,null,n.Y),ig(n)},go.prototype.close=function(){Iv(this.g)},go.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=VC(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&ig(e)},go.prototype.N=function(){this.g.h=null,delete this.j,Iv(this.g),delete this.g,go.$.N.call(this)},Ci(GS,KC),Ci(Dv,lv),Ci(kd,m_),kd.prototype.Ba=function(){ji(this.g,"a")},kd.prototype.Aa=function(n){ji(this.g,new GS(n))},kd.prototype.za=function(n){ji(this.g,new Dv)},kd.prototype.ya=function(){ji(this.g,"b")},Ci(Hs,function WS(){this.blockSize=-1}),Hs.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Hs.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,i=this.h,u=0;u<e;){if(0==i)for(;u<=t;)og(this,n,u),u+=this.blockSize;if("string"==typeof n){for(;u<e;)if(r[i++]=n.charCodeAt(u++),i==this.blockSize){og(this,r),i=0;break}}else for(;u<e;)if(r[i++]=n[u++],i==this.blockSize){og(this,r),i=0;break}}this.h=i,this.i+=e},Hs.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var qS={};function v_(n){return-128<=n&&128>n?function aS(n,e){var t=qS;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new Wn([0|e],0>e?-1:0)}):new Wn([0|n],0>n?-1:0)}function Aa(n){if(isNaN(n)||!isFinite(n))return Fd;if(0>n)return Ui(Aa(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=y_;return new Wn(e,0)}var y_=4294967296,Fd=v_(0),ag=v_(1),IT=v_(16777216);function Iu(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function Pa(n){return-1==n.h}function Ui(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new Wn(t,~n.h).add(ag)}function Rv(n,e){return n.add(Ui(e))}function Mv(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function rp(n,e){this.g=n,this.h=e}function cg(n,e){if(Iu(e))throw Error("division by zero");if(Iu(n))return new rp(Fd,Fd);if(Pa(n))return e=cg(Ui(n),e),new rp(Ui(e.g),Ui(e.h));if(Pa(e))return e=cg(n,Ui(e)),new rp(Ui(e.g),e.h);if(30<n.g.length){if(Pa(n)||Pa(e))throw Error("slowDivide_ only works with positive integers.");for(var t=ag,r=e;0>=r.X(n);)t=ZS(t),r=ZS(r);var i=jd(t,1),u=jd(r,1);for(r=jd(r,2),t=jd(t,2);!Iu(r);){var d=u.add(r);0>=d.X(n)&&(i=i.add(t),u=d),r=jd(r,1),t=jd(t,1)}return e=Rv(n,i.R(e)),new rp(i,e)}for(i=Fd;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),d=(u=Aa(t)).R(e);Pa(d)||0<d.X(n);)d=(u=Aa(t-=r)).R(e);Iu(u)&&(u=ag),i=i.add(u),n=Rv(n,d)}return new rp(i,n)}function ZS(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new Wn(t,n.h)}function jd(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,i=[],u=0;u<r;u++)i[u]=0<e?n.D(u+t)>>>e|n.D(u+t+1)<<32-e:n.D(u+t);return new Wn(i,n.h)}(yt=Wn.prototype).ea=function(){if(Pa(this))return-Ui(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:y_+r)*e,e*=y_}return n},yt.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(Iu(this))return"0";if(Pa(this))return"-"+Ui(this).toString(n);for(var e=Aa(Math.pow(n,6)),t=this,r="";;){var i=cg(t,e).g,u=((0<(t=Rv(t,i.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(Iu(t=i))return u+r;for(;6>u.length;)u="0"+u;r=u+r}},yt.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},yt.X=function(n){return Pa(n=Rv(this,n))?-1:Iu(n)?0:1},yt.abs=function(){return Pa(this)?Ui(this):this},yt.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,i=0;i<=e;i++){var u=r+(65535&this.D(i))+(65535&n.D(i)),d=(u>>>16)+(this.D(i)>>>16)+(n.D(i)>>>16);r=d>>>16,t[i]=(d&=65535)<<16|(u&=65535)}return new Wn(t,-2147483648&t[t.length-1]?-1:0)},yt.R=function(n){if(Iu(this)||Iu(n))return Fd;if(Pa(this))return Pa(n)?Ui(this).R(Ui(n)):Ui(Ui(this).R(n));if(Pa(n))return Ui(this.R(Ui(n)));if(0>this.X(IT)&&0>n.X(IT))return Aa(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<n.g.length;i++){var u=this.D(r)>>>16,d=65535&this.D(r),D=n.D(i)>>>16,k=65535&n.D(i);t[2*r+2*i]+=d*k,Mv(t,2*r+2*i),t[2*r+2*i+1]+=u*k,Mv(t,2*r+2*i+1),t[2*r+2*i+1]+=d*D,Mv(t,2*r+2*i+1),t[2*r+2*i+2]+=u*D,Mv(t,2*r+2*i+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new Wn(t,0)},yt.gb=function(n){return cg(this,n).h},yt.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new Wn(t,this.h&n.h)},yt.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new Wn(t,this.h|n.h)},yt.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new Wn(t,this.h^n.h)},Pv.prototype.createWebChannel=Pv.prototype.g,go.prototype.send=go.prototype.u,go.prototype.open=go.prototype.m,go.prototype.close=go.prototype.close,Qh.NO_ERROR=0,Qh.TIMEOUT=8,Qh.HTTP_ERROR=6,ZC.COMPLETE="complete",PS.EventType=Dd,Dd.OPEN="a",Dd.CLOSE="b",Dd.ERROR="c",Dd.MESSAGE="d",Fi.prototype.listen=Fi.prototype.O,Er.prototype.listenOnce=Er.prototype.P,Er.prototype.getLastError=Er.prototype.Sa,Er.prototype.getLastErrorCode=Er.prototype.Ia,Er.prototype.getStatus=Er.prototype.da,Er.prototype.getResponseJson=Er.prototype.Wa,Er.prototype.getResponseText=Er.prototype.ja,Er.prototype.send=Er.prototype.ha,Er.prototype.setWithCredentials=Er.prototype.Oa,Hs.prototype.digest=Hs.prototype.l,Hs.prototype.reset=Hs.prototype.reset,Hs.prototype.update=Hs.prototype.j,Wn.prototype.add=Wn.prototype.add,Wn.prototype.multiply=Wn.prototype.R,Wn.prototype.modulo=Wn.prototype.gb,Wn.prototype.compare=Wn.prototype.X,Wn.prototype.toNumber=Wn.prototype.ea,Wn.prototype.toString=Wn.prototype.toString,Wn.prototype.getBits=Wn.prototype.D,Wn.fromNumber=Aa,Wn.fromString=function Ld(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return Ui(Ld(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=Aa(Math.pow(e,8)),r=Fd,i=0;i<n.length;i+=8){var u=Math.min(8,n.length-i),d=parseInt(n.substring(i,i+u),e);8>u?(u=Aa(Math.pow(e,u)),r=r.R(u).add(Aa(d))):r=(r=r.R(t)).add(Aa(d))}return r};var KS=Go.createWebChannelTransport=function(){return new Pv},bT=Go.getStatEventTarget=function(){return uv()},C_=Go.ErrorCode=Qh,JS=Go.EventType=ZC,TT=Go.Event=Il,__=Go.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},YS=Go.FetchXmlHttpFactory=eg,ug=Go.WebChannel=PS,QS=Go.XhrIo=Er,AT=Go.Md5=Hs,ip=Go.Integer=Wn;class hi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}hi.UNAUTHENTICATED=new hi(null),hi.GOOGLE_CREDENTIALS=new hi("google-credentials-uid"),hi.FIRST_PARTY=new hi("first-party-uid"),hi.MOCK_USER=new hi("mock-user");let lg="9.23.0";const Ud=new Sl.Yd("@firebase/firestore");function XS(){return Ud.logLevel}function et(n,...e){if(Ud.logLevel<=Sl.in.DEBUG){const t=e.map(eE);Ud.debug(`Firestore (${lg}): ${n}`,...t)}}function ei(n,...e){if(Ud.logLevel<=Sl.in.ERROR){const t=e.map(eE);Ud.error(`Firestore (${lg}): ${n}`,...t)}}function Da(n,...e){if(Ud.logLevel<=Sl.in.WARN){const t=e.map(eE);Ud.warn(`Firestore (${lg}): ${n}`,...t)}}function eE(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function _t(n="Unexpected state"){const e=`FIRESTORE (${lg}) INTERNAL ASSERTION FAILED: `+n;throw ei(e),new Error(e)}function Mt(n,e){n||_t()}function pt(n,e){return n}const Me={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ge extends Mn.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class _i{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class nE{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(hi.UNAUTHENTICATED))}shutdown(){}}class QD{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=hi.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class RT{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new QD(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(hi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}function eR(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class MT{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=eR(40);for(let u=0;u<i.length;++u)r.length<20&&i[u]<t&&(r+=e.charAt(i[u]%e.length))}return r}}function tn(n,e){return n<e?-1:n>e?1:0}function sp(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}class gr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ge(Me.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ge(Me.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ge(Me.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ge(Me.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return gr.fromMillis(Date.now())}static fromDate(e){return gr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new gr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?tn(this.nanoseconds,e.nanoseconds):tn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ot{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ot(e)}static min(){return new Ot(new gr(0,0))}static max(){return new Ot(new gr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class dg{constructor(e,t,r){void 0===t?t=0:t>e.length&&_t(),void 0===r?r=e.length-t:r>e.length-t&&_t(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===dg.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof dg?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const u=e.get(i),d=t.get(i);if(u<d)return-1;if(u>d)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class In extends dg{construct(e,t,r){return new In(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ge(Me.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new In(t)}static emptyPath(){return new In([])}}const sE=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Wr extends dg{construct(e,t,r){return new Wr(e,t,r)}static isValidIdentifier(e){return sE.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Wr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Wr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const u=()=>{if(0===r.length)throw new Ge(Me.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let d=!1;for(;i<e.length;){const D=e[i];if("\\"===D){if(i+1===e.length)throw new Ge(Me.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const k=e[i+1];if("\\"!==k&&"."!==k&&"`"!==k)throw new Ge(Me.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=k,i+=2}else"`"===D?(d=!d,i++):"."!==D||d?(r+=D,i++):(u(),i++)}if(u(),d)throw new Ge(Me.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Wr(t)}static emptyPath(){return new Wr([])}}class st{constructor(e){this.path=e}static fromPath(e){return new st(In.fromString(e))}static fromName(e){return new st(In.fromString(e).popFirst(5))}static empty(){return new st(In.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===In.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return In.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new st(new In(e.slice()))}}function aE(n){return new As(n.readTime,n.key,-1)}class As{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new As(Ot.min(),st.empty(),-1)}static max(){return new As(Ot.max(),st.empty(),-1)}}function kv(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=st.comparator(n.documentKey,e.documentKey),0!==t?t:tn(n.largestBatchId,e.largestBatchId))}const w_="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class cE{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function bu(n){return Lv.apply(this,arguments)}function Lv(){return Lv=(0,Be.Z)(function*(n){if(n.code!==Me.FAILED_PRECONDITION||n.message!==w_)throw n;et("LocalStore","Unexpectedly lost primary lease")}),Lv.apply(this,arguments)}class Te{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&_t(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Te((r,i)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,i)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Te?t:Te.resolve(t)}catch(t){return Te.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Te.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Te.reject(t)}static resolve(e){return new Te((t,r)=>{t(e)})}static reject(e){return new Te((t,r)=>{r(e)})}static waitFor(e){return new Te((t,r)=>{let i=0,u=0,d=!1;e.forEach(D=>{++i,D.next(()=>{++u,d&&u===i&&t()},k=>r(k))}),d=!0,u===i&&t()})}static or(e){let t=Te.resolve(!1);for(const r of e)t=t.next(i=>i?Te.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,u)=>{r.push(t.call(this,i,u))}),this.waitFor(r)}static mapArray(e,t){return new Te((r,i)=>{const u=e.length,d=new Array(u);let D=0;for(let k=0;k<u;k++){const G=k;t(e[G]).next(Z=>{d[G]=Z,++D,D===u&&r(d)},Z=>i(Z))}})}static doWhile(e,t){return new Te((r,i)=>{const u=()=>{!0===e()?t().next(()=>{u()},i):r()};u()})}}function Ps(n){return"IndexedDbTransactionError"===n.name}let vo=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>r.writeSequenceNumber(i))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function fg(n){return null==n}function gg(n){return 0===n&&1/n==-1/0}function mg(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Al(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function _E(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Xn{constructor(e,t){this.comparator=e,this.root=t||Si.EMPTY}insert(e,t){return new Xn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Si.BLACK,null,null))}remove(e){return new Xn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Si.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ec(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ec(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ec(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ec(this.root,e,this.comparator,!0)}}class Ec{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&i&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Si{constructor(e,t,r,i,u){this.key=e,this.value=t,this.color=r??Si.RED,this.left=i??Si.EMPTY,this.right=u??Si.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,u){return new Si(e??this.key,t??this.value,r??this.color,i??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const u=r(e,i.key);return i=u<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===u?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Si.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Si.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Si.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Si.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw _t();const e=this.left.check();if(e!==this.right.check())throw _t();return e+(this.isRed()?0:1)}}Si.EMPTY=null,Si.RED=!0,Si.BLACK=!1,Si.EMPTY=new class{constructor(){this.size=0}get key(){throw _t()}get value(){throw _t()}get color(){throw _t()}get left(){throw _t()}get right(){throw _t()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Si(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class er{constructor(e){this.comparator=e,this.data=new Xn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Uv(this.data.getIterator())}getIteratorFrom(e){return new Uv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof er)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(i,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new er(this.comparator);return t.data=e,t}}class Uv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Xi{constructor(e){this.fields=e,e.sort(Wr.comparator)}static empty(){return new Xi([])}unionWith(e){let t=new er(Wr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Xi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return sp(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Bv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Ei{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Bv("Invalid base64 string: "+i):i}}(e);return new Ei(t)}static fromUint8Array(e){const t=function(r){let i="";for(let u=0;u<r.length;++u)i+=String.fromCharCode(r[u]);return i}(e);return new Ei(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return tn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ei.EMPTY_BYTE_STRING=new Ei("");const cR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function zd(n){if(Mt(!!n),"string"==typeof n){let e=0;const t=cR.exec(n);if(Mt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:qr(n.seconds),nanos:qr(n.nanos)}}function qr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Ic(n){return"string"==typeof n?Ei.fromBase64String(n):Ei.fromUint8Array(n)}function zv(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Hv(n){const e=n.mapValue.fields.__previous_value__;return zv(e)?Hv(e):e}function vg(n){const e=zd(n.mapValue.fields.__local_write_time__.timestampValue);return new gr(e.seconds,e.nanos)}class VT{constructor(e,t,r,i,u,d,D,k,G){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=D,this.longPollingOptions=k,this.useFetchStreams=G}}class Au{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Au("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Au&&e.projectId===this.projectId&&e.database===this.database}}const Pu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Pl(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?zv(n)?4:HT(n)?9007199254740991:10:_t()}function bc(n,e){if(n===e)return!0;const t=Pl(n);if(t!==Pl(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return vg(n).isEqual(vg(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const u=zd(r.timestampValue),d=zd(i.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Ic(n.bytesValue).isEqual(Ic(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return qr(r.geoPointValue.latitude)===qr(i.geoPointValue.latitude)&&qr(r.geoPointValue.longitude)===qr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return qr(r.integerValue)===qr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const u=qr(r.doubleValue),d=qr(i.doubleValue);return u===d?gg(u)===gg(d):isNaN(u)&&isNaN(d)}return!1}(n,e);case 9:return sp(n.arrayValue.values||[],e.arrayValue.values||[],bc);case 10:return function(r,i){const u=r.mapValue.fields||{},d=i.mapValue.fields||{};if(mg(u)!==mg(d))return!1;for(const D in u)if(u.hasOwnProperty(D)&&(void 0===d[D]||!bc(u[D],d[D])))return!1;return!0}(n,e);default:return _t()}var i}function cp(n,e){return void 0!==(n.values||[]).find(t=>bc(t,e))}function Tc(n,e){if(n===e)return 0;const t=Pl(n),r=Pl(e);if(t!==r)return tn(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return tn(n.booleanValue,e.booleanValue);case 2:return function(i,u){const d=qr(i.integerValue||i.doubleValue),D=qr(u.integerValue||u.doubleValue);return d<D?-1:d>D?1:d===D?0:isNaN(d)?isNaN(D)?0:-1:1}(n,e);case 3:return zT(n.timestampValue,e.timestampValue);case 4:return zT(vg(n),vg(e));case 5:return tn(n.stringValue,e.stringValue);case 6:return function(i,u){const d=Ic(i),D=Ic(u);return d.compareTo(D)}(n.bytesValue,e.bytesValue);case 7:return function(i,u){const d=i.split("/"),D=u.split("/");for(let k=0;k<d.length&&k<D.length;k++){const G=tn(d[k],D[k]);if(0!==G)return G}return tn(d.length,D.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,u){const d=tn(qr(i.latitude),qr(u.latitude));return 0!==d?d:tn(qr(i.longitude),qr(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,u){const d=i.values||[],D=u.values||[];for(let k=0;k<d.length&&k<D.length;++k){const G=Tc(d[k],D[k]);if(G)return G}return tn(d.length,D.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,u){if(i===Pu.mapValue&&u===Pu.mapValue)return 0;if(i===Pu.mapValue)return 1;if(u===Pu.mapValue)return-1;const d=i.fields||{},D=Object.keys(d),k=u.fields||{},G=Object.keys(k);D.sort(),G.sort();for(let Z=0;Z<D.length&&Z<G.length;++Z){const te=tn(D[Z],G[Z]);if(0!==te)return te;const le=Tc(d[D[Z]],k[G[Z]]);if(0!==le)return le}return tn(D.length,G.length)}(n.mapValue,e.mapValue);default:throw _t()}}function zT(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return tn(n,e);const t=zd(n),r=zd(e),i=tn(t.seconds,r.seconds);return 0!==i?i:tn(t.nanos,r.nanos)}function Hd(n){return Cg(n)}function Cg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=zd(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Ic(n.bytesValue).toBase64():"referenceValue"in n?st.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",u=!0;for(const d of r.values||[])u?u=!1:i+=",",i+=Cg(d);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let u="{",d=!0;for(const D of i)d?d=!1:u+=",",u+=`${D}:${Cg(r.fields[D])}`;return u+"}"}(n.mapValue):_t();var e}function $d(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function wE(n){return!!n&&"integerValue"in n}function Gv(n){return!!n&&"arrayValue"in n}function SE(n){return!!n&&"nullValue"in n}function EE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Wv(n){return!!n&&"mapValue"in n}function qv(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Al(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=qv(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=qv(n.arrayValue.values[t]);return e}return Object.assign({},n)}function HT(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}class es{constructor(e){this.value=e}static empty(){return new es({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Wv(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=qv(t)}setAll(e){let t=Wr.emptyPath(),r={},i=[];e.forEach((d,D)=>{if(!t.isImmediateParentOf(D)){const k=this.getFieldsMap(t);this.applyChanges(k,r,i),r={},i=[],t=D.popLast()}d?r[D.lastSegment()]=qv(d):i.push(D.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,i)}delete(e){const t=this.field(e.popLast());Wv(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return bc(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Wv(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Al(t,(i,u)=>e[i]=u);for(const i of r)delete e[i]}clone(){return new es(qv(this.value))}}function GT(n){const e=[];return Al(n.fields,(t,r)=>{const i=new Wr([t]);if(Wv(r)){const u=GT(r.mapValue).fields;if(0===u.length)e.push(i);else for(const d of u)e.push(i.child(d))}else e.push(i)}),new Xi(e)}class mr{constructor(e,t,r,i,u,d,D){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=u,this.data=d,this.documentState=D}static newInvalidDocument(e){return new mr(e,0,Ot.min(),Ot.min(),Ot.min(),es.empty(),0)}static newFoundDocument(e,t,r,i){return new mr(e,1,t,Ot.min(),r,i,0)}static newNoDocument(e,t){return new mr(e,2,t,Ot.min(),Ot.min(),es.empty(),0)}static newUnknownDocument(e,t){return new mr(e,3,t,Ot.min(),Ot.min(),es.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ot.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=es.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=es.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ot.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof mr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new mr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Gd{constructor(e,t){this.position=e,this.inclusive=t}}function WT(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const u=e[i],d=n.position[i];if(r=u.field.isKeyField()?st.comparator(st.fromName(d.referenceValue),t.key):Tc(d,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function s(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!bc(n.position[t],e.position[t]))return!1;return!0}class a{constructor(e,t="asc"){this.field=e,this.dir=t}}function c(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class l{}class f extends l{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new He(e,t,r):"array-contains"===t?new Bt(e,r):"in"===t?new Ze(e,r):"not-in"===t?new nn(e,r):"array-contains-any"===t?new vr(e,r):new f(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new rt(e,r):new mt(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Tc(t,this.value)):null!==t&&Pl(this.value)===Pl(t)&&this.matchesComparison(Tc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return _t()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class E extends l{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new E(e,t)}matches(e){return x(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function x(n){return"and"===n.op}function $(n){return function K(n){for(const e of n.filters)if(e instanceof E)return!1;return!0}(n)&&x(n)}function ee(n){if(n instanceof f)return n.field.canonicalString()+n.op.toString()+Hd(n.value);if($(n))return n.filters.map(e=>ee(e)).join(",");{const e=n.filters.map(t=>ee(t)).join(",");return`${n.op}(${e})`}}function ie(n,e){return n instanceof f?(t=n,(r=e)instanceof f&&t.op===r.op&&t.field.isEqual(r.field)&&bc(t.value,r.value)):n instanceof E?function(t,r){return r instanceof E&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,u,d)=>i&&ie(u,r.filters[d]),!0)}(n,e):void _t();var t,r}function Se(n){return n instanceof f?`${(e=n).field.canonicalString()} ${e.op} ${Hd(e.value)}`:n instanceof E?function(e){return e.op.toString()+" {"+e.getFilters().map(Se).join(" ,")+"}"}(n):"Filter";var e}class He extends f{constructor(e,t,r){super(e,t,r),this.key=st.fromName(r.referenceValue)}matches(e){const t=st.comparator(e.key,this.key);return this.matchesComparison(t)}}class rt extends f{constructor(e,t){super(e,"in",t),this.keys=At(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class mt extends f{constructor(e,t){super(e,"not-in",t),this.keys=At(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function At(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>st.fromName(r.referenceValue))}class Bt extends f{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Gv(t)&&cp(t.arrayValue,this.value)}}class Ze extends f{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&cp(this.value.arrayValue,t)}}class nn extends f{constructor(e,t){super(e,"not-in",t)}matches(e){if(cp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!cp(this.value.arrayValue,t)}}class vr extends f{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Gv(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>cp(this.value.arrayValue,r))}}class Zr{constructor(e,t=null,r=[],i=[],u=null,d=null,D=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=u,this.startAt=d,this.endAt=D,this.dt=null}}function bE(n,e=null,t=[],r=[],i=null,u=null,d=null){return new Zr(n,e,t,r,i,u,d)}function _g(n){const e=pt(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>ee(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),fg(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Hd(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Hd(r)).join(",")),e.dt=t}return e.dt}function A_(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!c(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!ie(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!s(n.startAt,e.startAt)&&s(n.endAt,e.endAt)}function TE(n){return st.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}class Wd{constructor(e,t=null,r=[],i=[],u=null,d="F",D=null,k=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=u,this.limitType=d,this.startAt=D,this.endAt=k,this.wt=null,this._t=null}}function Zv(n){return new Wd(n)}function fR(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function qT(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function PE(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function ZT(n){return null!==n.collectionGroup}function wg(n){const e=pt(n);if(null===e.wt){e.wt=[];const t=PE(e),r=qT(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new a(t)),e.wt.push(new a(Wr.keyField(),"asc"));else{let i=!1;for(const u of e.explicitOrderBy)e.wt.push(u),u.field.isKeyField()&&(i=!0);if(!i){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new a(Wr.keyField(),u))}}}return e.wt}function yo(n){const e=pt(n);if(!e._t)if("F"===e.limitType)e._t=bE(e.path,e.collectionGroup,wg(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of wg(e))t.push(new a(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new Gd(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Gd(e.startAt.position,e.startAt.inclusive):null;e._t=bE(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e._t}function KT(n,e){e.getFirstInequalityField(),PE(n);const t=n.filters.concat([e]);return new Wd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function DE(n,e,t){return new Wd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function P_(n,e){return A_(yo(n),yo(e))&&n.limitType===e.limitType}function gR(n){return`${_g(yo(n))}|lt:${n.limitType}`}function JT(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>Se(r)).join(", ")}]`),fg(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Hd(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Hd(r)).join(",")),`Target(${t})`}(yo(n))}; limitType=${n.limitType})`}function D_(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):st.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of wg(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,u,d){const D=WT(i,u,d);return i.inclusive?D<=0:D<0}(t.startAt,wg(t),r)||t.endAt&&!function(i,u,d){const D=WT(i,u,d);return i.inclusive?D>=0:D>0}(t.endAt,wg(t),r)));var t,r}function vR(n){return(e,t)=>{let r=!1;for(const i of wg(n)){const u=yx(i,e,t);if(0!==u)return u;r=r||i.field.isKeyField()}return 0}}function yx(n,e,t){const r=n.field.isKeyField()?st.comparator(e.key,t.key):function(i,u,d){const D=u.data.field(i),k=d.data.field(i);return null!==D&&null!==k?Tc(D,k):_t()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return _t()}}class qd{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,u]of r)if(this.equalsFn(i,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<i.length;u++)if(this.equalsFn(i[u][0],e))return void(i[u]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Al(this.inner,(t,r)=>{for(const[i,u]of r)e(i,u)})}isEmpty(){return _E(this.inner)}size(){return this.innerSize}}const Cx=new Xn(st.comparator);function Wo(){return Cx}const yR=new Xn(st.comparator);function R_(...n){let e=yR;for(const t of n)e=e.insert(t.key,t);return e}function CR(n){let e=yR;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Dl(){return M_()}function _R(){return M_()}function M_(){return new qd(n=>n.toString(),(n,e)=>n.isEqual(e))}const _x=new Xn(st.comparator),wx=new er(st.comparator);function pn(...n){let e=wx;for(const t of n)e=e.add(t);return e}const Sx=new er(tn);function wR(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:gg(e)?"-0":e}}function SR(n){return{integerValue:""+n}}function ER(n,e){return function b_(n){return"number"==typeof n&&Number.isInteger(n)&&!gg(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}(e)?SR(e):wR(n,e)}class RE{constructor(){this._=void 0}}function Ex(n,e,t){return n instanceof Kv?function(r,i){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&zv(i)&&(i=Hv(i)),i&&(u.fields.__previous_value__=i),{mapValue:u}}(t,e):n instanceof Sg?bR(n,e):n instanceof Eg?TR(n,e):function(r,i){const u=IR(r,i),d=AR(u)+AR(r.gt);return wE(u)&&wE(r.gt)?SR(d):wR(r.serializer,d)}(n,e)}function Ix(n,e,t){return n instanceof Sg?bR(n,e):n instanceof Eg?TR(n,e):t}function IR(n,e){return n instanceof Jv?wE(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Kv extends RE{}class Sg extends RE{constructor(e){super(),this.elements=e}}function bR(n,e){const t=PR(e);for(const r of n.elements)t.some(i=>bc(i,r))||t.push(r);return{arrayValue:{values:t}}}class Eg extends RE{constructor(e){super(),this.elements=e}}function TR(n,e){let t=PR(e);for(const r of n.elements)t=t.filter(i=>!bc(i,r));return{arrayValue:{values:t}}}class Jv extends RE{constructor(e,t){super(),this.serializer=e,this.gt=t}}function AR(n){return qr(n.integerValue||n.doubleValue)}function PR(n){return Gv(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Tx{constructor(e,t){this.version=e,this.transformResults=t}}class xr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new xr}static exists(e){return new xr(void 0,e)}static updateTime(e){return new xr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ME(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class OE{}function DR(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Qv(n.key,xr.none()):new Yv(n.key,n.data,xr.none());{const t=n.data,r=es.empty();let i=new er(Wr.comparator);for(let u of e.fields)if(!i.has(u)){let d=t.field(u);null===d&&u.length>1&&(u=u.popLast(),d=t.field(u)),null===d?r.delete(u):r.set(u,d),i=i.add(u)}return new Zd(n.key,r,new Xi(i.toArray()),xr.none())}}function Ax(n,e,t){n instanceof Yv?function(r,i,u){const d=r.value.clone(),D=OR(r.fieldTransforms,i,u.transformResults);d.setAll(D),i.convertToFoundDocument(u.version,d).setHasCommittedMutations()}(n,e,t):n instanceof Zd?function(r,i,u){if(!ME(r.precondition,i))return void i.convertToUnknownDocument(u.version);const d=OR(r.fieldTransforms,i,u.transformResults),D=i.data;D.setAll(MR(r)),D.setAll(d),i.convertToFoundDocument(u.version,D).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function x_(n,e,t,r){return n instanceof Yv?function(i,u,d,D){if(!ME(i.precondition,u))return d;const k=i.value.clone(),G=xR(i.fieldTransforms,D,u);return k.setAll(G),u.convertToFoundDocument(u.version,k).setHasLocalMutations(),null}(n,e,t,r):n instanceof Zd?function(i,u,d,D){if(!ME(i.precondition,u))return d;const k=xR(i.fieldTransforms,D,u),G=u.data;return G.setAll(MR(i)),G.setAll(k),u.convertToFoundDocument(u.version,G).setHasLocalMutations(),null===d?null:d.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(Z=>Z.field))}(n,e,t,r):(d=t,ME(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d);var u,d}function Px(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),u=IR(r.transform,i||null);null!=u&&(null===t&&(t=es.empty()),t.set(r.field,u))}return t||null}function RR(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&sp(t,r,(i,u)=>function bx(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Sg&&r instanceof Sg||t instanceof Eg&&r instanceof Eg?sp(t.elements,r.elements,bc):t instanceof Jv&&r instanceof Jv?bc(t.gt,r.gt):t instanceof Kv&&r instanceof Kv);var t,r}(i,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Yv extends OE{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Zd extends OE{constructor(e,t,r,i,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function MR(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function OR(n,e,t){const r=new Map;Mt(n.length===t.length);for(let i=0;i<t.length;i++){const u=n[i],d=u.transform,D=e.data.field(u.field);r.set(u.field,Ix(d,D,t[i]))}return r}function xR(n,e,t){const r=new Map;for(const i of n){const u=i.transform,d=t.data.field(i.field);r.set(i.field,Ex(u,d,e))}return r}class Qv extends OE{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class QT extends OE{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class XT{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const u=this.mutations[i];u.key.isEqual(e.key)&&Ax(u,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=x_(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=x_(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=_R();return this.mutations.forEach(i=>{const u=e.get(i.key),d=u.overlayedDocument;let D=this.applyToLocalView(d,u.mutatedFields);D=t.has(i.key)?null:D;const k=DR(d,D);null!==k&&r.set(i.key,k),d.isValidDocument()||d.convertToNoDocument(Ot.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),pn())}isEqual(e){return this.batchId===e.batchId&&sp(this.mutations,e.mutations,(t,r)=>RR(t,r))&&sp(this.baseMutations,e.baseMutations,(t,r)=>RR(t,r))}}class eA{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Mt(e.mutations.length===r.length);let i=_x;const u=e.mutations;for(let d=0;d<u.length;d++)i=i.insert(u[d].key,r[d].version);return new eA(e,t,r,i)}}class tA{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Rx{constructor(e,t){this.count=e,this.unchangedNames=t}}var Ii,xn;function kR(n){if(void 0===n)return ei("GRPC error has no .code"),Me.UNKNOWN;switch(n){case Ii.OK:return Me.OK;case Ii.CANCELLED:return Me.CANCELLED;case Ii.UNKNOWN:return Me.UNKNOWN;case Ii.DEADLINE_EXCEEDED:return Me.DEADLINE_EXCEEDED;case Ii.RESOURCE_EXHAUSTED:return Me.RESOURCE_EXHAUSTED;case Ii.INTERNAL:return Me.INTERNAL;case Ii.UNAVAILABLE:return Me.UNAVAILABLE;case Ii.UNAUTHENTICATED:return Me.UNAUTHENTICATED;case Ii.INVALID_ARGUMENT:return Me.INVALID_ARGUMENT;case Ii.NOT_FOUND:return Me.NOT_FOUND;case Ii.ALREADY_EXISTS:return Me.ALREADY_EXISTS;case Ii.PERMISSION_DENIED:return Me.PERMISSION_DENIED;case Ii.FAILED_PRECONDITION:return Me.FAILED_PRECONDITION;case Ii.ABORTED:return Me.ABORTED;case Ii.OUT_OF_RANGE:return Me.OUT_OF_RANGE;case Ii.UNIMPLEMENTED:return Me.UNIMPLEMENTED;case Ii.DATA_LOSS:return Me.DATA_LOSS;default:return _t()}}(xn=Ii||(Ii={}))[xn.OK=0]="OK",xn[xn.CANCELLED=1]="CANCELLED",xn[xn.UNKNOWN=2]="UNKNOWN",xn[xn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",xn[xn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",xn[xn.NOT_FOUND=5]="NOT_FOUND",xn[xn.ALREADY_EXISTS=6]="ALREADY_EXISTS",xn[xn.PERMISSION_DENIED=7]="PERMISSION_DENIED",xn[xn.UNAUTHENTICATED=16]="UNAUTHENTICATED",xn[xn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",xn[xn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",xn[xn.ABORTED=10]="ABORTED",xn[xn.OUT_OF_RANGE=11]="OUT_OF_RANGE",xn[xn.UNIMPLEMENTED=12]="UNIMPLEMENTED",xn[xn.INTERNAL=13]="INTERNAL",xn[xn.UNAVAILABLE=14]="UNAVAILABLE",xn[xn.DATA_LOSS=15]="DATA_LOSS";class nA{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return xE}static getOrCreateInstance(){return null===xE&&(xE=new nA),xE}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let xE=null;const Mx=new ip([4294967295,4294967295],0);function FR(n){const e=function LR(){return new TextEncoder}().encode(n),t=new AT;return t.update(e),new Uint8Array(t.digest())}function jR(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new ip([t,r],0),new ip([i,u],0)]}class rA{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new N_(`Invalid padding: ${t}`);if(r<0)throw new N_(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new N_(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new N_(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=ip.fromNumber(this.It)}Et(e,t,r){let i=e.add(t.multiply(ip.fromNumber(r)));return 1===i.compare(Mx)&&(i=new ip([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=FR(e),[r,i]=jR(t);for(let u=0;u<this.hashCount;u++){const d=this.Et(r,i,u);if(!this.At(d))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),d=new rA(u,i,t);return r.forEach(D=>d.insert(D)),d}insert(e){if(0===this.It)return;const t=FR(e),[r,i]=jR(t);for(let u=0;u<this.hashCount;u++){const d=this.Et(r,i,u);this.Rt(d)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class N_ extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class k_{constructor(e,t,r,i,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,L_.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new k_(Ot.min(),i,new Xn(tn),Wo(),pn())}}class L_{constructor(e,t,r,i,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new L_(r,t,pn(),pn(),pn())}}class NE{constructor(e,t,r,i){this.Pt=e,this.removedTargetIds=t,this.key=r,this.bt=i}}class UR{constructor(e,t){this.targetId=e,this.Vt=t}}class BR{constructor(e,t,r=Ei.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class VR{constructor(){this.St=0,this.Dt=HR(),this.Ct=Ei.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=pn(),t=pn(),r=pn();return this.Dt.forEach((i,u)=>{switch(u){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:_t()}}),new L_(this.Ct,this.xt,e,t,r)}Ft(){this.Nt=!1,this.Dt=HR()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class Ox{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Wo(),this.zt=zR(),this.Wt=new Xn(tn)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const r=this.Zt(t);switch(e.state){case 0:this.te(t)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(t);break;case 3:this.te(t)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),r.$t(e.resumeToken));break;default:_t()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((r,i)=>{this.te(i)&&t(i)})}ne(e){var t;const r=e.targetId,i=e.Vt.count,u=this.se(r);if(u){const d=u.target;if(TE(d))if(0===i){const D=new st(d.path);this.Yt(r,D,mr.newNoDocument(D,Ot.min()))}else Mt(1===i);else{const D=this.ie(r);if(D!==i){const k=this.re(e,D);0!==k&&(this.ee(r),this.Wt=this.Wt.insert(r,2===k?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=nA.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(G,Z,te){var le,ye,Oe,qe,Je,Et;const Nt={localCacheCount:Z,existenceFilterCount:te.count},xt=te.unchangedNames;return xt&&(Nt.bloomFilter={applied:0===G,hashCount:null!==(le=xt?.hashCount)&&void 0!==le?le:0,bitmapLength:null!==(qe=null===(Oe=null===(ye=xt?.bits)||void 0===ye?void 0:ye.bitmap)||void 0===Oe?void 0:Oe.length)&&void 0!==qe?qe:0,padding:null!==(Et=null===(Je=xt?.bits)||void 0===Je?void 0:Je.padding)&&void 0!==Et?Et:0}),Nt}(k,D,e.Vt))}}}}re(e,t){const{unchangedNames:r,count:i}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:u="",padding:d=0},hashCount:D=0}=r;let k,G;try{k=Ic(u).toUint8Array()}catch(Z){if(Z instanceof Bv)return Da("Decoding the base64 bloom filter in existence filter failed ("+Z.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw Z}try{G=new rA(k,d,D)}catch(Z){return Da(Z instanceof N_?"BloomFilter error: ":"Applying bloom filter failed: ",Z),1}return 0===G.It?1:i!==t-this.oe(e.targetId,G)?2:0}oe(e,t){const r=this.Gt.getRemoteKeysForTarget(e);let i=0;return r.forEach(u=>{const d=this.Gt.ue(),D=`projects/${d.projectId}/databases/${d.database}/documents/${u.path.canonicalString()}`;t.vt(D)||(this.Yt(e,u,null),i++)}),i}ce(e){const t=new Map;this.Qt.forEach((u,d)=>{const D=this.se(d);if(D){if(u.current&&TE(D.target)){const k=new st(D.target.path);null!==this.jt.get(k)||this.ae(d,k)||this.Yt(d,k,mr.newNoDocument(k,e))}u.Mt&&(t.set(d,u.Ot()),u.Ft())}});let r=pn();this.zt.forEach((u,d)=>{let D=!0;d.forEachWhile(k=>{const G=this.se(k);return!G||"TargetPurposeLimboResolution"===G.purpose||(D=!1,!1)}),D&&(r=r.add(u))}),this.jt.forEach((u,d)=>d.setReadTime(e));const i=new k_(e,t,this.Wt,this.jt,r);return this.jt=Wo(),this.zt=zR(),this.Wt=new Xn(tn),i}Jt(e,t){if(!this.te(e))return;const r=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,r),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,r){if(!this.te(e))return;const i=this.Zt(e);this.ae(e,t)?i.Bt(t,1):i.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),r&&(this.jt=this.jt.insert(t,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new VR,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new er(tn),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||et("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new VR),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function zR(){return new Xn(st.comparator)}function HR(){return new Xn(st.comparator)}const xx=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),Nx=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),kx=(()=>({and:"AND",or:"OR"}))();class Lx{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function iA(n,e){return n.useProto3Json||fg(e)?e:{value:e}}function Xv(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function $R(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Fx(n,e){return Xv(n,e.toTimestamp())}function pi(n){return Mt(!!n),Ot.fromTimestamp(function(e){const t=zd(e);return new gr(t.seconds,t.nanos)}(n))}function sA(n,e){return(t=n,new In(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function GR(n){const e=In.fromString(n);return Mt(e1(e)),e}function F_(n,e){return sA(n.databaseId,e.path)}function Rl(n,e){const t=GR(e);if(t.get(1)!==n.databaseId.projectId)throw new Ge(Me.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ge(Me.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new st(qR(t))}function oA(n,e){return sA(n.databaseId,e)}function j_(n){return new In(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function qR(n){return Mt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function ZR(n,e,t){return{name:F_(n,e),fields:t.value.mapValue.fields}}function JR(n,e){return{documents:[oA(n,e.path)]}}function cA(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=oA(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=oA(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(k){if(0!==k.length)return XR(E.create(k,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const u=function(k){if(0!==k.length)return k.map(G=>{return{field:up((Z=G).field),direction:zx(Z.dir)};var Z})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=iA(n,e.limit);var D,k;return null!==d&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt={before:(D=e.startAt).inclusive,values:D.position}),e.endAt&&(t.structuredQuery.endAt={before:!(k=e.endAt).inclusive,values:k.position}),t}function YR(n){let e=function WR(n){const e=GR(n);return 4===e.length?In.emptyPath():qR(e)}(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Mt(1===r);const Z=t.from[0];Z.allDescendants?i=Z.collectionId:e=e.child(Z.collectionId)}let u=[];t.where&&(u=function(Z){const te=QR(Z);return te instanceof E&&$(te)?te.getFilters():[te]}(t.where));let d=[];t.orderBy&&(d=t.orderBy.map(Z=>{return new a(ey((te=Z).field),function(le){switch(le){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(te.direction));var te}));let D=null;t.limit&&(D=function(Z){let te;return te="object"==typeof Z?Z.value:Z,fg(te)?null:te}(t.limit));let k=null;var Z;t.startAt&&(k=new Gd((Z=t.startAt).values||[],!!Z.before));let G=null;return t.endAt&&(G=function(Z){return new Gd(Z.values||[],!Z.before)}(t.endAt)),function pR(n,e,t,r,i,u,d,D){return new Wd(n,e,t,r,i,u,d,D)}(e,i,d,u,D,"F",k,G)}function QR(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=ey(e.unaryFilter.field);return f.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=ey(e.unaryFilter.field);return f.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ey(e.unaryFilter.field);return f.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=ey(e.unaryFilter.field);return f.create(u,"!=",{nullValue:"NULL_VALUE"});default:return _t()}}(n):void 0!==n.fieldFilter?f.create(ey((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return _t()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return E.create(e.compositeFilter.filters.map(t=>QR(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return _t()}}(e.compositeFilter.op))}(n):_t();var e}function zx(n){return xx[n]}function Hx(n){return Nx[n]}function $x(n){return kx[n]}function up(n){return{fieldPath:n.canonicalString()}}function ey(n){return Wr.fromServerFormat(n.fieldPath)}function XR(n){return n instanceof f?function(e){if("=="===e.op){if(EE(e.value))return{unaryFilter:{field:up(e.field),op:"IS_NAN"}};if(SE(e.value))return{unaryFilter:{field:up(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(EE(e.value))return{unaryFilter:{field:up(e.field),op:"IS_NOT_NAN"}};if(SE(e.value))return{unaryFilter:{field:up(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:up(e.field),op:Hx(e.op),value:e.value}}}(n):n instanceof E?function(e){const t=e.getFilters().map(r=>XR(r));return 1===t.length?t[0]:{compositeFilter:{op:$x(e.op),filters:t}}}(n):_t()}function Gx(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function e1(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Kd{constructor(e,t,r,i,u=Ot.min(),d=Ot.min(),D=Ei.EMPTY_BYTE_STRING,k=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=D,this.expectedCount=k}withSequenceNumber(e){return new Kd(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Kd(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Kd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Kd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class t1{constructor(e){this.fe=e}}function uA(n){const e=YR({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?DE(e,e.limit,"L"):e}class Ag{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(qr(e.integerValue));else if("doubleValue"in e){const r=qr(e.doubleValue);isNaN(r)?this.ye(t,13):(this.ye(t,15),gg(r)?t.pe(0):t.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie(`${r.seconds||""}`),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(Ic(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(t,45),t.pe(r.latitude||0),t.pe(r.longitude||0)}else"mapValue"in e?HT(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):_t()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const r=e.fields||{};this.ye(t,55);for(const i of Object.keys(r))this.Te(i,t),this.me(r[i],t)}Pe(e,t){const r=e.values||[];this.ye(t,50);for(const i of r)this.me(i,t)}ve(e,t){this.ye(t,37),st.fromName(e).path.forEach(r=>{this.ye(t,60),this.be(r,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}Ag.Ve=new Ag;class eN{constructor(){this.rn=new gA}addToCollectionParentIndex(e,t){return this.rn.add(t),Te.resolve()}getCollectionParents(e,t){return Te.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return Te.resolve()}deleteFieldIndex(e,t){return Te.resolve()}getDocumentsMatchingTarget(e,t){return Te.resolve(null)}getIndexType(e,t){return Te.resolve(0)}getFieldIndexes(e,t){return Te.resolve([])}getNextCollectionGroupToUpdate(e){return Te.resolve(null)}getMinOffset(e,t){return Te.resolve(As.min())}getMinOffsetFromCollectionGroup(e,t){return Te.resolve(As.min())}updateCollectionGroup(e,t,r){return Te.resolve()}updateIndexEntries(e,t){return Te.resolve()}}class gA{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new er(In.comparator),u=!i.has(r);return this.index[t]=i.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new er(In.comparator)).toArray()}}class $s{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new $s(e,$s.DEFAULT_COLLECTION_PERCENTILE,$s.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}$s.DEFAULT_COLLECTION_PERCENTILE=10,$s.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,$s.DEFAULT=new $s(41943040,$s.DEFAULT_COLLECTION_PERCENTILE,$s.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),$s.DISABLED=new $s(-1,0,0);class Dg{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new Dg(0)}static Mn(){return new Dg(-1)}}class E1{constructor(){this.changes=new qd(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,mr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?Te.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class cN{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class P1{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&x_(r.mutation,i,Xi.empty(),gr.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,pn()).next(()=>r))}getLocalViewOfDocuments(e,t,r=pn()){const i=Dl();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(u=>{let d=R_();return u.forEach((D,k)=>{d=d.insert(D,k.overlayedDocument)}),d}))}getOverlayedDocuments(e,t){const r=Dl();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,pn()))}populateOverlays(e,t,r){const i=[];return r.forEach(u=>{t.has(u)||i.push(u)}),this.documentOverlayCache.getOverlays(e,i).next(u=>{u.forEach((d,D)=>{t.set(d,D)})})}computeViews(e,t,r,i){let u=Wo();const d=M_(),D=M_();return t.forEach((k,G)=>{const Z=r.get(G.key);i.has(G.key)&&(void 0===Z||Z.mutation instanceof Zd)?u=u.insert(G.key,G):void 0!==Z?(d.set(G.key,Z.mutation.getFieldMask()),x_(Z.mutation,G,Z.mutation.getFieldMask(),gr.now())):d.set(G.key,Xi.empty())}),this.recalculateAndSaveOverlays(e,u).next(k=>(k.forEach((G,Z)=>d.set(G,Z)),t.forEach((G,Z)=>{var te;return D.set(G,new cN(Z,null!==(te=d.get(G))&&void 0!==te?te:null))}),D))}recalculateAndSaveOverlays(e,t){const r=M_();let i=new Xn((d,D)=>d-D),u=pn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(d=>{for(const D of d)D.keys().forEach(k=>{const G=t.get(k);if(null===G)return;let Z=r.get(k)||Xi.empty();Z=D.applyToLocalView(G,Z),r.set(k,Z);const te=(i.get(D.batchId)||pn()).add(k);i=i.insert(D.batchId,te)})}).next(()=>{const d=[],D=i.getReverseIterator();for(;D.hasNext();){const k=D.getNext(),G=k.key,Z=k.value,te=_R();Z.forEach(le=>{if(!u.has(le)){const ye=DR(t.get(le),r.get(le));null!==ye&&te.set(le,ye),u=u.add(le)}}),d.push(this.documentOverlayCache.saveOverlays(e,G,te))}return Te.waitFor(d)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return st.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):ZT(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(u=>{const d=i-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-u.size):Te.resolve(Dl());let D=-1,k=u;return d.next(G=>Te.forEach(G,(Z,te)=>(D<te.largestBatchId&&(D=te.largestBatchId),u.get(Z)?Te.resolve():this.remoteDocumentCache.getEntry(e,Z).next(le=>{k=k.insert(Z,le)}))).next(()=>this.populateOverlays(e,G,u)).next(()=>this.computeViews(e,k,G,pn())).next(Z=>({batchId:D,changes:CR(Z)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new st(t)).next(r=>{let i=R_();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let u=R_();return this.indexManager.getCollectionParents(e,i).next(d=>Te.forEach(d,D=>{const k=(G=t,Z=D.child(i),new Wd(Z,null,G.explicitOrderBy.slice(),G.filters.slice(),G.limit,G.limitType,G.startAt,G.endAt));var G,Z;return this.getDocumentsMatchingCollectionQuery(e,k,r).next(G=>{G.forEach((Z,te)=>{u=u.insert(Z,te)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(u=>(i=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i))).next(u=>{i.forEach((D,k)=>{const G=k.getKey();null===u.get(G)&&(u=u.insert(G,mr.newInvalidDocument(G)))});let d=R_();return u.forEach((D,k)=>{const G=i.get(D);void 0!==G&&x_(G.mutation,k,Xi.empty(),gr.now()),D_(t,k)&&(d=d.insert(D,k))}),d})}}class uN{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return Te.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var r;return this.cs.set(t.id,{id:(r=t).id,version:r.version,createTime:pi(r.createTime)}),Te.resolve()}getNamedQuery(e,t){return Te.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(r=t).name,query:uA(r.bundledQuery),readTime:pi(r.readTime)}),Te.resolve();var r}}class lN{constructor(){this.overlays=new Xn(st.comparator),this.ls=new Map}getOverlay(e,t){return Te.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Dl();return Te.forEach(t,i=>this.getOverlay(e,i).next(u=>{null!==u&&r.set(i,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,u)=>{this.we(e,t,u)}),Te.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.ls.get(r);return void 0!==i&&(i.forEach(u=>this.overlays=this.overlays.remove(u)),this.ls.delete(r)),Te.resolve()}getOverlaysForCollection(e,t,r){const i=Dl(),u=t.length+1,d=new st(t.child("")),D=this.overlays.getIteratorFrom(d);for(;D.hasNext();){const k=D.getNext().value,G=k.getKey();if(!t.isPrefixOf(G.path))break;G.path.length===u&&k.largestBatchId>r&&i.set(k.getKey(),k)}return Te.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let u=new Xn((G,Z)=>G-Z);const d=this.overlays.getIterator();for(;d.hasNext();){const G=d.getNext().value;if(G.getKey().getCollectionGroup()===t&&G.largestBatchId>r){let Z=u.get(G.largestBatchId);null===Z&&(Z=Dl(),u=u.insert(G.largestBatchId,Z)),Z.set(G.getKey(),G)}}const D=Dl(),k=u.getIterator();for(;k.hasNext()&&(k.getNext().value.forEach((G,Z)=>D.set(G,Z)),!(D.size()>=i)););return Te.resolve(D)}we(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const d=this.ls.get(i.largestBatchId).delete(r.key);this.ls.set(i.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new tA(t,r));let u=this.ls.get(t);void 0===u&&(u=pn(),this.ls.set(t,u)),this.ls.set(t,u.add(r.key))}}class mA{constructor(){this.fs=new er(ts.ds),this.ws=new er(ts._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const r=new ts(e,t);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ys(new ts(e,t))}ps(e,t){e.forEach(r=>this.removeReference(r,t))}Is(e){const t=new st(new In([])),r=new ts(t,e),i=new ts(t,e+1),u=[];return this.ws.forEachInRange([r,i],d=>{this.ys(d),u.push(d.key)}),u}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new st(new In([])),r=new ts(t,e),i=new ts(t,e+1);let u=pn();return this.ws.forEachInRange([r,i],d=>{u=u.add(d.key)}),u}containsKey(e){const t=new ts(e,0),r=this.fs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class ts{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return st.comparator(e.key,t.key)||tn(e.As,t.As)}static _s(e,t){return tn(e.As,t.As)||st.comparator(e.key,t.key)}}class dN{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new er(ts.ds)}checkEmpty(e){return Te.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const u=this.vs;this.vs++;const d=new XT(u,t,r,i);this.mutationQueue.push(d);for(const D of i)this.Rs=this.Rs.add(new ts(D.key,u)),this.indexManager.addToCollectionParentIndex(e,D.key.path.popLast());return Te.resolve(d)}lookupMutationBatch(e,t){return Te.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.bs(t+1),u=i<0?0:i;return Te.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return Te.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return Te.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new ts(t,0),i=new ts(t,Number.POSITIVE_INFINITY),u=[];return this.Rs.forEachInRange([r,i],d=>{const D=this.Ps(d.As);u.push(D)}),Te.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new er(tn);return t.forEach(i=>{const u=new ts(i,0),d=new ts(i,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([u,d],D=>{r=r.add(D.As)})}),Te.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let u=r;st.isDocumentKey(u)||(u=u.child(""));const d=new ts(new st(u),0);let D=new er(tn);return this.Rs.forEachWhile(k=>{const G=k.key.path;return!!r.isPrefixOf(G)&&(G.length===i&&(D=D.add(k.As)),!0)},d),Te.resolve(this.Vs(D))}Vs(e){const t=[];return e.forEach(r=>{const i=this.Ps(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Mt(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return Te.forEach(t.mutations,i=>{const u=new ts(i.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,t){const r=new ts(t,0),i=this.Rs.firstAfterOrEqual(r);return Te.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return Te.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class hN{constructor(e){this.Ds=e,this.docs=new Xn(st.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),u=i?i.size:0,d=this.Ds(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return Te.resolve(r?r.document.mutableCopy():mr.newInvalidDocument(t))}getEntries(e,t){let r=Wo();return t.forEach(i=>{const u=this.docs.get(i);r=r.insert(i,u?u.document.mutableCopy():mr.newInvalidDocument(i))}),Te.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let u=Wo();const d=t.path,D=new st(d.child("")),k=this.docs.getIteratorFrom(D);for(;k.hasNext();){const{key:G,value:{document:Z}}=k.getNext();if(!d.isPrefixOf(G.path))break;G.path.length>d.length+1||kv(aE(Z),r)<=0||(i.has(Z.key)||D_(t,Z))&&(u=u.insert(Z.key,Z.mutableCopy()))}return Te.resolve(u)}getAllFromCollectionGroup(e,t,r,i){_t()}Cs(e,t){return Te.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new pN(this)}getSize(e){return Te.resolve(this.size)}}class pN extends E1{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.os.addEntry(e,i)):this.os.removeEntry(r)}),Te.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class fN{constructor(e){this.persistence=e,this.xs=new qd(t=>_g(t),A_),this.lastRemoteSnapshotVersion=Ot.min(),this.highestTargetId=0,this.Ns=0,this.ks=new mA,this.targetCount=0,this.Ms=Dg.kn()}forEachTarget(e,t){return this.xs.forEach((r,i)=>t(i)),Te.resolve()}getLastRemoteSnapshotVersion(e){return Te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Te.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),Te.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ns&&(this.Ns=t),Te.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new Dg(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,Te.resolve()}updateTargetData(e,t){return this.Fn(t),Te.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,Te.resolve()}removeTargets(e,t,r){let i=0;const u=[];return this.xs.forEach((d,D)=>{D.sequenceNumber<=t&&null===r.get(D.targetId)&&(this.xs.delete(d),u.push(this.removeMatchingKeysForTargetId(e,D.targetId)),i++)}),Te.waitFor(u).next(()=>i)}getTargetCount(e){return Te.resolve(this.targetCount)}getTargetData(e,t){const r=this.xs.get(t)||null;return Te.resolve(r)}addMatchingKeys(e,t,r){return this.ks.gs(t,r),Te.resolve()}removeMatchingKeys(e,t,r){this.ks.ps(t,r);const i=this.persistence.referenceDelegate,u=[];return i&&t.forEach(d=>{u.push(i.markPotentiallyOrphaned(e,d))}),Te.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),Te.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ks.Es(t);return Te.resolve(r)}containsKey(e,t){return Te.resolve(this.ks.containsKey(t))}}class vA{constructor(e,t){this.$s={},this.overlays={},this.Os=new vo(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new fN(this),this.indexManager=new eN,this.remoteDocumentCache=new hN(r=>this.referenceDelegate.Ls(r)),this.serializer=new t1(t),this.qs=new uN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new lN,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.$s[e.toKey()];return r||(r=new dN(t,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,r){et("MemoryPersistence","Starting transaction:",e);const i=new gN(this.Os.next());return this.referenceDelegate.Us(),r(i).next(u=>this.referenceDelegate.Ks(i).next(()=>u)).toPromise().then(u=>(i.raiseOnCommittedEvent(),u))}Gs(e,t){return Te.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,t)))}}class gN extends cE{constructor(e){super(),this.currentSequenceNumber=e}}class HE{constructor(e){this.persistence=e,this.Qs=new mA,this.js=null}static zs(e){return new HE(e)}get Ws(){if(this.js)return this.js;throw _t()}addReference(e,t,r){return this.Qs.addReference(r,t),this.Ws.delete(r.toString()),Te.resolve()}removeReference(e,t,r){return this.Qs.removeReference(r,t),this.Ws.add(r.toString()),Te.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),Te.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(i=>this.Ws.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(u=>this.Ws.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Te.forEach(this.Ws,r=>{const i=st.fromPath(r);return this.Hs(e,i).next(u=>{u||t.removeEntry(i,Ot.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(r=>{r?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return Te.or([()=>Te.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class wA{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Fi=r,this.Bi=i}static Li(e,t){let r=pn(),i=pn();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:i=i.add(u.doc.key)}return new wA(e,t.fromCache,r,i)}}class R1{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ki(e,t).next(u=>u||this.Gi(e,t,i,r)).next(u=>u||this.Qi(e,t))}Ki(e,t){if(fR(t))return Te.resolve(null);let r=yo(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=DE(t,null,"F"),r=yo(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const d=pn(...u);return this.Ui.getDocuments(e,d).next(D=>this.indexManager.getMinOffset(e,r).next(k=>{const G=this.ji(t,D);return this.zi(t,G,d,k.readTime)?this.Ki(e,DE(t,null,"F")):this.Wi(e,G,t,k)}))})))}Gi(e,t,r,i){return fR(t)||i.isEqual(Ot.min())?this.Qi(e,t):this.Ui.getDocuments(e,r).next(u=>{const d=this.ji(t,u);return this.zi(t,d,r,i)?this.Qi(e,t):(XS()<=Sl.in.DEBUG&&et("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),JT(t)),this.Wi(e,d,t,function oE(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Ot.fromTimestamp(1e9===r?new gr(t+1,0):new gr(t,r));return new As(i,st.empty(),e)}(i,-1)))})}ji(e,t){let r=new er(vR(e));return t.forEach((i,u)=>{D_(e,u)&&(r=r.add(u))}),r}zi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(i)>0)}Qi(e,t){return XS()<=Sl.in.DEBUG&&et("QueryEngine","Using full collection scan to execute query:",JT(t)),this.Ui.getDocumentsMatchingQuery(e,t,As.min())}Wi(e,t,r,i){return this.Ui.getDocumentsMatchingQuery(e,r,i).next(u=>(t.forEach(d=>{u=u.insert(d.key,d)}),u))}}class vN{constructor(e,t,r,i){this.persistence=e,this.Hi=t,this.serializer=i,this.Ji=new Xn(tn),this.Yi=new qd(u=>_g(u),A_),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new P1(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function O1(n,e){return SA.apply(this,arguments)}function SA(){return SA=(0,Be.Z)(function*(n,e){const t=pt(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(u=>(i=u,t.tr(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const d=[],D=[];let k=pn();for(const G of i){d.push(G.batchId);for(const Z of G.mutations)k=k.add(Z.key)}for(const G of u){D.push(G.batchId);for(const Z of G.mutations)k=k.add(Z.key)}return t.localDocuments.getDocuments(r,k).next(G=>({er:G,removedBatchIds:d,addedBatchIds:D}))})})}),SA.apply(this,arguments)}function x1(n){const e=pt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function _N(n,e){const t=pt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function iy(n,e,t){return EA.apply(this,arguments)}function EA(){return EA=(0,Be.Z)(function*(n,e,t){const r=pt(n),i=r.Ji.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,d=>r.persistence.referenceDelegate.removeTarget(d,i)))}catch(d){if(!Ps(d))throw d;et("LocalStore",`Failed to update sequence numbers for target ${e}: ${d}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(i.target)}),EA.apply(this,arguments)}function WE(n,e,t){const r=pt(n);let i=Ot.min(),u=pn();return r.persistence.runTransaction("Execute query","readonly",d=>function(D,k,G){const Z=pt(D),te=Z.Yi.get(G);return void 0!==te?Te.resolve(Z.Ji.get(te)):Z.Bs.getTargetData(k,G)}(r,d,yo(e)).next(D=>{if(D)return i=D.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(d,D.targetId).next(k=>{u=k})}).next(()=>r.Hi.getDocumentsMatchingQuery(d,e,t?i:Ot.min(),t?u:pn())).next(D=>(function F1(n,e,t){let r=n.Xi.get(e)||Ot.min();t.forEach((i,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Xi.set(e,r)}(r,function mR(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}(e),D),{documents:D,ir:u})))}class PA{constructor(){this.activeTargetIds=function YT(){return Sx}()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class B1{constructor(){this.Hr=new PA,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,r){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new PA,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class EN{Yr(e){}shutdown(){}}class V1{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){et("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){et("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let KE=null;function RA(){return null===KE?KE=268435456+Math.round(2147483648*Math.random()):KE++,"0x"+KE.toString(16)}const IN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class bN{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const Gs="WebChannelConnection";class TN extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,r,i,u){const d=RA(),D=this.To(e,t);et("RestConnection",`Sending RPC '${e}' ${d}:`,D,r);const k={};return this.Eo(k,i,u),this.Ao(e,D,k,r).then(G=>(et("RestConnection",`Received RPC '${e}' ${d}: `,G),G),G=>{throw Da("RestConnection",`RPC '${e}' ${d} failed with error: `,G,"url: ",D,"request:",r),G})}vo(e,t,r,i,u,d){return this.Io(e,t,r,i,u)}Eo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+lg,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,u)=>e[u]=i),r&&r.headers.forEach((i,u)=>e[u]=i)}To(e,t){return`${this.mo}/v1/${t}:${IN[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,r,i){const u=RA();return new Promise((d,D)=>{const k=new QS;k.setWithCredentials(!0),k.listenOnce(JS.COMPLETE,()=>{try{switch(k.getLastErrorCode()){case C_.NO_ERROR:const Z=k.getResponseJson();et(Gs,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(Z)),d(Z);break;case C_.TIMEOUT:et(Gs,`RPC '${e}' ${u} timed out`),D(new Ge(Me.DEADLINE_EXCEEDED,"Request time out"));break;case C_.HTTP_ERROR:const te=k.getStatus();if(et(Gs,`RPC '${e}' ${u} failed with status:`,te,"response text:",k.getResponseText()),te>0){let le=k.getResponseJson();Array.isArray(le)&&(le=le[0]);const ye=le?.error;if(ye&&ye.status&&ye.message){const Oe=function(qe){const Je=qe.toLowerCase().replace(/_/g,"-");return Object.values(Me).indexOf(Je)>=0?Je:Me.UNKNOWN}(ye.status);D(new Ge(Oe,ye.message))}else D(new Ge(Me.UNKNOWN,"Server responded with status "+k.getStatus()))}else D(new Ge(Me.UNAVAILABLE,"Connection failed."));break;default:_t()}}finally{et(Gs,`RPC '${e}' ${u} completed.`)}});const G=JSON.stringify(i);et(Gs,`RPC '${e}' ${u} sending request:`,i),k.send(t,"POST",G,r,15)})}Ro(e,t,r){const i=RA(),u=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=KS(),D=bT(),k={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},G=this.longPollingOptions.timeoutSeconds;void 0!==G&&(k.longPollingTimeout=Math.round(1e3*G)),this.useFetchStreams&&(k.xmlHttpFactory=new YS({})),this.Eo(k.initMessageHeaders,t,r),k.encodeInitMessageHeaders=!0;const Z=u.join("");et(Gs,`Creating RPC '${e}' stream ${i}: ${Z}`,k);const te=d.createWebChannel(Z,k);let le=!1,ye=!1;const Oe=new bN({ro:Je=>{ye?et(Gs,`Not sending because RPC '${e}' stream ${i} is closed:`,Je):(le||(et(Gs,`Opening RPC '${e}' stream ${i} transport.`),te.open(),le=!0),et(Gs,`RPC '${e}' stream ${i} sending:`,Je),te.send(Je))},oo:()=>te.close()}),qe=(Je,Et,Nt)=>{Je.listen(Et,xt=>{try{Nt(xt)}catch($t){setTimeout(()=>{throw $t},0)}})};return qe(te,ug.EventType.OPEN,()=>{ye||et(Gs,`RPC '${e}' stream ${i} transport opened.`)}),qe(te,ug.EventType.CLOSE,()=>{ye||(ye=!0,et(Gs,`RPC '${e}' stream ${i} transport closed`),Oe.wo())}),qe(te,ug.EventType.ERROR,Je=>{ye||(ye=!0,Da(Gs,`RPC '${e}' stream ${i} transport errored:`,Je),Oe.wo(new Ge(Me.UNAVAILABLE,"The operation could not be completed")))}),qe(te,ug.EventType.MESSAGE,Je=>{var Et;if(!ye){const Nt=Je.data[0];Mt(!!Nt);const $t=Nt.error||(null===(Et=Nt[0])||void 0===Et?void 0:Et.error);if($t){et(Gs,`RPC '${e}' stream ${i} received error:`,$t);const hn=$t.status;let On=function($g){const gx=Ii[$g];if(void 0!==gx)return kR(gx)}(hn),qs=$t.message;void 0===On&&(On=Me.INTERNAL,qs="Unknown error status: "+hn+" with message "+$t.message),ye=!0,Oe.wo(new Ge(On,qs)),te.close()}else et(Gs,`RPC '${e}' stream ${i} received:`,Nt),Oe._o(Nt)}}),qe(D,TT.STAT_EVENT,Je=>{Je.stat===__.PROXY?et(Gs,`RPC '${e}' stream ${i} detected buffering proxy`):Je.stat===__.NOPROXY&&et(Gs,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{Oe.fo()},0),Oe}}function JE(){return typeof document<"u"?document:null}function Z_(n){return new Lx(n,!0)}class MA{constructor(e,t,r=1e3,i=1.5,u=6e4){this.ii=e,this.timerId=t,this.Po=r,this.bo=i,this.Vo=u,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,t-r);i>0&&et("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class H1{constructor(e,t,r,i,u,d,D,k){this.ii=e,this.$o=r,this.Oo=i,this.connection=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=D,this.listener=k,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new MA(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,Be.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,Be.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var r=this;return(0,Be.Z)(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():t&&t.code===Me.RESOURCE_EXHAUSTED?(ei(t.toString()),ei("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):t&&t.code===Me.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Fo===t&&this.Zo(r,i)},r=>{e(()=>{const i=new Ge(Me.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(i)})})}Zo(e,t){const r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(i=>{r(()=>this.tu(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Go(){var e=this;this.state=5,this.qo.No((0,Be.Z)(function*(){e.state=0,e.start()}))}tu(e){return et("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(et("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class AN extends H1{constructor(e,t,r,i,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,d),this.serializer=u}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function Ux(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(k=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===k?1:"REMOVE"===k?2:"CURRENT"===k?3:"RESET"===k?4:_t(),i=e.targetChange.targetIds||[],u=function(k,G){return k.useProto3Json?(Mt(void 0===G||"string"==typeof G),Ei.fromBase64String(G||"")):(Mt(void 0===G||G instanceof Uint8Array),Ei.fromUint8Array(G||new Uint8Array))}(n,e.targetChange.resumeToken),d=e.targetChange.cause,D=d&&function(k){const G=void 0===k.code?Me.UNKNOWN:kR(k.code);return new Ge(G,k.message||"")}(d);t=new BR(r,i,u,D||null)}else if("documentChange"in e){const r=e.documentChange,i=Rl(n,r.document.name),u=pi(r.document.updateTime),d=r.document.createTime?pi(r.document.createTime):Ot.min(),D=new es({mapValue:{fields:r.document.fields}}),k=mr.newFoundDocument(i,u,d,D);t=new NE(r.targetIds||[],r.removedTargetIds||[],k.key,k)}else if("documentDelete"in e){const r=e.documentDelete,i=Rl(n,r.document),u=r.readTime?pi(r.readTime):Ot.min(),d=mr.newNoDocument(i,u);t=new NE([],r.removedTargetIds||[],d.key,d)}else if("documentRemove"in e){const r=e.documentRemove,i=Rl(n,r.document);t=new NE([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return _t();{const r=e.filter,{count:i=0,unchangedNames:u}=r,d=new Rx(i,u);t=new UR(r.targetId,d)}}var k;return t}(this.serializer,e),r=function(i){if(!("targetChange"in i))return Ot.min();const u=i.targetChange;return u.targetIds&&u.targetIds.length?Ot.min():u.readTime?pi(u.readTime):Ot.min()}(e);return this.listener.nu(t,r)}su(e){const t={};t.database=j_(this.serializer),t.addTarget=function(i,u){let d;const D=u.target;if(d=TE(D)?{documents:JR(i,D)}:{query:cA(i,D)},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){d.resumeToken=$R(i,u.resumeToken);const k=iA(i,u.expectedCount);null!==k&&(d.expectedCount=k)}else if(u.snapshotVersion.compareTo(Ot.min())>0){d.readTime=Xv(i,u.snapshotVersion.toTimestamp());const k=iA(i,u.expectedCount);null!==k&&(d.expectedCount=k)}return d}(this.serializer,e);const r=function Vx(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return _t()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Wo(t)}iu(e){const t={};t.database=j_(this.serializer),t.removeTarget=e,this.Wo(t)}}class PN extends H1{constructor(e,t,r,i,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,d),this.serializer=u,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(Mt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function Bx(n,e){return n&&n.length>0?(Mt(void 0!==e),n.map(t=>function(r,i){let u=pi(r.updateTime?r.updateTime:i);return u.isEqual(Ot.min())&&(u=pi(i)),new Tx(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=pi(e.commitTime);return this.listener.cu(r,t)}return Mt(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=j_(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>function U_(n,e){let t;if(e instanceof Yv)t={update:ZR(n,e.key,e.value)};else if(e instanceof Qv)t={delete:F_(n,e.key)};else if(e instanceof Zd)t={update:ZR(n,e.key,e.data),updateMask:Gx(e.fieldMask)};else{if(!(e instanceof QT))return _t();t={verify:F_(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,u){const d=u.transform;if(d instanceof Kv)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Sg)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Eg)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Jv)return{fieldPath:u.field.canonicalString(),increment:d.gt};throw _t()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:Fx(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:_t()),t;var i}(this.serializer,r))};this.Wo(t)}}class DN extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.lu=!1}fu(){if(this.lu)throw new Ge(Me.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,u])=>this.connection.Io(e,t,r,i,u)).catch(i=>{throw"FirebaseError"===i.name?(i.code===Me.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ge(Me.UNKNOWN,i.toString())})}vo(e,t,r,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,d])=>this.connection.vo(e,t,r,u,d,i)).catch(u=>{throw"FirebaseError"===u.name?(u.code===Me.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Ge(Me.UNKNOWN,u.toString())})}terminate(){this.lu=!0}}class MN{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(ei(t),this.mu=!1):et("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class ON{constructor(e,t,r,i,u){var d=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=u,this.Pu.Yr(D=>{r.enqueueAndForget((0,Be.Z)(function*(){var k;pp(d)&&(et("RemoteStore","Restarting streams for network reachability change."),yield(k=(0,Be.Z)(function*(G){const Z=pt(G);Z.vu.add(4),yield sy(Z),Z.bu.set("Unknown"),Z.vu.delete(4),yield K_(Z)}),function(G){return k.apply(this,arguments)})(d))}))}),this.bu=new MN(r,i)}}function K_(n){return xA.apply(this,arguments)}function xA(){return xA=(0,Be.Z)(function*(n){if(pp(n))for(const e of n.Ru)yield e(!0)}),xA.apply(this,arguments)}function sy(n){return NA.apply(this,arguments)}function NA(){return NA=(0,Be.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),NA.apply(this,arguments)}function YE(n,e){const t=pt(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),FA(t)?LA(t):ay(t).Ko()&&kA(t,e))}function J_(n,e){const t=pt(n),r=ay(t);t.Au.delete(e),r.Ko()&&$1(t,e),0===t.Au.size&&(r.Ko()?r.jo():pp(t)&&t.bu.set("Unknown"))}function kA(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ot.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ay(n).su(e)}function $1(n,e){n.Vu.qt(e),ay(n).iu(e)}function LA(n){n.Vu=new Ox({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),ay(n).start(),n.bu.gu()}function FA(n){return pp(n)&&!ay(n).Uo()&&n.Au.size>0}function pp(n){return 0===pt(n).vu.size}function G1(n){n.Vu=void 0}function xN(n){return jA.apply(this,arguments)}function jA(){return jA=(0,Be.Z)(function*(n){n.Au.forEach((e,t)=>{kA(n,e)})}),jA.apply(this,arguments)}function NN(n,e){return UA.apply(this,arguments)}function UA(){return UA=(0,Be.Z)(function*(n,e){G1(n),FA(n)?(n.bu.Iu(e),LA(n)):n.bu.set("Unknown")}),UA.apply(this,arguments)}function kN(n,e,t){return BA.apply(this,arguments)}function BA(){return BA=(0,Be.Z)(function*(n,e,t){if(n.bu.set("Online"),e instanceof BR&&2===e.state&&e.cause)try{yield(r=(0,Be.Z)(function*(i,u){const d=u.cause;for(const D of u.targetIds)i.Au.has(D)&&(yield i.remoteSyncer.rejectListen(D,d),i.Au.delete(D),i.Vu.removeTarget(D))}),function(i,u){return r.apply(this,arguments)})(n,e)}catch(r){et("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield QE(n,r)}else if(e instanceof NE?n.Vu.Ht(e):e instanceof UR?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(Ot.min()))try{const r=yield x1(n.localStore);t.compareTo(r)>=0&&(yield function(i,u){const d=i.Vu.ce(u);return d.targetChanges.forEach((D,k)=>{if(D.resumeToken.approximateByteSize()>0){const G=i.Au.get(k);G&&i.Au.set(k,G.withResumeToken(D.resumeToken,u))}}),d.targetMismatches.forEach((D,k)=>{const G=i.Au.get(D);if(!G)return;i.Au.set(D,G.withResumeToken(Ei.EMPTY_BYTE_STRING,G.snapshotVersion)),$1(i,D);const Z=new Kd(G.target,D,k,G.sequenceNumber);kA(i,Z)}),i.remoteSyncer.applyRemoteEvent(d)}(n,t))}catch(r){et("RemoteStore","Failed to raise snapshot:",r),yield QE(n,r)}var r}),BA.apply(this,arguments)}function QE(n,e,t){return VA.apply(this,arguments)}function VA(){return VA=(0,Be.Z)(function*(n,e,t){if(!Ps(e))throw e;n.vu.add(1),yield sy(n),n.bu.set("Offline"),t||(t=()=>x1(n.localStore)),n.asyncQueue.enqueueRetryable((0,Be.Z)(function*(){et("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield K_(n)}))}),VA.apply(this,arguments)}function W1(n,e){return e().catch(t=>QE(n,t,e))}function oy(n){return zA.apply(this,arguments)}function zA(){return zA=(0,Be.Z)(function*(n){const e=pt(n),t=fp(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;LN(e);)try{const i=yield _N(e.localStore,r);if(null===i){0===e.Eu.length&&t.jo();break}r=i.batchId,FN(e,i)}catch(i){yield QE(e,i)}q1(e)&&Z1(e)}),zA.apply(this,arguments)}function LN(n){return pp(n)&&n.Eu.length<10}function FN(n,e){n.Eu.push(e);const t=fp(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function q1(n){return pp(n)&&!fp(n).Uo()&&n.Eu.length>0}function Z1(n){fp(n).start()}function jN(n){return HA.apply(this,arguments)}function HA(){return HA=(0,Be.Z)(function*(n){fp(n).hu()}),HA.apply(this,arguments)}function UN(n){return $A.apply(this,arguments)}function $A(){return $A=(0,Be.Z)(function*(n){const e=fp(n);for(const t of n.Eu)e.uu(t.mutations)}),$A.apply(this,arguments)}function BN(n,e,t){return GA.apply(this,arguments)}function GA(){return GA=(0,Be.Z)(function*(n,e,t){const r=n.Eu.shift(),i=eA.from(r,e,t);yield W1(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield oy(n)}),GA.apply(this,arguments)}function VN(n,e){return WA.apply(this,arguments)}function WA(){return WA=(0,Be.Z)(function*(n,e){var t;e&&fp(n).ou&&(yield(t=(0,Be.Z)(function*(r,i){if(function NR(n){switch(n){default:return _t();case Me.CANCELLED:case Me.UNKNOWN:case Me.DEADLINE_EXCEEDED:case Me.RESOURCE_EXHAUSTED:case Me.INTERNAL:case Me.UNAVAILABLE:case Me.UNAUTHENTICATED:return!1;case Me.INVALID_ARGUMENT:case Me.NOT_FOUND:case Me.ALREADY_EXISTS:case Me.PERMISSION_DENIED:case Me.FAILED_PRECONDITION:case Me.ABORTED:case Me.OUT_OF_RANGE:case Me.UNIMPLEMENTED:case Me.DATA_LOSS:return!0}}(u=i.code)&&u!==Me.ABORTED){const d=r.Eu.shift();fp(r).Qo(),yield W1(r,()=>r.remoteSyncer.rejectFailedWrite(d.batchId,i)),yield oy(r)}var u}),function(r,i){return t.apply(this,arguments)})(n,e)),q1(n)&&Z1(n)}),WA.apply(this,arguments)}function K1(n,e){return qA.apply(this,arguments)}function qA(){return qA=(0,Be.Z)(function*(n,e){const t=pt(n);t.asyncQueue.verifyOperationInProgress(),et("RemoteStore","RemoteStore received new credentials");const r=pp(t);t.vu.add(3),yield sy(t),r&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield K_(t)}),qA.apply(this,arguments)}function KA(){return KA=(0,Be.Z)(function*(n,e){const t=pt(n);e?(t.vu.delete(2),yield K_(t)):e||(t.vu.add(2),yield sy(t),t.bu.set("Unknown"))}),KA.apply(this,arguments)}function ay(n){return n.Su||(n.Su=function(e,t,r){const i=pt(e);return i.fu(),new AN(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:xN.bind(null,n),ao:NN.bind(null,n),nu:kN.bind(null,n)}),n.Ru.push(function(){var e=(0,Be.Z)(function*(t){t?(n.Su.Qo(),FA(n)?LA(n):n.bu.set("Unknown")):(yield n.Su.stop(),G1(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}function fp(n){return n.Du||(n.Du=function(e,t,r){const i=pt(e);return i.fu(),new PN(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:jN.bind(null,n),ao:VN.bind(null,n),au:UN.bind(null,n),cu:BN.bind(null,n)}),n.Ru.push(function(){var e=(0,Be.Z)(function*(t){t?(n.Du.Qo(),yield oy(n)):(yield n.Du.stop(),n.Eu.length>0&&(et("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Du}class JA{constructor(e,t,r,i,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=u,this.deferred=new _i,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}static createAndSchedule(e,t,r,i,u){const d=Date.now()+r,D=new JA(e,t,d,i,u);return D.start(r),D}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ge(Me.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function cy(n,e){if(ei("AsyncQueue",`${e}: ${n}`),Ps(n))return new Ge(Me.UNAVAILABLE,`${e}: ${n}`);throw n}class uy{constructor(e){this.comparator=e?(t,r)=>e(t,r)||st.comparator(t.key,r.key):(t,r)=>st.comparator(t.key,r.key),this.keyedMap=R_(),this.sortedSet=new Xn(this.comparator)}static emptySet(e){return new uy(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof uy)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,u=r.getNext().key;if(!i.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new uy;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class J1{constructor(){this.Cu=new Xn(st.comparator)}track(e){const t=e.doc.key,r=this.Cu.get(t);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(t):1===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):_t():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,r)=>{e.push(r)}),e}}class ly{constructor(e,t,r,i,u,d,D,k,G){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=D,this.excludesMetadataChanges=k,this.hasCachedResults=G}static fromInitialDocuments(e,t,r,i,u){const d=[];return t.forEach(D=>{d.push({type:0,doc:D})}),new ly(e,t,uy.emptySet(t),d,r,i,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&P_(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class zN{constructor(){this.Nu=void 0,this.listeners=[]}}class HN{constructor(){this.queries=new qd(e=>gR(e),P_),this.onlineState="Unknown",this.ku=new Set}}function YA(n,e){return QA.apply(this,arguments)}function QA(){return QA=(0,Be.Z)(function*(n,e){const t=pt(n),r=e.query;let i=!1,u=t.queries.get(r);if(u||(i=!0,u=new zN),i)try{u.Nu=yield t.onListen(r)}catch(d){const D=cy(d,`Initialization of query '${JT(e.query)}' failed`);return void e.onError(D)}t.queries.set(r,u),u.listeners.push(e),e.Mu(t.onlineState),u.Nu&&e.$u(u.Nu)&&tP(t)}),QA.apply(this,arguments)}function XA(n,e){return eP.apply(this,arguments)}function eP(){return eP=(0,Be.Z)(function*(n,e){const t=pt(n),r=e.query;let i=!1;const u=t.queries.get(r);if(u){const d=u.listeners.indexOf(e);d>=0&&(u.listeners.splice(d,1),i=0===u.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),eP.apply(this,arguments)}function $N(n,e){const t=pt(n);let r=!1;for(const i of e){const d=t.queries.get(i.query);if(d){for(const D of d.listeners)D.$u(i)&&(r=!0);d.Nu=i}}r&&tP(t)}function GN(n,e,t){const r=pt(n),i=r.queries.get(e);if(i)for(const u of i.listeners)u.onError(t);r.queries.delete(e)}function tP(n){n.ku.forEach(e=>{e.next()})}class nP{constructor(e,t,r){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new ly(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=ly.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class X1{constructor(e){this.key=e}}class eM{constructor(e){this.key=e}}class tM{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=pn(),this.mutatedKeys=pn(),this.tc=vR(e),this.ec=new uy(this.tc)}get nc(){return this.Yu}sc(e,t){const r=t?t.ic:new J1,i=t?t.ec:this.ec;let u=t?t.mutatedKeys:this.mutatedKeys,d=i,D=!1;const k="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,G="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((Z,te)=>{const le=i.get(Z),ye=D_(this.query,te)?te:null,Oe=!!le&&this.mutatedKeys.has(le.key),qe=!!ye&&(ye.hasLocalMutations||this.mutatedKeys.has(ye.key)&&ye.hasCommittedMutations);let Je=!1;le&&ye?le.data.isEqual(ye.data)?Oe!==qe&&(r.track({type:3,doc:ye}),Je=!0):this.rc(le,ye)||(r.track({type:2,doc:ye}),Je=!0,(k&&this.tc(ye,k)>0||G&&this.tc(ye,G)<0)&&(D=!0)):!le&&ye?(r.track({type:0,doc:ye}),Je=!0):le&&!ye&&(r.track({type:1,doc:le}),Je=!0,(k||G)&&(D=!0)),Je&&(ye?(d=d.add(ye),u=qe?u.add(Z):u.delete(Z)):(d=d.delete(Z),u=u.delete(Z)))}),null!==this.query.limit)for(;d.size>this.query.limit;){const Z="F"===this.query.limitType?d.last():d.first();d=d.delete(Z.key),u=u.delete(Z.key),r.track({type:1,doc:Z})}return{ec:d,ic:r,zi:D,mutatedKeys:u}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const u=e.ic.xu();u.sort((G,Z)=>function(te,le){const ye=Oe=>{switch(Oe){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _t()}};return ye(te)-ye(le)}(G.type,Z.type)||this.tc(G.doc,Z.doc)),this.oc(r);const d=t?this.uc():[],D=0===this.Zu.size&&this.current?1:0,k=D!==this.Xu;return this.Xu=D,0!==u.length||k?{snapshot:new ly(this.query,e.ec,i,u,e.mutatedKeys,0===D,k,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:d}:{cc:d}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new J1,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=pn(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const t=[];return e.forEach(r=>{this.Zu.has(r)||t.push(new eM(r))}),this.Zu.forEach(r=>{e.has(r)||t.push(new X1(r))}),t}hc(e){this.Yu=e.ir,this.Zu=pn();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return ly.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class ZN{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class KN{constructor(e){this.key=e,this.fc=!1}}class JN{constructor(e,t,r,i,u,d){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.dc={},this.wc=new qd(D=>gR(D),P_),this._c=new Map,this.mc=new Set,this.gc=new Xn(st.comparator),this.yc=new Map,this.Ic=new mA,this.Tc={},this.Ec=new Map,this.Ac=Dg.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function YN(n,e){return rP.apply(this,arguments)}function rP(){return rP=(0,Be.Z)(function*(n,e){const t=function TP(n){const e=pt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=nM.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ok.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ek.bind(null,e),e.dc.nu=$N.bind(null,e.eventManager),e.dc.Pc=GN.bind(null,e.eventManager),e}(n);let r,i;const u=t.wc.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),i=u.view.lc();else{const d=yield function ry(n,e){const t=pt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Bs.getTargetData(r,e).next(u=>u?(i=u,Te.resolve(i)):t.Bs.allocateTargetId(r).next(d=>(i=new Kd(e,d,"TargetPurposeListen",r.currentSequenceNumber),t.Bs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ji.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(r.targetId,r),t.Yi.set(e,r.targetId)),r})}(t.localStore,yo(e)),D=t.sharedClientState.addLocalQueryTarget(d.targetId);r=d.targetId,i=yield function iP(n,e,t,r,i){return sP.apply(this,arguments)}(t,e,r,"current"===D,d.resumeToken),t.isPrimaryClient&&YE(t.remoteStore,d)}return i}),rP.apply(this,arguments)}function sP(){return sP=(0,Be.Z)(function*(n,e,t,r,i){n.Rc=(te,le,ye)=>{return(Oe=(0,Be.Z)(function*(qe,Je,Et,Nt){let xt=Je.view.sc(Et);xt.zi&&(xt=yield WE(qe.localStore,Je.query,!1).then(({documents:On})=>Je.view.sc(On,xt)));const $t=Nt&&Nt.targetChanges.get(Je.targetId),hn=Je.view.applyChanges(xt,qe.isPrimaryClient,$t);return gP(qe,Je.targetId,hn.cc),hn.snapshot}),function(qe,Je,Et,Nt){return Oe.apply(this,arguments)})(n,te,le,ye);var Oe};const u=yield WE(n.localStore,e,!0),d=new tM(e,u.ir),D=d.sc(u.documents),k=L_.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),G=d.applyChanges(D,n.isPrimaryClient,k);gP(n,t,G.cc);const Z=new ZN(e,t,d);return n.wc.set(e,Z),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),G.snapshot}),sP.apply(this,arguments)}function QN(n,e){return oP.apply(this,arguments)}function oP(){return oP=(0,Be.Z)(function*(n,e){const t=pt(n),r=t.wc.get(e),i=t._c.get(r.targetId);if(i.length>1)return t._c.set(r.targetId,i.filter(u=>!P_(u,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield iy(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),J_(t.remoteStore,r.targetId),dy(t,r.targetId)}).catch(bu))):(dy(t,r.targetId),yield iy(t.localStore,r.targetId,!0))}),oP.apply(this,arguments)}function aP(){return aP=(0,Be.Z)(function*(n,e,t){const r=function AP(n){const e=pt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=tk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=nk.bind(null,e),e}(n);try{const i=yield function(u,d){const D=pt(u),k=gr.now(),G=d.reduce((le,ye)=>le.add(ye.key),pn());let Z,te;return D.persistence.runTransaction("Locally write mutations","readwrite",le=>{let ye=Wo(),Oe=pn();return D.Zi.getEntries(le,G).next(qe=>{ye=qe,ye.forEach((Je,Et)=>{Et.isValidDocument()||(Oe=Oe.add(Je))})}).next(()=>D.localDocuments.getOverlayedDocuments(le,ye)).next(qe=>{Z=qe;const Je=[];for(const Et of d){const Nt=Px(Et,Z.get(Et.key).overlayedDocument);null!=Nt&&Je.push(new Zd(Et.key,Nt,GT(Nt.value.mapValue),xr.exists(!0)))}return D.mutationQueue.addMutationBatch(le,k,Je,d)}).next(qe=>{te=qe;const Je=qe.applyToLocalDocumentSet(Z,Oe);return D.documentOverlayCache.saveOverlays(le,qe.batchId,Je)})}).then(()=>({batchId:te.batchId,changes:CR(Z)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(u,d,D){let k=u.Tc[u.currentUser.toKey()];k||(k=new Xn(tn)),k=k.insert(d,D),u.Tc[u.currentUser.toKey()]=k}(r,i.batchId,t),yield Jd(r,i.changes),yield oy(r.remoteStore)}catch(i){const u=cy(i,"Failed to persist write");t.reject(u)}}),aP.apply(this,arguments)}function nM(n,e){return cP.apply(this,arguments)}function cP(){return cP=(0,Be.Z)(function*(n,e){const t=pt(n);try{const r=yield function CN(n,e){const t=pt(n),r=e.snapshotVersion;let i=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const d=t.Zi.newChangeBuffer({trackRemovals:!0});i=t.Ji;const D=[];e.targetChanges.forEach((Z,te)=>{const le=i.get(te);if(!le)return;D.push(t.Bs.removeMatchingKeys(u,Z.removedDocuments,te).next(()=>t.Bs.addMatchingKeys(u,Z.addedDocuments,te)));let ye=le.withSequenceNumber(u.currentSequenceNumber);var Oe,qe,Je;null!==e.targetMismatches.get(te)?ye=ye.withResumeToken(Ei.EMPTY_BYTE_STRING,Ot.min()).withLastLimboFreeSnapshotVersion(Ot.min()):Z.resumeToken.approximateByteSize()>0&&(ye=ye.withResumeToken(Z.resumeToken,r)),i=i.insert(te,ye),qe=ye,Je=Z,(0===(Oe=le).resumeToken.approximateByteSize()||qe.snapshotVersion.toMicroseconds()-Oe.snapshotVersion.toMicroseconds()>=3e8||Je.addedDocuments.size+Je.modifiedDocuments.size+Je.removedDocuments.size>0)&&D.push(t.Bs.updateTargetData(u,ye))});let k=Wo(),G=pn();if(e.documentUpdates.forEach(Z=>{e.resolvedLimboDocuments.has(Z)&&D.push(t.persistence.referenceDelegate.updateLimboDocument(u,Z))}),D.push(function N1(n,e,t){let r=pn(),i=pn();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let d=Wo();return t.forEach((D,k)=>{const G=u.get(D);k.isFoundDocument()!==G.isFoundDocument()&&(i=i.add(D)),k.isNoDocument()&&k.version.isEqual(Ot.min())?(e.removeEntry(D,k.readTime),d=d.insert(D,k)):!G.isValidDocument()||k.version.compareTo(G.version)>0||0===k.version.compareTo(G.version)&&G.hasPendingWrites?(e.addEntry(k),d=d.insert(D,k)):et("LocalStore","Ignoring outdated watch update for ",D,". Current version:",G.version," Watch version:",k.version)}),{nr:d,sr:i}})}(u,d,e.documentUpdates).next(Z=>{k=Z.nr,G=Z.sr})),!r.isEqual(Ot.min())){const Z=t.Bs.getLastRemoteSnapshotVersion(u).next(te=>t.Bs.setTargetsMetadata(u,u.currentSequenceNumber,r));D.push(Z)}return Te.waitFor(D).next(()=>d.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,k,G)).next(()=>k)}).then(u=>(t.Ji=i,u))}(t.localStore,e);e.targetChanges.forEach((i,u)=>{const d=t.yc.get(u);d&&(Mt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?d.fc=!0:i.modifiedDocuments.size>0?Mt(d.fc):i.removedDocuments.size>0&&(Mt(d.fc),d.fc=!1))}),yield Jd(t,r,e)}catch(r){yield bu(r)}}),cP.apply(this,arguments)}function rM(n,e,t){const r=pt(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.wc.forEach((u,d)=>{const D=d.view.Mu(e);D.snapshot&&i.push(D.snapshot)}),function(u,d){const D=pt(u);D.onlineState=d;let k=!1;D.queries.forEach((G,Z)=>{for(const te of Z.listeners)te.Mu(d)&&(k=!0)}),k&&tP(D)}(r.eventManager,e),i.length&&r.dc.nu(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function ek(n,e,t){return uP.apply(this,arguments)}function uP(){return uP=(0,Be.Z)(function*(n,e,t){const r=pt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.yc.get(e),u=i&&i.key;if(u){let d=new Xn(st.comparator);d=d.insert(u,mr.newNoDocument(u,Ot.min()));const D=pn().add(u),k=new k_(Ot.min(),new Map,new Xn(tn),d,D);yield nM(r,k),r.gc=r.gc.remove(u),r.yc.delete(e),mP(r)}else yield iy(r.localStore,e,!1).then(()=>dy(r,e,t)).catch(bu)}),uP.apply(this,arguments)}function tk(n,e){return lP.apply(this,arguments)}function lP(){return lP=(0,Be.Z)(function*(n,e){const t=pt(n),r=e.batch.batchId;try{const i=yield function yN(n,e){const t=pt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),u=t.Zi.newChangeBuffer({trackRemovals:!0});return function(d,D,k,G){const Z=k.batch,te=Z.keys();let le=Te.resolve();return te.forEach(ye=>{le=le.next(()=>G.getEntry(D,ye)).next(Oe=>{const qe=k.docVersions.get(ye);Mt(null!==qe),Oe.version.compareTo(qe)<0&&(Z.applyToRemoteDocument(Oe,k),Oe.isValidDocument()&&(Oe.setReadTime(k.commitVersion),G.addEntry(Oe)))})}),le.next(()=>d.mutationQueue.removeMutationBatch(D,Z))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(d){let D=pn();for(let k=0;k<d.mutationResults.length;++k)d.mutationResults[k].transformResults.length>0&&(D=D.add(d.batch.mutations[k].key));return D}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);fP(t,r,null),pP(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Jd(t,i)}catch(i){yield bu(i)}}),lP.apply(this,arguments)}function nk(n,e,t){return dP.apply(this,arguments)}function dP(){return dP=(0,Be.Z)(function*(n,e,t){const r=pt(n);try{const i=yield function(u,d){const D=pt(u);return D.persistence.runTransaction("Reject batch","readwrite-primary",k=>{let G;return D.mutationQueue.lookupMutationBatch(k,d).next(Z=>(Mt(null!==Z),G=Z.keys(),D.mutationQueue.removeMutationBatch(k,Z))).next(()=>D.mutationQueue.performConsistencyCheck(k)).next(()=>D.documentOverlayCache.removeOverlaysForBatchId(k,G,d)).next(()=>D.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(k,G)).next(()=>D.localDocuments.getDocuments(k,G))})}(r.localStore,e);fP(r,e,t),pP(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Jd(r,i)}catch(i){yield bu(i)}}),dP.apply(this,arguments)}function pP(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function fP(n,e,t){const r=pt(n);let i=r.Tc[r.currentUser.toKey()];if(i){const u=i.get(e);u&&(t?u.reject(t):u.resolve(),i=i.remove(e)),r.Tc[r.currentUser.toKey()]=i}}function dy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.wc.delete(r),t&&n.dc.Pc(r,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(r=>{n.Ic.containsKey(r)||iM(n,r)})}function iM(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(J_(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),mP(n))}function gP(n,e,t){for(const r of t)r instanceof X1?(n.Ic.addReference(r.key,e),ik(n,r)):r instanceof eM?(et("SyncEngine","Document no longer in limbo: "+r.key),n.Ic.removeReference(r.key,e),n.Ic.containsKey(r.key)||iM(n,r.key)):_t()}function ik(n,e){const t=e.key,r=t.path.canonicalString();n.gc.get(t)||n.mc.has(r)||(et("SyncEngine","New document in limbo: "+t),n.mc.add(r),mP(n))}function mP(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new st(In.fromString(e)),r=n.Ac.next();n.yc.set(r,new KN(t)),n.gc=n.gc.insert(t,r),YE(n.remoteStore,new Kd(yo(Zv(t.path)),r,"TargetPurposeLimboResolution",vo.ct))}}function Jd(n,e,t){return vP.apply(this,arguments)}function vP(){return vP=(0,Be.Z)(function*(n,e,t){const r=pt(n),i=[],u=[],d=[];var D;r.wc.isEmpty()||(r.wc.forEach((D,k)=>{d.push(r.Rc(k,e,t).then(G=>{if((G||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(k.targetId,G?.fromCache?"not-current":"current"),G){i.push(G);const Z=wA.Li(k.targetId,G);u.push(Z)}}))}),yield Promise.all(d),r.dc.nu(i),yield(D=(0,Be.Z)(function*(k,G){const Z=pt(k);try{yield Z.persistence.runTransaction("notifyLocalViewChanges","readwrite",te=>Te.forEach(G,le=>Te.forEach(le.Fi,ye=>Z.persistence.referenceDelegate.addReference(te,le.targetId,ye)).next(()=>Te.forEach(le.Bi,ye=>Z.persistence.referenceDelegate.removeReference(te,le.targetId,ye)))))}catch(te){if(!Ps(te))throw te;et("LocalStore","Failed to update sequence numbers: "+te)}for(const te of G){const le=te.targetId;if(!te.fromCache){const ye=Z.Ji.get(le),qe=ye.withLastLimboFreeSnapshotVersion(ye.snapshotVersion);Z.Ji=Z.Ji.insert(le,qe)}}}),function(k,G){return D.apply(this,arguments)})(r.localStore,u))}),vP.apply(this,arguments)}function sk(n,e){return yP.apply(this,arguments)}function yP(){return yP=(0,Be.Z)(function*(n,e){const t=pt(n);if(!t.currentUser.isEqual(e)){et("SyncEngine","User change. New user:",e.toKey());const r=yield O1(t.localStore,e);t.currentUser=e,(i=t).Ec.forEach(d=>{d.forEach(D=>{D.reject(new Ge(Me.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.Ec.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Jd(t,r.er)}var i}),yP.apply(this,arguments)}function ok(n,e){const t=pt(n),r=t.yc.get(e);if(r&&r.fc)return pn().add(r.key);{let i=pn();const u=t._c.get(e);if(!u)return i;for(const d of u){const D=t.wc.get(d);i=i.unionWith(D.view.nc)}return i}}class Y_{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Be.Z)(function*(){t.serializer=Z_(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return function M1(n,e,t,r){return new vN(n,e,t,r)}(this.persistence,new R1,e.initialUser,this.serializer)}createPersistence(e){return new vA(HE.zs,this.serializer)}createSharedClientState(e){return new B1}terminate(){var e=this;return(0,Be.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class hy{initialize(e,t){var r=this;return(0,Be.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>rM(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=sk.bind(null,r.syncEngine),yield function ZA(n,e){return KA.apply(this,arguments)}(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new HN}createDatastore(e){const t=Z_(e.databaseInfo.databaseId),r=new TN(e.databaseInfo);return new DN(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,u=D=>rM(this.syncEngine,D,0),d=V1.D()?new V1:new EN,new ON(t,r,i,u,d);var t,r,i,u,d}createSyncEngine(e,t){return function(r,i,u,d,D,k,G){const Z=new JN(r,i,u,d,D,k);return G&&(Z.vc=!0),Z}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Be.Z)(function*(t){const r=pt(t);et("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield sy(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}class XE{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):ei("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Ck{constructor(e,t,r,i){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=hi.UNAUTHENTICATED,this.clientId=MT.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var d=(0,Be.Z)(function*(D){et("FirestoreClient","Received user=",D.uid),yield u.authCredentialListener(D),u.user=D});return function(D){return d.apply(this,arguments)}}()),this.appCheckCredentials.start(r,d=>(et("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}getConfiguration(){var e=this;return(0,Be.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ge(Me.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new _i;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Be.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=cy(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function eI(n,e){return DP.apply(this,arguments)}function DP(){return DP=(0,Be.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),et("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,Be.Z)(function*(u){r.isEqual(u)||(yield O1(e.localStore,u),r=u)});return function(u){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),DP.apply(this,arguments)}function RP(n,e){return MP.apply(this,arguments)}function MP(){return MP=(0,Be.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield OP(n);et("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>K1(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,u)=>K1(e.remoteStore,u)),n._onlineComponents=e}),MP.apply(this,arguments)}function OP(n){return xP.apply(this,arguments)}function xP(){return xP=(0,Be.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){et("FirestoreClient","Using user provided OfflineComponentProvider");try{yield eI(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function uM(n){return"FirebaseError"===n.name?n.code===Me.FAILED_PRECONDITION||n.code===Me.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}(t))throw t;Da("Error using user provided cache. Falling back to memory cache: "+t),yield eI(n,new Y_)}}else et("FirestoreClient","Using default OfflineComponentProvider"),yield eI(n,new Y_);return n._offlineComponents}),xP.apply(this,arguments)}function tI(n){return NP.apply(this,arguments)}function NP(){return NP=(0,Be.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(et("FirestoreClient","Using user provided OnlineComponentProvider"),yield RP(n,n._uninitializedComponentsProvider._online)):(et("FirestoreClient","Using default OnlineComponentProvider"),yield RP(n,new hy))),n._onlineComponents}),NP.apply(this,arguments)}function nI(n){return OP(n).then(e=>e.localStore)}function py(n){return LP.apply(this,arguments)}function LP(){return LP=(0,Be.Z)(function*(n){const e=yield tI(n),t=e.eventManager;return t.onListen=YN.bind(null,e.syncEngine),t.onUnlisten=QN.bind(null,e.syncEngine),t}),LP.apply(this,arguments)}function pM(n,e,t={}){const r=new _i;return n.asyncQueue.enqueueAndForget((0,Be.Z)(function*(){return function(i,u,d,D,k){const G=new XE({next:te=>{u.enqueueAndForget(()=>XA(i,Z));const le=te.docs.has(d);!le&&te.fromCache?k.reject(new Ge(Me.UNAVAILABLE,"Failed to get document because the client is offline.")):le&&te.fromCache&&D&&"server"===D.source?k.reject(new Ge(Me.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):k.resolve(te)},error:te=>k.reject(te)}),Z=new nP(Zv(d.path),G,{includeMetadataChanges:!0,Ku:!0});return YA(i,Z)}(yield py(n),n.asyncQueue,e,t,r)})),r.promise}function fM(n,e,t={}){const r=new _i;return n.asyncQueue.enqueueAndForget((0,Be.Z)(function*(){return function(i,u,d,D,k){const G=new XE({next:te=>{u.enqueueAndForget(()=>XA(i,Z)),te.fromCache&&"server"===D.source?k.reject(new Ge(Me.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):k.resolve(te)},error:te=>k.reject(te)}),Z=new nP(d,G,{includeMetadataChanges:!0,Ku:!0});return YA(i,Z)}(yield py(n),n.asyncQueue,e,t,r)})),r.promise}function gM(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const mM=new Map;function FP(n,e,t){if(!t)throw new Ge(Me.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function yM(n){if(!st.isDocumentKey(n))throw new Ge(Me.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function CM(n){if(st.isDocumentKey(n))throw new Ge(Me.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function rI(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":_t()}function Pn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ge(Me.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=rI(n);throw new Ge(Me.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function _M(n,e){if(e<=0)throw new Ge(Me.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class wM{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new Ge(Me.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ge(Me.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function vM(n,e,t,r){if(!0===e&&!0===r)throw new Ge(Me.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=gM(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(i){if(void 0!==i.timeoutSeconds){if(isNaN(i.timeoutSeconds))throw new Ge(Me.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Ge(Me.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Ge(Me.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Q_{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new wM({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ge(Me.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ge(Me.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new wM(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new nE;switch(t.type){case"firstParty":return new RT(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Ge(Me.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=mM.get(e);t&&(et("ComponentProvider","Removing Datastore"),mM.delete(e),t.terminate())}(this),Promise.resolve()}}class Ir{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ml(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ir(this.firestore,e,this._key)}}class Rs{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Rs(this.firestore,e,this._query)}}class Ml extends Rs{constructor(e,t,r){super(e,t,Zv(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ir(this.firestore,null,new st(e))}withConverter(e){return new Ml(this.firestore,e,this._path)}}function iI(n,e,...t){if(n=(0,Mn.m9)(n),1===arguments.length&&(e=MT.A()),FP("doc","path",e),n instanceof Q_){const r=In.fromString(e,...t);return yM(r),new Ir(n,null,new st(r))}{if(!(n instanceof Ir||n instanceof Ml))throw new Ge(Me.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(In.fromString(e,...t));return yM(r),new Ir(n.firestore,n instanceof Ml?n.converter:null,new st(r))}}function IM(n,e){return n=(0,Mn.m9)(n),e=(0,Mn.m9)(e),(n instanceof Ir||n instanceof Ml)&&(e instanceof Ir||e instanceof Ml)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function jP(n,e){return n=(0,Mn.m9)(n),e=(0,Mn.m9)(e),n instanceof Rs&&e instanceof Rs&&n.firestore===e.firestore&&P_(n._query,e._query)&&n.converter===e.converter}class Dk{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new MA(this,"async_queue_retry"),this.Xc=()=>{const t=JE();t&&et("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=JE();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=JE();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new _i;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,Be.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!Ps(t))throw t;et("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,ei("INTERNAL UNHANDLED ERROR: ",function(u){let d=u.message||"";return u.stack&&(d=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),d}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=t,t}enqueueAfterDelay(e,t,r){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const i=JA.createAndSchedule(this,e,t,r,u=>this.na(u));return this.zc.push(i),i}Zc(){this.Wc&&_t()}verifyOperationInProgress(){}sa(){var e=this;return(0,Be.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function UP(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class br extends Q_{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Dk,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||bM(this),this._firestoreClient.terminate()}}function fi(n){return n._firestoreClient||bM(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function bM(n){var e,t,r;const i=n._freezeSettings(),u=(D=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new VT(n._databaseId,D,n._persistenceKey,(G=i).host,G.ssl,G.experimentalForceLongPolling,G.experimentalAutoDetectLongPolling,gM(G.experimentalLongPollingOptions),G.useFetchStreams));var D,G;n._firestoreClient=new Ck(n._authCredentials,n._appCheckCredentials,n._queue,u),null!==(t=i.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=i.cache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}class Ol{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ol(Ei.fromBase64String(e))}catch(t){throw new Ge(Me.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ol(Ei.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Yd{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ge(Me.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Wr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Mg{constructor(e){this._methodName=e}}class sI{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ge(Me.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ge(Me.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return tn(this._lat,e._lat)||tn(this._long,e._long)}}const Vk=/^__.*__$/;class zk{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Zd(e,this.data,this.fieldMask,t,this.fieldTransforms):new Yv(e,this.data,t,this.fieldTransforms)}}class PM{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Zd(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function DM(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _t()}}class oI{constructor(e,t,r,i,u,d){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===u&&this.ua(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new oI(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.fa(e),i}da(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.ua(),i}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return uI(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(DM(this.ca)&&Vk.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class Hk{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Z_(e)}ya(e,t,r,i=!1){return new oI({ca:e,methodName:t,ga:r,path:Wr.emptyPath(),la:!1,ma:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Og(n){const e=n._freezeSettings(),t=Z_(n._databaseId);return new Hk(n._databaseId,!!e.ignoreUndefinedProperties,t)}function aI(n,e,t,r,i,u={}){const d=n.ya(u.merge||u.mergeFields?2:0,e,t,i);HP("Data must be an object, but it was:",d,r);const D=OM(r,d);let k,G;if(u.merge)k=new Xi(d.fieldMask),G=d.fieldTransforms;else if(u.mergeFields){const Z=[];for(const te of u.mergeFields){const le=tw(e,te,t);if(!d.contains(le))throw new Ge(Me.INVALID_ARGUMENT,`Field '${le}' is specified in your field mask but missing from your input data.`);NM(Z,le)||Z.push(le)}k=new Xi(Z),G=d.fieldTransforms.filter(te=>k.covers(te.field))}else k=null,G=d.fieldTransforms;return new zk(new es(D),k,G)}class ew extends Mg{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ew}}function MM(n,e,t,r=!1){return xg(t,n.ya(r?4:3,e))}function xg(n,e){if(xM(n=(0,Mn.m9)(n)))return HP("Unsupported field value:",e,n),OM(n,e);if(n instanceof Mg)return function(t,r){if(!DM(r.ca))throw r._a(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,r){const i=[];let u=0;for(const d of t){let D=xg(d,r.wa(u));null==D&&(D={nullValue:"NULL_VALUE"}),i.push(D),u++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,Mn.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return ER(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=gr.fromDate(t);return{timestampValue:Xv(r.serializer,i)}}if(t instanceof gr){const i=new gr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Xv(r.serializer,i)}}if(t instanceof sI)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Ol)return{bytesValue:$R(r.serializer,t._byteString)};if(t instanceof Ir){const i=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(i))throw r._a(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:sA(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r._a(`Unsupported field value: ${rI(t)}`)}(n,e)}function OM(n,e){const t={};return _E(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Al(n,(r,i)=>{const u=xg(i,e.ha(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function xM(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof gr||n instanceof sI||n instanceof Ol||n instanceof Ir||n instanceof Mg)}function HP(n,e,t){if(!xM(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=rI(t);throw e._a("an object"===r?n+" a custom object":n+" "+r)}var r}function tw(n,e,t){if((e=(0,Mn.m9)(e))instanceof Yd)return e._internalPath;if("string"==typeof e)return cI(n,e);throw uI("Field path arguments must be of type string or ",n,!1,void 0,t)}const qk=new RegExp("[~\\*/\\[\\]]");function cI(n,e,t){if(e.search(qk)>=0)throw uI(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Yd(...e.split("."))._internalPath}catch{throw uI(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function uI(n,e,t,r,i){const u=r&&!r.isEmpty(),d=void 0!==i;let D=`Function ${e}() called with invalid data`;t&&(D+=" (via `toFirestore()`)"),D+=". ";let k="";return(u||d)&&(k+=" (found",u&&(k+=` in field ${r}`),d&&(k+=` in document ${i}`),k+=")"),new Ge(Me.INVALID_ARGUMENT,D+n+k)}function NM(n,e){return n.some(t=>t.isEqual(e))}class nw{constructor(e,t,r,i,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Ir(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Zk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(lI("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Zk extends nw{data(){return super.data()}}function lI(n,e){return"string"==typeof e?cI(n,e):e instanceof Yd?e._internalPath:e._delegate._internalPath}function kM(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ge(Me.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class $P{}class rw extends $P{}function gp(n,e,...t){let r=[];e instanceof $P&&r.push(e),r=r.concat(t),function(i){const u=i.filter(D=>D instanceof fy).length,d=i.filter(D=>D instanceof iw).length;if(u>1||u>0&&d>0)throw new Ge(Me.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class iw extends rw{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new iw(e,t,r)}_apply(e){const t=this._parse(e);return UM(e._query,t),new Rs(e.firestore,e.converter,KT(e._query,t))}_parse(e){const t=Og(e.firestore);return function(i,u,d,D,k,G,Z){let te;if(k.isKeyField()){if("array-contains"===G||"array-contains-any"===G)throw new Ge(Me.INVALID_ARGUMENT,`Invalid Query. You can't perform '${G}' queries on documentId().`);if("in"===G||"not-in"===G){jM(Z,G);const le=[];for(const ye of Z)le.push(FM(D,i,ye));te={arrayValue:{values:le}}}else te=FM(D,i,Z)}else"in"!==G&&"not-in"!==G&&"array-contains-any"!==G||jM(Z,G),te=MM(d,"where",Z,"in"===G||"not-in"===G);return f.create(k,G,te)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class fy extends $P{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new fy(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:E.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,i){let u=r;const d=i.getFlattenedFilters();for(const D of d)UM(u,D),u=KT(u,D)}(e._query,t),new Rs(e.firestore,e.converter,KT(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class GP extends rw{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new GP(e,t)}_apply(e){const t=function(r,i,u){if(null!==r.startAt)throw new Ge(Me.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ge(Me.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const d=new a(i,u);return function(D,k){if(null===qT(D)){const G=PE(D);null!==G&&BM(0,G,k.field)}}(r,d),d}(e._query,this._field,this._direction);return new Rs(e.firestore,e.converter,function(r,i){const u=r.explicitOrderBy.concat([i]);return new Wd(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class dI extends rw{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new dI(e,t,r)}_apply(e){return new Rs(e.firestore,e.converter,DE(e._query,this._limit,this._limitType))}}class hI extends rw{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new hI(e,t,r)}_apply(e){const t=LM(e,this.type,this._docOrFields,this._inclusive);return new Rs(e.firestore,e.converter,(i=t,new Wd((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class pI extends rw{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new pI(e,t,r)}_apply(e){const t=LM(e,this.type,this._docOrFields,this._inclusive);return new Rs(e.firestore,e.converter,(i=t,new Wd((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function LM(n,e,t,r){if(t[0]=(0,Mn.m9)(t[0]),t[0]instanceof nw)return function(i,u,d,D,k){if(!D)throw new Ge(Me.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const G=[];for(const Z of wg(i))if(Z.field.isKeyField())G.push($d(u,D.key));else{const te=D.data.field(Z.field);if(zv(te))throw new Ge(Me.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+Z.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===te){const le=Z.field.canonicalString();throw new Ge(Me.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${le}' (used as the orderBy) does not exist.`)}G.push(te)}return new Gd(G,k)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Og(n.firestore);return function(u,d,D,k,G,Z){const te=u.explicitOrderBy;if(G.length>te.length)throw new Ge(Me.INVALID_ARGUMENT,`Too many arguments provided to ${k}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const le=[];for(let ye=0;ye<G.length;ye++){const Oe=G[ye];if(te[ye].field.isKeyField()){if("string"!=typeof Oe)throw new Ge(Me.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${k}(), but got a ${typeof Oe}`);if(!ZT(u)&&-1!==Oe.indexOf("/"))throw new Ge(Me.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${k}() must be a plain document ID, but '${Oe}' contains a slash.`);const qe=u.path.child(In.fromString(Oe));if(!st.isDocumentKey(qe))throw new Ge(Me.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${k}() must result in a valid document path, but '${qe}' is not because it contains an odd number of segments.`);const Je=new st(qe);le.push($d(d,Je))}else{const qe=MM(D,k,Oe);le.push(qe)}}return new Gd(le,Z)}(n._query,n.firestore._databaseId,i,e,t,r)}}function FM(n,e,t){if("string"==typeof(t=(0,Mn.m9)(t))){if(""===t)throw new Ge(Me.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ZT(e)&&-1!==t.indexOf("/"))throw new Ge(Me.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(In.fromString(t));if(!st.isDocumentKey(r))throw new Ge(Me.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return $d(n,new st(r))}if(t instanceof Ir)return $d(n,t._key);throw new Ge(Me.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${rI(t)}.`)}function jM(n,e){if(!Array.isArray(n)||0===n.length)throw new Ge(Me.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function UM(n,e){if(e.isInequality()){const r=PE(n),i=e.field;if(null!==r&&!r.isEqual(i))throw new Ge(Me.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const u=qT(n);null!==u&&BM(0,i,u)}const t=function(r,i){for(const u of r)for(const d of u.getFlattenedFilters())if(i.indexOf(d.op)>=0)return d.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Ge(Me.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function BM(n,e,t){if(!t.isEqual(e))throw new Ge(Me.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class WP{convertValue(e,t="none"){switch(Pl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return qr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ic(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw _t()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Al(e,(i,u)=>{r[i]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new sI(qr(e.latitude),qr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Hv(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(vg(e));default:return null}}convertTimestamp(e){const t=zd(e);return new gr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=In.fromString(e);Mt(e1(r));const i=new Au(r.get(1),r.get(3)),u=new st(r.popFirst(5));return i.isEqual(t)||ei(`Document ${u} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function fI(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Ng{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Qd extends nw{constructor(e,t,r,i,u,d){super(e,t,r,i,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new sw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(lI("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class sw extends Qd{data(e={}){return super.data(e)}}class mp{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Ng(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new sw(this._firestore,this._userDataWriter,r.key,r,new Ng(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ge(Me.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(d=>({type:"added",doc:new sw(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Ng(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(d=>i||3!==d.type).map(d=>{const D=new sw(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Ng(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let k=-1,G=-1;return 0!==d.type&&(k=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),1!==d.type&&(u=u.add(d.doc),G=u.indexOf(d.doc.key)),{type:s2(d.type),doc:D,oldIndex:k,newIndex:G}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function s2(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _t()}}function zM(n,e){return n instanceof Qd&&e instanceof Qd?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof mp&&e instanceof mp&&n._firestore===e._firestore&&jP(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class vp extends WP{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ol(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ir(this.firestore,null,t)}}function HM(n,e,t){n=Pn(n,Ir);const r=Pn(n.firestore,br),i=fI(n.converter,e,t);return gy(r,[aI(Og(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,xr.none())])}function $M(n,e,t,...r){n=Pn(n,Ir);const i=Pn(n.firestore,br),u=Og(i);let d;return d="string"==typeof(e=(0,Mn.m9)(e))||e instanceof Yd?function zP(n,e,t,r,i,u){const d=n.ya(1,e,t),D=[tw(e,r,t)],k=[i];if(u.length%2!=0)throw new Ge(Me.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let le=0;le<u.length;le+=2)D.push(tw(e,u[le])),k.push(u[le+1]);const G=[],Z=es.empty();for(let le=D.length-1;le>=0;--le)if(!NM(G,D[le])){const ye=D[le];let Oe=k[le];Oe=(0,Mn.m9)(Oe);const qe=d.da(ye);if(Oe instanceof ew)G.push(ye);else{const Je=xg(Oe,qe);null!=Je&&(G.push(ye),Z.set(ye,Je))}}const te=new Xi(G);return new PM(Z,te,d.fieldTransforms)}(u,"updateDoc",n._key,e,t,r):function VP(n,e,t,r){const i=n.ya(1,e,t);HP("Data must be an object, but it was:",i,r);const u=[],d=es.empty();Al(r,(k,G)=>{const Z=cI(e,k,t);G=(0,Mn.m9)(G);const te=i.da(Z);if(G instanceof ew)u.push(Z);else{const le=xg(G,te);null!=le&&(u.push(Z),d.set(Z,le))}});const D=new Xi(u);return new PM(d,D,i.fieldTransforms)}(u,"updateDoc",n._key,e),gy(i,[d.toMutation(n._key,xr.exists(!0))])}function GM(n,...e){var t,r,i;n=(0,Mn.m9)(n);let u={includeMetadataChanges:!1},d=0;"object"!=typeof e[d]||UP(e[d])||(u=e[d],d++);const D={includeMetadataChanges:u.includeMetadataChanges};if(UP(e[d])){const te=e[d];e[d]=null===(t=te.next)||void 0===t?void 0:t.bind(te),e[d+1]=null===(r=te.error)||void 0===r?void 0:r.bind(te),e[d+2]=null===(i=te.complete)||void 0===i?void 0:i.bind(te)}let k,G,Z;if(n instanceof Ir)G=Pn(n.firestore,br),Z=Zv(n._key.path),k={next:te=>{e[d]&&e[d](qP(G,n,te))},error:e[d+1],complete:e[d+2]};else{const te=Pn(n,Rs);G=Pn(te.firestore,br),Z=te._query;const le=new vp(G);k={next:ye=>{e[d]&&e[d](new mp(G,le,te,ye))},error:e[d+1],complete:e[d+2]},kM(n._query)}return function(te,le,ye,Oe){const qe=new XE(Oe),Je=new nP(le,qe,ye);return te.asyncQueue.enqueueAndForget((0,Be.Z)(function*(){return YA(yield py(te),Je)})),()=>{qe.Dc(),te.asyncQueue.enqueueAndForget((0,Be.Z)(function*(){return XA(yield py(te),Je)}))}}(fi(G),Z,D,k)}function gy(n,e){return function(t,r){const i=new _i;return t.asyncQueue.enqueueAndForget((0,Be.Z)(function*(){return function XN(n,e,t){return aP.apply(this,arguments)}(yield function kP(n){return tI(n).then(e=>e.syncEngine)}(t),r,i)})),i.promise}(fi(n),e)}function qP(n,e,t){const r=t.docs.get(e._key),i=new vp(n);return new Qd(n,i,e._key,r,new Ng(t.hasPendingWrites,t.fromCache),e.converter)}function ZM(){if(typeof Uint8Array>"u")throw new Ge("unimplemented","Uint8Arrays are not available in this environment.")}function KM(){if(!function Vv(){return typeof atob<"u"}())throw new Ge("unimplemented","Blobs are unavailable in Firestore in this environment.")}class ow{constructor(e){this._delegate=e}static fromBase64String(e){return KM(),new ow(Ol.fromBase64String(e))}static fromUint8Array(e){return ZM(),new ow(Ol.fromUint8Array(e))}toBase64(){return KM(),this._delegate.toBase64()}toUint8Array(){return ZM(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function KP(n){return function x2(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class gI extends WP{constructor(e){super(),this.firestore=e}convertBytes(e){return new ow(new Ol(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ac.forKey(t,this.firestore,null)}}class kg{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new sw(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new cw(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=kg.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let u=i.get(t);return u||(u=new kg(e,new gI(e),t),i.set(t,u)),u}}kg.INSTANCES=new WeakMap;class Ac{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new gI(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ge("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ac(t,new Ir(t._delegate,r,new st(e)))}static forKey(e,t,r){return new Ac(t,new Ir(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new my(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new my(this.firestore,function EM(n,e,...t){if(n=(0,Mn.m9)(n),FP("collection","path",e),n instanceof Q_){const r=In.fromString(e,...t);return CM(r),new Ml(n,null,r)}{if(!(n instanceof Ir||n instanceof Ml))throw new Ge(Me.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(In.fromString(e,...t));return CM(r),new Ml(n.firestore,null,r)}}(this._delegate,e))}catch(t){throw Co(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Mn.m9)(e))instanceof Ir&&IM(this._delegate,e)}set(e,t){t=function ZP(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ge("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}("DocumentReference.set",t);try{return t?HM(this._delegate,e,t):HM(this._delegate,e)}catch(r){throw Co(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?$M(this._delegate,e):$M(this._delegate,e,t,...r)}catch(i){throw Co(i,"updateDoc()","DocumentReference.update()")}}delete(){return function h2(n){return gy(Pn(n.firestore,br),[new Qv(n._key,xr.none())])}(this._delegate)}onSnapshot(...e){const t=XM(e),r=eO(e,i=>new aw(this.firestore,new Qd(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return GM(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function a2(n){n=Pn(n,Ir);const e=Pn(n.firestore,br),t=fi(e),r=new vp(e);return function Sk(n,e){const t=new _i;return n.asyncQueue.enqueueAndForget((0,Be.Z)(function*(){return(r=(0,Be.Z)(function*(i,u,d){try{const D=yield function(k,G){const Z=pt(k);return Z.persistence.runTransaction("read document","readonly",te=>Z.localDocuments.getDocument(te,G))}(i,u);D.isFoundDocument()?d.resolve(D):D.isNoDocument()?d.resolve(null):d.reject(new Ge(Me.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(D){const k=cy(D,`Failed to get document '${u} from cache`);d.reject(k)}}),function(i,u,d){return r.apply(this,arguments)})(yield nI(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Qd(e,r,n._key,i,new Ng(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function c2(n){n=Pn(n,Ir);const e=Pn(n.firestore,br);return pM(fi(e),n._key,{source:"server"}).then(t=>qP(e,n,t))}(this._delegate):function o2(n){n=Pn(n,Ir);const e=Pn(n.firestore,br);return pM(fi(e),n._key).then(t=>qP(e,n,t))}(this._delegate),t.then(r=>new aw(this.firestore,new Qd(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Ac(this.firestore,this._delegate.withConverter(e?kg.getInstance(this.firestore,e):null))}}function Co(n,e,t){return n.message=n.message.replace(e,t),n}function XM(n){for(const e of n)if("object"==typeof e&&!KP(e))return e;return{}}function eO(n,e){var t,r;let i;return i=KP(n[0])?n[0]:KP(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{i.next&&i.next(e(u))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class aw{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ac(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return zM(this._delegate,e._delegate)}}class cw extends aw{data(e){const t=this._delegate.data(e);return function tE(n,e){n||_t()}(void 0!==t),t}}class _o{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new gI(e)}where(e,t,r){try{return new _o(this.firestore,gp(this._delegate,function Kk(n,e,t){const r=e,i=lI("where",n);return iw._create(i,r,t)}(e,t,r)))}catch(i){throw Co(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new _o(this.firestore,gp(this._delegate,function Jk(n,e="asc"){const t=e,r=lI("orderBy",n);return GP._create(r,t)}(e,t)))}catch(r){throw Co(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new _o(this.firestore,gp(this._delegate,function Yk(n){return _M("limit",n),dI._create("limit",n,"F")}(e)))}catch(t){throw Co(t,"limit()","Query.limit()")}}limitToLast(e){try{return new _o(this.firestore,gp(this._delegate,function Qk(n){return _M("limitToLast",n),dI._create("limitToLast",n,"L")}(e)))}catch(t){throw Co(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new _o(this.firestore,gp(this._delegate,function Xk(...n){return hI._create("startAt",n,!0)}(...e)))}catch(t){throw Co(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new _o(this.firestore,gp(this._delegate,function e2(...n){return hI._create("startAfter",n,!1)}(...e)))}catch(t){throw Co(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new _o(this.firestore,gp(this._delegate,function t2(...n){return pI._create("endBefore",n,!1)}(...e)))}catch(t){throw Co(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new _o(this.firestore,gp(this._delegate,function n2(...n){return pI._create("endAt",n,!0)}(...e)))}catch(t){throw Co(t,"endAt()","Query.endAt()")}}isEqual(e){return jP(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function l2(n){n=Pn(n,Rs);const e=Pn(n.firestore,br),t=fi(e),r=new vp(e);return function Ek(n,e){const t=new _i;return n.asyncQueue.enqueueAndForget((0,Be.Z)(function*(){return(r=(0,Be.Z)(function*(i,u,d){try{const D=yield WE(i,u,!0),k=new tM(u,D.ir),G=k.sc(D.documents),Z=k.applyChanges(G,!1);d.resolve(Z.snapshot)}catch(D){const k=cy(D,`Failed to execute query '${u} against cache`);d.reject(k)}}),function(i,u,d){return r.apply(this,arguments)})(yield nI(n),e,t);var r})),t.promise}(t,n._query).then(i=>new mp(e,r,n,i))}(this._delegate):"server"===e?.source?function d2(n){n=Pn(n,Rs);const e=Pn(n.firestore,br),t=fi(e),r=new vp(e);return fM(t,n._query,{source:"server"}).then(i=>new mp(e,r,n,i))}(this._delegate):function u2(n){n=Pn(n,Rs);const e=Pn(n.firestore,br),t=fi(e),r=new vp(e);return kM(n._query),fM(t,n._query).then(i=>new mp(e,r,n,i))}(this._delegate),t.then(r=>new JP(this.firestore,new mp(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=XM(e),r=eO(e,i=>new JP(this.firestore,new mp(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return GM(this._delegate,t,r)}withConverter(e){return new _o(this.firestore,this._delegate.withConverter(e?kg.getInstance(this.firestore,e):null))}}class L2{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new cw(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class JP{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new _o(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new cw(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new L2(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new cw(this._firestore,r))})}isEqual(e){return zM(this._delegate,e._delegate)}}class my extends _o{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ac(this.firestore,e):null}doc(e){try{return new Ac(this.firestore,void 0===e?iI(this._delegate):iI(this._delegate,e))}catch(t){throw Co(t,"doc()","CollectionReference.doc()")}}add(e){return function p2(n,e){const t=Pn(n.firestore,br),r=iI(n),i=fI(n.converter,e);return gy(t,[aI(Og(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,xr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Ac(this.firestore,t))}isEqual(e){return IM(this._delegate,e._delegate)}withConverter(e){return new my(this.firestore,this._delegate.withConverter(e?kg.getInstance(this.firestore,e):null))}}function tO(n,e){return function B2(n,e=eS.z){return new gs.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function QP(n,e){return tO(n,e).pipe((0,It.U)(t=>({payload:t,type:"query"})))}function mI(n,e){return QP(n,e).pipe(Vo(void 0),Xm(),(0,It.U)(([t,r])=>{const i=r.payload.docChanges(),u=i.map(d=>({type:d.type,payload:d}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((d,D)=>{const k=i.find(Z=>Z.doc.ref.isEqual(d.ref)),G=t?.payload.docs.find(Z=>Z.ref.isEqual(d.ref));k&&JSON.stringify(k.doc.metadata)===JSON.stringify(d.metadata)||!k&&G&&JSON.stringify(G.metadata)===JSON.stringify(d.metadata)||u.push({type:"modified",payload:{oldIndex:D,newIndex:D,type:"modified",doc:d}})}),u}))}function nO(n,e,t){return mI(n,t).pipe(ol((r,i)=>function z2(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function H2(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return XP(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return XP(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return XP(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(u=>u.payload),e),[]),function tS(n,e=ou.y){return n=n??nS,(0,Dr.e)((t,r)=>{let i,u=!0;t.subscribe((0,zr.x)(r,d=>{const D=e(d);(u||!n(i,D))&&(u=!1,i=D,r.next(d))}))})}(),(0,It.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function XP(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function rO(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class iO{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=mI(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,It.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Vo(void 0),Xm(),Mi(([r,i])=>i.length>0||!r),(0,It.U)(([r,i])=>i),Rn.iC)}auditTrail(e){return this.stateChanges(e).pipe(ol((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=rO(e);return nO(this.query,t,this.afs.schedulers.outsideAngular).pipe(Rn.iC)}valueChanges(e={}){return QP(this.query,this.afs.schedulers.outsideAngular).pipe((0,It.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Rn.iC)}get(e){return(0,An.D)(this.query.get(e)).pipe(Rn.iC)}add(e){return this.ref.add(e)}doc(e){return new sO(this.ref.doc(e),this.afs)}}class sO{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:u}=cO(r,t);return new iO(i,u,this.afs)}snapshotChanges(){return function V2(n,e){return tO(n,e).pipe(Vo(void 0),Xm(),(0,It.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Rn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,It.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,An.D)(this.ref.get(e)).pipe(Rn.iC)}}class $2{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?mI(this.query,this.afs.schedulers.outsideAngular).pipe((0,It.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Mi(t=>t.length>0),Rn.iC):mI(this.query,this.afs.schedulers.outsideAngular).pipe(Rn.iC)}auditTrail(e){return this.stateChanges(e).pipe(ol((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=rO(e);return nO(this.query,t,this.afs.schedulers.outsideAngular).pipe(Rn.iC)}valueChanges(e={}){return QP(this.query,this.afs.schedulers.outsideAngular).pipe((0,It.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),Rn.iC)}get(e){return(0,An.D)(this.query.get(e)).pipe(Rn.iC)}}const oO=new o.OlP("angularfire2.enableFirestorePersistence"),aO=new o.OlP("angularfire2.firestore.persistenceSettings"),G2=new o.OlP("angularfire2.firestore.settings"),W2=new o.OlP("angularfire2.firestore.use-emulator");function cO(n,e=(t=>t)){return{query:e(n),ref:n}}let eD=(()=>{class n{constructor(t,r,i,u,d,D,k,G,Z,te,le,ye,Oe,qe,Je,Et,Nt){this.schedulers=k;const xt=(0,Li.on)(t,D,r),$t=Z;te&&Q0(xt,D,le,Oe,qe,Je,ye,Et),[this.firestore,this.persistenceEnabled$]=(0,Li.cc)(`${xt.name}.firestore`,"AngularFirestore",xt.name,()=>{const hn=D.runOutsideAngular(()=>xt.firestore());if(u&&hn.settings(u),$t&&hn.useEmulator(...$t),i&&!kc(d)){const On=()=>{try{return(0,An.D)(hn.enablePersistence(G||void 0).then(()=>!0,()=>!1))}catch(qs){return typeof console<"u"&&console.warn(qs),bt(!1)}};return[hn,D.runOutsideAngular(On)]}return[hn,bt(!1)]},[u,$t,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:d}=cO(i,r),D=this.schedulers.ngZone.run(()=>u);return new iO(D,d,this)}collectionGroup(t,r){const i=r||(d=>d),u=this.firestore.collectionGroup(t);return new $2(i(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new sO(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(Li.Dh),o.LFG(Li.xv,8),o.LFG(oO,8),o.LFG(G2,8),o.LFG(o.Lbi),o.LFG(o.R0b),o.LFG(Rn.HU),o.LFG(aO,8),o.LFG(W2,8),o.LFG(bd,8),o.LFG(W0,8),o.LFG(q0,8),o.LFG(Z0,8),o.LFG(K0,8),o.LFG(J0,8),o.LFG(Y0,8),o.LFG(Df,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),q2=(()=>{class n{constructor(){G0.Z.registerVersion("angularfire",Rn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:oO,useValue:!0},{provide:aO,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[eD]}),n})(),tD=(()=>{var n;class e{constructor(r,i,u,d){this.afAuth=r,this.afs=i,this.http=u,this.router=d,this.currentUser=null,this.afAuth.onAuthStateChanged(D=>{console.log("Changed: ",D),this.currentUser=D})}signUp(r,i,u,d){var D=this;return(0,Be.Z)(function*(){try{const G=(yield D.afAuth.createUserWithEmailAndPassword(i,d)).user?.uid;if(!G)throw new Error("User UID not available");const Z={uid:G,username:r,email:i,birthday:u,password:d};return yield D.afs.collection("users").doc(G).set(Z),G}catch(k){throw console.error("Erreur lors de l'inscription",k),k}})()}sendVerifEmail(r){r.sendEmailVerification().then(i=>{this.router.navigate(["/verifyemail"])},i=>{alert("une erreur s'est produite")})}signIn({email:r,password:i}){var u=this;return(0,Be.Z)(function*(){try{const d=yield u.afAuth.signInWithEmailAndPassword(r,i),D=d.user;if(!D)throw new Error("User information not available");return u.router.navigate(D&&D.emailVerified?["/home"]:["/verifyemail"]),d}catch(d){throw console.error("Erreur lors de la connexion",d),d}})()}signOut(){return this.afAuth.signOut()}getUsers(){return this.afs.collection("users").valueChanges({idField:"uid"})}getUserForMsg(r,i){for(let u of i)if(u.uid==r||u.id===r)return u.email;return"Deleted"}addChatMessage(r){return this.afs.collection("messages").add({msg:r,from:this.currentUser?.email,timestamp:new Date})}getChatMessages(){let r=[];return this.getUsers().pipe(Rr(i=>(console.log("Users retrieved: ",i),r=i,this.afs.collection("messages",u=>u.orderBy("timestamp")).valueChanges({idField:"id"}))),(0,It.U)(i=>{console.log("Messages retrieved: ",i);for(let u of i)u.fromName=this.getUserForMsg(u.from,r),u.myMsg=this.currentUser?.uid===u.from;return console.log("Processed messages: ",i),i}))}}return(n=e).\u0275fac=function(r){return new(r||n)(o.LFG(bd),o.LFG(eD),o.LFG(nu),o.LFG(wr))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),e})(),uO=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(o.Qsj),o.Y36(o.SBq))},n.\u0275dir=o.lG2({type:n}),n})(),jg=(()=>{class n extends uO{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=o.n5z(n)))(r||n)}}(),n.\u0275dir=o.lG2({type:n,features:[o.qOj]}),n})();const xl=new o.OlP("NgValueAccessor"),J2={provide:xl,useExisting:(0,o.Gpc)(()=>Cp),multi:!0},Q2=new o.OlP("CompositionEventMode");let Cp=(()=>{class n extends uO{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Y2(){const n=_()?_().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(o.Qsj),o.Y36(o.SBq),o.Y36(Q2,8))},n.\u0275dir=o.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&o.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[o._Bn([J2]),o.qOj]}),n})();const X2=!1;function _p(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function dO(n){return null!=n&&"number"==typeof n.length}const Ws=new o.OlP("NgValidators"),wp=new o.OlP("NgAsyncValidators"),eL=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Oa{static min(e){return function hO(n){return e=>{if(_p(e.value)||_p(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function pO(n){return e=>{if(_p(e.value)||_p(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return fO(e)}static requiredTrue(e){return function gO(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function mO(n){return _p(n.value)||eL.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function vO(n){return e=>_p(e.value)||!dO(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function yO(n){return e=>dO(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function CO(n){if(!n)return vI;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(_p(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return bO(e)}static composeAsync(e){return TO(e)}}function fO(n){return _p(n.value)?{required:!0}:null}function vI(n){return null}function _O(n){return null!=n}function wO(n){const e=(0,o.QGY)(n)?(0,An.D)(n):n;if(X2&&!(0,o.CqO)(e)){let t="Expected async validator to return Promise or Observable.";throw"object"==typeof n&&(t+=" Are you using a synchronous validator where an async validator is expected?"),new o.vHH(-1101,t)}return e}function SO(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function EO(n,e){return e.map(t=>t(n))}function IO(n){return n.map(e=>function tL(n){return!n.validate}(e)?e:t=>e.validate(t))}function bO(n){if(!n)return null;const e=n.filter(_O);return 0==e.length?null:function(t){return SO(EO(t,e))}}function nD(n){return null!=n?bO(IO(n)):null}function TO(n){if(!n)return null;const e=n.filter(_O);return 0==e.length?null:function(t){return function Z2(...n){const e=(0,js.jO)(n),{args:t,keys:r}=Zg(n),i=new gs.y(u=>{const{length:d}=t;if(!d)return void u.complete();const D=new Array(d);let k=d,G=d;for(let Z=0;Z<d;Z++){let te=!1;(0,yh.Xf)(t[Z]).subscribe((0,zr.x)(u,le=>{te||(te=!0,G--),D[Z]=le},()=>k--,void 0,()=>{(!k||!te)&&(G||u.next(r?vh(r,D):D),u.complete())}))}});return e?i.pipe(au(e)):i}(EO(t,e).map(wO)).pipe((0,It.U)(SO))}}function rD(n){return null!=n?TO(IO(n)):null}function AO(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function PO(n){return n._rawValidators}function DO(n){return n._rawAsyncValidators}function iD(n){return n?Array.isArray(n)?n:[n]:[]}function yI(n,e){return Array.isArray(n)?n.includes(e):n===e}function RO(n,e){const t=iD(e);return iD(n).forEach(i=>{yI(t,i)||t.push(i)}),t}function MO(n,e){return iD(e).filter(t=>!yI(n,t))}class OO{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=nD(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=rD(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class wo extends OO{get formDirective(){return null}get path(){return null}}class Sp extends OO{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class xO{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let vy=(()=>{class n extends xO{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(Sp,2))},n.\u0275dir=o.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&o.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[o.qOj]}),n})(),Ug=(()=>{class n extends xO{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(wo,10))},n.\u0275dir=o.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&o.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[o.qOj]}),n})();function NO(n,e){return n?`with name: '${e}'`:`at index: ${e}`}const aD=!1,uw="VALID",_I="INVALID",yy="PENDING",lw="DISABLED";function cD(n){return(wI(n)?n.validators:n)||null}function uD(n,e){return(wI(e)?e.asyncValidators:n)||null}function wI(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function kO(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new o.vHH(1e3,aD?function sL(n){return`\n    There are no form controls registered with this ${n?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(e):"");if(!r[t])throw new o.vHH(1001,aD?function oL(n,e){return`Cannot find form control ${NO(n,e)}`}(e,t):"")}function LO(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new o.vHH(1002,aD?function aL(n,e){return`Must supply a value for form control ${NO(n,e)}`}(e,i):"")})}class SI{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===uw}get invalid(){return this.status===_I}get pending(){return this.status==yy}get disabled(){return this.status===lw}get enabled(){return this.status!==lw}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(RO(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(RO(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(MO(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(MO(e,this._rawAsyncValidators))}hasValidator(e){return yI(this._rawValidators,e)}hasAsyncValidator(e){return yI(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=yy,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=lw,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=uw,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===uw||this.status===yy)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?lw:uw}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=yy,this._hasOwnPendingAsyncValidator=!0;const t=wO(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new o.vpe,this.statusChanges=new o.vpe}_calculateStatus(){return this._allControlsDisabled()?lw:this.errors?_I:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(yy)?yy:this._anyControlsHaveStatus(_I)?_I:uw}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){wI(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function cL(n){return Array.isArray(n)?nD(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function uL(n){return Array.isArray(n)?rD(n):n||null}(this._rawAsyncValidators)}}class dw extends SI{constructor(e,t,r){super(cD(t),uD(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){LO(this,!0,e),Object.keys(e).forEach(r=>{kO(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,u)=>{r=t(r,i,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class FO extends dw{}const Bg=new o.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>hw}),hw="always";function EI(n,e){return[...e.path,n]}function pw(n,e,t=hw){lD(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function dL(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&jO(n,e)})}(n,e),function pL(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function hL(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&jO(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function lL(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function II(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),TI(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function bI(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function lD(n,e){const t=PO(n);null!==e.validator?n.setValidators(AO(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=DO(n);null!==e.asyncValidator?n.setAsyncValidators(AO(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();bI(e._rawValidators,i),bI(e._rawAsyncValidators,i)}function TI(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=PO(n);if(Array.isArray(i)&&i.length>0){const u=i.filter(d=>d!==e.validator);u.length!==i.length&&(t=!0,n.setValidators(u))}}if(null!==e.asyncValidator){const i=DO(n);if(Array.isArray(i)&&i.length>0){const u=i.filter(d=>d!==e.asyncValidator);u.length!==i.length&&(t=!0,n.setAsyncValidators(u))}}}const r=()=>{};return bI(e._rawValidators,r),bI(e._rawAsyncValidators,r),t}function jO(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function UO(n,e){lD(n,e)}function hD(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function BO(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function pD(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(u=>{u.constructor===Cp?t=u:function mL(n){return Object.getPrototypeOf(n.constructor)===jg}(u)?r=u:i=u}),i||r||t||null}const yL={provide:wo,useExisting:(0,o.Gpc)(()=>Vg)},fw=(()=>Promise.resolve())();let Vg=(()=>{class n extends wo{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new o.vpe,this.form=new dw({},nD(t),rD(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){fw.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),pw(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){fw.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){fw.then(()=>{const r=this._findContainer(t.path),i=new dw({});UO(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){fw.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){fw.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,BO(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(Ws,10),o.Y36(wp,10),o.Y36(Bg,8))},n.\u0275dir=o.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&o.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[o._Bn([yL]),o.qOj]}),n})();function VO(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function zO(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const gw=class extends SI{constructor(e=null,t,r){super(cD(t),uD(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),wI(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=zO(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){VO(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){VO(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){zO(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},wL={provide:Sp,useExisting:(0,o.Gpc)(()=>mw)},GO=(()=>Promise.resolve())();let mw=(()=>{class n extends Sp{constructor(t,r,i,u,d,D){super(),this._changeDetectorRef=d,this.callSetDisabledState=D,this.control=new gw,this._registered=!1,this.update=new o.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=pD(0,u)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),hD(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){pw(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){GO.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&(0,o.D6c)(r);GO.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?EI(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(wo,9),o.Y36(Ws,10),o.Y36(wp,10),o.Y36(xl,10),o.Y36(o.sBO,8),o.Y36(Bg,8))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[o._Bn([wL]),o.qOj,o.TTD]}),n})(),zg=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=o.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),qO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})();const fD=new o.OlP("NgModelWithFormControlWarning"),AL={provide:wo,useExisting:(0,o.Gpc)(()=>vw)};let vw=(()=>{class n extends wo{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new o.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(TI(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return pw(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){II(t.control||null,t,!1),function vL(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,BO(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(II(r||null,t),(n=>n instanceof gw)(i)&&(pw(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);UO(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function fL(n,e){return TI(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){lD(this.form,this),this._oldForm&&TI(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(Ws,10),o.Y36(wp,10),o.Y36(Bg,8))},n.\u0275dir=o.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&o.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[o._Bn([AL]),o.qOj,o.TTD]}),n})();const RL={provide:Sp,useExisting:(0,o.Gpc)(()=>AI)};let AI=(()=>{class n extends Sp{set isDisabled(t){}constructor(t,r,i,u,d){super(),this._ngModelWarningConfig=d,this._added=!1,this.update=new o.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=pD(0,u)}ngOnChanges(t){this._added||this._setUpControl(),hD(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return EI(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(o.Y36(wo,13),o.Y36(Ws,10),o.Y36(wp,10),o.Y36(xl,10),o.Y36(fD,8))},n.\u0275dir=o.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[o._Bn([RL]),o.qOj,o.TTD]}),n})(),Hg=(()=>{class n{constructor(){this._validator=vI}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):vI,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=o.lG2({type:n,features:[o.TTD]}),n})();const UL={provide:Ws,useExisting:(0,o.Gpc)(()=>Cy),multi:!0};let Cy=(()=>{class n extends Hg{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=o.D6c,this.createValidator=t=>fO}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=o.n5z(n)))(r||n)}}(),n.\u0275dir=o.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&o.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[o._Bn([UL]),o.qOj]}),n})(),ux=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[qO]}),n})();class lx extends SI{constructor(e,t,r){super(cD(t),uD(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){LO(this,!1,e),e.forEach((r,i)=>{kO(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function dx(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let CD=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,r=null){const i=this._reduceControls(t);let u={};return dx(r)?u=r:null!==r&&(u.validators=r.validator,u.asyncValidators=r.asyncValidator),new dw(i,u)}record(t,r=null){const i=this._reduceControls(t);return new FO(i,r)}control(t,r,i){let u={};return this.useNonNullable?(dx(r)?u=r:(u.validators=r,u.asyncValidators=i),new gw(t,{...u,nonNullable:!0})):new gw(t,r,i)}array(t,r,i){const u=t.map(d=>this._createControl(d));return new lx(u,r,i)}_reduceControls(t){const r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){return t instanceof gw||t instanceof SI?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),hx=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Bg,useValue:t.callSetDisabledState??hw}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[ux]}),n})(),GL=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:fD,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Bg,useValue:t.callSetDisabledState??hw}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[ux]}),n})();const px=["chatHistory"],WL=function(n,e){return{"text-right":n,"text-left":e}},qL=function(n,e){return{"my-message":n,"other-message":e}};function ZL(n,e){if(1&n&&(o.TgZ(0,"li",22)(1,"div",23),o._UZ(2,"span",24)(3,"img",25),o.TgZ(4,"div",7)(5,"div",26)(6,"b"),o._uU(7),o.qZA(),o._UZ(8,"br"),o.TgZ(9,"span"),o._uU(10),o.qZA()()()()()),2&n){const t=e.$implicit;o.xp6(1),o.Q6J("ngClass",o.WLB(4,WL,t.myMsg,!t.myMsg)),o.xp6(4),o.Q6J("ngClass",o.WLB(7,qL,t.myMsg,!t.myMsg)),o.xp6(2),o.Oqu(t.from),o.xp6(3),o.Oqu(t.msg)}}let KL=(()=>{var n;class e{constructor(r,i,u){this.chatService=r,this.router=i,this.newMsg=""}ngAfterViewInit(){this.scrollToBottom()}scrollToBottom(){if(this.chatHistoryElements&&this.chatHistoryElements.length>0){const r=this.chatHistoryRef.nativeElement;r.scrollTop=r.scrollHeight}}ngOnInit(){this.messages=this.chatService.getChatMessages(),this.messages.subscribe(r=>{console.log("Received Messages:",r),setTimeout(()=>{this.scrollToBottom()})})}sendMessage(){this.chatService.addChatMessage(this.newMsg).then(()=>{this.newMsg="",this.scrollToBottom()})}onKeyDown(r){"Enter"===r.key&&(r.preventDefault(),""!==this.newMsg.trim()&&this.sendMessage())}signOut(){this.chatService.signOut().then(()=>{this.router.navigateByUrl("/",{replaceUrl:!0})})}}return(n=e).\u0275fac=function(r){return new(r||n)(o.Y36(tD),o.Y36(wr),o.Y36(gu))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-chat"]],viewQuery:function(r,i){if(1&r&&(o.Gf(px,5),o.Gf(px,5)),2&r){let u;o.iGM(u=o.CRH())&&(i.chatHistoryRef=u.first),o.iGM(u=o.CRH())&&(i.chatHistoryElements=u)}},decls:29,vars:5,consts:[["href","https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css","rel","stylesheet"],[1,"container"],[1,"row","clearfix"],[1,"col-lg-12"],[1,"card","chat-app"],[1,"chat"],[1,"chat-header","clearfix"],[1,"row"],[1,"col-lg-6"],["src","https://bootdey.com/img/Content/avatar/avatar2.png","alt","avatar"],[1,"chat-about"],[1,"m-b-0"],[1,"chat-history",2,"max-height","400px","overflow-y","scroll"],["chatHistory",""],["class","clearfix",4,"ngFor","ngForOf"],[1,"chat-message","clearfix"],[1,"input-group","mb-0"],[1,"input-group-prepend"],["type","text","placeholder","Ecrivez votre message ici...",1,"form-control",3,"ngModel","ngModelChange","keydown"],[2,"border-color","white",3,"disabled","click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24",2,"fill","#1E73BE"],["d","m21.426 11.095-17-8A1 1 0 0 0 3.03 4.242l1.212 4.849L12 12l-7.758 2.909-1.212 4.849a.998.998 0 0 0 1.396 1.147l17-8a1 1 0 0 0 0-1.81z"],[1,"clearfix"],[1,"message-data",3,"ngClass"],[1,"message-data-time"],["src","https://bootdey.com/img/Content/avatar/avatar7.png","alt","avatar"],[1,"col",3,"ngClass"]],template:function(r,i){1&r&&(o._UZ(0,"app-navbar")(1,"link",0),o.TgZ(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8),o._UZ(10,"img",9),o.TgZ(11,"div",10)(12,"h6",11),o._uU(13,"Support protech-it"),o.qZA(),o.TgZ(14,"small"),o._uU(15,"Disponible"),o.qZA()()()()(),o.TgZ(16,"div",12,13)(18,"ul",11),o.YNc(19,ZL,11,10,"li",14),o.ALo(20,"async"),o.qZA()(),o.TgZ(21,"div",15)(22,"div",16),o._UZ(23,"div",17),o.TgZ(24,"textarea",18),o.NdJ("ngModelChange",function(d){return i.newMsg=d})("keydown",function(d){return i.onKeyDown(d)}),o.qZA(),o.TgZ(25,"button",19),o.NdJ("click",function(){return i.sendMessage()}),o.O4$(),o.TgZ(26,"svg",20),o._UZ(27,"path",21),o.qZA()()()()()()()()(),o.kcU(),o._UZ(28,"app-footer")),2&r&&(o.xp6(19),o.Q6J("ngForOf",o.lcZ(20,3,i.messages)),o.xp6(5),o.Q6J("ngModel",i.newMsg),o.xp6(1),o.Q6J("disabled",""===i.newMsg))},dependencies:[jt,Vi,Cp,vy,mw,vu,yu,Js],styles:['body[_ngcontent-%COMP%]{background-color:#f4f7f6;margin-top:20px}.card[_ngcontent-%COMP%]{background:#fff;transition:.5s;border:0;margin-bottom:30px;border-radius:.55rem;position:relative;width:100%;box-shadow:0 1px 2px #0000001a}.chat-app[_ngcontent-%COMP%]   .people-list[_ngcontent-%COMP%]{width:280px;position:absolute;left:0;top:0;padding:20px;z-index:7}.chat-app[_ngcontent-%COMP%]   .chat[_ngcontent-%COMP%]{margin-left:280px;border-left:1px solid #eaeaea}.people-list[_ngcontent-%COMP%]{transition:.5s}.people-list[_ngcontent-%COMP%]   .chat-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:10px 15px;list-style:none;border-radius:3px}.people-list[_ngcontent-%COMP%]   .chat-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background:#efefef;cursor:pointer}.people-list[_ngcontent-%COMP%]   .chat-list[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]{background:#efefef}.people-list[_ngcontent-%COMP%]   .chat-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:15px}.people-list[_ngcontent-%COMP%]   .chat-list[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:45px;border-radius:50%}.people-list[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{float:left;border-radius:50%}.people-list[_ngcontent-%COMP%]   .about[_ngcontent-%COMP%]{float:left;padding-left:8px}.people-list[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]{color:#999;font-size:13px}.chat[_ngcontent-%COMP%]   .chat-header[_ngcontent-%COMP%]{padding:15px 20px;border-bottom:2px solid #f4f7f6}.chat[_ngcontent-%COMP%]   .chat-header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{float:left;border-radius:40px;width:40px}.chat[_ngcontent-%COMP%]   .chat-header[_ngcontent-%COMP%]   .chat-about[_ngcontent-%COMP%]{float:left;padding-left:10px}.chat[_ngcontent-%COMP%]   .chat-history[_ngcontent-%COMP%]{padding:20px;border-bottom:2px solid #fff}.chat[_ngcontent-%COMP%]   .chat-history[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding:0}.chat[_ngcontent-%COMP%]   .chat-history[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none;margin-bottom:30px}.chat[_ngcontent-%COMP%]   .chat-history[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{margin-bottom:0}.chat[_ngcontent-%COMP%]   .chat-history[_ngcontent-%COMP%]   .message-data[_ngcontent-%COMP%]{margin-bottom:15px}.chat[_ngcontent-%COMP%]   .chat-history[_ngcontent-%COMP%]   .message-data[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:40px;width:40px}.chat[_ngcontent-%COMP%]   .chat-history[_ngcontent-%COMP%]   .message-data-time[_ngcontent-%COMP%]{color:#434651;padding-left:6px}.chat[_ngcontent-%COMP%]   .chat-history[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{color:#444;padding:18px 20px;line-height:26px;font-size:16px;border-radius:7px;display:inline-block;position:relative}.chat[_ngcontent-%COMP%]   .chat-history[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]:after{bottom:100%;left:7%;border:solid transparent;content:" ";height:0;width:0;position:absolute;pointer-events:none;border-bottom-color:#fff;border-width:10px;margin-left:-10px}.chat[_ngcontent-%COMP%]   .chat-history[_ngcontent-%COMP%]   .my-message[_ngcontent-%COMP%]{background:#efefef}.chat[_ngcontent-%COMP%]   .chat-history[_ngcontent-%COMP%]   .my-message[_ngcontent-%COMP%]:after{bottom:100%;left:30px;border:solid transparent;content:" ";height:0;width:0;position:absolute;pointer-events:none;border-bottom-color:#efefef;border-width:10px;margin-left:-10px}.chat[_ngcontent-%COMP%]   .chat-history[_ngcontent-%COMP%]   .other-message[_ngcontent-%COMP%]{background:#e8f1f3;text-align:right}.chat[_ngcontent-%COMP%]   .chat-history[_ngcontent-%COMP%]   .other-message[_ngcontent-%COMP%]:after{border-bottom-color:#e8f1f3;left:93%}.chat[_ngcontent-%COMP%]   .chat-message[_ngcontent-%COMP%]{padding:20px}.online[_ngcontent-%COMP%], .offline[_ngcontent-%COMP%], .me[_ngcontent-%COMP%]{margin-right:2px;font-size:8px;vertical-align:middle}.online[_ngcontent-%COMP%]{color:#86c541}.offline[_ngcontent-%COMP%]{color:#e47297}.me[_ngcontent-%COMP%]{color:#1d8ecd}.float-right[_ngcontent-%COMP%]{float:right}.clearfix[_ngcontent-%COMP%]:after{visibility:hidden;display:block;font-size:0;content:" ";clear:both;height:0}@media only screen and (max-width: 767px){.chat-app[_ngcontent-%COMP%]   .people-list[_ngcontent-%COMP%]{height:465px;width:100%;overflow-x:auto;background:#fff;left:-400px;display:none}.chat-app[_ngcontent-%COMP%]   .people-list.open[_ngcontent-%COMP%]{left:0}.chat-app[_ngcontent-%COMP%]   .chat[_ngcontent-%COMP%]{margin:0}.chat-app[_ngcontent-%COMP%]   .chat[_ngcontent-%COMP%]   .chat-header[_ngcontent-%COMP%]{border-radius:.55rem .55rem 0 0}.chat-app[_ngcontent-%COMP%]   .chat-history[_ngcontent-%COMP%]{height:300px;overflow-x:auto}}@media only screen and (min-width: 768px) and (max-width: 992px){.chat-app[_ngcontent-%COMP%]   .chat-list[_ngcontent-%COMP%]{height:650px;overflow-x:auto}.chat-app[_ngcontent-%COMP%]   .chat-history[_ngcontent-%COMP%]{height:600px;overflow-x:auto}}@media only screen and (min-device-width: 768px) and (max-device-width: 1024px) and (orientation: landscape) and (-webkit-min-device-pixel-ratio: 1){.chat-app[_ngcontent-%COMP%]   .chat-list[_ngcontent-%COMP%]{height:480px;overflow-x:auto}.chat-app[_ngcontent-%COMP%]   .chat-history[_ngcontent-%COMP%]{height:calc(100vh - 350px);overflow-x:auto}}.my-message[_ngcontent-%COMP%]{background-color:#dcf8c6;color:#000;border-radius:15px;padding:10px;max-width:70%;align-self:flex-end;margin-bottom:10px;text-align:right}.other-message[_ngcontent-%COMP%]{background-color:#e0e0e0;color:#000;border-radius:15px;padding:10px;max-width:70%;align-self:flex-start;margin-bottom:10px;text-align:left}']}),e})();function JL(n,e){if(1&n&&(o.TgZ(0,"div",31),o._UZ(1,"img",32),o.TgZ(2,"span",33),o._uU(3),o.qZA()()),2&n){const t=e.$implicit;o.xp6(3),o.AsE("#",t.id," ",t.username,"")}}let YL=(()=>{var n;class e{constructor(r,i,u){this.userService=r,this.localSt=i,this.route=u,this.nbrOfClients=0,this.nbrOfAdmins=0,this.nbrOfUsers=0}ngOnInit(){this.userService.getClients().subscribe(r=>{this.nbrOfClients=r.length,console.log(r)}),this.userService.getAdmins().subscribe(r=>{this.nbrOfAdmins=r.length,console.log(r)}),this.userService.getAllUsers().subscribe(r=>{this.nbrOfUsers=r.length,console.log(r)}),this.userService.getAdmins().subscribe(r=>{this.users=r},r=>{console.error("Error fetching admins:",r)})}signOut(){this.localSt.Signout(),this.connecter=!1,this.route.navigate(["login"])}}return(n=e).\u0275fac=function(r){return new(r||n)(o.Y36(_l),o.Y36(gu),o.Y36(wr))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-admin-dashboard"]],decls:81,vars:4,consts:[[1,"sidebar"],["src","../assets/images/protext.png","alt","protechLogo",2,"width","200px","height","50px","margin-left","15px","margin-top","10px"],[1,"nav-links"],["routerLink","/admindashboard"],[1,"bx","bx-grid-alt"],[1,"links_name"],["routerLink","/adminslist"],[1,"bx","bx-user"],["routerLink","/clientslist"],["routerLink","/userslist"],["routerLink","/chatadmin"],[1,"bx","bx-message"],[1,"log_out"],[3,"click"],[1,"bx","bx-log-out"],[1,"home-section"],[1,"dashboard"],["routerLink","/profile"],["class","profile-details",4,"ngFor","ngForOf"],[1,"home-content"],[1,"overview-boxes"],[1,"box"],[2,"margin-left","70px"],[1,"right-side"],[1,"box-topic"],[2,"margin-left","80px"],[2,"margin-left","100px"],[1,"sales-boxes"],[1,"recent-sales","box"],[1,"title"],[1,"top-sales","box"],[1,"profile-details"],["src","../assets/images/user.jpg","alt","adminphoto"],[1,"admin_name"]],template:function(r,i){1&r&&(o.TgZ(0,"body")(1,"div",0)(2,"div"),o._UZ(3,"img",1),o.qZA(),o.TgZ(4,"ul",2)(5,"li")(6,"a",3),o._UZ(7,"i",4),o.TgZ(8,"span",5),o._uU(9,"Dashboard"),o.qZA()()(),o.TgZ(10,"li")(11,"a",6),o._UZ(12,"i",7),o.TgZ(13,"span",5),o._uU(14,"Admins"),o.qZA()()(),o.TgZ(15,"li")(16,"a",8),o._UZ(17,"i",7),o.TgZ(18,"span",5),o._uU(19,"Clients"),o.qZA()()(),o.TgZ(20,"li")(21,"a",9),o._UZ(22,"i",7),o.TgZ(23,"span",5),o._uU(24,"Tous les utilisateurs"),o.qZA()()(),o.TgZ(25,"li")(26,"a",10),o._UZ(27,"i",11),o.TgZ(28,"span",5),o._uU(29,"Messages"),o.qZA()()(),o.TgZ(30,"li",12)(31,"a",13),o.NdJ("click",function(){return i.signOut()}),o._UZ(32,"i",14),o.TgZ(33,"span",5),o._uU(34,"Se d\xe9connecter"),o.qZA()()()()(),o.TgZ(35,"section",15)(36,"nav")(37,"div")(38,"h3")(39,"span",16),o._uU(40,"Tableau de bord"),o.qZA()()(),o.TgZ(41,"a",17),o.YNc(42,JL,4,2,"div",18),o.qZA()(),o.TgZ(43,"div",19)(44,"div",20)(45,"div",21)(46,"div")(47,"div")(48,"b"),o._uU(49," Nombre des clients"),o.qZA(),o._UZ(50,"i",7),o.qZA(),o.TgZ(51,"h2")(52,"div",22),o._uU(53),o.qZA()()()(),o.TgZ(54,"div",21)(55,"div",23)(56,"div",24)(57,"b"),o._uU(58,"Nombre des admins"),o.qZA(),o._UZ(59,"i",7),o.qZA(),o.TgZ(60,"h2")(61,"div",25),o._uU(62),o.qZA()()()(),o.TgZ(63,"div",21)(64,"div",23)(65,"div",24)(66,"b"),o._uU(67,"Nombre des utilisateurs"),o.qZA(),o._UZ(68,"i",7),o.qZA(),o.TgZ(69,"h2")(70,"div",26),o._uU(71),o.qZA()()()()(),o.TgZ(72,"div",27)(73,"div",28)(74,"div",29)(75,"h3"),o._uU(76,"Nouveaux messages"),o.qZA()()(),o.TgZ(77,"div",30)(78,"div",29)(79,"h3"),o._uU(80,"Nouveaux utilisateurs"),o.qZA()()()()()()()),2&r&&(o.xp6(42),o.Q6J("ngForOf",i.users),o.xp6(11),o.hij(" ",i.nbrOfClients,""),o.xp6(9),o.Oqu(i.nbrOfAdmins),o.xp6(9),o.Oqu(i.nbrOfUsers))},dependencies:[Vi,yl],styles:['@import"https://fonts.googleapis.com/css2?family=Poppins:wght@200;300;400;500;600;700&display=swap";.sidebar[_ngcontent-%COMP%]{position:fixed;height:100%;width:240px;background:#0A2558;transition:all .5s ease}.sidebar[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{position:relative;list-style:none;height:50px}.sidebar[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{height:100%;width:100%;display:flex;align-items:center;text-decoration:none}.sidebar[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{min-width:60px;text-align:center;font-size:18px;color:#fff}.sidebar[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .links_name[_ngcontent-%COMP%]{color:#fff;font-size:15px;font-weight:400;white-space:nowrap}.sidebar[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]   .log_out[_ngcontent-%COMP%]{position:absolute;bottom:0;width:100%}.home-section[_ngcontent-%COMP%]{position:relative;background:#f5f5f5;min-height:100vh;width:calc(100% - 240px);left:240px;transition:all .5s ease}.home-section[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]{justify-content:space-between;height:80px;background:#fff;display:flex;align-items:center;position:fixed;width:calc(100% - 240px);left:240px;z-index:100;padding:0 20px;box-shadow:0 1px 1px #0000001a;transition:all .5s ease}.home-section[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   .profile-details[_ngcontent-%COMP%]{display:flex;align-items:center;background:#F5F6FA;border:2px solid #EFEEF1;border-radius:6px;height:50px;min-width:190px;padding:0 15px 0 2px}nav[_ngcontent-%COMP%]   .profile-details[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:40px;width:40px;border-radius:6px;object-fit:cover}nav[_ngcontent-%COMP%]   .profile-details[_ngcontent-%COMP%]   .admin_name[_ngcontent-%COMP%]{font-size:15px;font-weight:500;color:#333;margin:0 10px;white-space:nowrap}.home-section[_ngcontent-%COMP%]   .home-content[_ngcontent-%COMP%]{position:relative;padding-top:104px}.home-content[_ngcontent-%COMP%]   .overview-boxes[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;padding:0 20px;margin-bottom:26px}.overview-boxes[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:calc(25% - 15px);background:#fff;padding:15px 14px;border-radius:12px;box-shadow:0 5px 10px #0000001a}.home-content[_ngcontent-%COMP%]   .sales-boxes[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.home-content[_ngcontent-%COMP%]   .sales-boxes[_ngcontent-%COMP%]   .recent-sales[_ngcontent-%COMP%]{width:65%;background:#fff;padding:20px 30px;margin:0 20px;border-radius:12px;box-shadow:0 5px 10px #0000001a}.home-content[_ngcontent-%COMP%]   .sales-boxes[_ngcontent-%COMP%]   .top-sales[_ngcontent-%COMP%]{width:35%;background:#fff;padding:20px 30px;margin:0 20px 0 0;border-radius:12px;box-shadow:0 5px 10px #0000001a}']}),e})(),QL=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-form"]],decls:35,vars:0,consts:[["action","/contactez-nous/#wpcf7-f1301-p1315-o1","method","post",2,"margin-top","50px"],[1,"number"],["for","name"],["type","text","id","name","name","user_name"],["for","mail"],["type","email","id","mail","name","user_email"],["data-name","your-subject",1,"wpcf7-form-control-wrap"],["size","40","aria-required","true","aria-invalid","false","value","","type","text","name","your-subject",1,"wpcf7-form-control","wpcf7-text","wpcf7-validates-as-required"],["data-name","your-message",1,"wpcf7-form-control-wrap"],["cols","40","rows","10","aria-invalid","false","name","your-message",1,"wpcf7-form-control","wpcf7-textarea"],["type","submit"]],template:function(r,i){1&r&&(o._UZ(0,"app-navbar"),o.TgZ(1,"form",0)(2,"h1"),o._uU(3,"Contactez nous"),o.qZA(),o.TgZ(4,"fieldset")(5,"legend")(6,"span",1),o._uU(7,"1"),o.qZA(),o._uU(8," Informations personnels"),o.qZA(),o.TgZ(9,"label",2),o._uU(10,"Votre nom:"),o.qZA(),o._UZ(11,"input",3),o.TgZ(12,"label",4),o._uU(13,"Votre e-mail:"),o.qZA(),o._UZ(14,"input",5),o.qZA(),o.TgZ(15,"fieldset")(16,"legend")(17,"span",1),o._uU(18,"2"),o.qZA(),o._uU(19," Votre demande:"),o.qZA(),o.TgZ(20,"p")(21,"label"),o._uU(22," Objet:"),o._UZ(23,"br"),o.TgZ(24,"span",6),o._UZ(25,"input",7),o.qZA()()(),o.TgZ(26,"p")(27,"label"),o._uU(28," Votre message: (facultatif)"),o._UZ(29,"br"),o.TgZ(30,"span",8),o._UZ(31,"textarea",9),o.qZA()()()(),o.TgZ(32,"button",10),o._uU(33,"Envoyer"),o.qZA()(),o._UZ(34,"app-footer"))},dependencies:[zg,Ug,Vg,vu,yu],styles:["*[_ngcontent-%COMP%], *[_ngcontent-%COMP%]:before, *[_ngcontent-%COMP%]:after{box-sizing:border-box}body[_ngcontent-%COMP%]{font-family:Nunito,sans-serif;color:#384047}form[_ngcontent-%COMP%]{max-width:300px;margin:10px auto;padding:10px 20px;background:#f4f7f8;border-radius:8px}h1[_ngcontent-%COMP%]{margin:0 0 30px;text-align:center}input[type=text][_ngcontent-%COMP%], input[type=password][_ngcontent-%COMP%], input[type=date][_ngcontent-%COMP%], input[type=datetime][_ngcontent-%COMP%], input[type=email][_ngcontent-%COMP%], input[type=number][_ngcontent-%COMP%], input[type=search][_ngcontent-%COMP%], input[type=tel][_ngcontent-%COMP%], input[type=time][_ngcontent-%COMP%], input[type=url][_ngcontent-%COMP%], textarea[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{background:rgba(255,255,255,.1);border:none;font-size:16px;height:auto;margin:0 0 30px;outline:0;padding:15px;width:100%;background-color:#e8eeef;color:#8a97a0;box-shadow:0 1px #00000008 inset}input[type=radio][_ngcontent-%COMP%], input[type=checkbox][_ngcontent-%COMP%]{margin:0 4px 8px 0}select[_ngcontent-%COMP%]{padding:6px;height:32px;border-radius:2px}button[_ngcontent-%COMP%]{padding:19px 39px 18px;color:#fff;background-color:#094071;font-size:18px;text-align:center;font-style:normal;border-radius:5px;width:100%;border-width:1px 1px 3px;box-shadow:0 -1px #ffffff1a inset;margin-bottom:10px}fieldset[_ngcontent-%COMP%]{margin-bottom:30px;border:none}legend[_ngcontent-%COMP%]{font-size:1.4em;margin-bottom:10px}label[_ngcontent-%COMP%]{display:block;margin-bottom:8px}label.light[_ngcontent-%COMP%]{font-weight:300;display:inline}.number[_ngcontent-%COMP%]{background-color:#1e73be;color:#fff;height:30px;width:30px;display:inline-block;font-size:.8em;margin-right:4px;line-height:30px;text-align:center;text-shadow:0 1px 0 rgba(255,255,255,.2);border-radius:100%}@media screen and (min-width: 480px){form[_ngcontent-%COMP%]{max-width:480px}}"]}),e})(),XL=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-faq"]],decls:98,vars:0,consts:[[1,"container-fluid"],[1,"row"],[1,"col-8"],[2,"margin-top","50px","margin-left","50px"],[2,"color","#1e73be","display","inline"],[2,"margin-top","50px"],[2,"margin-bottom","50px"],[1,"col-1"],[2,"border-left","1px solid #b1adad","height","1500px","margin-top","40px","margin-left","25px"],[1,"col"],[2,"margin-top","70px"],[2,"font-size","medium"],[2,"margin-top","200px"],[2,"width","280px"],[1,"list-group","list-group-flush"],[1,"list-group-item","highlighted-link"],["href","https://protech-it.org/category/formations/data-sciences-i-a/"],["href","https://protech-it.org/category/formations/formation-full-stack/"],["href","https://protech-it.org/category/formations/formation-web/"],["href","https://protech-it.org/category/formations/"],["href","https://protech-it.org/category/services/"]],template:function(r,i){1&r&&(o._UZ(0,"app-navbar"),o.TgZ(1,"div",0)(2,"div",1)(3,"div",2)(4,"div")(5,"h1",3),o._uU(6,"FAQ:"),o.qZA()(),o.TgZ(7,"div",3)(8,"h3")(9,"h3",4),o._uU(10,"1."),o.qZA(),o._uU(11," Qu'est-ce qu'une agence de d\xe9veloppement web ? "),o.qZA(),o.TgZ(12,"h6"),o._uU(13," Une agence de d\xe9veloppement web est une entreprise sp\xe9cialis\xe9e dans la cr\xe9ation, la conception et le d\xe9veloppement de sites web pour les entreprises et les particuliers. Chez Protech-it, nous mettons notre expertise au service de la r\xe9alisation de sites web sur mesure et performants pour r\xe9pondre aux besoins sp\xe9cifiques de nos clients. "),o.qZA(),o.TgZ(14,"h3",5)(15,"h3",4),o._uU(16,"2."),o.qZA(),o._uU(17," Quels services proposez-vous ? "),o.qZA(),o.TgZ(18,"h6"),o._uU(19," Chez Protech-it, nous proposons une large gamme de services de d\xe9veloppement web, y compris la cr\xe9ation de sites web vitrines, de boutiques en ligne, de blogs, de sites institutionnels, et bien plus encore. Nous offrons \xe9galement des services de conception graphique, de r\xe9f\xe9rencement et d'h\xe9bergement pour assurer une solution compl\xe8te pour nos clients. "),o.qZA(),o.TgZ(20,"h3",5)(21,"h3",4),o._uU(22,"3."),o.qZA(),o._uU(23," Combien de temps faut-il pour d\xe9velopper un site web ? "),o.qZA(),o.TgZ(24,"h6"),o._uU(25," Le temps de d\xe9veloppement d'un site web d\xe9pend de la complexit\xe9 et de l'envergure du projet. En g\xe9n\xe9ral, les sites web vitrines peuvent \xeatre livr\xe9s en quelques semaines, tandis que des projets plus complexes peuvent prendre plusieurs mois. Chez Protech-it, nous travaillons en \xe9troite collaboration avec nos clients pour \xe9tablir un calendrier r\xe9aliste et respecter les d\xe9lais convenus. "),o.qZA(),o.TgZ(26,"h3",5)(27,"h3",4),o._uU(28,"4."),o.qZA(),o._uU(29," Comment puis-je obtenir un devis pour mon projet ? "),o.qZA(),o.TgZ(30,"h6"),o._uU(31," Pour obtenir un devis personnalis\xe9 pour votre projet, il vous suffit de nous contacter via notre formulaire de contact, notre chat int\xe9gr\xe9 au site web ou par t\xe9l\xe9phone. Notre \xe9quipe se fera un plaisir de discuter de vos besoins et de vous fournir une proposition adapt\xe9e \xe0 vos attentes. "),o.qZA(),o.TgZ(32,"h3",5)(33,"h3",4),o._uU(34,"5."),o.qZA(),o._uU(35," Proposez-vous des solutions d'h\xe9bergement web ? "),o.qZA(),o.TgZ(36,"h6"),o._uU(37,"Oui, chez Protech-it, nous proposons des solutions d'h\xe9bergement web fiables et s\xe9curis\xe9es pour nos clients. Nous pouvons \xe9galement vous conseiller sur le type d'h\xe9bergement le mieux adapt\xe9 \xe0 votre site web en fonction de ses caract\xe9ristiques et de vos besoins. "),o.qZA(),o.TgZ(38,"h3",5)(39,"h3",4),o._uU(40,"6."),o.qZA(),o._uU(41," Comment se passe le processus de conception de mon site web ? "),o.qZA(),o.TgZ(42,"h6"),o._uU(43,"Le processus de conception de votre site web commence par une phase de consultation o\xf9 nous recueillons vos besoins et vos pr\xe9f\xe9rences. Ensuite, notre \xe9quipe de designers cr\xe9e des maquettes pour vous donner un aper\xe7u visuel du site. Une fois que vous avez approuv\xe9 la maquette, nous proc\xe9dons au d\xe9veloppement et \xe0 la mise en ligne de votre site web. "),o.qZA(),o.TgZ(44,"h3",5)(45,"h3",4),o._uU(46,"7."),o.qZA(),o._uU(47," Proposez-vous des services de maintenance pour les sites web existants ? "),o.qZA(),o.TgZ(48,"h6"),o._uU(49,"Oui, nous proposons des services de maintenance et de support pour les sites web existants. Que ce soit pour des mises \xe0 jour r\xe9guli\xe8res, des ajouts de fonctionnalit\xe9s ou des corrections de bugs, notre \xe9quipe est l\xe0 pour vous assurer un fonctionnement optimal de votre site. "),o.qZA(),o.TgZ(50,"h3",5)(51,"h3",4),o._uU(52,"8."),o.qZA(),o._uU(53," Comment puis-je suivre l'avancement de mon projet ? "),o.qZA(),o.TgZ(54,"h6"),o._uU(55," Nous tenons nos clients inform\xe9s de l'avancement de leur projet tout au long du processus. Vous aurez acc\xe8s \xe0 des points d'\xe9tape r\xe9guliers et pourrez nous contacter \xe0 tout moment pour obtenir des mises \xe0 jour sur l'\xe9tat d'avancement de votre site web. "),o.qZA(),o.TgZ(56,"h3",5)(57,"h3",4),o._uU(58,"9."),o.qZA(),o._uU(59," Quels sont vos tarifs pour les services de d\xe9veloppement web ? "),o.qZA(),o.TgZ(60,"h6"),o._uU(61,"Nos tarifs varient en fonction des sp\xe9cificit\xe9s de chaque projet. Nous proposons des solutions sur mesure pour r\xe9pondre aux besoins et au budget de nos clients. Pour obtenir des informations d\xe9taill\xe9es sur nos tarifs, nous vous invitons \xe0 nous contacter pour discuter de votre projet. "),o.qZA(),o.TgZ(62,"h3",5)(63,"h3",4),o._uU(64,"10."),o.qZA(),o._uU(65," Pourquoi choisir Protech-it pour mon projet de d\xe9veloppement web ? "),o.qZA(),o.TgZ(66,"h6",6),o._uU(67,"Chez Protech-it, nous nous engageons \xe0 fournir des solutions web de haute qualit\xe9 et personnalis\xe9es \xe0 nos clients. Notre \xe9quipe exp\xe9riment\xe9e de d\xe9veloppeurs et de designers est passionn\xe9e par son travail et est d\xe9termin\xe9e \xe0 vous offrir un site web qui refl\xe8te l'identit\xe9 de votre entreprise et atteint vos objectifs en ligne. "),o.qZA()()(),o.TgZ(68,"div",7),o._UZ(69,"div",8),o.qZA(),o.TgZ(70,"div",9)(71,"div",10)(72,"p",11),o._uU(73," Adresse : immeuble les pyramides el "),o._UZ(74,"br"),o._uU(75," Manzel GABES 4\xe9me \xe9tage. "),o._UZ(76,"br"),o._uU(77," T\xe9l\xe9phone : +(216) 31597990 "),o.qZA(),o.TgZ(78,"h1",12),o._uU(79,"Cat\xe9gories"),o.qZA(),o.TgZ(80,"div",13)(81,"ul",14)(82,"li",15)(83,"a",16),o._uU(84,"Data sciences & I.A"),o.qZA()(),o.TgZ(85,"li",15)(86,"a",17),o._uU(87,"Formation Full stack"),o.qZA()(),o.TgZ(88,"li",15)(89,"a",18),o._uU(90,"formation web"),o.qZA()(),o.TgZ(91,"li",15)(92,"a",19),o._uU(93,"formations"),o.qZA()(),o.TgZ(94,"li",15)(95,"a",20),o._uU(96,"Services"),o.qZA()()()()()()()(),o._UZ(97,"app-footer"))},dependencies:[vu,yu],styles:["a[_ngcontent-%COMP%]:hover, a[_ngcontent-%COMP%]:visited{color:#000}a[_ngcontent-%COMP%]{text-decoration:none}.highlighted-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#3485fe}"]}),e})();class eF{constructor(){}}const fx="http://localhost:8080/api/Auth";let _D=(()=>{var n;class e{constructor(r,i,u,d,D,k,G){this.http=r,this.fb=i,this.afAuth=u,this.fireauth=d,this.userService=D,this.localSt=k,this.route=G,this.userRolesSubject=new Qr([]),this.localSt.isLoggedIn()&&this.loadUserRoles()}ngOnInit(){this.credentialForm=this.fb.group({email:["",[Oa.required,Oa.email]]})}loadUserRoles(){this.userService.getUserById(this.localSt.getUserId()).subscribe({next:r=>{const i=r.roles.map(u=>u.role);this.userRolesSubject.next(i)},error:r=>{console.log(r)}})}getUserRoles(){return console.log(this.userRolesSubject.value),this.userRolesSubject.asObservable()}forgotpwd(r){return this.afAuth.sendPasswordResetEmail(r).then(()=>{window.alert("Email de r\xe9initialisation est envoy\xe9, v\xe9rifier votre boite de r\xe9ception!")}).catch(i=>{window.alert(i)})}get email(){return this.credentialForm.get("email")}inscriptionclient(r){return this.http.post(fx+"/signup",r)}loginclient(r){return this.http.post(fx+"/Connexion",r)}}return(n=e).\u0275fac=function(r){return new(r||n)(o.LFG(nu),o.LFG(CD),o.LFG(bd),o.LFG(bd),o.LFG(_l),o.LFG(gu),o.LFG(wr))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),e})();function tF(n,e){1&n&&(o.TgZ(0,"span",15),o._uU(1,"*Email Obligatoire"),o.qZA())}function nF(n,e){1&n&&(o.TgZ(0,"span",15),o._uU(1,"Email invalide"),o.qZA())}function rF(n,e){if(1&n&&(o.TgZ(0,"div",13),o.YNc(1,tF,2,0,"span",14),o.YNc(2,nF,2,0,"span",14),o.qZA()),2&n){const t=o.oxw();o.xp6(1),o.Q6J("ngIf",null==t.email||null==t.email.errors?null:t.email.errors.required),o.xp6(1),o.Q6J("ngIf",null==t.email||null==t.email.errors?null:t.email.errors.email)}}function iF(n,e){1&n&&(o.TgZ(0,"span",15),o._uU(1,"*Mot de passe Obligatoire"),o.qZA())}function sF(n,e){1&n&&(o.TgZ(0,"span",15),o._uU(1,"Mot de passe doit etre au moins 6 caracteres"),o.qZA())}function oF(n,e){if(1&n&&(o.TgZ(0,"div",13),o.YNc(1,iF,2,0,"span",14),o.YNc(2,sF,2,0,"span",14),o.qZA()),2&n){const t=o.oxw();o.xp6(1),o.Q6J("ngIf",null==t.password||null==t.password.errors?null:t.password.errors.required),o.xp6(1),o.Q6J("ngIf",null==t.password||null==t.password.errors?null:t.password.errors.minlength)}}let aF=(()=>{var n;class e{constructor(r,i,u,d,D){this.authSer=r,this.route=i,this.localStorage=u,this.chatService=d,this.fb=D,this.loginReq=new eF,this.attempts=0}connexion(r){console.log(this.loginReq),this.authSer.loginclient(this.loginReq).subscribe({next:i=>{this.localStorage.saveToken(i.token),this.localStorage.saveUsername(i.username),this.localStorage.saveUserId(i.user.id),this.localStorage.saveUser(i.user),this.localStorage.saveAuthorities(i.user.roles),"ROLE_ADMIN"==i.user.roles[0].role?wa().fire({title:"Bienvenue admin "+i.user.username,showDenyButton:!0,showCancelButton:!0,confirmButtonText:"Acc\xe8der en tant qu'administrateur",denyButtonText:"Acc\xe8der en tant que client"}).then(u=>{this.route.navigate(u.isConfirmed?["admindashboard"]:u.isDenied?["home"]:["login"])}):(wa().fire("Bienvenue "+i.user.username),this.route.navigate(["home"])),console.log(i)},error:i=>{console.error("API Error:",i)},complete:()=>{}})}ngOnInit(){this.credentialForm=this.fb.group({email:["",[Oa.required,Oa.email]],password:["",[Oa.required,Oa.minLength(3)]]})}signIn(){var r=this;return(0,Be.Z)(function*(){r.chatService.signIn(r.credentialForm.value).then(i=>{r.route.navigateByUrl("/home",{replaceUrl:!0})},function(){var i=(0,Be.Z)(function*(u){console.log(u),wa().fire({title:"Mot de passe oubli\xe9 ?",icon:"warning",html:'Vous pouvez <a href="/forgotpassword">r\xe9initialiser votre mot de passe!</a> ',showCloseButton:!1,showCancelButton:!1,focusConfirm:!1}),r.attempts+=1,3==r.attempts&&r.route.navigateByUrl("/forgotpassword")});return function(u){return i.apply(this,arguments)}}())})()}sendVerifEmail(r){r.sendVerificationEmail().then(i=>{this.route.navigate(["/verifyemail"])},i=>{alert("une erreur s'est produite")})}get email(){return this.credentialForm.get("email")}get password(){return this.credentialForm.get("password")}}return(n=e).\u0275fac=function(r){return new(r||n)(o.Y36(_D),o.Y36(wr),o.Y36(gu),o.Y36(tD),o.Y36(CD))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-login"]],decls:19,vars:5,consts:[[2,"background-image","url('../assets/images/protechbg.jpg')"],[1,"wrapper"],[3,"formGroup","ngSubmit"],["form","ngForm"],[1,"input-box"],["type","text","name","email","id","email","placeholder","Votre email","formControlName","email","required","",3,"ngModel","ngModelChange"],["class","errors",4,"ngIf"],["type","password","name","password","formControlName","password","id","password","placeholder","Votre mot de passe","required","",3,"ngModel","ngModelChange"],[1,"input-box","button"],["type","Submit","value","Se connecter",3,"click"],[2,"width","70%","border-color","black","margin-left","53px"],[2,"color","grey","text-align","center"],["routerLink","/signup",2,"margin-left","125px"],[1,"errors"],["style","color: red;",4,"ngIf"],[2,"color","red"]],template:function(r,i){if(1&r){const u=o.EpF();o.TgZ(0,"body",0)(1,"div",1)(2,"h2"),o._uU(3,"Se connecter"),o.qZA(),o.TgZ(4,"form",2,3),o.NdJ("ngSubmit",function(){o.CHM(u);const D=o.MAs(5);return o.KtG(D.form.valid&&i.connexion(D))}),o.TgZ(6,"div",4)(7,"input",5),o.NdJ("ngModelChange",function(D){return i.loginReq.email=D}),o.qZA()(),o.YNc(8,rF,3,2,"div",6),o.TgZ(9,"div",4)(10,"input",7),o.NdJ("ngModelChange",function(D){return i.loginReq.password=D}),o.qZA()(),o.YNc(11,oF,3,2,"div",6),o.TgZ(12,"div",8)(13,"input",9),o.NdJ("click",function(){return i.signIn()}),o.qZA()(),o._UZ(14,"hr",10),o.TgZ(15,"p",11),o._uU(16,"Ou bien connectez-vous avec:"),o.qZA(),o.TgZ(17,"a",12),o._uU(18,"Vous n'avez pas de compte ?"),o.qZA()()()()}2&r&&(o.xp6(4),o.Q6J("formGroup",i.credentialForm),o.xp6(3),o.Q6J("ngModel",i.loginReq.email),o.xp6(1),o.Q6J("ngIf",((null==i.email?null:i.email.dirty)||(null==i.email?null:i.email.touched))&&(null==i.email?null:i.email.errors)),o.xp6(2),o.Q6J("ngModel",i.loginReq.password),o.xp6(1),o.Q6J("ngIf",((null==i.password?null:i.password.dirty)||(null==i.password?null:i.password.touched))&&(null==i.password?null:i.password.errors)))},dependencies:[Ti,yl,zg,Cp,vy,Ug,Cy,vw,AI],styles:['@import"https://fonts.googleapis.com/css?family=Poppins:400,500,600,700&display=swap";*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box;font-family:Poppins,sans-serif}body[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;background:#4070f4}.wrapper[_ngcontent-%COMP%]{position:relative;max-width:430px;width:100%;background:#fff;padding:34px;border-radius:6px;box-shadow:0 5px 10px #0003}.wrapper[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{position:relative;font-size:22px;font-weight:600;color:#333}.wrapper[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;bottom:0;height:3px;width:28px;border-radius:12px;background:#4070f4}.wrapper[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{margin-top:30px}.wrapper[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-box[_ngcontent-%COMP%]{height:52px;margin:18px 0}form[_ngcontent-%COMP%]   .input-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:100%;width:100%;outline:none;padding:0 15px;font-size:17px;font-weight:400;color:#333;border:1.5px solid #C7BEBE;border-bottom-width:2.5px;border-radius:6px;transition:all .3s ease}.input-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .input-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:valid{border-color:#4070f4}form[_ngcontent-%COMP%]   .policy[_ngcontent-%COMP%]{display:flex;align-items:center}form[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#707070;font-size:14px;font-weight:500;margin-left:10px}.input-box.button[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{color:#fff;letter-spacing:1px;border:none;background:#4070f4;cursor:pointer}.input-box.button[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:hover{background:#0e4bf1}form[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#333;width:100%;text-align:center}form[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#4070f4;text-decoration:none}form[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}']}),e})();class wD{constructor(){}}function cF(n,e){1&n&&(o.TgZ(0,"span",17),o._uU(1,"*Nom d'utilisateur Obligatoire"),o.qZA())}function uF(n,e){1&n&&(o.TgZ(0,"span",17),o._uU(1,"Nom d'utilisateur doit etre au moins 3 caracteres"),o.qZA())}function lF(n,e){if(1&n&&(o.TgZ(0,"div",15),o.YNc(1,cF,2,0,"span",16),o.YNc(2,uF,2,0,"span",16),o.qZA()),2&n){const t=o.oxw();o.xp6(1),o.Q6J("ngIf",null==t.username||null==t.username.errors?null:t.username.errors.required),o.xp6(1),o.Q6J("ngIf",null==t.username||null==t.username.errors?null:t.username.errors.minlength)}}function dF(n,e){1&n&&(o.TgZ(0,"span",17),o._uU(1,"*Email Obligatoire"),o.qZA())}function hF(n,e){1&n&&(o.TgZ(0,"span",17),o._uU(1,"Email invalide"),o.qZA())}function pF(n,e){if(1&n&&(o.TgZ(0,"div",15),o.YNc(1,dF,2,0,"span",16),o.YNc(2,hF,2,0,"span",16),o.qZA()),2&n){const t=o.oxw();o.xp6(1),o.Q6J("ngIf",null==t.email||null==t.email.errors?null:t.email.errors.required),o.xp6(1),o.Q6J("ngIf",null==t.email||null==t.email.errors?null:t.email.errors.email)}}function fF(n,e){1&n&&(o.TgZ(0,"span",17),o._uU(1,"*Date de naissance Obligatoire"),o.qZA())}function gF(n,e){if(1&n&&(o.TgZ(0,"div",15),o.YNc(1,fF,2,0,"span",16),o.qZA()),2&n){const t=o.oxw();o.xp6(1),o.Q6J("ngIf",null==t.birthday||null==t.birthday.errors?null:t.birthday.errors.required)}}function mF(n,e){1&n&&(o.TgZ(0,"span",17),o._uU(1,"*Mot de passe Obligatoire"),o.qZA())}function vF(n,e){1&n&&(o.TgZ(0,"span",17),o._uU(1,"Mot de passe doit etre au moins 6 caracteres"),o.qZA())}function yF(n,e){if(1&n&&(o.TgZ(0,"div",15),o.YNc(1,mF,2,0,"span",16),o.YNc(2,vF,2,0,"span",16),o.qZA()),2&n){const t=o.oxw();o.xp6(1),o.Q6J("ngIf",null==t.password||null==t.password.errors?null:t.password.errors.required),o.xp6(1),o.Q6J("ngIf",null==t.password||null==t.password.errors?null:t.password.errors.minlength)}}let CF=(()=>{var n;class e{constructor(r,i,u,d,D,k,G){this.auth=r,this.route=i,this.http=u,this.afAuth=d,this.afs=D,this.fb=k,this.chtSer=G,this.user=new wD}ngOnInit(){this.credentialForm=this.fb.group({username:["",[Oa.required,Oa.minLength(3)]],email:["",[Oa.required,Oa.email]],birthday:["",[Oa.required]],password:["",[Oa.required,Oa.minLength(6)]]})}inscrit(r){console.log(this.credentialForm.value);const i=this.credentialForm.get("username")?.value,u=this.credentialForm.get("email")?.value,d=this.credentialForm.get("birthday")?.value,D=this.credentialForm.get("password")?.value;this.chtSer.signUp(i,u,d,D).then(k=>{this.auth.inscriptionclient(this.credentialForm.value).subscribe({next:G=>{console.log(G)},error:G=>{console.error("API Error:",G)},complete:()=>{}}),wa().fire({icon:"success",title:"Bienvenue!",text:"Bienvenue dans la communaut\xe9 de PROTECH-IT"}),console.log(k),this.route.navigate(["home"])}).catch(k=>{wa().fire({icon:"error",title:"Oops...",text:"Erreur dans un ou plusieurs champs du formulaire"}),console.log(k)})}get email(){return this.credentialForm.get("email")}get password(){return this.credentialForm.get("password")}get birthday(){return this.credentialForm.get("birthday")}get username(){return this.credentialForm.get("username")}}return(n=e).\u0275fac=function(r){return new(r||n)(o.Y36(_D),o.Y36(wr),o.Y36(nu),o.Y36(bd),o.Y36(eD),o.Y36(CD),o.Y36(tD))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-signup"]],decls:27,vars:9,consts:[[2,"background-image","url('../assets/images/protechbg.jpg')"],[1,"wrapper"],[3,"formGroup","ngSubmit"],["form","ngForm"],[1,"input-box"],["type","text","name","username","formControlName","username","placeholder","Votre nom et prenom","required","",3,"ngModel","ngModelChange"],["class","errors",4,"ngIf"],["type","email","name","email","formControlName","email","placeholder","Votre email","required","","required","",3,"ngModel","ngModelChange"],["type","date","name","birthday","formControlName","birthday","placeholder","Date de naissance","required","",3,"ngModel","ngModelChange"],["type","password","formControlName","password","name","password","placeholder","Cr\xe9er un mot de passe","required","",3,"ngModel","ngModelChange"],["type","password","placeholder","Confirmer votre mot de passe"],[1,"input-box","button"],["type","submit","value","S'inscrire"],[1,"text"],["routerLink","/login"],[1,"errors"],["style","color: red;",4,"ngIf"],[2,"color","red"]],template:function(r,i){if(1&r){const u=o.EpF();o.TgZ(0,"body",0)(1,"div",1)(2,"h2"),o._uU(3,"S'inscrire"),o.qZA(),o.TgZ(4,"form",2,3),o.NdJ("ngSubmit",function(){o.CHM(u);const D=o.MAs(5);return o.KtG(D.form.valid&&i.inscrit(D))}),o.TgZ(6,"div",4)(7,"input",5),o.NdJ("ngModelChange",function(D){return i.user.username=D}),o.qZA()(),o.YNc(8,lF,3,2,"div",6),o.TgZ(9,"div",4)(10,"input",7),o.NdJ("ngModelChange",function(D){return i.user.email=D}),o.qZA()(),o.YNc(11,pF,3,2,"div",6),o.TgZ(12,"div",4)(13,"input",8),o.NdJ("ngModelChange",function(D){return i.user.birthday=D}),o.qZA()(),o.YNc(14,gF,2,1,"div",6),o.TgZ(15,"div",4)(16,"input",9),o.NdJ("ngModelChange",function(D){return i.user.password=D}),o.qZA()(),o.YNc(17,yF,3,2,"div",6),o.TgZ(18,"div",4),o._UZ(19,"input",10),o.qZA(),o.TgZ(20,"div",11),o._UZ(21,"input",12),o.qZA(),o.TgZ(22,"div",13)(23,"h3"),o._uU(24,"Vous avez d\xe9j\xe0 un compte ? "),o.TgZ(25,"a",14),o._uU(26," Connectez-vous!"),o.qZA()()()()()()}2&r&&(o.xp6(4),o.Q6J("formGroup",i.credentialForm),o.xp6(3),o.Q6J("ngModel",i.user.username),o.xp6(1),o.Q6J("ngIf",((null==i.username?null:i.username.dirty)||(null==i.username?null:i.username.touched))&&(null==i.username?null:i.username.errors)),o.xp6(2),o.Q6J("ngModel",i.user.email),o.xp6(1),o.Q6J("ngIf",((null==i.email?null:i.email.dirty)||(null==i.email?null:i.email.touched))&&(null==i.email?null:i.email.errors)),o.xp6(2),o.Q6J("ngModel",i.user.birthday),o.xp6(1),o.Q6J("ngIf",((null==i.birthday?null:i.birthday.dirty)||(null==i.birthday?null:i.birthday.touched))&&(null==i.birthday?null:i.birthday.errors)),o.xp6(2),o.Q6J("ngModel",i.user.password),o.xp6(1),o.Q6J("ngIf",((null==i.password?null:i.password.dirty)||(null==i.password?null:i.password.touched))&&(null==i.password?null:i.password.errors)))},dependencies:[Ti,yl,zg,Cp,vy,Ug,Cy,vw,AI],styles:['@import"https://fonts.googleapis.com/css?family=Poppins:400,500,600,700&display=swap";*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box;font-family:Poppins,sans-serif}body[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;background:#4070f4}.wrapper[_ngcontent-%COMP%]{position:relative;max-width:430px;width:100%;background:#fff;padding:34px;border-radius:6px;box-shadow:0 5px 10px #0003}.wrapper[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{position:relative;font-size:22px;font-weight:600;color:#333}.wrapper[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;bottom:0;height:3px;width:28px;border-radius:12px;background:#4070f4}.wrapper[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{margin-top:30px}.wrapper[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-box[_ngcontent-%COMP%]{height:52px;margin:18px 0}form[_ngcontent-%COMP%]   .input-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:100%;width:100%;outline:none;padding:0 15px;font-size:17px;font-weight:400;color:#333;border:1.5px solid #C7BEBE;border-bottom-width:2.5px;border-radius:6px;transition:all .3s ease}.input-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .input-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:valid{border-color:#4070f4}form[_ngcontent-%COMP%]   .policy[_ngcontent-%COMP%]{display:flex;align-items:center}form[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#707070;font-size:14px;font-weight:500;margin-left:10px}.input-box.button[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{color:#fff;letter-spacing:1px;border:none;background:#4070f4;cursor:pointer}.input-box.button[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:hover{background:#0e4bf1}form[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#333;width:100%;text-align:center}form[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#4070f4;text-decoration:none}form[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}']}),e})();function _F(n,e){if(1&n&&(o.TgZ(0,"h6"),o._uU(1),o.qZA()),2&n){const t=e.$implicit;o.xp6(1),o.Oqu(t.role)}}function wF(n,e){if(1&n&&(o.TgZ(0,"div",5)(1,"div",6),o._UZ(2,"img",7),o.TgZ(3,"div",8)(4,"h2",9),o._uU(5),o.qZA(),o.TgZ(6,"h6"),o._uU(7," Email: "),o.TgZ(8,"a",10),o._uU(9),o.qZA()(),o.TgZ(10,"h6"),o._uU(11),o.qZA(),o.TgZ(12,"h6"),o._uU(13),o.qZA(),o.TgZ(14,"h6"),o._uU(15),o.qZA(),o.YNc(16,_F,2,1,"h6",11),o.qZA()()()),2&n){const t=e.$implicit;o.xp6(5),o.AsE("#",t.id," ",t.nomEtPrenom,""),o.xp6(3),o.Q6J("href","mailto:"+t.email,o.LSH),o.xp6(1),o.Oqu(t.email),o.xp6(2),o.hij(" Date de naissance: ",t.birthdate,""),o.xp6(2),o.AsE("Cr\xe9\xe9 le: ",t.created," par pc de ",t.creator,""),o.xp6(2),o.AsE("Modifi\xe9 le: ",t.modified," par pc de ",t.modifier,""),o.xp6(1),o.Q6J("ngForOf",t.roles)}}let SF=(()=>{var n;class e{constructor(r){this.usersService=r}ngOnInit(){this.usersService.getAllUsers().subscribe(r=>{this.users=r},r=>{console.error("Error fetching users:",r)})}}return(n=e).\u0275fac=function(r){return new(r||n)(o.Y36(_l))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-userslist"]],decls:6,vars:1,consts:[[2,"background-image","url('../assets/images/protechbg.jpg')"],[1,"container-fluid"],[1,"row"],[1,"col-12"],["class","col-2",4,"ngFor","ngForOf"],[1,"col-2"],[1,"card",2,"background-color","burlywood"],["src","../assets/images/user.jpg","alt","userphoto",1,"card-img-top"],[1,"card-body"],[1,"card-title"],[3,"href"],[4,"ngFor","ngForOf"]],template:function(r,i){1&r&&(o.TgZ(0,"body",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",2),o.YNc(5,wF,17,10,"div",4),o.qZA()()()()()),2&r&&(o.xp6(5),o.Q6J("ngForOf",i.users))},dependencies:[Vi]}),e})();function EF(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",6)(1,"div",7),o._UZ(2,"img",8),o.TgZ(3,"div",9)(4,"h2",10),o._uU(5),o.qZA(),o.TgZ(6,"h6"),o._uU(7," Email: "),o.TgZ(8,"a",11),o._uU(9),o.qZA()(),o.TgZ(10,"h6"),o._uU(11),o.qZA(),o.TgZ(12,"h6"),o._uU(13),o.qZA(),o.TgZ(14,"h6"),o._uU(15),o.qZA(),o.TgZ(16,"button",12),o.NdJ("click",function(){const u=o.CHM(t).$implicit,d=o.oxw();return o.KtG(d.deleteUser(u.id))}),o._uU(17,"Supprimer"),o.qZA()()()()}if(2&n){const t=e.$implicit;o.xp6(5),o.AsE(" #",t.id," ",t.nomEtPrenom,""),o.xp6(3),o.Q6J("href","mailto:"+t.email,o.LSH),o.xp6(1),o.Oqu(t.email),o.xp6(2),o.hij(" Date de naissance: ",t.birthdate,""),o.xp6(2),o.AsE("Cr\xe9\xe9 le: ",t.created," par pc de ",t.creator,""),o.xp6(2),o.AsE("Modifi\xe9 le: ",t.modified," par pc de ",t.modifier,"")}}let IF=(()=>{var n;class e{constructor(r,i,u){this.usersService=r,this.router=i,this.route=u}ngOnInit(){this.usersService.getClients().subscribe(r=>{this.users=r},r=>{console.error("Error fetching clients:",r)})}deleteUser(r){this.usersService.deleteClient(r).subscribe(()=>{console.log("Utilisateur supprim\xe9!"),wa().fire({icon:"success",title:"Supprim\xe9!",text:"Utilisateur supprim\xe9"});const i=this.router.url;this.router.navigateByUrl("/",{skipLocationChange:!0}).then(()=>{this.router.navigateByUrl(i)})},i=>{console.error("Utilisateur n'existe pas",i),wa().fire({icon:"error",title:"Erreur",text:"Utilisateur introuvable"})})}}return(n=e).\u0275fac=function(r){return new(r||n)(o.Y36(_l),o.Y36(wr),o.Y36(vl))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-clients-list"]],decls:7,vars:1,consts:[[2,"background-image","url('../assets/images/protechbg.jpg')"],[1,"container-fluid"],[1,"row"],[1,"col-12"],[1,"card-container"],["class","col-2",4,"ngFor","ngForOf"],[1,"col-2"],[1,"card",2,"background-color","burlywood"],["src","../assets/images/user.jpg","alt","userphoto",1,"card-img-top"],[1,"card-body"],[1,"card-title"],[3,"href"],[3,"click"]],template:function(r,i){1&r&&(o.TgZ(0,"body",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",2),o.YNc(6,EF,18,9,"div",5),o.qZA()()()()()()),2&r&&(o.xp6(6),o.Q6J("ngForOf",i.users))},dependencies:[Vi],styles:[".card-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-between}.card[_ngcontent-%COMP%]{flex:1;margin-bottom:20px}"]}),e})();function bF(n,e){if(1&n&&(o.TgZ(0,"div",6)(1,"div",7),o._UZ(2,"img",8),o.TgZ(3,"div",9)(4,"h2",10),o._uU(5),o.qZA(),o.TgZ(6,"h6"),o._uU(7," Email: "),o.TgZ(8,"a",11),o._uU(9),o.qZA()(),o.TgZ(10,"h6"),o._uU(11),o.qZA(),o.TgZ(12,"h6"),o._uU(13),o.qZA(),o.TgZ(14,"h6"),o._uU(15),o.qZA()()()()),2&n){const t=e.$implicit;o.xp6(5),o.AsE("#",t.id," ",t.nomEtPrenom,""),o.xp6(3),o.Q6J("href","mailto:"+t.email,o.LSH),o.xp6(1),o.Oqu(t.email),o.xp6(2),o.hij(" Date de naissance: ",t.birthdate,""),o.xp6(2),o.AsE("Cr\xe9\xe9 le: ",t.created," par pc de ",t.creator,""),o.xp6(2),o.AsE("Modifi\xe9 le: ",t.modified," par pc de ",t.modifier,"")}}function TF(n,e){if(1&n&&(o.TgZ(0,"div",2),o.YNc(1,bF,16,9,"div",5),o.qZA()),2&n){const t=o.oxw();o.xp6(1),o.Q6J("ngForOf",t.users)}}function AF(n,e){1&n&&(o.TgZ(0,"div",2),o._uU(1," adazdaz\xf9mhdiizmhd "),o._UZ(2,"br")(3,"br"),o._uU(4," lamznja\xf9jefeoz\xf9 "),o.qZA())}let PF=(()=>{var n;class e{constructor(r,i,u){this.usersService=r,this.localSt=i,this.route=u,this.dataexist=!1}ngOnInit(){this.usersService.getAdmins().subscribe(r=>{this.users=r,0!=this.users.length&&(this.dataexist=!0)},r=>{console.error("Error fetching admins:",r)})}}return(n=e).\u0275fac=function(r){return new(r||n)(o.Y36(_l),o.Y36(gu),o.Y36(wr))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-admins-list"]],decls:6,vars:2,consts:[[2,"background-image","url('../assets/images/protechbg.jpg')"],[1,"container-fluid"],[1,"row"],[1,"col-12"],["class","row",4,"ngIf"],["class","col-2",4,"ngFor","ngForOf"],[1,"col-2"],[1,"card",2,"background-color","rgb(169, 46, 46)","color","white"],["src","../assets/images/user.jpg","alt","userphoto",1,"card-img-top"],[1,"card-body"],[1,"card-title"],[3,"href"]],template:function(r,i){1&r&&(o.TgZ(0,"body",0)(1,"div",1)(2,"div",2)(3,"div",3),o.YNc(4,TF,2,1,"div",4),o.YNc(5,AF,5,0,"div",4),o.qZA()()()()),2&r&&(o.xp6(4),o.Q6J("ngIf",i.dataexist),o.xp6(1),o.Q6J("ngIf",!i.dataexist))},dependencies:[Vi,Ti]}),e})(),DF=(()=>{var n;class e{constructor(r,i){this.userServ=r,this.localStorage=i,this.user=new wD}ngOnInit(){this.getUser()}getUser(){this.userServ.getUserById(this.localStorage.getUserId()).subscribe({next:r=>{console.log(r),this.user=r,this.cantpass=this.user.password,this.user.password=""},error:r=>{console.log(r)},complete:()=>{}})}modifierProfil(){this.user.password=this.newPwd,console.log(this.user),this.userServ.modifierProfil(this.user).subscribe({next:r=>{wa().fire({icon:"success",title:"Success!",text:"Utilisateur modifi\xe9 avec succ\xe8s!"}),console.log(r)},error:r=>{wa().fire({icon:"error",title:"Erreur",text:"Cet email appartient \xe0 un autre utilisateur!"}),console.log(r)},complete:()=>{}})}}return(n=e).\u0275fac=function(r){return new(r||n)(o.Y36(_l),o.Y36(gu))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-editprofile"]],decls:19,vars:4,consts:[[2,"background-image","url('../assets/images/protechbg.jpg')"],[1,"wrapper"],[1,"input-box"],["type","text","name","username","placeholder","Changer votre nom ou prenom",3,"ngModel","ngModelChange"],["type","text","name","email","placeholder","Changer votre email",3,"ngModel","ngModelChange"],["type","date","name","birthdate","placeholder","Changer votre date de naissance",3,"ngModel","ngModelChange"],["type","password","name","password","placeholder","Saisir votre mot de passe",3,"ngModel","ngModelChange"],["type","password","placeholder","Saisir votre nouveau mot de passe","required",""],[1,"input-box","button"],["type","Submit","value","Modifier!",3,"click"]],template:function(r,i){1&r&&(o._UZ(0,"app-navbar"),o.TgZ(1,"body",0)(2,"div",1)(3,"h2"),o._uU(4,"Modifier vos coordonn\xe9es"),o.qZA(),o.TgZ(5,"form")(6,"div",2)(7,"input",3),o.NdJ("ngModelChange",function(d){return i.user.username=d}),o.qZA()(),o.TgZ(8,"div",2)(9,"input",4),o.NdJ("ngModelChange",function(d){return i.user.email=d}),o.qZA()(),o.TgZ(10,"div",2)(11,"input",5),o.NdJ("ngModelChange",function(d){return i.user.birthday=d}),o.qZA()(),o.TgZ(12,"div",2)(13,"input",6),o.NdJ("ngModelChange",function(d){return i.user.password=d}),o.qZA()(),o.TgZ(14,"div",2),o._UZ(15,"input",7),o.qZA(),o.TgZ(16,"div",8)(17,"input",9),o.NdJ("click",function(){return i.modifierProfil()}),o.qZA()()()()(),o._UZ(18,"app-footer")),2&r&&(o.xp6(7),o.Q6J("ngModel",i.user.username),o.xp6(2),o.Q6J("ngModel",i.user.email),o.xp6(2),o.Q6J("ngModel",i.user.birthday),o.xp6(2),o.Q6J("ngModel",i.user.password))},dependencies:[zg,Cp,vy,Ug,mw,Vg,vu,yu],styles:['@import"https://fonts.googleapis.com/css?family=Poppins:400,500,600,700&display=swap";*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box;font-family:Poppins,sans-serif}body[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;background:#4070f4}.wrapper[_ngcontent-%COMP%]{position:relative;max-width:430px;width:100%;background:#fff;padding:34px;border-radius:6px;box-shadow:0 5px 10px #0003}.wrapper[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{position:relative;font-size:22px;font-weight:600;color:#333}.wrapper[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;bottom:0;height:3px;width:28px;border-radius:12px;background:#4070f4}.wrapper[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{margin-top:30px}.wrapper[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-box[_ngcontent-%COMP%]{height:52px;margin:18px 0}form[_ngcontent-%COMP%]   .input-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:100%;width:100%;outline:none;padding:0 15px;font-size:17px;font-weight:400;color:#333;border:1.5px solid #C7BEBE;border-bottom-width:2.5px;border-radius:6px;transition:all .3s ease}.input-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .input-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:valid{border-color:#4070f4}form[_ngcontent-%COMP%]   .policy[_ngcontent-%COMP%]{display:flex;align-items:center}form[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#707070;font-size:14px;font-weight:500;margin-left:10px}.input-box.button[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{color:#fff;letter-spacing:1px;border:none;background:#4070f4;cursor:pointer}.input-box.button[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:hover{background:#0e4bf1}form[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#333;width:100%;text-align:center}form[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#4070f4;text-decoration:none}form[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}']}),e})(),RF=(()=>{var n;class e{constructor(r,i){this.userServ=r,this.localStorage=i,this.user=new wD}ngOnInit(){this.getUser()}getUser(){this.userServ.getUserById(this.localStorage.getUserId()).subscribe({next:r=>{console.log(r),this.user=r},error:r=>{console.log(r)},complete:()=>{}})}}return(n=e).\u0275fac=function(r){return new(r||n)(o.Y36(_l),o.Y36(gu))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-profile"]],decls:24,vars:4,consts:[[2,"background-image","url('../assets/images/protechbg.jpg')"],[1,"container-fluid"],[1,"row"],[1,"col-12"],[1,"card-container",2,"margin-top","20px","margin-left","750px"],[1,"card",2,"background-color","burlywood"],["src","../assets/images/user.jpg","alt","userPhoto",1,"card-img-top",2,"height","400px","width","400px"],[1,"card-body",2,"text-align","center"],[1,"card-title"],[3,"href"],["type","button","routerLink","/editprofile",1,"btn","btn-danger"]],template:function(r,i){1&r&&(o._UZ(0,"app-navbar"),o.TgZ(1,"body",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",2)(7,"div",5),o._UZ(8,"img",6),o.TgZ(9,"div",7)(10,"h2",8),o._uU(11),o.qZA(),o.TgZ(12,"h4")(13,"b"),o._uU(14,"Email: "),o.qZA(),o.TgZ(15,"a",9),o._uU(16),o.qZA()(),o.TgZ(17,"h4")(18,"b"),o._uU(19,"Date de naissance: "),o.qZA(),o._uU(20),o.qZA()()()()()(),o.TgZ(21,"button",10),o._uU(22,"Modifier profil"),o.qZA()()()(),o._UZ(23,"app-footer")),2&r&&(o.xp6(11),o.hij(" ",i.user.username,""),o.xp6(4),o.Q6J("href","mailto:"+i.user.email,o.LSH),o.xp6(1),o.Oqu(i.user.email),o.xp6(4),o.hij(" ",i.user.birthday,""))},dependencies:[yl,vu,yu],styles:[".card-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-between}.card[_ngcontent-%COMP%]{flex:1;margin-bottom:20px}"]}),e})(),MF=(()=>{var n;class e{constructor(r){this.authService=r,this.email=""}ngOnInit(){}sendPasswordResetEmail(){this.email&&this.authService.forgotpwd(this.email).then(()=>{window.alert("Email de r\xe9initialisation est envoy\xe9, v\xe9rifier votre boite de r\xe9ception!")}).catch(r=>{window.alert(r)})}}return(n=e).\u0275fac=function(r){return new(r||n)(o.Y36(_D))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-forgotpassword"]],decls:11,vars:1,consts:[[2,"background-image","url('../assets/images/protechbg.jpg')"],[1,"wrapper"],[1,"input-box"],["type","email","name","email","id","email","placeholder","Votre email","required","",3,"ngModel","ngModelChange"],[1,"input-box","button"],["type","Submit","value","Envoyer un email",3,"click"]],template:function(r,i){1&r&&(o._UZ(0,"app-navbar"),o.TgZ(1,"body",0)(2,"div",1)(3,"h2"),o._uU(4,"Veuillez ins\xe9rer votre email:"),o.qZA(),o.TgZ(5,"form")(6,"div",2)(7,"input",3),o.NdJ("ngModelChange",function(d){return i.email=d}),o.qZA()(),o.TgZ(8,"div",4)(9,"input",5),o.NdJ("click",function(){return i.sendPasswordResetEmail()}),o.qZA()()()()(),o._UZ(10,"app-footer")),2&r&&(o.xp6(7),o.Q6J("ngModel",i.email))},dependencies:[zg,Cp,vy,Ug,Cy,mw,Vg,vu,yu],styles:['@import"https://fonts.googleapis.com/css?family=Poppins:400,500,600,700&display=swap";*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box;font-family:Poppins,sans-serif}body[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;background:#4070f4}.wrapper[_ngcontent-%COMP%]{position:relative;max-width:430px;width:100%;background:#fff;padding:34px;border-radius:6px;box-shadow:0 5px 10px #0003}.wrapper[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{position:relative;font-size:22px;font-weight:600;color:#333}.wrapper[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;bottom:0;height:3px;width:28px;border-radius:12px;background:#4070f4}.wrapper[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{margin-top:30px}.wrapper[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-box[_ngcontent-%COMP%]{height:52px;margin:18px 0}form[_ngcontent-%COMP%]   .input-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:100%;width:100%;outline:none;padding:0 15px;font-size:17px;font-weight:400;color:#333;border:1.5px solid #C7BEBE;border-bottom-width:2.5px;border-radius:6px;transition:all .3s ease}.input-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .input-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:valid{border-color:#4070f4}form[_ngcontent-%COMP%]   .policy[_ngcontent-%COMP%]{display:flex;align-items:center}form[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#707070;font-size:14px;font-weight:500;margin-left:10px}.input-box.button[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{color:#fff;letter-spacing:1px;border:none;background:#4070f4;cursor:pointer}.input-box.button[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:hover{background:#0e4bf1}form[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#333;width:100%;text-align:center}form[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#4070f4;text-decoration:none}form[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}']}),e})(),OF=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-verifyemail"]],decls:16,vars:0,consts:[[1,"container-fluid"],[1,"row","mt-5"],[1,"col"],[1,"col-4"],[1,"card","shadow"],[1,"card-body"],[1,"mb-3"],[1,"text-danger","text-muted"],[1,"text-muted"]],template:function(r,i){1&r&&(o.TgZ(0,"div",0)(1,"div",1),o._UZ(2,"div",2),o.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"form")(7,"div",6),o._UZ(8,"h4",7),o.qZA(),o.TgZ(9,"div",6)(10,"p",8),o._uU(11,"Lien envoy\xe9 sur votre email. "),o.qZA(),o._UZ(12,"br"),o.TgZ(13,"p"),o._uU(14,"veuillez v\xe9rifier votre compte."),o.qZA()()()()()(),o._UZ(15,"div",2),o.qZA()())},dependencies:[zg,Ug,Vg]}),e})(),xF=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-aide"]],decls:51,vars:0,consts:[[2,"margin-top","20px","margin-left","50px"],[1,"list",2,"margin-left","50px","margin-top","30px","margin-bottom","100px"],["href","/home"],["href","/chat"],["href","/admindashboard"],["href","/form"],["href","/faq"],["href","/login"],["href","/signup"],["href","/userslist"],["href","/editprofile"],["href","/profile"],["href","/aide"]],template:function(r,i){1&r&&(o._UZ(0,"app-navbar"),o.TgZ(1,"div")(2,"h1",0),o._uU(3,"Liste des commandes:"),o.qZA()(),o.TgZ(4,"div",1)(5,"ul")(6,"a",2)(7,"li")(8,"span"),o._uU(9,"Accueil"),o.qZA()()(),o.TgZ(10,"a",3)(11,"li")(12,"span"),o._uU(13,"Message"),o.qZA()()(),o.TgZ(14,"a",4)(15,"li")(16,"span"),o._uU(17,"Administrateur"),o.qZA()()(),o.TgZ(18,"a",5)(19,"li")(20,"span"),o._uU(21,"Formulaire"),o.qZA()()(),o.TgZ(22,"a",6)(23,"li")(24,"span"),o._uU(25,"Question"),o.qZA()()(),o.TgZ(26,"a",7)(27,"li")(28,"span"),o._uU(29,"Connecter"),o.qZA()()(),o.TgZ(30,"a",8)(31,"li")(32,"span"),o._uU(33,"Inscrire"),o.qZA()()(),o.TgZ(34,"a",9)(35,"li")(36,"span"),o._uU(37,"Utilisateur"),o.qZA()()(),o.TgZ(38,"a",10)(39,"li")(40,"span"),o._uU(41,"Modifier"),o.qZA()()(),o.TgZ(42,"a",11)(43,"li")(44,"span"),o._uU(45,"Profil"),o.qZA()()(),o.TgZ(46,"a",12)(47,"li")(48,"span"),o._uU(49,"Aide"),o.qZA()()()()(),o._UZ(50,"app-footer"))},dependencies:[vu,yu],styles:['@import"https://fonts.googleapis.com/css2?family=Poppins:wght@200;300;400;500;600;700;800;900&display=swap";*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box;font-family:Poppins,sans-serif}body[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;background:#000;min-height:100vh}.list[_ngcontent-%COMP%]{position:relative}.list[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-weight:700;letter-spacing:1px;margin-bottom:10px}.list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{position:relative}.list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{position:relative;left:0;color:#000;list-style:none;margin:4px 0;border-left:2px solid #1e73be;transition:.5s;cursor:pointer}.list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{left:10px}.list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:relative;padding:8px 8px 8px 12px;display:inline-block;z-index:1;transition:.5s}.list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]{color:#111}.list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:before{content:"";position:absolute;width:100%;height:100%;background:#1e73be;transform:scaleX(0);transform-origin:left;transition:.5s}.list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover:before{transform:scaleX(1)}']}),e})();const NF=[{path:"",component:Ib},{path:"home",component:Ib},{path:"chat",component:KL},{path:"admindashboard",component:YL},{path:"form",component:QL},{path:"faq",component:XL},{path:"login",component:aF},{path:"signup",component:CF},{path:"userslist",component:SF},{path:"clientslist",component:IF},{path:"adminslist",component:PF},{path:"editprofile",component:DF},{path:"profile",component:RF},{path:"forgotpassword",component:MF},{path:"verifyemail",component:OF},{path:"footer",component:yu},{path:"aide",component:xF},{path:"**",redirectTo:"/home"}];let kF=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[Sd.forRoot(NF),Sd]}),e})(),LF=(()=>{var n;class e{constructor(){this.title="clientele"}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(r,i){1&r&&o._UZ(0,"router-outlet")},dependencies:[Cm]}),e})();const jF=[{provide:ph,useClass:(()=>{var n;class e{constructor(r){this.localStorageService=r}intercept(r,i){let u=r;const d=this.localStorageService.getToken();return null!=d&&(u=r.clone({headers:r.headers.set("Authorization","Bearer "+d)})),i.handle(u)}}return(n=e).\u0275fac=function(r){return new(r||n)(o.LFG(gu))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),e})(),multi:!0}],UF_firebaseConfig={apiKey:"AIzaSyDNTI3jZwax693vfNqk11Jg-PjGXHIVuT4",authDomain:"clientele-a5a4a.firebaseapp.com",projectId:"clientele-a5a4a",storageBucket:"clientele-a5a4a.appspot.com",messagingSenderId:"793524511262",appId:"1:793524511262:web:3e88a0e464c9ea4d55840f"};let BF=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275mod=o.oAB({type:n,bootstrap:[LF]}),n.\u0275inj=o.cJS({providers:[jF],imports:[Ri,Sd.forRoot([]),kF,Ht,hx,X0,q2,GL,is,hx,Li.hO.initializeApp(UF_firebaseConfig)]}),e})();(0,Bh.KN)("firebase","10.2.0","app"),(0,Bh.ZF)({apiKey:"AIzaSyDNTI3jZwax693vfNqk11Jg-PjGXHIVuT4",authDomain:"clientele-a5a4a.firebaseapp.com",projectId:"clientele-a5a4a",storageBucket:"clientele-a5a4a.appspot.com",messagingSenderId:"793524511262",appId:"1:793524511262:web:3e88a0e464c9ea4d55840f"}),Pp().bootstrapModule(BF).catch(n=>console.error(n))},5341:(ne,p,y)=>{"use strict";var o=y(7156).default;const v=y(283);class _ extends Error{constructor(P,...w){let S;super(...w),Error.captureStackTrace&&Error.captureStackTrace(this,_),this.name="StatusError",this.message=P.statusMessage,this.statusCode=P.status,this.res=P,this.json=P.json.bind(P),this.text=P.text.bind(P),this.arrayBuffer=P.arrayBuffer.bind(P),Object.defineProperty(this,"responseBody",{get:()=>(S||(S=this.arrayBuffer()),S)}),this.headers={};for(const[m,I]of P.headers.entries())this.headers[m.toLowerCase()]=I}}ne.exports=v((b,P,w,S,h)=>function(){var m=o(function*(I,M,T={}){I=h+(I||"");let N=new URL(I);if(S||(S={}),N.username&&(S.Authorization="Basic "+btoa(N.username+":"+N.password),N=new URL(N.protocol+"//"+N.host+N.pathname+N.search)),"https:"!==N.protocol&&"http:"!==N.protocol)throw new Error(`Unknown protocol, ${N.protocol}`);if(M&&!(M instanceof ArrayBuffer||ArrayBuffer.isView(M)||"string"==typeof M)){if("object"!=typeof M)throw new Error("Unknown body type.");M=JSON.stringify(M),S["Content-Type"]="application/json"}T=new Headers({...S||{},...T});const L=yield fetch(N,{method:P,headers:T,body:M});if(L.statusCode=L.status,!b.has(L.status))throw new _(L);return"json"===w?L.json():"buffer"===w?L.arrayBuffer():"string"===w?L.text():L});return function(I,M){return m.apply(this,arguments)}}())},283:ne=>{"use strict";const p=new Set(["json","buffer","string"]);ne.exports=y=>(...o)=>{const v=new Set;let _,A,b,P="";return o.forEach(w=>{if("string"==typeof w)if(w.toUpperCase()===w){if(_)throw new Error(`Can't set method to ${w}, already set to ${_}.`);_=w}else if(w.startsWith("http:")||w.startsWith("https:"))P=w;else{if(!p.has(w))throw new Error(`Unknown encoding, ${w}`);A=w}else if("number"==typeof w)v.add(w);else{if("object"!=typeof w)throw new Error("Unknown type: "+typeof w);if(Array.isArray(w)||w instanceof Set)w.forEach(S=>v.add(S));else{if(b)throw new Error("Cannot set headers twice.");b=w}}}),_||(_="GET"),0===v.size&&v.add(200),y(v,_,A,b,P)}},2748:function(ne,p,y){"use strict";var o=this&&this.__createBinding||(Object.create?function(A,b,P,w){void 0===w&&(w=P),Object.defineProperty(A,w,{enumerable:!0,get:function(){return b[P]}})}:function(A,b,P,w){void 0===w&&(w=P),A[w]=b[P]}),v=this&&this.__exportStar||function(A,b){for(var P in A)"default"!==P&&!b.hasOwnProperty(P)&&o(b,A,P)};Object.defineProperty(p,"__esModule",{value:!0}),new(y(9464).AgentConfig),v(y(8323),p)},4346:function(ne,p,y){"use strict";var o=this&&this.__createBinding||(Object.create?function(S,h,m,I){void 0===I&&(I=m),Object.defineProperty(S,I,{enumerable:!0,get:function(){return h[m]}})}:function(S,h,m,I){void 0===I&&(I=m),S[I]=h[m]}),v=this&&this.__setModuleDefault||(Object.create?function(S,h){Object.defineProperty(S,"default",{enumerable:!0,value:h})}:function(S,h){S.default=h}),_=this&&this.__importStar||function(S){if(S&&S.__esModule)return S;var h={};if(null!=S)for(var m in S)"default"!==m&&Object.hasOwnProperty.call(S,m)&&o(h,S,m);return v(h,S),h};Object.defineProperty(p,"__esModule",{value:!0}),p.ConsoleLoggingListener=void 0;const A=_(y(9271)),b=y(7590),P=y(5916);p.ConsoleLoggingListener=class w{constructor(h=b.LogLevel.None){this.privLogPath=void 0,this.privEnableConsoleOutput=!0,this.privLogLevelFilter=h}set logPath(h){P.Contracts.throwIfNullOrUndefined(A.openSync,"\nFile System access not available"),this.privLogPath=h}set enableConsoleOutput(h){this.privEnableConsoleOutput=h}onEvent(h){if(h.eventType>=this.privLogLevelFilter){const m=this.toString(h);if(this.privLogPath&&A.writeFileSync(this.privLogPath,m+"\n",{flag:"a+"}),this.privEnableConsoleOutput)switch(h.eventType){case b.LogLevel.Debug:console.debug(m);break;case b.LogLevel.Info:console.info(m);break;case b.LogLevel.Warning:console.warn(m);break;case b.LogLevel.Error:console.error(m);break;default:console.log(m)}}}toString(h){const m=[`${h.eventTime}`,`${h.name}`],I=h;for(const M in I)if(M&&h.hasOwnProperty(M)&&"eventTime"!==M&&"eventType"!==M&&"eventId"!==M&&"name"!==M&&"constructor"!==M){const T=I[M];let N="<NULL>";null!=T&&(N="number"==typeof T||"string"==typeof T?T.toString():JSON.stringify(T)),m.push(`${M}: ${N}`)}return m.join(" | ")}}},4853:function(ne,p,y){"use strict";var o=this&&this.__createBinding||(Object.create?function(_,A,b,P){void 0===P&&(P=b),Object.defineProperty(_,P,{enumerable:!0,get:function(){return A[b]}})}:function(_,A,b,P){void 0===P&&(P=b),_[P]=A[b]}),v=this&&this.__exportStar||function(_,A){for(var b in _)"default"!==b&&!A.hasOwnProperty(b)&&o(A,_,b)};Object.defineProperty(p,"__esModule",{value:!0}),v(y(4346),p),v(y(7799),p),v(y(3944),p),v(y(3640),p),v(y(1044),p),v(y(8739),p),v(y(7641),p),v(y(675),p),v(y(1701),p),v(y(2093),p),v(y(9140),p)},3640:function(ne,p,y){"use strict";var o=this&&this.__awaiter||function(P,w,S,h){return new(S||(S=Promise))(function(I,M){function T(z){try{L(h.next(z))}catch(V){M(V)}}function N(z){try{L(h.throw(z))}catch(V){M(V)}}function L(z){z.done?I(z.value):function m(I){return I instanceof S?I:new S(function(M){M(I)})}(z.value).then(T,N)}L((h=h.apply(P,w||[])).next())})};Object.defineProperty(p,"__esModule",{value:!0}),p.FileAudioSource=void 0;const v=y(9464),_=y(847),A=y(7833);p.FileAudioSource=class b{constructor(w,S,h){this.privStreams={},this.privHeaderEnd=44,this.privId=h||_.createNoDashGuid(),this.privEvents=new _.EventSource,this.privSource=w,this.privFilename=typeof window<"u"&&typeof Blob<"u"&&this.privSource instanceof Blob?w.name:S||"unknown.wav",this.privAudioFormatPromise=this.readHeader()}get format(){return this.privAudioFormatPromise}turnOn(){if(this.privFilename.lastIndexOf(".wav")!==this.privFilename.length-4){const w=this.privFilename+" is not supported. Only WAVE files are allowed at the moment.";return this.onEvent(new _.AudioSourceErrorEvent(w,"")),Promise.reject(w)}this.onEvent(new _.AudioSourceInitializingEvent(this.privId)),this.onEvent(new _.AudioSourceReadyEvent(this.privId))}id(){return this.privId}attach(w){return o(this,void 0,void 0,function*(){this.onEvent(new _.AudioStreamNodeAttachingEvent(this.privId,w));const S=yield this.upload(w);return this.onEvent(new _.AudioStreamNodeAttachedEvent(this.privId,w)),Promise.resolve({detach:()=>o(this,void 0,void 0,function*(){S.readEnded(),delete this.privStreams[w],this.onEvent(new _.AudioStreamNodeDetachedEvent(this.privId,w)),yield this.turnOff()}),id:()=>w,read:()=>S.read()})})}detach(w){w&&this.privStreams[w]&&(this.privStreams[w].close(),delete this.privStreams[w],this.onEvent(new _.AudioStreamNodeDetachedEvent(this.privId,w)))}turnOff(){for(const w in this.privStreams)if(w){const S=this.privStreams[w];S&&!S.isClosed&&S.close()}return this.onEvent(new _.AudioSourceOffEvent(this.privId)),Promise.resolve()}get events(){return this.privEvents}get deviceInfo(){return this.privAudioFormatPromise.then(w=>Promise.resolve({bitspersample:w.bitsPerSample,channelcount:w.channels,connectivity:v.connectivity.Unknown,manufacturer:"Speech SDK",model:"File",samplerate:w.samplesPerSec,type:v.type.File}))}readHeader(){const S=this.privSource.slice(0,4296),h=new _.Deferred,m=I=>{const M=new DataView(I),T=X=>String.fromCharCode(M.getUint8(X),M.getUint8(X+1),M.getUint8(X+2),M.getUint8(X+3));if("RIFF"!==T(0))return void h.reject("Invalid WAV header in file, RIFF was not found");if("WAVE"!==T(8)||"fmt "!==T(12))return void h.reject("Invalid WAV header in file, WAVEfmt was not found");const N=M.getInt32(16,!0),L=M.getUint16(22,!0),z=M.getUint32(24,!0),V=M.getUint16(34,!0);let q=36+Math.max(N-16,0);for(;"data"!==T(q);q+=2)if(q>4288)return void h.reject("Invalid WAV header in file, data block was not found");this.privHeaderEnd=q+8,h.resolve(A.AudioStreamFormat.getWaveFormatPCM(z,V,L))};if(typeof window<"u"&&typeof Blob<"u"&&S instanceof Blob){const I=new FileReader;I.onload=M=>{m(M.target.result)},I.readAsArrayBuffer(S)}else m(S.buffer.slice(S.byteOffset,S.byteOffset+S.byteLength));return h.promise}upload(w){return o(this,void 0,void 0,function*(){const S=h=>{const m=`Error occurred while processing '${this.privFilename}'. ${h}`;throw this.onEvent(new _.AudioStreamNodeErrorEvent(this.privId,w,m)),new Error(m)};try{yield this.turnOn();const h=yield this.privAudioFormatPromise,m=new _.ChunkedArrayBufferStream(h.avgBytesPerSec/10,w);this.privStreams[w]=m;const I=this.privSource.slice(this.privHeaderEnd),M=T=>{m.isClosed||(m.writeStreamChunk({buffer:T,isEnd:!1,timeReceived:Date.now()}),m.close())};if(typeof window<"u"&&typeof Blob<"u"&&I instanceof Blob){const T=new FileReader;T.onerror=N=>S(N.toString()),T.onload=N=>{M(N.target.result)},T.readAsArrayBuffer(I)}else M(I.buffer.slice(I.byteOffset,I.byteOffset+I.byteLength));return m}catch(h){S(h)}})}onEvent(w){this.privEvents.onEvent(w),_.Events.instance.onEvent(w)}}},7799:(ne,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0})},3944:function(ne,p,y){"use strict";var o=this&&this.__awaiter||function(P,w,S,h){return new(S||(S=Promise))(function(I,M){function T(z){try{L(h.next(z))}catch(V){M(V)}}function N(z){try{L(h.throw(z))}catch(V){M(V)}}function L(z){z.done?I(z.value):function m(I){return I instanceof S?I:new S(function(M){M(I)})}(z.value).then(T,N)}L((h=h.apply(P,w||[])).next())})};Object.defineProperty(p,"__esModule",{value:!0}),p.MicAudioSource=p.AudioWorkletSourceURLPropertyName=void 0;const v=y(9464),_=y(847),A=y(7833);p.AudioWorkletSourceURLPropertyName="MICROPHONE-WorkletSourceUrl";class b{constructor(w,S,h,m){this.privRecorder=w,this.deviceId=S,this.privStreams={},this.privOutputChunkSize=b.AUDIOFORMAT.avgBytesPerSec/10,this.privId=h||_.createNoDashGuid(),this.privEvents=new _.EventSource,this.privMediaStream=m||null,this.privIsClosing=!1}get format(){return Promise.resolve(b.AUDIOFORMAT)}turnOn(){if(this.privInitializeDeferral)return this.privInitializeDeferral.promise;this.privInitializeDeferral=new _.Deferred;try{this.createAudioContext()}catch(h){return h instanceof Error?this.privInitializeDeferral.reject(h.name+": "+h.message):this.privInitializeDeferral.reject(h),this.privInitializeDeferral.promise}const w=window.navigator;let S=w.getUserMedia||w.webkitGetUserMedia||w.mozGetUserMedia||w.msGetUserMedia;if(w.mediaDevices&&(S=(h,m,I)=>{w.mediaDevices.getUserMedia(h).then(m).catch(I)}),S){const h=()=>{this.onEvent(new _.AudioSourceInitializingEvent(this.privId)),this.privMediaStream&&this.privMediaStream.active?(this.onEvent(new _.AudioSourceReadyEvent(this.privId)),this.privInitializeDeferral.resolve()):S({audio:!this.deviceId||{deviceId:this.deviceId},video:!1},m=>{this.privMediaStream=m,this.onEvent(new _.AudioSourceReadyEvent(this.privId)),this.privInitializeDeferral.resolve()},m=>{const I=`Error occurred during microphone initialization: ${m}`;this.privInitializeDeferral.reject(I),this.onEvent(new _.AudioSourceErrorEvent(this.privId,I))})};"suspended"===this.privContext.state?this.privContext.resume().then(h).catch(m=>{this.privInitializeDeferral.reject(`Failed to initialize audio context: ${m}`)}):h()}else{const h="Browser does not support getUserMedia.";this.privInitializeDeferral.reject(h),this.onEvent(new _.AudioSourceErrorEvent(h,""))}return this.privInitializeDeferral.promise}id(){return this.privId}attach(w){return this.onEvent(new _.AudioStreamNodeAttachingEvent(this.privId,w)),this.listen(w).then(S=>(this.onEvent(new _.AudioStreamNodeAttachedEvent(this.privId,w)),{detach:()=>o(this,void 0,void 0,function*(){return S.readEnded(),delete this.privStreams[w],this.onEvent(new _.AudioStreamNodeDetachedEvent(this.privId,w)),this.turnOff()}),id:()=>w,read:()=>S.read()}))}detach(w){w&&this.privStreams[w]&&(this.privStreams[w].close(),delete this.privStreams[w],this.onEvent(new _.AudioStreamNodeDetachedEvent(this.privId,w)))}turnOff(){return o(this,void 0,void 0,function*(){for(const w in this.privStreams)if(w){const S=this.privStreams[w];S&&S.close()}this.onEvent(new _.AudioSourceOffEvent(this.privId)),this.privInitializeDeferral&&(yield this.privInitializeDeferral,this.privInitializeDeferral=null),yield this.destroyAudioContext()})}get events(){return this.privEvents}get deviceInfo(){return this.getMicrophoneLabel().then(w=>({bitspersample:b.AUDIOFORMAT.bitsPerSample,channelcount:b.AUDIOFORMAT.channels,connectivity:v.connectivity.Unknown,manufacturer:"Speech SDK",model:w,samplerate:b.AUDIOFORMAT.samplesPerSec,type:v.type.Microphones}))}setProperty(w,S){if(w!==p.AudioWorkletSourceURLPropertyName)throw new Error("Property '"+w+"' is not supported on Microphone.");this.privRecorder.setWorkletUrl(S)}getMicrophoneLabel(){const w="microphone";if(void 0!==this.privMicrophoneLabel)return Promise.resolve(this.privMicrophoneLabel);if(void 0===this.privMediaStream||!this.privMediaStream.active)return Promise.resolve(w);this.privMicrophoneLabel=w;const S=this.privMediaStream.getTracks()[0].getSettings().deviceId;if(void 0===S)return Promise.resolve(this.privMicrophoneLabel);const h=new _.Deferred;return navigator.mediaDevices.enumerateDevices().then(m=>{for(const I of m)if(I.deviceId===S){this.privMicrophoneLabel=I.label;break}h.resolve(this.privMicrophoneLabel)},()=>h.resolve(this.privMicrophoneLabel)),h.promise}listen(w){return o(this,void 0,void 0,function*(){yield this.turnOn();const S=new _.ChunkedArrayBufferStream(this.privOutputChunkSize,w);this.privStreams[w]=S;try{this.privRecorder.record(this.privContext,this.privMediaStream,S)}catch(m){throw this.onEvent(new _.AudioStreamNodeErrorEvent(this.privId,w,m)),m}return S})}onEvent(w){this.privEvents.onEvent(w),_.Events.instance.onEvent(w)}createAudioContext(){this.privContext||(this.privContext=A.AudioStreamFormatImpl.getAudioContext(b.AUDIOFORMAT.samplesPerSec))}destroyAudioContext(){return o(this,void 0,void 0,function*(){if(!this.privContext)return;this.privRecorder.releaseMediaResources(this.privContext);let w=!1;"close"in this.privContext&&(w=!0),w?this.privIsClosing||(this.privIsClosing=!0,yield this.privContext.close(),this.privContext=null,this.privIsClosing=!1):null!==this.privContext&&"running"===this.privContext.state&&(yield this.privContext.suspend())})}}p.MicAudioSource=b,b.AUDIOFORMAT=A.AudioStreamFormat.getDefaultInputFormat()},1044:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.PcmRecorder=void 0;const o=y(847);p.PcmRecorder=class v{constructor(A){this.privStopInputOnRelease=A}record(A,b,P){const S=new o.RiffPcmEncoder(A.sampleRate,16e3),h=A.createMediaStreamSource(b),m=()=>{const M=(()=>{let T=0;try{return A.createScriptProcessor(T,1,1)}catch{T=2048;let L=A.sampleRate;for(;T<16384&&L>=32e3;)T<<=1,L>>=1;return A.createScriptProcessor(T,1,1)}})();M.onaudioprocess=T=>{const N=T.inputBuffer.getChannelData(0);if(P&&!P.isClosed){const L=S.encode(N);L&&P.writeStreamChunk({buffer:L,isEnd:!1,timeReceived:Date.now()})}},h.connect(M),M.connect(A.destination),this.privMediaResources={scriptProcessorNode:M,source:h,stream:b}},I=!!this.privSpeechProcessorScript&&"ignore"===this.privSpeechProcessorScript.toLowerCase();if(A.audioWorklet&&!I){if(!this.privSpeechProcessorScript){const T=new Blob(["class SP extends AudioWorkletProcessor {\n                    constructor(options) {\n                      super(options);\n                    }\n                    process(inputs, outputs) {\n                      const input = inputs[0];\n                      const output = [];\n                      for (let channel = 0; channel < input.length; channel += 1) {\n                        output[channel] = input[channel];\n                      }\n                      this.port.postMessage(output[0]);\n                      return true;\n                    }\n                  }\n                  registerProcessor('speech-processor', SP);"],{type:"application/javascript; charset=utf-8"});this.privSpeechProcessorScript=URL.createObjectURL(T)}A.audioWorklet.addModule(this.privSpeechProcessorScript).then(()=>{const M=new AudioWorkletNode(A,"speech-processor");M.port.onmessage=T=>{if(P&&!P.isClosed){const L=S.encode(T.data);L&&P.writeStreamChunk({buffer:L,isEnd:!1,timeReceived:Date.now()})}},h.connect(M),M.connect(A.destination),this.privMediaResources={scriptProcessorNode:M,source:h,stream:b}}).catch(()=>{m()})}else try{m()}catch(M){throw new Error(`Unable to start audio worklet node for PCMRecorder: ${M}`)}}releaseMediaResources(A){this.privMediaResources&&(this.privMediaResources.scriptProcessorNode&&(this.privMediaResources.scriptProcessorNode.disconnect(A.destination),this.privMediaResources.scriptProcessorNode=null),this.privMediaResources.source&&(this.privMediaResources.source.disconnect(),this.privStopInputOnRelease&&this.privMediaResources.stream.getTracks().forEach(b=>b.stop()),this.privMediaResources.source=null))}setWorkletUrl(A){this.privSpeechProcessorScript=A}}},1701:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.ProxyInfo=void 0;const o=y(8323);class v{constructor(A,b,P,w){this.privProxyHostName=A,this.privProxyPort=b,this.privProxyUserName=P,this.privProxyPassword=w}static fromParameters(A){return new v(A.getProperty(o.PropertyId.SpeechServiceConnection_ProxyHostName),parseInt(A.getProperty(o.PropertyId.SpeechServiceConnection_ProxyPort),10),A.getProperty(o.PropertyId.SpeechServiceConnection_ProxyUserName),A.getProperty(o.PropertyId.SpeechServiceConnection_ProxyPassword))}static fromRecognizerConfig(A){return this.fromParameters(A.parameters)}get HostName(){return this.privProxyHostName}get Port(){return this.privProxyPort}get UserName(){return this.privProxyUserName}get Password(){return this.privProxyPassword}}p.ProxyInfo=v},675:(ne,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.ReplayableAudioNode=void 0,p.ReplayableAudioNode=class y{constructor(_,A){this.privBuffers=[],this.privReplayOffset=0,this.privLastShrinkOffset=0,this.privBufferStartOffset=0,this.privBufferSerial=0,this.privBufferedBytes=0,this.privReplay=!1,this.privLastChunkAcquiredTime=0,this.privAudioNode=_,this.privBytesPerSecond=A}id(){return this.privAudioNode.id()}read(){if(this.privReplay&&0!==this.privBuffers.length){let A=Math.round((this.privReplayOffset-this.privBufferStartOffset)*this.privBytesPerSecond*1e-7);A%2!=0&&A++;let b=0;for(;b<this.privBuffers.length&&A>=this.privBuffers[b].chunk.buffer.byteLength;)A-=this.privBuffers[b++].chunk.buffer.byteLength;if(b<this.privBuffers.length){const P=this.privBuffers[b].chunk.buffer.slice(A);return this.privReplayOffset+=P.byteLength/this.privBytesPerSecond*1e7,b===this.privBuffers.length-1&&(this.privReplay=!1),Promise.resolve({buffer:P,isEnd:!1,timeReceived:this.privBuffers[b].chunk.timeReceived})}}return this.privAudioNode.read().then(_=>(_&&_.buffer&&(this.privBuffers.push(new o(_,this.privBufferSerial++,this.privBufferedBytes)),this.privBufferedBytes+=_.buffer.byteLength),_))}detach(){return this.privBuffers=void 0,this.privAudioNode.detach()}replay(){this.privBuffers&&0!==this.privBuffers.length&&(this.privReplay=!0,this.privReplayOffset=this.privLastShrinkOffset)}shrinkBuffers(_){if(void 0===this.privBuffers||0===this.privBuffers.length)return;this.privLastShrinkOffset=_;let b=Math.round((_-this.privBufferStartOffset)*this.privBytesPerSecond*1e-7),P=0;for(;P<this.privBuffers.length&&b>=this.privBuffers[P].chunk.buffer.byteLength;)b-=this.privBuffers[P++].chunk.buffer.byteLength;this.privBufferStartOffset=Math.round(_-b/this.privBytesPerSecond*1e7),this.privBuffers=this.privBuffers.slice(P)}findTimeAtOffset(_){if(_<this.privBufferStartOffset||void 0===this.privBuffers)return 0;for(const A of this.privBuffers){const b=A.byteOffset/this.privBytesPerSecond*1e7;if(_>=b&&_<=b+A.chunk.buffer.byteLength/this.privBytesPerSecond*1e7)return A.chunk.timeReceived}return 0}};class o{constructor(_,A,b){this.chunk=_,this.serial=A,this.byteOffset=b}}},9140:(ne,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.RestConfigBase=void 0;class y{static get requestOptions(){return y.privDefaultRequestOptions}static get configParams(){return y.privDefaultParams}static get restErrors(){return y.privRestErrors}}p.RestConfigBase=y,y.privDefaultRequestOptions={headers:{Accept:"application/json"},ignoreCache:!1,timeout:1e4},y.privRestErrors={authInvalidSubscriptionKey:"You must specify either an authentication token to use, or a Cognitive Speech subscription key.",authInvalidSubscriptionRegion:"You must specify the Cognitive Speech region to use.",invalidArgs:"Required input not found: {arg}.",invalidCreateJoinConversationResponse:"Creating/Joining conversation failed with HTTP {status}.",invalidParticipantRequest:"The requested participant was not found.",permissionDeniedConnect:"Required credentials not found.",permissionDeniedConversation:"Invalid operation: only the host can {command} the conversation.",permissionDeniedParticipant:"Invalid operation: only the host can {command} a participant.",permissionDeniedSend:"Invalid operation: the conversation is not in a connected state.",permissionDeniedStart:"Invalid operation: there is already an active conversation."},y.privDefaultParams={apiVersion:"api-version",authorization:"Authorization",clientAppId:"X-ClientAppId",contentTypeKey:"Content-Type",correlationId:"X-CorrelationId",languageCode:"language",nickname:"nickname",profanity:"profanity",requestId:"X-RequestId",roomId:"roomid",sessionToken:"token",subscriptionKey:"Ocp-Apim-Subscription-Key",subscriptionRegion:"Ocp-Apim-Subscription-Region",token:"X-CapitoToken"}},2093:function(ne,p,y){"use strict";var o=this&&this.__awaiter||function(w,S,h,m){return new(h||(h=Promise))(function(M,T){function N(V){try{z(m.next(V))}catch(q){T(q)}}function L(V){try{z(m.throw(V))}catch(q){T(q)}}function z(V){V.done?M(V.value):function I(M){return M instanceof h?M:new h(function(T){T(M)})}(V.value).then(N,L)}z((m=m.apply(w,S||[])).next())})},v=this&&this.__importDefault||function(w){return w&&w.__esModule?w:{default:w}};Object.defineProperty(p,"__esModule",{value:!0}),p.RestMessageAdapter=p.RestRequestType=void 0;const _=v(y(5341)),A=y(847);var b,w;(w=b=p.RestRequestType||(p.RestRequestType={})).Get="GET",w.Post="POST",w.Delete="DELETE",w.File="file",p.RestMessageAdapter=class P{constructor(S){if(!S)throw new A.ArgumentNullError("configParams");this.privHeaders=S.headers,this.privIgnoreCache=S.ignoreCache}static extractHeaderValue(S,h){let m="";try{const I=h.trim().split(/[\r\n]+/),M={};I.forEach(T=>{const N=T.split(": "),L=N.shift().toLowerCase(),z=N.join(": ");M[L]=z}),m=M[S.toLowerCase()]}catch{}return m}set options(S){this.privHeaders=S.headers,this.privIgnoreCache=S.ignoreCache}setHeaders(S,h){this.privHeaders[S]=h}request(S,h,m={},I=null){const M=new A.Deferred,T=S===b.File?"POST":S,N=(z,V={})=>{const q=z;return{data:JSON.stringify(V),headers:JSON.stringify(z.headers),json:V,ok:z.statusCode>=200&&z.statusCode<300,status:z.statusCode,statusText:V.error?V.error.message:q.statusText?q.statusText:q.statusMessage}};return this.privIgnoreCache&&(this.privHeaders["Cache-Control"]="no-cache"),S===b.Post&&I&&(this.privHeaders["content-type"]="application/json",this.privHeaders["Content-Type"]="application/json"),(z=>{_.default(h,T,this.privHeaders,200,201,202,204,400,401,402,403,404)(""===this.queryParams(m)?"":`?${this.queryParams(m)}`,z).then(X=>o(this,void 0,void 0,function*(){if(S===b.Delete||204===X.statusCode)M.resolve(N(X));else try{const ce=yield X.json();M.resolve(N(X,ce))}catch{M.resolve(N(X))}})).catch(X=>{M.reject(X)})})(I),M.promise}queryParams(S={}){return Object.keys(S).map(h=>encodeURIComponent(h)+"="+encodeURIComponent(S[h])).join("&")}}},8739:function(ne,p,y){"use strict";var o=this&&this.__awaiter||function(b,P,w,S){return new(w||(w=Promise))(function(m,I){function M(L){try{N(S.next(L))}catch(z){I(z)}}function T(L){try{N(S.throw(L))}catch(z){I(z)}}function N(L){L.done?m(L.value):function h(m){return m instanceof w?m:new w(function(I){I(m)})}(L.value).then(M,T)}N((S=S.apply(b,P||[])).next())})};Object.defineProperty(p,"__esModule",{value:!0}),p.WebsocketConnection=void 0;const v=y(847),_=y(7641);p.WebsocketConnection=class A{constructor(P,w,S,h,m,I=!1,M){if(this.privIsDisposed=!1,!P)throw new v.ArgumentNullError("uri");if(!h)throw new v.ArgumentNullError("messageFormatter");this.privMessageFormatter=h;let T="",N=0;if(w)for(const L in w)if(L){T+=0===N&&-1===P.indexOf("?")?"?":"&",T+=encodeURIComponent(L);let V=w[L];V&&(V=encodeURIComponent(V),T+=`=${V}`),N++}if(S)for(const L in S)L&&(T+=0===N&&-1===P.indexOf("?")?"?":"&",T+=`${L}=${encodeURIComponent(S[L])}`,N++);this.privUri=P+T,this.privId=M||v.createNoDashGuid(),this.privConnectionMessageAdapter=new _.WebsocketMessageAdapter(this.privUri,this.id,this.privMessageFormatter,m,S,I)}dispose(){return o(this,void 0,void 0,function*(){this.privIsDisposed=!0,this.privConnectionMessageAdapter&&(yield this.privConnectionMessageAdapter.close())})}isDisposed(){return this.privIsDisposed}get id(){return this.privId}get uri(){return this.privUri}state(){return this.privConnectionMessageAdapter.state}open(){return this.privConnectionMessageAdapter.open()}send(P){return this.privConnectionMessageAdapter.send(P)}read(){return this.privConnectionMessageAdapter.read()}get events(){return this.privConnectionMessageAdapter.events}}},7641:function(ne,p,y){"use strict";var o=this&&this.__createBinding||(Object.create?function(N,L,z,V){void 0===V&&(V=z),Object.defineProperty(N,V,{enumerable:!0,get:function(){return L[z]}})}:function(N,L,z,V){void 0===V&&(V=z),N[V]=L[z]}),v=this&&this.__setModuleDefault||(Object.create?function(N,L){Object.defineProperty(N,"default",{enumerable:!0,value:L})}:function(N,L){N.default=L}),_=this&&this.__importStar||function(N){if(N&&N.__esModule)return N;var L={};if(null!=N)for(var z in N)"default"!==z&&Object.hasOwnProperty.call(N,z)&&o(L,N,z);return v(L,N),L},A=this&&this.__awaiter||function(N,L,z,V){return new(z||(z=Promise))(function(X,ce){function fe(ke){try{Ae(V.next(ke))}catch(Fe){ce(Fe)}}function pe(ke){try{Ae(V.throw(ke))}catch(Fe){ce(Fe)}}function Ae(ke){ke.done?X(ke.value):function q(X){return X instanceof z?X:new z(function(ce){ce(X)})}(ke.value).then(fe,pe)}Ae((V=V.apply(N,L||[])).next())})},b=this&&this.__importDefault||function(N){return N&&N.__esModule?N:{default:N}};Object.defineProperty(p,"__esModule",{value:!0}),p.WebsocketMessageAdapter=void 0;const P=_(y(4151)),w=_(y(4270)),S=b(y(6916)),h=b(y(2104)),m=b(y(2914)),I=y(3747),M=y(847);class T{constructor(L,z,V,q,X,ce){if(!L)throw new M.ArgumentNullError("uri");if(!V)throw new M.ArgumentNullError("messageFormatter");this.proxyInfo=q,this.privConnectionEvents=new M.EventSource,this.privConnectionId=z,this.privMessageFormatter=V,this.privConnectionState=M.ConnectionState.None,this.privUri=L,this.privHeaders=X,this.privEnableCompression=ce,this.privHeaders[I.HeaderNames.ConnectionId]=this.privConnectionId,this.privLastErrorReceived=""}get state(){return this.privConnectionState}open(){if(this.privConnectionState===M.ConnectionState.Disconnected)return Promise.reject(`Cannot open a connection that is in ${this.privConnectionState} state`);if(this.privConnectionEstablishDeferral)return this.privConnectionEstablishDeferral.promise;this.privConnectionEstablishDeferral=new M.Deferred,this.privCertificateValidatedDeferral=new M.Deferred,this.privConnectionState=M.ConnectionState.Connecting;try{if(typeof WebSocket<"u"&&!T.forceNpmWebSocket)this.privCertificateValidatedDeferral.resolve(),this.privWebsocketClient=new WebSocket(this.privUri);else{const L={headers:this.privHeaders,perMessageDeflate:this.privEnableCompression};this.privCertificateValidatedDeferral.resolve(),L.agent=this.getAgent();let V=new URL(this.privUri).protocol;"wss:"===V?.toLocaleLowerCase()?V="https:":"ws:"===V?.toLocaleLowerCase()&&(V="http:"),L.agent.protocol=V,this.privWebsocketClient=new m.default(this.privUri,L)}this.privWebsocketClient.binaryType="arraybuffer",this.privReceivingMessageQueue=new M.Queue,this.privDisconnectDeferral=new M.Deferred,this.privSendMessageQueue=new M.Queue,this.processSendQueue().catch(L=>{M.Events.instance.onEvent(new M.BackgroundEvent(L))})}catch(L){return this.privConnectionEstablishDeferral.resolve(new M.ConnectionOpenResponse(500,L)),this.privConnectionEstablishDeferral.promise}return this.onEvent(new M.ConnectionStartEvent(this.privConnectionId,this.privUri)),this.privWebsocketClient.onopen=()=>{this.privCertificateValidatedDeferral.promise.then(()=>{this.privConnectionState=M.ConnectionState.Connected,this.onEvent(new M.ConnectionEstablishedEvent(this.privConnectionId)),this.privConnectionEstablishDeferral.resolve(new M.ConnectionOpenResponse(200,""))},L=>{this.privConnectionEstablishDeferral.reject(L)})},this.privWebsocketClient.onerror=L=>{this.onEvent(new M.ConnectionErrorEvent(this.privConnectionId,L.message,L.type)),this.privLastErrorReceived=L.message},this.privWebsocketClient.onclose=L=>{this.privConnectionState===M.ConnectionState.Connecting?(this.privConnectionState=M.ConnectionState.Disconnected,this.privConnectionEstablishDeferral.resolve(new M.ConnectionOpenResponse(L.code,L.reason+" "+this.privLastErrorReceived))):(this.privConnectionState=M.ConnectionState.Disconnected,this.privWebsocketClient=null,this.onEvent(new M.ConnectionClosedEvent(this.privConnectionId,L.code,L.reason))),this.onClose(L.code,L.reason).catch(z=>{M.Events.instance.onEvent(new M.BackgroundEvent(z))})},this.privWebsocketClient.onmessage=L=>{const z=(new Date).toISOString();if(this.privConnectionState===M.ConnectionState.Connected){const V=new M.Deferred;if(this.privReceivingMessageQueue.enqueueFromPromise(V.promise),L.data instanceof ArrayBuffer){const q=new M.RawWebsocketMessage(M.MessageType.Binary,L.data);this.privMessageFormatter.toConnectionMessage(q).then(X=>{this.onEvent(new M.ConnectionMessageReceivedEvent(this.privConnectionId,z,X)),V.resolve(X)},X=>{V.reject(`Invalid binary message format. Error: ${X}`)})}else{const q=new M.RawWebsocketMessage(M.MessageType.Text,L.data);this.privMessageFormatter.toConnectionMessage(q).then(X=>{this.onEvent(new M.ConnectionMessageReceivedEvent(this.privConnectionId,z,X)),V.resolve(X)},X=>{V.reject(`Invalid text message format. Error: ${X}`)})}}},this.privConnectionEstablishDeferral.promise}send(L){if(this.privConnectionState!==M.ConnectionState.Connected)return Promise.reject(`Cannot send on connection that is in ${M.ConnectionState[this.privConnectionState]} state`);const z=new M.Deferred,V=new M.Deferred;return this.privSendMessageQueue.enqueueFromPromise(V.promise),this.privMessageFormatter.fromConnectionMessage(L).then(q=>{V.resolve({Message:L,RawWebsocketMessage:q,sendStatusDeferral:z})},q=>{V.reject(`Error formatting the message. ${q}`)}),z.promise}read(){return this.privConnectionState!==M.ConnectionState.Connected?Promise.reject(`Cannot read on connection that is in ${this.privConnectionState} state`):this.privReceivingMessageQueue.dequeue()}close(L){return this.privWebsocketClient?(this.privConnectionState!==M.ConnectionState.Disconnected&&this.privWebsocketClient.close(1e3,L||"Normal closure by client"),this.privDisconnectDeferral.promise):Promise.resolve()}get events(){return this.privConnectionEvents}sendRawMessage(L){try{return L?(this.onEvent(new M.ConnectionMessageSentEvent(this.privConnectionId,(new Date).toISOString(),L.Message)),this.isWebsocketOpen?(this.privWebsocketClient.send(L.RawWebsocketMessage.payload),Promise.resolve()):Promise.reject("websocket send error: Websocket not ready "+this.privConnectionId+" "+L.Message.id+" "+(new Error).stack)):Promise.resolve()}catch(z){return Promise.reject(`websocket send error: ${z}`)}}onClose(L,z){return A(this,void 0,void 0,function*(){const V=`Connection closed. ${L}: ${z}`;this.privConnectionState=M.ConnectionState.Disconnected,this.privDisconnectDeferral.resolve(),yield this.privReceivingMessageQueue.drainAndDispose(()=>{},V),yield this.privSendMessageQueue.drainAndDispose(q=>{q.sendStatusDeferral.reject(V)},V)})}processSendQueue(){return A(this,void 0,void 0,function*(){for(;;){const z=yield this.privSendMessageQueue.dequeue();if(!z)return;try{yield this.sendRawMessage(z),z.sendStatusDeferral.resolve()}catch(V){z.sendStatusDeferral.reject(V)}}})}onEvent(L){this.privConnectionEvents.onEvent(L),M.Events.instance.onEvent(L)}getAgent(){const L=new S.default.Agent(this.createConnection);return void 0!==this.proxyInfo&&void 0!==this.proxyInfo.HostName&&this.proxyInfo.Port>0&&(L.proxyInfo=this.proxyInfo),L}static GetProxyAgent(L){const z={host:L.HostName,port:L.Port};return z.headers=L.UserName?{"Proxy-Authentication":"Basic "+new Buffer(`${L.UserName}:${void 0===L.Password?"":L.Password}`).toString("base64")}:{},z.headers.requestOCSP="true",new h.default(z)}createConnection(L,z){let V;if(z=Object.assign(Object.assign({},z),{requestOCSP:!0,servername:z.host}),this.proxyInfo){const X=T.GetProxyAgent(this.proxyInfo);V=new Promise((ce,fe)=>{X.callback(L,z,(pe,Ae)=>{pe?fe(pe):ce(Ae)})})}else V=Promise.resolve(z.secureEndpoint?w.connect(z):P.connect(z));return V}get isWebsocketOpen(){return this.privWebsocketClient&&this.privWebsocketClient.readyState===this.privWebsocketClient.OPEN}}p.WebsocketMessageAdapter=T,T.forceNpmWebSocket=!1},4011:(ne,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.AddedLmIntent=void 0,p.AddedLmIntent=class y{constructor(v,_){this.modelImpl=v,this.intentName=_}}},4273:(ne,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.AgentConfig=void 0,p.AgentConfig=class y{toJsonString(){return JSON.stringify(this.iPrivConfig)}get(){return this.iPrivConfig}set(v){this.iPrivConfig=v}}},2098:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.AvatarSynthesisAdapter=void 0;const o=y(8323),v=y(9464);p.AvatarSynthesisAdapter=class _ extends v.SynthesisAdapterBase{constructor(b,P,w,S,h){super(b,P,w,void 0),this.privAvatarSynthesizer=S,this.privSynthesizer=S,this.privAvatarConfig=h}setSynthesisContextSynthesisSection(){this.privSynthesisContext.setSynthesisSection(void 0)}setSpeechConfigSynthesisSection(){var b,P,w,S,h,m,I,M,T,N,L,z,V,q,X,ce;this.privSynthesizerConfig.synthesisVideoSection={format:{bitrate:null===(b=this.privAvatarConfig.videoFormat)||void 0===b?void 0:b.bitrate,codec:null===(P=this.privAvatarConfig.videoFormat)||void 0===P?void 0:P.codec,crop:{bottomRight:{x:null===(h=null===(S=null===(w=this.privAvatarConfig.videoFormat)||void 0===w?void 0:w.cropRange)||void 0===S?void 0:S.bottomRight)||void 0===h?void 0:h.x,y:null===(M=null===(I=null===(m=this.privAvatarConfig.videoFormat)||void 0===m?void 0:m.cropRange)||void 0===I?void 0:I.bottomRight)||void 0===M?void 0:M.y},topLeft:{x:null===(L=null===(N=null===(T=this.privAvatarConfig.videoFormat)||void 0===T?void 0:T.cropRange)||void 0===N?void 0:N.topLeft)||void 0===L?void 0:L.x,y:null===(q=null===(V=null===(z=this.privAvatarConfig.videoFormat)||void 0===z?void 0:z.cropRange)||void 0===V?void 0:V.topLeft)||void 0===q?void 0:q.y}},resolution:{height:null===(X=this.privAvatarConfig.videoFormat)||void 0===X?void 0:X.height,width:null===(ce=this.privAvatarConfig.videoFormat)||void 0===ce?void 0:ce.width}},protocol:{name:"WebRTC",webrtcConfig:{clientDescription:btoa(this.privSynthesizerConfig.parameters.getProperty(o.PropertyId.TalkingAvatarService_WebRTC_SDP)),iceServers:this.privAvatarSynthesizer.iceServers}},talkingAvatar:{background:{color:this.privAvatarConfig.backgroundColor},character:this.privAvatarConfig.character,customized:this.privAvatarConfig.customized,style:this.privAvatarConfig.style}}}onAvatarEvent(b){if(this.privAvatarSynthesizer.avatarEventReceived){const P=new o.AvatarEventArgs(b.Data.Offset,b.Data.Name);try{this.privAvatarSynthesizer.avatarEventReceived(this.privAvatarSynthesizer,P)}catch{}}}}},7310:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.CognitiveSubscriptionKeyAuthentication=void 0;const o=y(847),v=y(3747),_=y(2320);p.CognitiveSubscriptionKeyAuthentication=class A{constructor(P){if(!P)throw new o.ArgumentNullError("subscriptionKey");this.privAuthInfo=new _.AuthInfo(v.HeaderNames.AuthKey,P)}fetch(P){return Promise.resolve(this.privAuthInfo)}fetchOnExpiry(P){return Promise.resolve(this.privAuthInfo)}}},1300:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.CognitiveTokenAuthentication=void 0;const o=y(847),v=y(2320),_=y(3747);class A{constructor(P,w){if(!P)throw new o.ArgumentNullError("fetchCallback");if(!w)throw new o.ArgumentNullError("fetchOnExpiryCallback");this.privFetchCallback=P,this.privFetchOnExpiryCallback=w}fetch(P){return this.privFetchCallback(P).then(w=>new v.AuthInfo(_.HeaderNames.Authorization,void 0===w?void 0:A.privTokenPrefix+w))}fetchOnExpiry(P){return this.privFetchOnExpiryCallback(P).then(w=>new v.AuthInfo(_.HeaderNames.Authorization,void 0===w?void 0:A.privTokenPrefix+w))}}p.CognitiveTokenAuthentication=A,A.privTokenPrefix="Bearer "},6389:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.ConnectionFactoryBase=void 0;const o=y(9464),v=y(8323),_=y(5730);p.ConnectionFactoryBase=class A{static getHostSuffix(P){if(P){if(P.toLowerCase().startsWith("china"))return".azure.cn";if(P.toLowerCase().startsWith("usgov"))return".azure.us"}return".microsoft.com"}setCommonUrlParams(P,w,S){new Map([[v.PropertyId.Speech_SegmentationSilenceTimeoutMs,_.QueryParameterNames.SegmentationSilenceTimeoutMs],[v.PropertyId.SpeechServiceConnection_EnableAudioLogging,_.QueryParameterNames.EnableAudioLogging],[v.PropertyId.SpeechServiceConnection_EndSilenceTimeoutMs,_.QueryParameterNames.EndSilenceTimeoutMs],[v.PropertyId.SpeechServiceConnection_InitialSilenceTimeoutMs,_.QueryParameterNames.InitialSilenceTimeoutMs],[v.PropertyId.SpeechServiceResponse_PostProcessingOption,_.QueryParameterNames.Postprocessing],[v.PropertyId.SpeechServiceResponse_ProfanityOption,_.QueryParameterNames.Profanity],[v.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,_.QueryParameterNames.EnableWordLevelTimestamps],[v.PropertyId.SpeechServiceResponse_StablePartialResultThreshold,_.QueryParameterNames.StableIntermediateThreshold]]).forEach((I,M)=>{this.setUrlParameter(M,I,P,w,S)});const m=JSON.parse(P.parameters.getProperty(o.ServicePropertiesPropertyName,"{}"));Object.keys(m).forEach(I=>{w[I]=m[I]})}setUrlParameter(P,w,S,h,m){const I=S.parameters.getProperty(P,void 0);I&&(!m||-1===m.search(w))&&(h[w]=I.toLocaleLowerCase())}}},9254:function(ne,p,y){"use strict";var o=this&&this.__awaiter||function(b,P,w,S){return new(w||(w=Promise))(function(m,I){function M(L){try{N(S.next(L))}catch(z){I(z)}}function T(L){try{N(S.throw(L))}catch(z){I(z)}}function N(L){L.done?m(L.value):function h(m){return m instanceof w?m:new w(function(I){I(m)})}(L.value).then(M,T)}N((S=S.apply(b,P||[])).next())})};Object.defineProperty(p,"__esModule",{value:!0}),p.ConversationServiceRecognizer=void 0;const v=y(8323),_=y(9464);p.ConversationServiceRecognizer=class A extends _.ServiceRecognizerBase{constructor(P,w,S,h,m){super(P,w,S,h,m),this.handleSpeechPhraseMessage=I=>o(this,void 0,void 0,function*(){return this.handleSpeechPhrase(I)}),this.handleSpeechHypothesisMessage=I=>this.handleSpeechHypothesis(I)}processTypeSpecificMessages(P){}handleRecognizedCallback(P,w,S){}handleRecognizingCallback(P,w,S){}processSpeechMessages(P){return o(this,void 0,void 0,function*(){let w=!1;switch(P.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":this.handleSpeechHypothesisMessage&&this.handleSpeechHypothesisMessage(P.textBody),w=!0;break;case"speech.phrase":this.handleSpeechPhraseMessage&&(yield this.handleSpeechPhraseMessage(P.textBody)),w=!0}return w})}cancelRecognition(P,w,S,h,m){}handleSpeechPhrase(P){return o(this,void 0,void 0,function*(){const w=_.SimpleSpeechPhrase.fromJSON(P),S=_.EnumTranslation.implTranslateRecognitionResult(w.RecognitionStatus);let h;const m=new v.PropertyCollection;m.setProperty(v.PropertyId.SpeechServiceResponse_JsonResult,P);const I=w.Offset+this.privRequestSession.currentTurnAudioOffset;let M=I;if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+w.Offset+w.Duration),v.ResultReason.Canceled===S){const T=_.EnumTranslation.implTranslateCancelResult(w.RecognitionStatus),N=_.EnumTranslation.implTranslateCancelErrorCode(w.RecognitionStatus);yield this.cancelRecognitionLocal(T,N,_.EnumTranslation.implTranslateErrorDetails(N))}else if(!this.privRequestSession.isSpeechEnded||S!==v.ResultReason.NoMatch||w.RecognitionStatus===_.RecognitionStatus.InitialSilenceTimeout){if(this.privRecognizerConfig.parameters.getProperty(_.OutputFormatPropertyName)===v.OutputFormat[v.OutputFormat.Simple])h=new v.SpeechRecognitionResult(this.privRequestSession.requestId,S,w.DisplayText,w.Duration,I,w.Language,w.LanguageDetectionConfidence,w.SpeakerId,void 0,P,m);else{const T=_.DetailedSpeechPhrase.fromJSON(P),N=T.Offset+this.privRequestSession.currentTurnAudioOffset,L=T.getJsonWithCorrectedOffsets(N);h=new v.SpeechRecognitionResult(this.privRequestSession.requestId,S,T.Text,T.Duration,N,T.Language,T.LanguageDetectionConfidence,T.SpeakerId,void 0,L,m),M=h.offset}this.handleRecognizedCallback(h,M,this.privRequestSession.sessionId)}})}handleSpeechHypothesis(P){const w=_.SpeechHypothesis.fromJSON(P),S=w.Offset+this.privRequestSession.currentTurnAudioOffset,h=new v.PropertyCollection;h.setProperty(v.PropertyId.SpeechServiceResponse_JsonResult,P);const m=new v.SpeechRecognitionResult(this.privRequestSession.requestId,v.ResultReason.RecognizingSpeech,w.Text,w.Duration,S,w.Language,w.LanguageDetectionConfidence,w.SpeakerId,void 0,P,h);this.privRequestSession.onHypothesis(S),this.handleRecognizingCallback(m,w.Duration,this.privRequestSession.sessionId)}}},5979:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.ConversationTranscriberConnectionFactory=void 0;const o=y(4853),v=y(8323),_=y(9464),A=y(6389),b=y(9464),P=y(3747),w=y(5730);p.ConversationTranscriberConnectionFactory=class S extends A.ConnectionFactoryBase{constructor(){super(...arguments),this.universalUri="/speech/universal/v2"}create(m,I,M){let T=m.parameters.getProperty(v.PropertyId.SpeechServiceConnection_Endpoint,void 0);const N=m.parameters.getProperty(v.PropertyId.SpeechServiceConnection_Region,void 0),L=A.ConnectionFactoryBase.getHostSuffix(N),z=m.parameters.getProperty(v.PropertyId.SpeechServiceConnection_Host,"wss://"+N+".stt.speech"+L),V={},q=m.parameters.getProperty(v.PropertyId.SpeechServiceConnection_EndpointId,void 0),X=m.parameters.getProperty(v.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);q?(!T||-1===T.search(w.QueryParameterNames.CustomSpeechDeploymentId))&&(V[w.QueryParameterNames.CustomSpeechDeploymentId]=q):X&&(!T||-1===T.search(w.QueryParameterNames.Language))&&(V[w.QueryParameterNames.Language]=X),void 0!==m.autoDetectSourceLanguages&&(V[w.QueryParameterNames.EnableLanguageId]="true"),this.setV2UrlParams(m,V,T),T||(T=`${z}${this.universalUri}`);const ce={};void 0!==I.token&&""!==I.token&&(ce[I.headerName]=I.token),ce[P.HeaderNames.ConnectionId]=M;const fe="true"===m.parameters.getProperty("SPEECH-EnableWebsocketCompression","false"),pe=new o.WebsocketConnection(T,V,ce,new b.WebsocketMessageFormatter,o.ProxyInfo.fromRecognizerConfig(m),fe,M);return m.parameters.setProperty(v.PropertyId.SpeechServiceConnection_Url,pe.uri),pe}setV2UrlParams(m,I,M){new Map([[v.PropertyId.Speech_SegmentationSilenceTimeoutMs,w.QueryParameterNames.SegmentationSilenceTimeoutMs],[v.PropertyId.SpeechServiceConnection_EnableAudioLogging,w.QueryParameterNames.EnableAudioLogging],[v.PropertyId.SpeechServiceConnection_EndSilenceTimeoutMs,w.QueryParameterNames.EndSilenceTimeoutMs],[v.PropertyId.SpeechServiceConnection_InitialSilenceTimeoutMs,w.QueryParameterNames.InitialSilenceTimeoutMs],[v.PropertyId.SpeechServiceResponse_PostProcessingOption,w.QueryParameterNames.Postprocessing],[v.PropertyId.SpeechServiceResponse_ProfanityOption,w.QueryParameterNames.Profanity],[v.PropertyId.SpeechServiceResponse_StablePartialResultThreshold,w.QueryParameterNames.StableIntermediateThreshold]]).forEach((L,z)=>{this.setUrlParameter(z,L,m,I,M)});const N=JSON.parse(m.parameters.getProperty(_.ServicePropertiesPropertyName,"{}"));Object.keys(N).forEach(L=>{I[L]=N[L]})}}},4354:function(ne,p,y){"use strict";var o=this&&this.__awaiter||function(b,P,w,S){return new(w||(w=Promise))(function(m,I){function M(L){try{N(S.next(L))}catch(z){I(z)}}function T(L){try{N(S.throw(L))}catch(z){I(z)}}function N(L){L.done?m(L.value):function h(m){return m instanceof w?m:new w(function(I){I(m)})}(L.value).then(M,T)}N((S=S.apply(b,P||[])).next())})};Object.defineProperty(p,"__esModule",{value:!0}),p.ConversationTranscriptionServiceRecognizer=void 0;const v=y(8323),_=y(9464);p.ConversationTranscriptionServiceRecognizer=class A extends _.ServiceRecognizerBase{constructor(P,w,S,h,m){super(P,w,S,h,m),this.privConversationTranscriber=m,this.setSpeakerDiarizationJson()}setSpeakerDiarizationJson(){if(this.privEnableSpeakerId){const P=this.privSpeechContext.getSection("phraseDetection");P.mode="Conversation";const w={mode:"Anonymous"};w.audioSessionId=this.privDiarizationSessionId,w.audioOffsetMs=0,P.speakerDiarization=w,this.privSpeechContext.setSection("phraseDetection",P)}}processTypeSpecificMessages(P){return o(this,void 0,void 0,function*(){let w;const S=new v.PropertyCollection;S.setProperty(v.PropertyId.SpeechServiceResponse_JsonResult,P.textBody);let h=!1;switch(P.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":const m=_.SpeechHypothesis.fromJSON(P.textBody),I=m.Offset+this.privRequestSession.currentTurnAudioOffset;w=new v.ConversationTranscriptionResult(this.privRequestSession.requestId,v.ResultReason.RecognizingSpeech,m.Text,m.Duration,I,m.Language,m.LanguageDetectionConfidence,void 0,void 0,P.textBody,S),this.privRequestSession.onHypothesis(I);const M=new v.ConversationTranscriptionEventArgs(w,m.Duration,this.privRequestSession.sessionId);if(this.privConversationTranscriber.transcribing)try{this.privConversationTranscriber.transcribing(this.privConversationTranscriber,M)}catch{}h=!0;break;case"speech.phrase":const T=_.SimpleSpeechPhrase.fromJSON(P.textBody),N=_.EnumTranslation.implTranslateRecognitionResult(T.RecognitionStatus);if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+T.Offset+T.Duration),v.ResultReason.Canceled===N){const L=_.EnumTranslation.implTranslateCancelResult(T.RecognitionStatus),z=_.EnumTranslation.implTranslateCancelErrorCode(T.RecognitionStatus);yield this.cancelRecognitionLocal(L,z,_.EnumTranslation.implTranslateErrorDetails(z))}else if(!this.privRequestSession.isSpeechEnded||N!==v.ResultReason.NoMatch||T.RecognitionStatus===_.RecognitionStatus.InitialSilenceTimeout){if(this.privRecognizerConfig.parameters.getProperty(_.OutputFormatPropertyName)===v.OutputFormat[v.OutputFormat.Simple])w=new v.ConversationTranscriptionResult(this.privRequestSession.requestId,N,T.DisplayText,T.Duration,T.Offset+this.privRequestSession.currentTurnAudioOffset,T.Language,T.LanguageDetectionConfidence,T.SpeakerId,void 0,P.textBody,S);else{const z=_.DetailedSpeechPhrase.fromJSON(P.textBody),V=z.Offset+this.privRequestSession.currentTurnAudioOffset,q=z.getJsonWithCorrectedOffsets(V);w=new v.ConversationTranscriptionResult(this.privRequestSession.requestId,N,z.RecognitionStatus===_.RecognitionStatus.Success?z.NBest[0].Display:void 0,z.Duration,V,z.Language,z.LanguageDetectionConfidence,T.SpeakerId,void 0,q,S)}const L=new v.ConversationTranscriptionEventArgs(w,w.offset,this.privRequestSession.sessionId);if(this.privConversationTranscriber.transcribed)try{this.privConversationTranscriber.transcribed(this.privConversationTranscriber,L)}catch{}}h=!0}return h})}cancelRecognition(P,w,S,h,m){if((new v.PropertyCollection).setProperty(_.CancellationErrorCodePropertyName,v.CancellationErrorCode[h]),this.privConversationTranscriber.canceled){const M=new v.ConversationTranscriptionCanceledEventArgs(S,m,h,void 0,P);try{this.privConversationTranscriber.canceled(this.privConversationTranscriber,M)}catch{}}}}},933:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.DialogConnectionFactory=void 0;const o=y(4853),v=y(9464),_=y(8323),A=y(6389),b=y(9464),P=y(3747),w=y(5730);class S extends A.ConnectionFactoryBase{create(m,I,M){const T=m.parameters.getProperty(_.PropertyId.Conversation_ApplicationId,""),N=m.parameters.getProperty(_.PropertyId.Conversation_DialogType),L=m.parameters.getProperty(_.PropertyId.SpeechServiceConnection_Region),z=m.parameters.getProperty(_.PropertyId.SpeechServiceConnection_RecoLanguage,"en-US"),V=m.parameters.getProperty(_.PropertyId.Conversation_Request_Bot_Status_Messages,"true"),q={};q[P.HeaderNames.ConnectionId]=M,q[w.QueryParameterNames.Format]=m.parameters.getProperty(v.OutputFormatPropertyName,_.OutputFormat[_.OutputFormat.Simple]).toLowerCase(),q[w.QueryParameterNames.Language]=z,q[w.QueryParameterNames.RequestBotStatusMessages]=V,T&&(q[w.QueryParameterNames.BotId]=T,N===_.DialogServiceConfig.DialogTypes.CustomCommands&&(q[P.HeaderNames.CustomCommandsAppId]=T));const X=N===_.DialogServiceConfig.DialogTypes.CustomCommands?"commands/":"",ce=N===_.DialogServiceConfig.DialogTypes.CustomCommands?"v1":N===_.DialogServiceConfig.DialogTypes.BotFramework?"v3":"v0",fe={};null!=I.token&&""!==I.token&&(fe[I.headerName]=I.token);let pe=m.parameters.getProperty(_.PropertyId.SpeechServiceConnection_Endpoint,"");if(!pe){const ke=A.ConnectionFactoryBase.getHostSuffix(L),Fe=m.parameters.getProperty(_.PropertyId.SpeechServiceConnection_Host,`wss://${L}.${S.BaseUrl}${ke}`);pe=`${Fe.endsWith("/")?Fe:Fe+"/"}${X}${S.ApiKey}/${ce}`}this.setCommonUrlParams(m,q,pe);const Ae="true"===m.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new o.WebsocketConnection(pe,q,fe,new b.WebsocketMessageFormatter,o.ProxyInfo.fromRecognizerConfig(m),Ae,M)}}p.DialogConnectionFactory=S,S.ApiKey="api",S.BaseUrl="convai.speech"},6823:function(ne,p,y){"use strict";var o=this&&this.__awaiter||function(M,T,N,L){return new(N||(N=Promise))(function(V,q){function X(pe){try{fe(L.next(pe))}catch(Ae){q(Ae)}}function ce(pe){try{fe(L.throw(pe))}catch(Ae){q(Ae)}}function fe(pe){pe.done?V(pe.value):function z(V){return V instanceof N?V:new N(function(q){q(V)})}(pe.value).then(X,ce)}fe((L=L.apply(M,T||[])).next())})};Object.defineProperty(p,"__esModule",{value:!0}),p.DialogServiceAdapter=void 0;const v=y(4853),_=y(7003),A=y(847),b=y(7176),P=y(8323),w=y(8202),S=y(9464),h=y(3242),m=y(5328);p.DialogServiceAdapter=class I extends S.ServiceRecognizerBase{constructor(T,N,L,z,V){super(T,N,L,z,V),this.privEvents=new A.EventSource,this.privDialogServiceConnector=V,this.receiveMessageOverride=()=>this.receiveDialogMessageOverride(),this.privTurnStateManager=new w.DialogServiceTurnStateManager,this.recognizeOverride=(q,X,ce)=>this.listenOnce(q,X,ce),this.postConnectImplOverride=q=>this.dialogConnectImpl(q),this.configConnectionOverride=q=>this.configConnection(q),this.disconnectOverride=()=>this.privDisconnect(),this.privDialogAudioSource=L,this.agentConfigSent=!1,this.privLastResult=null,this.connectionEvents.attach(q=>{"ConnectionClosedEvent"===q.name&&(this.terminateMessageLoop=!0)})}sendMessage(T){return o(this,void 0,void 0,function*(){const N=A.createGuid(),L=A.createNoDashGuid(),z={context:{interactionId:N},messagePayload:JSON.parse(T),version:.5},V=JSON.stringify(z);yield(yield this.fetchConnection()).send(new m.SpeechConnectionMessage(A.MessageType.Text,"agent",L,"application/json",V))})}privDisconnect(){return o(this,void 0,void 0,function*(){yield this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,P.CancellationReason.Error,P.CancellationErrorCode.NoError,"Disconnecting"),this.terminateMessageLoop=!0,this.agentConfigSent=!1})}processTypeSpecificMessages(T){const N=new P.PropertyCollection;let L,z;switch(T.messageType===A.MessageType.Text&&N.setProperty(P.PropertyId.SpeechServiceResponse_JsonResult,T.textBody),T.path.toLowerCase()){case"speech.phrase":const q=S.SimpleSpeechPhrase.fromJSON(T.textBody);if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+q.Offset+q.Duration),q.RecognitionStatus!==S.RecognitionStatus.TooManyRequests&&q.RecognitionStatus!==S.RecognitionStatus.Error){const ke=this.fireEventForResult(q,N);if(this.privLastResult=ke.result,this.privDialogServiceConnector.recognized)try{this.privDialogServiceConnector.recognized(this.privDialogServiceConnector,ke)}catch{}}z=!0;break;case"speech.hypothesis":const X=S.SpeechHypothesis.fromJSON(T.textBody),ce=X.Offset+this.privRequestSession.currentTurnAudioOffset;L=new P.SpeechRecognitionResult(this.privRequestSession.requestId,P.ResultReason.RecognizingSpeech,X.Text,X.Duration,ce,X.Language,X.LanguageDetectionConfidence,void 0,void 0,T.textBody,N),this.privRequestSession.onHypothesis(ce);const fe=new P.SpeechRecognitionEventArgs(L,X.Duration,this.privRequestSession.sessionId);if(this.privDialogServiceConnector.recognizing)try{this.privDialogServiceConnector.recognizing(this.privDialogServiceConnector,fe)}catch{}z=!0;break;case"speech.keyword":const pe=S.SpeechKeyword.fromJSON(T.textBody);L=new P.SpeechRecognitionResult(this.privRequestSession.requestId,"Accepted"===pe.Status?P.ResultReason.RecognizedKeyword:P.ResultReason.NoMatch,pe.Text,pe.Duration,pe.Offset,void 0,void 0,void 0,void 0,T.textBody,N),"Accepted"!==pe.Status&&(this.privLastResult=L);const Ae=new P.SpeechRecognitionEventArgs(L,L.duration,L.resultId);if(this.privDialogServiceConnector.recognized)try{this.privDialogServiceConnector.recognized(this.privDialogServiceConnector,Ae)}catch{}z=!0;break;case"audio":{const ke=T.requestId.toUpperCase(),Fe=this.privTurnStateManager.GetTurn(ke);try{T.binaryBody?Fe.audioStream.write(T.binaryBody):Fe.endAudioStream()}catch{}}z=!0;break;case"response":this.handleResponseMessage(T),z=!0}const V=new A.Deferred;return V.resolve(z),V.promise}cancelRecognition(T,N,L,z,V){return o(this,void 0,void 0,function*(){if(this.terminateMessageLoop=!0,this.privRequestSession.isRecognizing&&(yield this.privRequestSession.onStopRecognizing()),this.privDialogServiceConnector.canceled){const q=new P.PropertyCollection;q.setProperty(S.CancellationErrorCodePropertyName,P.CancellationErrorCode[z]);const X=new P.SpeechRecognitionCanceledEventArgs(L,V,z,void 0,T);try{this.privDialogServiceConnector.canceled(this.privDialogServiceConnector,X)}catch{}if(this.privSuccessCallback){const ce=new P.SpeechRecognitionResult(void 0,P.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,V,void 0,q);try{this.privSuccessCallback(ce),this.privSuccessCallback=void 0}catch{}}}})}listenOnce(T,N,L){return o(this,void 0,void 0,function*(){this.privRecognizerConfig.recognitionMode=T,this.privSuccessCallback=N,this.privErrorCallback=L,this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privDialogAudioSource.events),this.privRecognizerConfig.parameters.setProperty(P.PropertyId.Speech_SessionId,this.privRequestSession.sessionId);const z=this.connectImpl(),V=this.sendPreAudioMessages(),q=yield this.privDialogAudioSource.attach(this.privRequestSession.audioNodeId),X=yield this.privDialogAudioSource.format,ce=yield this.privDialogAudioSource.deviceInfo,fe=new v.ReplayableAudioNode(q,X.avgBytesPerSec);yield this.privRequestSession.onAudioSourceAttachCompleted(fe,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:ce};try{yield z,yield V}catch(ke){return yield this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,P.CancellationReason.Error,P.CancellationErrorCode.ConnectionFailure,ke),Promise.resolve()}const pe=new P.SessionEventArgs(this.privRequestSession.sessionId);this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,pe),this.sendAudio(fe).then(()=>{},ke=>o(this,void 0,void 0,function*(){yield this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,P.CancellationReason.Error,P.CancellationErrorCode.RuntimeError,ke)}))})}dialogConnectImpl(T){return this.privConnectionLoop=this.startMessageLoop(),T}receiveDialogMessageOverride(){const T=new A.Deferred,N=()=>o(this,void 0,void 0,function*(){try{const L=this.isDisposed(),z=!this.isDisposed()&&this.terminateMessageLoop;if(L||z)return void T.resolve(void 0);const q=yield(yield this.fetchConnection()).read();if(!q)return N();const X=m.SpeechConnectionMessage.fromConnectionMessage(q);switch(X.path.toLowerCase()){case"turn.start":{const we=X.requestId.toUpperCase();we!==this.privRequestSession.requestId.toUpperCase()?this.privTurnStateManager.StartTurn(we):this.privRequestSession.onServiceTurnStartResponse()}break;case"speech.startdetected":const fe=S.SpeechDetected.fromJSON(X.textBody),pe=new P.RecognitionEventArgs(fe.Offset,this.privRequestSession.sessionId);this.privRecognizer.speechStartDetected&&this.privRecognizer.speechStartDetected(this.privRecognizer,pe);break;case"speech.enddetected":let Ae;Ae=X.textBody.length>0?X.textBody:"{ Offset: 0 }";const ke=S.SpeechDetected.fromJSON(Ae);this.privRequestSession.onServiceRecognized(ke.Offset+this.privRequestSession.currentTurnAudioOffset);const Fe=new P.RecognitionEventArgs(ke.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.sessionId);this.privRecognizer.speechEndDetected&&this.privRecognizer.speechEndDetected(this.privRecognizer,Fe);break;case"turn.end":{const we=X.requestId.toUpperCase();if(we!==this.privRequestSession.requestId.toUpperCase())this.privTurnStateManager.CompleteTurn(we);else{const tt=new P.SessionEventArgs(this.privRequestSession.sessionId);if(yield this.privRequestSession.onServiceTurnEndResponse(!1),(!this.privRecognizerConfig.isContinuousRecognition||this.privRequestSession.isSpeechEnded||!this.privRequestSession.isRecognizing)&&this.privRecognizer.sessionStopped&&this.privRecognizer.sessionStopped(this.privRecognizer,tt),this.privSuccessCallback&&this.privLastResult){try{this.privSuccessCallback(this.privLastResult),this.privLastResult=null}catch(Ye){this.privErrorCallback&&this.privErrorCallback(Ye)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}}break;default:try{(yield this.processTypeSpecificMessages(X))||this.serviceEvents&&this.serviceEvents.onEvent(new A.ServiceEvent(X.path.toLowerCase(),X.textBody))}catch{}}return N()}catch{this.terminateMessageLoop=!0,T.resolve()}});return N().catch(L=>{A.Events.instance.onEvent(new A.BackgroundEvent(L))}),T.promise}startMessageLoop(){return o(this,void 0,void 0,function*(){this.terminateMessageLoop=!1;try{yield this.receiveDialogMessageOverride()}catch(T){yield this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,P.CancellationReason.Error,P.CancellationErrorCode.RuntimeError,T)}return Promise.resolve()})}configConnection(T){return o(this,void 0,void 0,function*(){return this.terminateMessageLoop?(this.terminateMessageLoop=!1,Promise.reject("Connection to service terminated.")):(yield this.sendSpeechServiceConfig(T,this.privRequestSession,this.privRecognizerConfig.SpeechServiceConfig.serialize()),yield this.sendAgentConfig(T),T)})}sendPreAudioMessages(){return o(this,void 0,void 0,function*(){const T=yield this.fetchConnection();this.addKeywordContextData(),yield this.sendSpeechContext(T,!0),yield this.sendAgentContext(T),yield this.sendWaveHeader(T)})}sendAgentConfig(T){if(this.agentConfig&&!this.agentConfigSent){if(this.privRecognizerConfig.parameters.getProperty(P.PropertyId.Conversation_DialogType)===P.DialogServiceConfig.DialogTypes.CustomCommands){const L=this.agentConfig.get();L.botInfo.commandsCulture=this.privRecognizerConfig.parameters.getProperty(P.PropertyId.SpeechServiceConnection_RecoLanguage,"en-us"),this.agentConfig.set(L)}this.onEvent(new _.SendingAgentContextMessageEvent(this.agentConfig));const N=this.agentConfig.toJsonString();return this.agentConfigSent=!0,T.send(new m.SpeechConnectionMessage(A.MessageType.Text,"agent.config",this.privRequestSession.requestId,"application/json",N))}}sendAgentContext(T){const N=A.createGuid(),L=this.privDialogServiceConnector.properties.getProperty(P.PropertyId.Conversation_Speech_Activity_Template),V=JSON.stringify({channelData:"",context:{interactionId:N},messagePayload:void 0===typeof L?void 0:L,version:.5});return T.send(new m.SpeechConnectionMessage(A.MessageType.Text,"speech.agent.context",this.privRequestSession.requestId,"application/json",V))}fireEventForResult(T,N){const L=S.EnumTranslation.implTranslateRecognitionResult(T.RecognitionStatus),z=T.Offset+this.privRequestSession.currentTurnAudioOffset,V=new P.SpeechRecognitionResult(this.privRequestSession.requestId,L,T.DisplayText,T.Duration,z,T.Language,T.LanguageDetectionConfidence,void 0,void 0,JSON.stringify(T),N);return new P.SpeechRecognitionEventArgs(V,z,this.privRequestSession.sessionId)}handleResponseMessage(T){const N=JSON.parse(T.textBody);switch(N.messageType.toLowerCase()){case"message":const L=T.requestId.toUpperCase(),z=h.ActivityPayloadResponse.fromJSON(T.textBody),V=this.privTurnStateManager.GetTurn(L);if(z.conversationId){const ce=this.agentConfig.get();ce.botInfo.conversationId=z.conversationId,this.agentConfig.set(ce)}const q=V.processActivityPayload(z,b.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormatString(this.privDialogServiceConnector.properties.getProperty(P.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0))),X=new P.ActivityReceivedEventArgs(z.messagePayload,q);if(this.privDialogServiceConnector.activityReceived)try{this.privDialogServiceConnector.activityReceived(this.privDialogServiceConnector,X)}catch{}break;case"messagestatus":if(this.privDialogServiceConnector.turnStatusReceived)try{this.privDialogServiceConnector.turnStatusReceived(this.privDialogServiceConnector,new P.TurnStatusReceivedEventArgs(T.textBody))}catch{}break;default:A.Events.instance.onEvent(new A.BackgroundEvent(`Unexpected response of type ${N.messageType}. Ignoring.`))}}onEvent(T){this.privEvents.onEvent(T),A.Events.instance.onEvent(T)}addKeywordContextData(){const T=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect");if(void 0===T)return;const N=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect-Offsets"),L=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect-Durations"),z=T.split(";"),V=void 0===N?[]:N.split(";"),q=void 0===L?[]:L.split(";"),X=[];for(let ce=0;ce<z.length;ce++){const fe={};fe.text=z[ce],ce<V.length&&(fe.offset=Number(V[ce])),ce<q.length&&(fe.duration=Number(q[ce])),X.push(fe)}this.speechContext.setSection("invocationSource","VoiceActivationWithKeyword"),this.speechContext.setSection("keywordDetection",[{clientDetectedKeywords:X,onReject:{action:"EndOfTurn"},type:"startTrigger"}])}}},4679:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.DialogServiceTurnState=void 0;const o=y(7176),v=y(4989),_=y(3242);p.DialogServiceTurnState=class A{constructor(P,w){this.privRequestId=w,this.privIsCompleted=!1,this.privAudioStream=null,this.privTurnManager=P,this.resetTurnEndTimeout()}get audioStream(){return this.resetTurnEndTimeout(),this.privAudioStream}processActivityPayload(P,w){return P.messageDataStreamType===_.MessageDataStreamType.TextToSpeechAudio&&(this.privAudioStream=v.AudioOutputStream.createPullStream(),this.privAudioStream.format=void 0!==w?w:o.AudioOutputFormatImpl.getDefaultOutputFormat()),this.privAudioStream}endAudioStream(){null!==this.privAudioStream&&!this.privAudioStream.isClosed&&this.privAudioStream.close()}complete(){void 0!==this.privTimeoutToken&&clearTimeout(this.privTimeoutToken),this.endAudioStream()}resetTurnEndTimeout(){void 0!==this.privTimeoutToken&&clearTimeout(this.privTimeoutToken),this.privTimeoutToken=setTimeout(()=>{this.privTurnManager.CompleteTurn(this.privRequestId)},2e3)}}},8202:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.DialogServiceTurnStateManager=void 0;const o=y(5723),v=y(4679);p.DialogServiceTurnStateManager=class _{constructor(){this.privTurnMap=new Map}StartTurn(b){if(this.privTurnMap.has(b))throw new o.InvalidOperationError("Service error: There is already a turn with id:"+b);const P=new v.DialogServiceTurnState(this,b);return this.privTurnMap.set(b,P),this.privTurnMap.get(b)}GetTurn(b){return this.privTurnMap.get(b)}CompleteTurn(b){if(!this.privTurnMap.has(b))throw new o.InvalidOperationError("Service error: Received turn end for an unknown turn id:"+b);const P=this.privTurnMap.get(b);return P.complete(),this.privTurnMap.delete(b),P}}},1723:(ne,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.DynamicGrammarBuilder=void 0,p.DynamicGrammarBuilder=class y{addPhrase(v){this.privPhrases||(this.privPhrases=[]),v instanceof Array?this.privPhrases=this.privPhrases.concat(v):this.privPhrases.push(v)}clearPhrases(){this.privPhrases=void 0}addReferenceGrammar(v){this.privGrammars||(this.privGrammars=[]),v instanceof Array?this.privGrammars=this.privGrammars.concat(v):this.privGrammars.push(v)}clearGrammars(){this.privGrammars=void 0}generateGrammarObject(){if(void 0===this.privGrammars&&void 0===this.privPhrases)return;const v={};if(v.ReferenceGrammars=this.privGrammars,void 0!==this.privPhrases&&0!==this.privPhrases.length){const _=[];this.privPhrases.forEach(A=>{_.push({Text:A})}),v.Groups=[{Type:"Generic",Items:_}]}return v}}},5656:(ne,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0})},2816:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.EnumTranslation=void 0;const o=y(8323),v=y(9464);p.EnumTranslation=class _{static implTranslateRecognitionResult(b,P=!1){let w=o.ResultReason.Canceled;switch(b){case v.RecognitionStatus.Success:w=o.ResultReason.RecognizedSpeech;break;case v.RecognitionStatus.EndOfDictation:w=P?o.ResultReason.RecognizedSpeech:o.ResultReason.NoMatch;break;case v.RecognitionStatus.NoMatch:case v.RecognitionStatus.InitialSilenceTimeout:case v.RecognitionStatus.BabbleTimeout:w=o.ResultReason.NoMatch;break;default:w=o.ResultReason.Canceled}return w}static implTranslateCancelResult(b){let P=o.CancellationReason.EndOfStream;switch(b){case v.RecognitionStatus.Success:case v.RecognitionStatus.EndOfDictation:case v.RecognitionStatus.NoMatch:P=o.CancellationReason.EndOfStream;break;default:P=o.CancellationReason.Error}return P}static implTranslateCancelErrorCode(b){let P=o.CancellationErrorCode.NoError;switch(b){case v.RecognitionStatus.Error:P=o.CancellationErrorCode.ServiceError;break;case v.RecognitionStatus.TooManyRequests:P=o.CancellationErrorCode.TooManyRequests;break;case v.RecognitionStatus.BadRequest:P=o.CancellationErrorCode.BadRequestParameters;break;case v.RecognitionStatus.Forbidden:P=o.CancellationErrorCode.Forbidden;break;default:P=o.CancellationErrorCode.NoError}return P}static implTranslateErrorDetails(b){let P="The speech service encountered an internal error and could not continue.";switch(b){case o.CancellationErrorCode.Forbidden:P="The recognizer is using a free subscription that ran out of quota.";break;case o.CancellationErrorCode.BadRequestParameters:P="Invalid parameter or unsupported audio format in the request.";break;case o.CancellationErrorCode.TooManyRequests:P="The number of parallel requests exceeded the number of allowed concurrent transcriptions."}return P}}},9464:function(ne,p,y){"use strict";var o=this&&this.__createBinding||(Object.create?function(b,P,w,S){void 0===S&&(S=w),Object.defineProperty(b,S,{enumerable:!0,get:function(){return P[w]}})}:function(b,P,w,S){void 0===S&&(S=w),b[S]=P[w]}),v=this&&this.__exportStar||function(b,P){for(var w in b)"default"!==w&&!P.hasOwnProperty(w)&&o(P,b,w)};Object.defineProperty(p,"__esModule",{value:!0}),p.AutoDetectSourceLanguagesOpenRangeOptionName=p.ForceDictationPropertyName=p.ServicePropertiesPropertyName=p.CancellationErrorCodePropertyName=p.OutputFormatPropertyName=void 0,v(y(7310),p),v(y(1300),p),v(y(2320),p),v(y(3226),p),v(y(6991),p),v(y(8380),p),v(y(4326),p),v(y(52),p),v(y(4838),p),v(y(9254),p),v(y(1184),p),v(y(8104),p),v(y(7220),p),v(y(8453),p),v(y(5979),p),v(y(9624),p),v(y(8444),p),v(y(2436),p),v(y(2816),p),v(y(3325),p),v(y(2472),p),v(y(1125),p),v(y(240),p),v(y(9386),p),v(y(2131),p),v(y(3660),p),v(y(9208),p),v(y(2522),p),v(y(4354),p),v(y(3351),p),v(y(8896),p),v(y(8668),p),v(y(4011),p),v(y(4306),p),v(y(5223),p),v(y(9297),p),v(y(7957),p),v(y(1379),p),v(y(1723),p),v(y(5656),p),v(y(6823),p),v(y(4273),p),v(y(1664),p),v(y(2305),p),v(y(8050),p),v(y(9215),p);var _=y(2098);Object.defineProperty(p,"AvatarSynthesisAdapter",{enumerable:!0,get:function(){return _.AvatarSynthesisAdapter}});var A=y(3054);Object.defineProperty(p,"SpeechSynthesisAdapter",{enumerable:!0,get:function(){return A.SpeechSynthesisAdapter}}),v(y(4074),p),v(y(8273),p),v(y(3215),p),v(y(2901),p),v(y(9065),p),v(y(7210),p),v(y(4615),p),p.OutputFormatPropertyName="OutputFormat",p.CancellationErrorCodePropertyName="CancellationErrorCode",p.ServicePropertiesPropertyName="ServiceProperties",p.ForceDictationPropertyName="ForceDictation",p.AutoDetectSourceLanguagesOpenRangeOptionName="OpenRange"},3747:(ne,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.HeaderNames=void 0;class y{}p.HeaderNames=y,y.AuthKey="Ocp-Apim-Subscription-Key",y.Authorization="Authorization",y.SpIDAuthKey="Apim-Subscription-Id",y.ConnectionId="X-ConnectionId",y.ContentType="Content-Type",y.CustomCommandsAppId="X-CommandsAppId",y.Path="Path",y.RequestId="X-RequestId",y.RequestStreamId="X-StreamId",y.RequestTimestamp="X-Timestamp"},2320:(ne,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.AuthInfo=void 0,p.AuthInfo=class y{constructor(v,_){this.privHeaderName=v,this.privToken=_}get headerName(){return this.privHeaderName}get token(){return this.privToken}}},3226:(ne,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0})},6991:(ne,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0})},8380:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.IntentConnectionFactory=void 0;const o=y(4853),v=y(8323),_=y(6389),A=y(9464),b=y(3747);p.IntentConnectionFactory=class P extends _.ConnectionFactoryBase{create(S,h,m){let I=S.parameters.getProperty(v.PropertyId.SpeechServiceConnection_Endpoint);if(!I){const L=S.parameters.getProperty(v.PropertyId.SpeechServiceConnection_IntentRegion),z=_.ConnectionFactoryBase.getHostSuffix(L);I=S.parameters.getProperty(v.PropertyId.SpeechServiceConnection_Host,"wss://"+L+".sr.speech"+z)+"/speech/recognition/interactive/cognitiveservices/v1"}const M={format:"simple",language:S.parameters.getProperty(v.PropertyId.SpeechServiceConnection_RecoLanguage)};this.setCommonUrlParams(S,M,I);const T={};void 0!==h.token&&""!==h.token&&(T[h.headerName]=h.token),T[b.HeaderNames.ConnectionId]=m,S.parameters.setProperty(v.PropertyId.SpeechServiceConnection_Url,I);const N="true"===S.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new o.WebsocketConnection(I,M,T,new A.WebsocketMessageFormatter,o.ProxyInfo.fromRecognizerConfig(S),N,m)}getSpeechRegionFromIntentRegion(S){switch(S){case"West US":case"US West":case"westus":return"uswest";case"West US 2":case"US West 2":case"westus2":return"uswest2";case"South Central US":case"US South Central":case"southcentralus":return"ussouthcentral";case"West Central US":case"US West Central":case"westcentralus":return"uswestcentral";case"East US":case"US East":case"eastus":return"useast";case"East US 2":case"US East 2":case"eastus2":return"useast2";case"West Europe":case"Europe West":case"westeurope":return"europewest";case"North Europe":case"Europe North":case"northeurope":return"europenorth";case"Brazil South":case"South Brazil":case"southbrazil":return"brazilsouth";case"Australia East":case"East Australia":case"eastaustralia":return"australiaeast";case"Southeast Asia":case"Asia Southeast":case"southeastasia":return"asiasoutheast";case"East Asia":case"Asia East":case"eastasia":return"asiaeast";default:return S}}}},4306:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.IntentServiceRecognizer=void 0;const o=y(847),v=y(8323),_=y(9464);p.IntentServiceRecognizer=class A extends _.ServiceRecognizerBase{constructor(P,w,S,h,m){super(P,w,S,h,m),this.privIntentRecognizer=m,this.privIntentDataSent=!1}setIntents(P,w){this.privAddedLmIntents=P,this.privUmbrellaIntent=w,this.privIntentDataSent=!0}processTypeSpecificMessages(P){let w,S,h=!1;const m=new v.PropertyCollection;switch(P.messageType===o.MessageType.Text&&m.setProperty(v.PropertyId.SpeechServiceResponse_JsonResult,P.textBody),P.path.toLowerCase()){case"speech.hypothesis":const M=_.SpeechHypothesis.fromJSON(P.textBody);if(w=new v.IntentRecognitionResult(void 0,this.privRequestSession.requestId,v.ResultReason.RecognizingIntent,M.Text,M.Duration,M.Offset+this.privRequestSession.currentTurnAudioOffset,M.Language,M.LanguageDetectionConfidence,void 0,P.textBody,m),this.privRequestSession.onHypothesis(w.offset),S=new v.IntentRecognitionEventArgs(w,M.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.sessionId),this.privIntentRecognizer.recognizing)try{this.privIntentRecognizer.recognizing(this.privIntentRecognizer,S)}catch{}h=!0;break;case"speech.phrase":const T=_.SimpleSpeechPhrase.fromJSON(P.textBody);w=new v.IntentRecognitionResult(void 0,this.privRequestSession.requestId,_.EnumTranslation.implTranslateRecognitionResult(T.RecognitionStatus),T.DisplayText,T.Duration,T.Offset+this.privRequestSession.currentTurnAudioOffset,T.Language,T.LanguageDetectionConfidence,void 0,P.textBody,m),S=new v.IntentRecognitionEventArgs(w,w.offset,this.privRequestSession.sessionId);const N=()=>{if(this.privIntentRecognizer.recognized)try{this.privIntentRecognizer.recognized(this.privIntentRecognizer,S)}catch{}if(this.privSuccessCallback){try{this.privSuccessCallback(w)}catch(z){this.privErrorCallback&&this.privErrorCallback(z)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}};!1===this.privIntentDataSent||v.ResultReason.NoMatch===S.result.reason?(this.privRequestSession.onPhraseRecognized(S.offset+S.result.duration),N()):this.privPendingIntentArgs=S,h=!0;break;case"response":if(S=this.privPendingIntentArgs,this.privPendingIntentArgs=void 0,void 0===S){if(""===P.textBody)return;S=new v.IntentRecognitionEventArgs(new v.IntentRecognitionResult,0,this.privRequestSession.sessionId)}const L=_.IntentResponse.fromJSON(P.textBody);if(null!==L&&L.topScoringIntent&&L.topScoringIntent.intent){let z=this.privAddedLmIntents[L.topScoringIntent.intent];if(void 0!==this.privUmbrellaIntent&&(z=this.privUmbrellaIntent),z){const V=void 0===z||void 0===z.intentName?L.topScoringIntent.intent:z.intentName;let q=S.result.reason;void 0!==V&&(q=v.ResultReason.RecognizedIntent);const X=void 0!==S.result.properties?S.result.properties:new v.PropertyCollection;X.setProperty(v.PropertyId.LanguageUnderstandingServiceResponse_JsonResult,P.textBody),S=new v.IntentRecognitionEventArgs(new v.IntentRecognitionResult(V,S.result.resultId,q,S.result.text,S.result.duration,S.result.offset,void 0,void 0,S.result.errorDetails,S.result.json,X),S.offset,S.sessionId)}}if(this.privRequestSession.onPhraseRecognized(S.offset+S.result.duration),this.privIntentRecognizer.recognized)try{this.privIntentRecognizer.recognized(this.privIntentRecognizer,S)}catch{}if(this.privSuccessCallback){try{this.privSuccessCallback(S.result)}catch(z){this.privErrorCallback&&this.privErrorCallback(z)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}h=!0}const I=new o.Deferred;return I.resolve(h),I.promise}cancelRecognition(P,w,S,h,m){const I=new v.PropertyCollection;if(I.setProperty(_.CancellationErrorCodePropertyName,v.CancellationErrorCode[h]),this.privIntentRecognizer.canceled){const M=new v.IntentRecognitionCanceledEventArgs(S,m,h,void 0,void 0,P);try{this.privIntentRecognizer.canceled(this.privIntentRecognizer,M)}catch{}}if(this.privSuccessCallback){const M=new v.IntentRecognitionResult(void 0,w,v.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,m,void 0,I);try{this.privSuccessCallback(M),this.privSuccessCallback=void 0}catch{}}}}},5730:(ne,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.QueryParameterNames=void 0;class y{}p.QueryParameterNames=y,y.BotId="botid",y.CustomSpeechDeploymentId="cid",y.CustomVoiceDeploymentId="deploymentId",y.EnableAudioLogging="storeAudio",y.EnableLanguageId="lidEnabled",y.EnableWordLevelTimestamps="wordLevelTimestamps",y.EndSilenceTimeoutMs="endSilenceTimeoutMs",y.SegmentationSilenceTimeoutMs="segmentationSilenceTimeoutMs",y.Format="format",y.InitialSilenceTimeoutMs="initialSilenceTimeoutMs",y.Language="language",y.Profanity="profanity",y.RequestBotStatusMessages="enableBotMessageStatus",y.StableIntermediateThreshold="stableIntermediateThreshold",y.StableTranslation="stableTranslation",y.TestHooks="testhooks",y.Postprocessing="postprocessing",y.CtsMeetingId="meetingId",y.CtsDeviceId="deviceId",y.CtsIsParticipant="isParticipant",y.EnableAvatar="enableTalkingAvatar"},52:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.RecognitionEndedEvent=p.RecognitionCompletionStatus=p.RecognitionStartedEvent=p.ConnectingToServiceEvent=p.ListeningStartedEvent=p.RecognitionTriggeredEvent=p.SpeechRecognitionEvent=void 0;const o=y(847);class v extends o.PlatformEvent{constructor(m,I,M,T=o.EventType.Info){super(m,T),this.privRequestId=I,this.privSessionId=M}get requestId(){return this.privRequestId}get sessionId(){return this.privSessionId}}var w,h;p.SpeechRecognitionEvent=v,p.RecognitionTriggeredEvent=class _ extends v{constructor(m,I,M,T){super("RecognitionTriggeredEvent",m,I),this.privAudioSourceId=M,this.privAudioNodeId=T}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}},p.ListeningStartedEvent=class A extends v{constructor(m,I,M,T){super("ListeningStartedEvent",m,I),this.privAudioSourceId=M,this.privAudioNodeId=T}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}},p.ConnectingToServiceEvent=class b extends v{constructor(m,I,M){super("ConnectingToServiceEvent",m,M),this.privAuthFetchEventid=I}get authFetchEventid(){return this.privAuthFetchEventid}},p.RecognitionStartedEvent=class P extends v{constructor(m,I,M,T,N){super("RecognitionStartedEvent",m,N),this.privAudioSourceId=I,this.privAudioNodeId=M,this.privAuthFetchEventId=T}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}get authFetchEventId(){return this.privAuthFetchEventId}},(h=w=p.RecognitionCompletionStatus||(p.RecognitionCompletionStatus={}))[h.Success=0]="Success",h[h.AudioSourceError=1]="AudioSourceError",h[h.AudioSourceTimeout=2]="AudioSourceTimeout",h[h.AuthTokenFetchError=3]="AuthTokenFetchError",h[h.AuthTokenFetchTimeout=4]="AuthTokenFetchTimeout",h[h.UnAuthorized=5]="UnAuthorized",h[h.ConnectTimeout=6]="ConnectTimeout",h[h.ConnectError=7]="ConnectError",h[h.ClientRecognitionActivityTimeout=8]="ClientRecognitionActivityTimeout",h[h.UnknownError=9]="UnknownError",p.RecognitionEndedEvent=class S extends v{constructor(m,I,M,T,N,L,z,V){super("RecognitionEndedEvent",m,N,z===w.Success?o.EventType.Info:o.EventType.Error),this.privAudioSourceId=I,this.privAudioNodeId=M,this.privAuthFetchEventId=T,this.privStatus=z,this.privError=V,this.privServiceTag=L}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}get authFetchEventId(){return this.privAuthFetchEventId}get serviceTag(){return this.privServiceTag}get status(){return this.privStatus}get error(){return this.privError}}},1184:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.RecognizerConfig=p.SpeechResultFormat=p.RecognitionMode=void 0;const o=y(8323),v=y(9464);var _,P;(P=_=p.RecognitionMode||(p.RecognitionMode={}))[P.Interactive=0]="Interactive",P[P.Conversation=1]="Conversation",P[P.Dictation=2]="Dictation",function(P){P[P.Simple=0]="Simple",P[P.Detailed=1]="Detailed"}(p.SpeechResultFormat||(p.SpeechResultFormat={})),p.RecognizerConfig=class b{constructor(w,S){this.privSpeechServiceConfig=w||new v.SpeechServiceConfig(new v.Context(null)),this.privParameters=S,this.privMaxRetryCount=parseInt(S.getProperty("SPEECH-Error-MaxRetryCount","4"),10),this.privLanguageIdMode=S.getProperty(o.PropertyId.SpeechServiceConnection_LanguageIdMode,void 0),this.privEnableSpeakerId=!1}get parameters(){return this.privParameters}get recognitionMode(){return this.privRecognitionMode}set recognitionMode(w){this.privRecognitionMode=w,this.privRecognitionActivityTimeout=w===_.Interactive?8e3:25e3,this.privSpeechServiceConfig.Recognition=_[w]}get SpeechServiceConfig(){return this.privSpeechServiceConfig}get recognitionActivityTimeout(){return this.privRecognitionActivityTimeout}get isContinuousRecognition(){return this.privRecognitionMode!==_.Interactive}get languageIdMode(){return this.privLanguageIdMode}get autoDetectSourceLanguages(){return this.parameters.getProperty(o.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,void 0)}get recognitionEndpointVersion(){return this.parameters.getProperty(o.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,void 0)}get sourceLanguageModels(){const w=[];let S=!1;if(void 0!==this.autoDetectSourceLanguages)for(const h of this.autoDetectSourceLanguages.split(",")){const m=h+o.PropertyId.SpeechServiceConnection_EndpointId.toString(),I=this.parameters.getProperty(m,void 0);void 0!==I?(w.push({language:h,endpoint:I}),S=!0):w.push({language:h,endpoint:""})}return S?w:void 0}get maxRetryCount(){return this.privMaxRetryCount}get isSpeakerDiarizationEnabled(){return this.privEnableSpeakerId}set isSpeakerDiarizationEnabled(w){this.privEnableSpeakerId=w}}},7957:function(ne,p,y){"use strict";var o=this&&this.__awaiter||function(P,w,S,h){return new(S||(S=Promise))(function(I,M){function T(z){try{L(h.next(z))}catch(V){M(V)}}function N(z){try{L(h.throw(z))}catch(V){M(V)}}function L(z){z.done?I(z.value):function m(I){return I instanceof S?I:new S(function(M){M(I)})}(z.value).then(T,N)}L((h=h.apply(P,w||[])).next())})};Object.defineProperty(p,"__esModule",{value:!0}),p.RequestSession=void 0;const v=y(847),_=y(52),A=y(6204);p.RequestSession=class b{constructor(w){this.privIsDisposed=!1,this.privDetachables=new Array,this.privIsAudioNodeDetached=!1,this.privIsRecognizing=!1,this.privIsSpeechEnded=!1,this.privTurnStartAudioOffset=0,this.privLastRecoOffset=0,this.privHypothesisReceived=!1,this.privBytesSent=0,this.privRecognitionBytesSent=0,this.privRecogNumber=0,this.privInTurn=!1,this.privConnectionAttempts=0,this.privAudioSourceId=w,this.privRequestId=v.createNoDashGuid(),this.privAudioNodeId=v.createNoDashGuid(),this.privTurnDeferral=new v.Deferred,this.privTurnDeferral.resolve()}get sessionId(){return this.privSessionId}get requestId(){return this.privRequestId}get audioNodeId(){return this.privAudioNodeId}get turnCompletionPromise(){return this.privTurnDeferral.promise}get isSpeechEnded(){return this.privIsSpeechEnded}get isRecognizing(){return this.privIsRecognizing}get currentTurnAudioOffset(){return this.privTurnStartAudioOffset}get recogNumber(){return this.privRecogNumber}get numConnectionAttempts(){return this.privConnectionAttempts}get bytesSent(){return this.privBytesSent}get recognitionBytesSent(){return this.privRecognitionBytesSent}listenForServiceTelemetry(w){this.privServiceTelemetryListener&&this.privDetachables.push(w.attachListener(this.privServiceTelemetryListener))}startNewRecognition(){this.privRecognitionBytesSent=0,this.privIsSpeechEnded=!1,this.privIsRecognizing=!0,this.privTurnStartAudioOffset=0,this.privLastRecoOffset=0,this.privRecogNumber++,this.privServiceTelemetryListener=new A.ServiceTelemetryListener(this.privRequestId,this.privAudioSourceId,this.privAudioNodeId),this.onEvent(new _.RecognitionTriggeredEvent(this.requestId,this.privSessionId,this.privAudioSourceId,this.privAudioNodeId))}onAudioSourceAttachCompleted(w,S){return o(this,void 0,void 0,function*(){this.privAudioNode=w,this.privIsAudioNodeDetached=!1,S?yield this.onComplete():this.onEvent(new _.ListeningStartedEvent(this.privRequestId,this.privSessionId,this.privAudioSourceId,this.privAudioNodeId))})}onPreConnectionStart(w,S){this.privAuthFetchEventId=w,this.privSessionId=S,this.onEvent(new _.ConnectingToServiceEvent(this.privRequestId,this.privAuthFetchEventId,this.privSessionId))}onAuthCompleted(w){return o(this,void 0,void 0,function*(){w&&(yield this.onComplete())})}onConnectionEstablishCompleted(w,S){return o(this,void 0,void 0,function*(){if(200===w)return this.onEvent(new _.RecognitionStartedEvent(this.requestId,this.privAudioSourceId,this.privAudioNodeId,this.privAuthFetchEventId,this.privSessionId)),this.privAudioNode&&this.privAudioNode.replay(),this.privTurnStartAudioOffset=this.privLastRecoOffset,void(this.privBytesSent=0);403===w&&(yield this.onComplete())})}onServiceTurnEndResponse(w){return o(this,void 0,void 0,function*(){this.privTurnDeferral.resolve(),!w||this.isSpeechEnded?(yield this.onComplete(),this.privInTurn=!1):(this.privTurnStartAudioOffset=this.privLastRecoOffset,this.privAudioNode.replay())})}onSpeechContext(){this.privRequestId=v.createNoDashGuid()}onServiceTurnStartResponse(){this.privTurnDeferral&&this.privInTurn&&(this.privTurnDeferral.reject("Another turn started before current completed."),this.privTurnDeferral.promise.then().catch(()=>{})),this.privInTurn=!0,this.privTurnDeferral=new v.Deferred}onHypothesis(w){this.privHypothesisReceived||(this.privHypothesisReceived=!0,this.privServiceTelemetryListener.hypothesisReceived(this.privAudioNode.findTimeAtOffset(w)))}onPhraseRecognized(w){this.privServiceTelemetryListener.phraseReceived(this.privAudioNode.findTimeAtOffset(w)),this.onServiceRecognized(w)}onServiceRecognized(w){this.privLastRecoOffset=w,this.privHypothesisReceived=!1,this.privAudioNode.shrinkBuffers(w),this.privConnectionAttempts=0}onAudioSent(w){this.privBytesSent+=w,this.privRecognitionBytesSent+=w}onRetryConnection(){this.privConnectionAttempts++}dispose(){return o(this,void 0,void 0,function*(){if(!this.privIsDisposed){this.privIsDisposed=!0;for(const w of this.privDetachables)yield w.detach();this.privServiceTelemetryListener&&this.privServiceTelemetryListener.dispose(),this.privIsRecognizing=!1}})}getTelemetry(){return this.privServiceTelemetryListener.hasTelemetry?this.privServiceTelemetryListener.getTelemetry():null}onStopRecognizing(){return o(this,void 0,void 0,function*(){yield this.onComplete()})}onSpeechEnded(){this.privIsSpeechEnded=!0}onEvent(w){this.privServiceTelemetryListener&&this.privServiceTelemetryListener.onEvent(w),v.Events.instance.onEvent(w)}onComplete(){return o(this,void 0,void 0,function*(){this.privIsRecognizing&&(this.privIsRecognizing=!1,yield this.detachAudioNode())})}detachAudioNode(){return o(this,void 0,void 0,function*(){this.privIsAudioNodeDetached||(this.privIsAudioNodeDetached=!0,this.privAudioNode&&(yield this.privAudioNode.detach()))})}}},3242:(ne,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.MessageDataStreamType=p.ActivityPayloadResponse=void 0;class y{constructor(_){this.privActivityResponse=JSON.parse(_)}static fromJSON(_){return new y(_)}get conversationId(){return this.privActivityResponse.conversationId}get messageDataStreamType(){return this.privActivityResponse.messageDataStreamType}get messagePayload(){return this.privActivityResponse.messagePayload}get version(){return this.privActivityResponse.version}}var v;p.ActivityPayloadResponse=y,(v=p.MessageDataStreamType||(p.MessageDataStreamType={}))[v.None=0]="None",v[v.TextToSpeechAudio=1]="TextToSpeechAudio"},8896:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.DetailedSpeechPhrase=void 0;const o=y(9464);class v{constructor(A){this.privDetailedSpeechPhrase=JSON.parse(A),this.privDetailedSpeechPhrase.RecognitionStatus=o.RecognitionStatus[this.privDetailedSpeechPhrase.RecognitionStatus]}static fromJSON(A){return new v(A)}getJsonWithCorrectedOffsets(A){if(this.privDetailedSpeechPhrase.NBest){let b;for(const P of this.privDetailedSpeechPhrase.NBest)if(P.Words&&P.Words[0]){b=P.Words[0].Offset;break}if(b&&b<A){const P=A-b;for(const w of this.privDetailedSpeechPhrase.NBest){if(w.Words)for(const S of w.Words)S.Offset+=P;if(w.DisplayWords)for(const S of w.DisplayWords)S.Offset+=P}}}return JSON.stringify(this.privDetailedSpeechPhrase)}get RecognitionStatus(){return this.privDetailedSpeechPhrase.RecognitionStatus}get NBest(){return this.privDetailedSpeechPhrase.NBest}get Duration(){return this.privDetailedSpeechPhrase.Duration}get Offset(){return this.privDetailedSpeechPhrase.Offset}get Language(){return void 0===this.privDetailedSpeechPhrase.PrimaryLanguage?void 0:this.privDetailedSpeechPhrase.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return void 0===this.privDetailedSpeechPhrase.PrimaryLanguage?void 0:this.privDetailedSpeechPhrase.PrimaryLanguage.Confidence}get Text(){return this.privDetailedSpeechPhrase.NBest&&this.privDetailedSpeechPhrase.NBest[0]?this.privDetailedSpeechPhrase.NBest[0].Display||this.privDetailedSpeechPhrase.NBest[0].DisplayText:this.privDetailedSpeechPhrase.DisplayText}get SpeakerId(){return this.privDetailedSpeechPhrase.SpeakerId}}p.DetailedSpeechPhrase=v},3325:(ne,p)=>{"use strict";var v;Object.defineProperty(p,"__esModule",{value:!0}),p.RecognitionStatus=p.SynthesisStatus=void 0,(v=p.SynthesisStatus||(p.SynthesisStatus={}))[v.Success=0]="Success",v[v.SynthesisEnd=1]="SynthesisEnd",v[v.Error=2]="Error",function(v){v[v.Success=0]="Success",v[v.NoMatch=1]="NoMatch",v[v.InitialSilenceTimeout=2]="InitialSilenceTimeout",v[v.BabbleTimeout=3]="BabbleTimeout",v[v.Error=4]="Error",v[v.EndOfDictation=5]="EndOfDictation",v[v.TooManyRequests=6]="TooManyRequests",v[v.BadRequest=7]="BadRequest",v[v.Forbidden=8]="Forbidden"}(p.RecognitionStatus||(p.RecognitionStatus={}))},5223:(ne,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.IntentResponse=void 0;class y{constructor(v){this.privIntentResponse=""===v?{}:JSON.parse(v)}static fromJSON(v){return new y(v)}get query(){return this.privIntentResponse.query}get topScoringIntent(){return this.privIntentResponse.topScoringIntent}get entities(){return this.privIntentResponse.entities}}p.IntentResponse=y},8668:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.SimpleSpeechPhrase=void 0;const o=y(9464);class v{constructor(A){this.privSimpleSpeechPhrase=JSON.parse(A),this.privSimpleSpeechPhrase.RecognitionStatus=o.RecognitionStatus[this.privSimpleSpeechPhrase.RecognitionStatus]}static fromJSON(A){return new v(A)}get RecognitionStatus(){return this.privSimpleSpeechPhrase.RecognitionStatus}get DisplayText(){return this.privSimpleSpeechPhrase.DisplayText}get Offset(){return this.privSimpleSpeechPhrase.Offset}get Duration(){return this.privSimpleSpeechPhrase.Duration}get Language(){return void 0===this.privSimpleSpeechPhrase.PrimaryLanguage?void 0:this.privSimpleSpeechPhrase.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return void 0===this.privSimpleSpeechPhrase.PrimaryLanguage?void 0:this.privSimpleSpeechPhrase.PrimaryLanguage.Confidence}get SpeakerId(){return this.privSimpleSpeechPhrase.SpeakerId}}p.SimpleSpeechPhrase=v},9297:(ne,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0})},2131:(ne,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.SpeechDetected=void 0;class y{constructor(v){this.privSpeechStartDetected=JSON.parse(v)}static fromJSON(v){return new y(v)}get Offset(){return this.privSpeechStartDetected.Offset}}p.SpeechDetected=y},3660:(ne,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.SpeechHypothesis=void 0;class y{constructor(v){this.privSpeechHypothesis=JSON.parse(v)}static fromJSON(v){return new y(v)}get Text(){return this.privSpeechHypothesis.Text}get Offset(){return this.privSpeechHypothesis.Offset}get Duration(){return this.privSpeechHypothesis.Duration}get Language(){return void 0===this.privSpeechHypothesis.PrimaryLanguage?void 0:this.privSpeechHypothesis.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return void 0===this.privSpeechHypothesis.PrimaryLanguage?void 0:this.privSpeechHypothesis.PrimaryLanguage.Confidence}get SpeakerId(){return this.privSpeechHypothesis.SpeakerId}}p.SpeechHypothesis=y},9208:(ne,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.SpeechKeyword=void 0;class y{constructor(v){this.privSpeechKeyword=JSON.parse(v)}static fromJSON(v){return new y(v)}get Status(){return this.privSpeechKeyword.Status}get Text(){return this.privSpeechKeyword.Text}get Offset(){return this.privSpeechKeyword.Offset}get Duration(){return this.privSpeechKeyword.Duration}}p.SpeechKeyword=y},2305:(ne,p)=>{"use strict";var v;Object.defineProperty(p,"__esModule",{value:!0}),p.SynthesisAudioMetadata=p.MetadataType=void 0,(v=p.MetadataType||(p.MetadataType={})).WordBoundary="WordBoundary",v.Bookmark="Bookmark",v.Viseme="Viseme",v.SentenceBoundary="SentenceBoundary",v.SessionEnd="SessionEnd",v.AvatarSignal="TalkingAvatarSignal";class o{constructor(_){this.privSynthesisAudioMetadata=JSON.parse(_)}static fromJSON(_){return new o(_)}get Metadata(){return this.privSynthesisAudioMetadata.Metadata}}p.SynthesisAudioMetadata=o},1125:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.TranslationHypothesis=void 0;const o=y(5916),v=y(4609);class _{constructor(b){this.privTranslationHypothesis=b,this.privTranslationHypothesis.Translation.TranslationStatus=v.TranslationStatus[this.privTranslationHypothesis.Translation.TranslationStatus]}static fromJSON(b){return new _(JSON.parse(b))}static fromTranslationResponse(b){o.Contracts.throwIfNullOrUndefined(b,"translationHypothesis");const P=b.SpeechHypothesis;return b.SpeechHypothesis=void 0,P.Translation=b,new _(P)}get Duration(){return this.privTranslationHypothesis.Duration}get Offset(){return this.privTranslationHypothesis.Offset}get Text(){return this.privTranslationHypothesis.Text}get Translation(){return this.privTranslationHypothesis.Translation}get Language(){var b;return null===(b=this.privTranslationHypothesis.PrimaryLanguage)||void 0===b?void 0:b.Language}}p.TranslationHypothesis=_},240:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.TranslationPhrase=void 0;const o=y(5916),v=y(9464),_=y(4609);class A{constructor(P){this.privTranslationPhrase=P,this.privTranslationPhrase.RecognitionStatus=v.RecognitionStatus[this.privTranslationPhrase.RecognitionStatus],void 0!==this.privTranslationPhrase.Translation&&(this.privTranslationPhrase.Translation.TranslationStatus=_.TranslationStatus[this.privTranslationPhrase.Translation.TranslationStatus])}static fromJSON(P){return new A(JSON.parse(P))}static fromTranslationResponse(P){o.Contracts.throwIfNullOrUndefined(P,"translationResponse");const w=P.SpeechPhrase;return P.SpeechPhrase=void 0,w.Translation=P,w.Text=w.DisplayText,new A(w)}get RecognitionStatus(){return this.privTranslationPhrase.RecognitionStatus}get Offset(){return this.privTranslationPhrase.Offset}get Duration(){return this.privTranslationPhrase.Duration}get Text(){return this.privTranslationPhrase.Text}get Language(){var P;return null===(P=this.privTranslationPhrase.PrimaryLanguage)||void 0===P?void 0:P.Language}get Confidence(){var P;return null===(P=this.privTranslationPhrase.PrimaryLanguage)||void 0===P?void 0:P.Confidence}get Translation(){return this.privTranslationPhrase.Translation}}p.TranslationPhrase=A},2472:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.TranslationSynthesisEnd=void 0;const o=y(9464);class v{constructor(A){this.privSynthesisEnd=JSON.parse(A),this.privSynthesisEnd.SynthesisStatus&&(this.privSynthesisEnd.SynthesisStatus=o.SynthesisStatus[this.privSynthesisEnd.SynthesisStatus]),this.privSynthesisEnd.Status&&(this.privSynthesisEnd.SynthesisStatus=o.SynthesisStatus[this.privSynthesisEnd.Status])}static fromJSON(A){return new v(A)}get SynthesisStatus(){return this.privSynthesisEnd.SynthesisStatus}get FailureReason(){return this.privSynthesisEnd.FailureReason}}p.TranslationSynthesisEnd=v},1058:(ne,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.TurnStatusResponsePayload=void 0;class y{constructor(v){this.privMessageStatusResponse=JSON.parse(v)}static fromJSON(v){return new y(v)}get interactionId(){return this.privMessageStatusResponse.interactionId}get conversationId(){return this.privMessageStatusResponse.conversationId}get statusCode(){switch(this.privMessageStatusResponse.statusCode){case"Success":return 200;case"Failed":return 400;case"TimedOut":return 429;default:return this.privMessageStatusResponse.statusCode}}}p.TurnStatusResponsePayload=y},4838:function(ne,p,y){"use strict";var o=this&&this.__awaiter||function(S,h,m,I){return new(m||(m=Promise))(function(T,N){function L(q){try{V(I.next(q))}catch(X){N(X)}}function z(q){try{V(I.throw(q))}catch(X){N(X)}}function V(q){q.done?T(q.value):function M(T){return T instanceof m?T:new m(function(N){N(T)})}(q.value).then(L,z)}V((I=I.apply(S,h||[])).next())})};Object.defineProperty(p,"__esModule",{value:!0}),p.ServiceRecognizerBase=void 0;const v=y(4853),_=y(847),A=y(8323),b=y(9464),P=y(5328);class w{constructor(h,m,I,M,T){if(this.privConnectionConfigurationPromise=void 0,this.privConnectionPromise=void 0,this.privSetTimeout=setTimeout,this.privIsLiveAudio=!1,this.privAverageBytesPerMs=0,this.privEnableSpeakerId=!1,this.privExpectContentAssessmentResponse=!1,this.recognizeOverride=void 0,this.recognizeSpeaker=void 0,this.disconnectOverride=void 0,this.receiveMessageOverride=void 0,this.sendPrePayloadJSONOverride=void 0,this.postConnectImplOverride=void 0,this.configConnectionOverride=void 0,this.handleSpeechPhraseMessage=void 0,this.handleSpeechHypothesisMessage=void 0,!h)throw new _.ArgumentNullError("authentication");if(!m)throw new _.ArgumentNullError("connectionFactory");if(!I)throw new _.ArgumentNullError("audioSource");if(!M)throw new _.ArgumentNullError("recognizerConfig");this.privEnableSpeakerId=M.isSpeakerDiarizationEnabled,this.privMustReportEndOfStream=!1,this.privAuthentication=h,this.privConnectionFactory=m,this.privAudioSource=I,this.privRecognizerConfig=M,this.privIsDisposed=!1,this.privRecognizer=T,this.privRequestSession=new b.RequestSession(this.privAudioSource.id()),this.privConnectionEvents=new _.EventSource,this.privServiceEvents=new _.EventSource,this.privDynamicGrammar=new b.DynamicGrammarBuilder,this.privSpeechContext=new b.SpeechContext(this.privDynamicGrammar),this.privAgentConfig=new b.AgentConfig,"on"===this.privRecognizerConfig.parameters.getProperty(A.PropertyId.WebWorkerLoadType,"on").toLowerCase()&&typeof Blob<"u"&&typeof Worker<"u"?this.privSetTimeout=_.Timeout.setTimeout:typeof window<"u"&&(this.privSetTimeout=window.setTimeout.bind(window)),this.connectionEvents.attach(L=>{"ConnectionClosedEvent"===L.name&&(1003===L.statusCode||1007===L.statusCode||1002===L.statusCode||4e3===L.statusCode||this.privRequestSession.numConnectionAttempts>this.privRecognizerConfig.maxRetryCount)&&this.cancelRecognitionLocal(A.CancellationReason.Error,1007===L.statusCode?A.CancellationErrorCode.BadRequestParameters:A.CancellationErrorCode.ConnectionFailure,`${L.reason} websocket error code: ${L.statusCode}`)}),this.privEnableSpeakerId&&(this.privDiarizationSessionId=_.createNoDashGuid()),this.setLanguageIdJson(),this.setOutputDetailLevelJson()}setTranslationJson(){const h=this.privRecognizerConfig.parameters.getProperty(A.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0);if(void 0!==h){const m=h.split(","),I=this.privRecognizerConfig.parameters.getProperty(A.PropertyId.SpeechServiceConnection_TranslationVoice,void 0);if(this.privSpeechContext.setSection("translation",{onSuccess:{action:void 0!==I?"Synthesize":"None"},output:{interimResults:{mode:"Always"}},targetLanguages:m}),void 0!==I){const T={};for(const N of m)T[N]=I;this.privSpeechContext.setSection("synthesis",{defaultVoices:T})}}}setSpeechSegmentationTimeoutJson(){const h=this.privRecognizerConfig.parameters.getProperty(A.PropertyId.Speech_SegmentationSilenceTimeoutMs,void 0);if(void 0!==h){const m=this.recognitionMode===b.RecognitionMode.Conversation?"CONVERSATION":this.recognitionMode===b.RecognitionMode.Dictation?"DICTATION":"INTERACTIVE",I=parseInt(h,10),M=this.privSpeechContext.getSection("phraseDetection");M.mode=m,M[m]={segmentation:{mode:"Custom",segmentationSilenceTimeoutMs:I}},this.privSpeechContext.setSection("phraseDetection",M)}}setLanguageIdJson(){const h=this.privSpeechContext.getSection("phraseDetection");if(void 0!==this.privRecognizerConfig.autoDetectSourceLanguages){const I=this.privRecognizerConfig.autoDetectSourceLanguages.split(",");let M;M="Continuous"===this.privRecognizerConfig.languageIdMode?"DetectContinuous":"DetectAtAudioStart",this.privSpeechContext.setSection("languageId",{Priority:"PrioritizeLatency",languages:I,mode:M,onSuccess:{action:"Recognize"},onUnknown:{action:"None"}}),this.privSpeechContext.setSection("phraseOutput",{interimResults:{resultType:"Auto"},phraseResults:{resultType:"Always"}});const T=this.privRecognizerConfig.sourceLanguageModels;void 0!==T&&(h.customModels=T,h.onInterim={action:"None"},h.onSuccess={action:"None"})}void 0!==this.privRecognizerConfig.parameters.getProperty(A.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)&&(h.onInterim={action:"Translate"},h.onSuccess={action:"Translate"},this.privSpeechContext.setSection("phraseOutput",{interimResults:{resultType:"None"},phraseResults:{resultType:"None"}})),this.privSpeechContext.setSection("phraseDetection",h)}setOutputDetailLevelJson(){this.privEnableSpeakerId&&("true"===this.privRecognizerConfig.parameters.getProperty(A.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"false").toLowerCase()?this.privSpeechContext.setWordLevelTimings():this.privRecognizerConfig.parameters.getProperty(b.OutputFormatPropertyName,A.OutputFormat[A.OutputFormat.Simple]).toLowerCase()===A.OutputFormat[A.OutputFormat.Detailed].toLocaleLowerCase()&&this.privSpeechContext.setDetailedOutputFormat())}get isSpeakerDiarizationEnabled(){return this.privEnableSpeakerId}get audioSource(){return this.privAudioSource}get speechContext(){return this.privSpeechContext}get dynamicGrammar(){return this.privDynamicGrammar}get agentConfig(){return this.privAgentConfig}set conversationTranslatorToken(h){this.privRecognizerConfig.parameters.setProperty(A.PropertyId.ConversationTranslator_Token,h)}set voiceProfileType(h){this.privRecognizerConfig.parameters.setProperty(A.PropertyId.SpeechServiceConnection_SpeakerIdMode,h)}set authentication(h){this.privAuthentication=h}isDisposed(){return this.privIsDisposed}dispose(h){return o(this,void 0,void 0,function*(){if(this.privIsDisposed=!0,void 0!==this.privConnectionConfigurationPromise)try{yield(yield this.privConnectionConfigurationPromise).dispose(h)}catch{return}})}get connectionEvents(){return this.privConnectionEvents}get serviceEvents(){return this.privServiceEvents}get recognitionMode(){return this.privRecognizerConfig.recognitionMode}recognize(h,m,I){return o(this,void 0,void 0,function*(){if(void 0!==this.recognizeOverride)return void(yield this.recognizeOverride(h,m,I));this.privConnectionConfigurationPromise=void 0,this.privRecognizerConfig.recognitionMode=h,this.setSpeechSegmentationTimeoutJson(),this.setTranslationJson(),this.privSuccessCallback=m,this.privErrorCallback=I,this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privAudioSource.events);const M=this.connectImpl();let T;try{const z=yield this.audioSource.attach(this.privRequestSession.audioNodeId),V=yield this.audioSource.format,q=yield this.audioSource.deviceInfo;this.privIsLiveAudio=q.type&&q.type===b.type.Microphones,T=new v.ReplayableAudioNode(z,V.avgBytesPerSec),yield this.privRequestSession.onAudioSourceAttachCompleted(T,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:q}}catch(z){throw yield this.privRequestSession.onStopRecognizing(),z}try{yield M}catch(z){return void(yield this.cancelRecognitionLocal(A.CancellationReason.Error,A.CancellationErrorCode.ConnectionFailure,z))}const N=new A.SessionEventArgs(this.privRequestSession.sessionId);this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,N),this.receiveMessage(),this.sendAudio(T).catch(z=>o(this,void 0,void 0,function*(){yield this.cancelRecognitionLocal(A.CancellationReason.Error,A.CancellationErrorCode.RuntimeError,z)}))})}stopRecognizing(){return o(this,void 0,void 0,function*(){if(this.privRequestSession.isRecognizing)try{yield this.audioSource.turnOff(),yield this.sendFinalAudio(),yield this.privRequestSession.onStopRecognizing(),yield this.privRequestSession.turnCompletionPromise}finally{yield this.privRequestSession.dispose()}})}connect(){return o(this,void 0,void 0,function*(){return yield this.connectImpl(),Promise.resolve()})}connectAsync(h,m){this.connectImpl().then(()=>{try{h&&h()}catch(I){m&&m(I)}},I=>{try{m&&m(I)}catch{}})}disconnect(){return o(this,void 0,void 0,function*(){if(yield this.cancelRecognitionLocal(A.CancellationReason.Error,A.CancellationErrorCode.NoError,"Disconnecting"),void 0!==this.disconnectOverride&&(yield this.disconnectOverride()),void 0!==this.privConnectionPromise)try{yield(yield this.privConnectionPromise).dispose()}catch{}this.privConnectionPromise=void 0})}sendMessage(h){}sendNetworkMessage(h,m){return o(this,void 0,void 0,function*(){const I="string"==typeof m?_.MessageType.Text:_.MessageType.Binary,M="string"==typeof m?"application/json":"";return(yield this.fetchConnection()).send(new P.SpeechConnectionMessage(I,h,this.privRequestSession.requestId,M,m))})}set activityTemplate(h){this.privActivityTemplate=h}get activityTemplate(){return this.privActivityTemplate}set expectContentAssessmentResponse(h){this.privExpectContentAssessmentResponse=h}sendTelemetryData(){return o(this,void 0,void 0,function*(){const h=this.privRequestSession.getTelemetry();if(!0===w.telemetryDataEnabled&&!this.privIsDisposed&&null!==h){if(w.telemetryData)try{w.telemetryData(h)}catch{}yield(yield this.fetchConnection()).send(new P.SpeechConnectionMessage(_.MessageType.Text,"telemetry",this.privRequestSession.requestId,"application/json",h))}})}cancelRecognitionLocal(h,m,I){return o(this,void 0,void 0,function*(){this.privRequestSession.isRecognizing&&(yield this.privRequestSession.onStopRecognizing(),this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,h,m,I))})}receiveMessage(){return o(this,void 0,void 0,function*(){try{if(this.privIsDisposed)return;let h=yield this.fetchConnection();const m=yield h.read();if(void 0!==this.receiveMessageOverride)return this.receiveMessageOverride();if(!m)return this.receiveMessage();this.privServiceHasSentMessage=!0;const I=P.SpeechConnectionMessage.fromConnectionMessage(m);if(I.requestId.toLowerCase()===this.privRequestSession.requestId.toLowerCase())switch(I.path.toLowerCase()){case"turn.start":this.privMustReportEndOfStream=!0,this.privRequestSession.onServiceTurnStartResponse();break;case"speech.startdetected":const M=b.SpeechDetected.fromJSON(I.textBody),T=new A.RecognitionEventArgs(M.Offset,this.privRequestSession.sessionId);this.privRecognizer.speechStartDetected&&this.privRecognizer.speechStartDetected(this.privRecognizer,T);break;case"speech.enddetected":let N;N=I.textBody.length>0?I.textBody:"{ Offset: 0 }";const L=b.SpeechDetected.fromJSON(N),z=new A.RecognitionEventArgs(L.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.sessionId);this.privRecognizer.speechEndDetected&&this.privRecognizer.speechEndDetected(this.privRecognizer,z);break;case"turn.end":yield this.sendTelemetryData(),this.privRequestSession.isSpeechEnded&&this.privMustReportEndOfStream&&(this.privMustReportEndOfStream=!1,yield this.cancelRecognitionLocal(A.CancellationReason.EndOfStream,A.CancellationErrorCode.NoError,void 0));const V=new A.SessionEventArgs(this.privRequestSession.sessionId);if(yield this.privRequestSession.onServiceTurnEndResponse(this.privRecognizerConfig.isContinuousRecognition),!this.privRecognizerConfig.isContinuousRecognition||this.privRequestSession.isSpeechEnded||!this.privRequestSession.isRecognizing)return void(this.privRecognizer.sessionStopped&&this.privRecognizer.sessionStopped(this.privRecognizer,V));h=yield this.fetchConnection(),yield this.sendPrePayloadJSON(h);break;default:(yield this.processTypeSpecificMessages(I))||this.privServiceEvents&&this.serviceEvents.onEvent(new _.ServiceEvent(I.path.toLowerCase(),I.textBody))}return this.receiveMessage()}catch{return null}})}updateSpeakerDiarizationAudioOffset(){this.privSpeechContext.setSpeakerDiarizationAudioOffsetMs(this.privRequestSession.recognitionBytesSent/this.privAverageBytesPerMs)}sendSpeechContext(h,m){this.privEnableSpeakerId&&this.updateSpeakerDiarizationAudioOffset();const I=this.speechContext.toJSON();if(m&&this.privRequestSession.onSpeechContext(),I)return h.send(new P.SpeechConnectionMessage(_.MessageType.Text,"speech.context",this.privRequestSession.requestId,"application/json",I))}noOp(){}sendPrePayloadJSON(h,m=!0){return o(this,void 0,void 0,function*(){if(void 0!==this.sendPrePayloadJSONOverride)return this.sendPrePayloadJSONOverride(h);yield this.sendSpeechContext(h,m),yield this.sendWaveHeader(h)})}sendWaveHeader(h){return o(this,void 0,void 0,function*(){const m=yield this.audioSource.format;return h.send(new P.SpeechConnectionMessage(_.MessageType.Binary,"audio",this.privRequestSession.requestId,"audio/x-wav",m.header))})}connectImpl(){return void 0!==this.privConnectionPromise?this.privConnectionPromise.then(h=>h.state()===_.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionPromise=void 0,this.privServiceHasSentMessage=!1,this.connectImpl()):this.privConnectionPromise,()=>(this.privConnectionId=null,this.privConnectionPromise=void 0,this.privServiceHasSentMessage=!1,this.connectImpl())):(this.privConnectionPromise=this.retryableConnect(),this.privConnectionPromise.catch(()=>{}),void 0!==this.postConnectImplOverride?this.postConnectImplOverride(this.privConnectionPromise):this.privConnectionPromise)}sendSpeechServiceConfig(h,m,I){if(m.onSpeechContext(),!0!==w.telemetryDataEnabled){const T={context:{system:JSON.parse(I).context.system}};I=JSON.stringify(T)}if("true"===this.privRecognizerConfig.parameters.getProperty("f0f5debc-f8c9-4892-ac4b-90a7ab359fd2","false").toLowerCase()){const M=JSON.parse(I);M.context.DisableReferenceChannel="True",M.context.MicSpec="1_0_0",I=JSON.stringify(M)}if(I)return h.send(new P.SpeechConnectionMessage(_.MessageType.Text,"speech.config",m.requestId,"application/json",I))}fetchConnection(){return o(this,void 0,void 0,function*(){return void 0!==this.privConnectionConfigurationPromise?this.privConnectionConfigurationPromise.then(h=>h.state()===_.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.privServiceHasSentMessage=!1,this.fetchConnection()):this.privConnectionConfigurationPromise,()=>(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.privServiceHasSentMessage=!1,this.fetchConnection())):(this.privConnectionConfigurationPromise=this.configureConnection(),yield this.privConnectionConfigurationPromise)})}sendAudio(h){return o(this,void 0,void 0,function*(){const m=yield this.audioSource.format;this.privAverageBytesPerMs=m.avgBytesPerSec/1e3;let I=Date.now();const M=this.privRecognizerConfig.parameters.getProperty("SPEECH-TransmitLengthBeforThrottleMs","5000"),T=m.avgBytesPerSec/1e3*parseInt(M,10),N=this.privRequestSession.recogNumber,L=()=>o(this,void 0,void 0,function*(){if(!this.privIsDisposed&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing&&this.privRequestSession.recogNumber===N){const z=yield this.fetchConnection(),V=yield h.read();if(this.privRequestSession.isSpeechEnded)return;let q,X;if(!V||V.isEnd?(q=null,X=0):(q=V.buffer,this.privRequestSession.onAudioSent(q.byteLength),X=T>=this.privRequestSession.bytesSent?0:Math.max(0,I-Date.now())),0!==X&&(yield this.delay(X)),null!==q&&(I=Date.now()+1e3*q.byteLength/(2*m.avgBytesPerSec)),!this.privIsDisposed&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing&&this.privRequestSession.recogNumber===N){if(z.send(new P.SpeechConnectionMessage(_.MessageType.Binary,"audio",this.privRequestSession.requestId,null,q)).catch(()=>{this.privRequestSession.onServiceTurnEndResponse(this.privRecognizerConfig.isContinuousRecognition).catch(()=>{})}),!V?.isEnd)return L();this.privIsLiveAudio||this.privRequestSession.onSpeechEnded()}}});return L()})}retryableConnect(){return o(this,void 0,void 0,function*(){let h=!1;this.privAuthFetchEventId=_.createNoDashGuid();const m=this.privRequestSession.sessionId;this.privConnectionId=void 0!==m?m:_.createNoDashGuid(),this.privRequestSession.onPreConnectionStart(this.privAuthFetchEventId,this.privConnectionId);let I=0,M="";for(;this.privRequestSession.numConnectionAttempts<=this.privRecognizerConfig.maxRetryCount;){const N=yield h?this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId):this.privAuthentication.fetch(this.privAuthFetchEventId);yield this.privRequestSession.onAuthCompleted(!1);const L=this.privConnectionFactory.create(this.privRecognizerConfig,N,this.privConnectionId);this.privRequestSession.listenForServiceTelemetry(L.events),L.events.attach(V=>{this.connectionEvents.onEvent(V)});const z=yield L.open();if(200===z.statusCode)return yield this.privRequestSession.onConnectionEstablishCompleted(z.statusCode),Promise.resolve(L);1006===z.statusCode&&(h=!0),I=z.statusCode,M=z.reason,this.privRequestSession.onRetryConnection()}return yield this.privRequestSession.onConnectionEstablishCompleted(I,M),Promise.reject(`Unable to contact server. StatusCode: ${I}, ${this.privRecognizerConfig.parameters.getProperty(A.PropertyId.SpeechServiceConnection_Endpoint)} Reason: ${M}`)})}delay(h){return new Promise(m=>this.privSetTimeout(m,h))}writeBufferToConsole(h){let m="Buffer Size: ";if(null===h)m+="null";else{const I=new Uint8Array(h);m+=`${h.byteLength}\r\n`;for(let M=0;M<h.byteLength;M++)m+=I[M].toString(16).padStart(2,"0")+" ",(M+1)%16==0&&(console.info(m),m="")}console.info(m)}sendFinalAudio(){return o(this,void 0,void 0,function*(){yield(yield this.fetchConnection()).send(new P.SpeechConnectionMessage(_.MessageType.Binary,"audio",this.privRequestSession.requestId,null,null))})}configureConnection(){return o(this,void 0,void 0,function*(){const h=yield this.connectImpl();return void 0!==this.configConnectionOverride?this.configConnectionOverride(h):(yield this.sendSpeechServiceConfig(h,this.privRequestSession,this.privRecognizerConfig.SpeechServiceConfig.serialize()),yield this.sendPrePayloadJSON(h,!1),h)})}}p.ServiceRecognizerBase=w,w.telemetryDataEnabled=!0},6204:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.ServiceTelemetryListener=void 0;const o=y(847),v=y(52);p.ServiceTelemetryListener=class _{constructor(b,P,w){this.privIsDisposed=!1,this.privListeningTriggerMetric=null,this.privMicMetric=null,this.privConnectionEstablishMetric=null,this.privRequestId=b,this.privAudioSourceId=P,this.privAudioNodeId=w,this.privReceivedMessages={},this.privPhraseLatencies=[],this.privHypothesisLatencies=[]}phraseReceived(b){b>0&&this.privPhraseLatencies.push(Date.now()-b)}hypothesisReceived(b){b>0&&this.privHypothesisLatencies.push(Date.now()-b)}onEvent(b){!this.privIsDisposed&&(b instanceof v.RecognitionTriggeredEvent&&b.requestId===this.privRequestId&&(this.privListeningTriggerMetric={End:b.eventTime,Name:"ListeningTrigger",Start:b.eventTime}),b instanceof o.AudioStreamNodeAttachingEvent&&b.audioSourceId===this.privAudioSourceId&&b.audioNodeId===this.privAudioNodeId&&(this.privMicStartTime=b.eventTime),b instanceof o.AudioStreamNodeAttachedEvent&&b.audioSourceId===this.privAudioSourceId&&b.audioNodeId===this.privAudioNodeId&&(this.privMicStartTime=b.eventTime),b instanceof o.AudioSourceErrorEvent&&b.audioSourceId===this.privAudioSourceId&&(this.privMicMetric||(this.privMicMetric={End:b.eventTime,Error:b.error,Name:"Microphone",Start:this.privMicStartTime})),b instanceof o.AudioStreamNodeErrorEvent&&b.audioSourceId===this.privAudioSourceId&&b.audioNodeId===this.privAudioNodeId&&(this.privMicMetric||(this.privMicMetric={End:b.eventTime,Error:b.error,Name:"Microphone",Start:this.privMicStartTime})),b instanceof o.AudioStreamNodeDetachedEvent&&b.audioSourceId===this.privAudioSourceId&&b.audioNodeId===this.privAudioNodeId&&(this.privMicMetric||(this.privMicMetric={End:b.eventTime,Name:"Microphone",Start:this.privMicStartTime})),b instanceof v.ConnectingToServiceEvent&&b.requestId===this.privRequestId&&(this.privConnectionId=b.sessionId),b instanceof o.ConnectionStartEvent&&b.connectionId===this.privConnectionId&&(this.privConnectionStartTime=b.eventTime),b instanceof o.ConnectionEstablishedEvent&&b.connectionId===this.privConnectionId&&(this.privConnectionEstablishMetric||(this.privConnectionEstablishMetric={End:b.eventTime,Id:this.privConnectionId,Name:"Connection",Start:this.privConnectionStartTime})),b instanceof o.ConnectionEstablishErrorEvent&&b.connectionId===this.privConnectionId&&(this.privConnectionEstablishMetric||(this.privConnectionEstablishMetric={End:b.eventTime,Error:this.getConnectionError(b.statusCode),Id:this.privConnectionId,Name:"Connection",Start:this.privConnectionStartTime})),b instanceof o.ConnectionMessageReceivedEvent&&b.connectionId===this.privConnectionId&&b.message&&b.message.headers&&b.message.headers.path)&&(this.privReceivedMessages[b.message.headers.path]||(this.privReceivedMessages[b.message.headers.path]=new Array),this.privReceivedMessages[b.message.headers.path].length<50&&this.privReceivedMessages[b.message.headers.path].push(b.networkReceivedTime))}getTelemetry(){const b=new Array;this.privListeningTriggerMetric&&b.push(this.privListeningTriggerMetric),this.privMicMetric&&b.push(this.privMicMetric),this.privConnectionEstablishMetric&&b.push(this.privConnectionEstablishMetric),this.privPhraseLatencies.length>0&&b.push({PhraseLatencyMs:this.privPhraseLatencies}),this.privHypothesisLatencies.length>0&&b.push({FirstHypothesisLatencyMs:this.privHypothesisLatencies});const w=JSON.stringify({Metrics:b,ReceivedMessages:this.privReceivedMessages});return this.privReceivedMessages={},this.privListeningTriggerMetric=null,this.privMicMetric=null,this.privConnectionEstablishMetric=null,this.privPhraseLatencies=[],this.privHypothesisLatencies=[],w}get hasTelemetry(){return 0!==Object.keys(this.privReceivedMessages).length||null!==this.privListeningTriggerMetric||null!==this.privMicMetric||null!==this.privConnectionEstablishMetric||0!==this.privPhraseLatencies.length||0!==this.privHypothesisLatencies.length}dispose(){this.privIsDisposed=!0}getConnectionError(b){switch(b){case 400:case 1002:case 1003:case 1005:case 1007:case 1008:case 1009:return"BadRequest";case 401:return"Unauthorized";case 403:return"Forbidden";case 503:case 1001:return"ServerUnavailable";case 500:case 1011:return"ServerError";case 408:case 504:return"Timeout";default:return"statuscode:"+b.toString()}}}},2901:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.SpeakerRecognitionConfig=void 0;const o=y(9464);p.SpeakerRecognitionConfig=class v{constructor(A,b){this.privContext=A||new o.Context(null),this.privParameters=b}get parameters(){return this.privParameters}get Context(){return this.privContext}}},4326:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.VoiceProfileConnectionFactory=p.SpeakerRecognitionConnectionFactory=void 0;const o=y(4853),v=y(8323),_=y(6389),A=y(9464),b=y(3747);class P extends _.ConnectionFactoryBase{create(m,I,M,T){let N=m.parameters.getProperty(v.PropertyId.SpeechServiceConnection_Endpoint);if(!N){const q=m.parameters.getProperty(v.PropertyId.SpeechServiceConnection_Region),X=_.ConnectionFactoryBase.getHostSuffix(q),ce=m.parameters.getProperty(v.PropertyId.SpeechServiceConnection_Host,`wss://${q}.spr-frontend.speech${X}`),fe=m.parameters.getProperty(v.PropertyId.SpeechServiceConnection_SpeakerIdMode,"TextIndependentIdentification");N=`${ce}/speaker/ws/${this.scenarioToPath(fe)}/${M}`}const L={format:"simple",language:m.parameters.getProperty(v.PropertyId.SpeechServiceConnection_RecoLanguage)};this.setCommonUrlParams(m,L,N);const z={};void 0!==I.token&&""!==I.token&&(z[I.headerName]=I.token),z[b.HeaderNames.ConnectionId]=T,z[b.HeaderNames.SpIDAuthKey]=m.parameters.getProperty(v.PropertyId.SpeechServiceConnection_Key),m.parameters.setProperty(v.PropertyId.SpeechServiceConnection_Url,N);const V="true"===m.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new o.WebsocketConnection(N,L,z,new A.WebsocketMessageFormatter,o.ProxyInfo.fromRecognizerConfig(m),V,T)}scenarioToPath(m){switch(m){case"TextIndependentVerification":case"2":return"verification/text-independent";case"TextDependentVerification":case"1":return"verification/text-dependent";default:return"identification/text-independent"}}}p.SpeakerRecognitionConnectionFactory=class w extends P{create(m,I,M){return super.create(m,I,"recognition",M)}},p.VoiceProfileConnectionFactory=class S extends P{create(m,I,M){return super.create(m,I,"profile",M)}}},9065:function(ne,p,y){"use strict";var o=this&&this.__awaiter||function(S,h,m,I){return new(m||(m=Promise))(function(T,N){function L(q){try{V(I.next(q))}catch(X){N(X)}}function z(q){try{V(I.throw(q))}catch(X){N(X)}}function V(q){q.done?T(q.value):function M(T){return T instanceof m?T:new m(function(N){N(T)})}(q.value).then(L,z)}V((I=I.apply(S,h||[])).next())})};Object.defineProperty(p,"__esModule",{value:!0}),p.SpeakerServiceRecognizer=void 0;const v=y(4853),_=y(847),A=y(8323),b=y(9464),P=y(5328);p.SpeakerServiceRecognizer=class w extends b.ServiceRecognizerBase{constructor(h,m,I,M,T){super(h,m,I,M,T),this.privSpeakerRecognizer=T,this.privSpeakerAudioSource=I,this.recognizeSpeaker=N=>this.recognizeSpeakerOnce(N),this.sendPrePayloadJSONOverride=()=>this.noOp()}processTypeSpecificMessages(h){let m=!1;const I=new A.PropertyCollection;if("speaker.response"===(h.messageType===_.MessageType.Text&&I.setProperty(A.PropertyId.SpeechServiceResponse_JsonResult,h.textBody),h.path.toLowerCase())){const T=JSON.parse(h.textBody);let N;N="success"!==T.status.statusCode.toLowerCase()?new A.SpeakerRecognitionResult(T,A.ResultReason.Canceled,A.CancellationErrorCode.ServiceError,T.status.reason):new A.SpeakerRecognitionResult(T,A.ResultReason.RecognizedSpeaker),this.privResultDeferral&&this.privResultDeferral.resolve(N),m=!0}const M=new _.Deferred;return M.resolve(m),M.promise}cancelRecognition(h,m,I,M,T){if((new A.PropertyCollection).setProperty(b.CancellationErrorCodePropertyName,A.CancellationErrorCode[M]),this.privResultDeferral){const L=new A.SpeakerRecognitionResult({scenario:this.privSpeakerModel.scenario,status:{statusCode:T,reason:T}},A.ResultReason.Canceled,M,T);try{this.privResultDeferral.resolve(L)}catch(z){this.privResultDeferral.reject(z)}}}recognizeSpeakerOnce(h){return o(this,void 0,void 0,function*(){this.privSpeakerModel=h,this.voiceProfileType=h.scenario,this.privResultDeferral||(this.privResultDeferral=new _.Deferred),this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privSpeakerAudioSource.events),this.privRecognizerConfig.parameters.setProperty(A.PropertyId.Speech_SessionId,this.privRequestSession.sessionId);const m=this.connectImpl(),I=this.sendPreAudioMessages(this.extractSpeakerContext(h)),M=yield this.privSpeakerAudioSource.attach(this.privRequestSession.audioNodeId),T=yield this.privSpeakerAudioSource.format,N=yield this.privSpeakerAudioSource.deviceInfo,L=new v.ReplayableAudioNode(M,T.avgBytesPerSec);yield this.privRequestSession.onAudioSourceAttachCompleted(L,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:N};try{yield m,yield I}catch(q){this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,A.CancellationReason.Error,A.CancellationErrorCode.ConnectionFailure,q)}const z=new A.SessionEventArgs(this.privRequestSession.sessionId);return this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,z),this.receiveMessage(),this.sendAudio(L).then(()=>{},q=>{this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,A.CancellationReason.Error,A.CancellationErrorCode.RuntimeError,q)}),this.privResultDeferral.promise})}sendPreAudioMessages(h){return o(this,void 0,void 0,function*(){const m=yield this.fetchConnection();yield this.sendSpeakerRecognition(m,h)})}sendSpeakerRecognition(h,m){return o(this,void 0,void 0,function*(){const I=JSON.stringify(m);return h.send(new P.SpeechConnectionMessage(_.MessageType.Text,"speaker.context",this.privRequestSession.requestId,"application/json; charset=utf-8",I))})}extractSpeakerContext(h){return{features:{interimResult:"enabled",progressiveDetection:"disabled"},profileIds:h.profileIds,scenario:h.scenario}}}},8453:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.SpeechConnectionFactory=void 0;const o=y(4853),v=y(9464),_=y(8323),A=y(6389),b=y(9464),P=y(3747),w=y(5730);p.SpeechConnectionFactory=class S extends A.ConnectionFactoryBase{constructor(){super(...arguments),this.interactiveRelativeUri="/speech/recognition/interactive/cognitiveservices/v1",this.conversationRelativeUri="/speech/recognition/conversation/cognitiveservices/v1",this.dictationRelativeUri="/speech/recognition/dictation/cognitiveservices/v1",this.universalUri="/speech/universal/v"}create(m,I,M){let T=m.parameters.getProperty(_.PropertyId.SpeechServiceConnection_Endpoint,void 0);const N=m.parameters.getProperty(_.PropertyId.SpeechServiceConnection_Region,void 0),L=A.ConnectionFactoryBase.getHostSuffix(N),z=m.parameters.getProperty(_.PropertyId.SpeechServiceConnection_Host,"wss://"+N+".stt.speech"+L),V={},q=m.parameters.getProperty(_.PropertyId.SpeechServiceConnection_EndpointId,void 0),X=m.parameters.getProperty(_.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);if(q?(!T||-1===T.search(w.QueryParameterNames.CustomSpeechDeploymentId))&&(V[w.QueryParameterNames.CustomSpeechDeploymentId]=q):X&&(!T||-1===T.search(w.QueryParameterNames.Language))&&(V[w.QueryParameterNames.Language]=X),(!T||-1===T.search(w.QueryParameterNames.Format))&&(V[w.QueryParameterNames.Format]=m.parameters.getProperty(v.OutputFormatPropertyName,_.OutputFormat[_.OutputFormat.Simple]).toLowerCase()),void 0!==m.autoDetectSourceLanguages&&(V[w.QueryParameterNames.EnableLanguageId]="true"),this.setCommonUrlParams(m,V,T),!T)switch(m.recognitionMode){case b.RecognitionMode.Conversation:T="true"===m.parameters.getProperty(v.ForceDictationPropertyName,"false")?z+this.dictationRelativeUri:void 0!==m.recognitionEndpointVersion&&parseInt(m.recognitionEndpointVersion,10)>1?`${z}${this.universalUri}${m.recognitionEndpointVersion}`:z+this.conversationRelativeUri;break;case b.RecognitionMode.Dictation:T=z+this.dictationRelativeUri;break;default:T=void 0!==m.recognitionEndpointVersion&&parseInt(m.recognitionEndpointVersion,10)>1?`${z}${this.universalUri}${m.recognitionEndpointVersion}`:z+this.interactiveRelativeUri}const ce={};void 0!==I.token&&""!==I.token&&(ce[I.headerName]=I.token),ce[P.HeaderNames.ConnectionId]=M;const fe="true"===m.parameters.getProperty("SPEECH-EnableWebsocketCompression","false"),pe=new o.WebsocketConnection(T,V,ce,new b.WebsocketMessageFormatter,o.ProxyInfo.fromRecognizerConfig(m),fe,M);return m.parameters.setProperty(_.PropertyId.SpeechServiceConnection_Url,pe.uri),pe}}},5328:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.SpeechConnectionMessage=void 0;const o=y(847),v=y(3747);class _ extends o.ConnectionMessage{constructor(b,P,w,S,h,m,I,M){if(!P)throw new o.ArgumentNullError("path");if(!w)throw new o.ArgumentNullError("requestId");const T={};if(T[v.HeaderNames.Path]=P,T[v.HeaderNames.RequestId]=w,T[v.HeaderNames.RequestTimestamp]=(new Date).toISOString(),S&&(T[v.HeaderNames.ContentType]=S),m&&(T[v.HeaderNames.RequestStreamId]=m),I)for(const N in I)N&&(T[N]=I[N]);M?super(b,h,T,M):super(b,h,T),this.privPath=P,this.privRequestId=w,this.privContentType=S,this.privStreamId=m,this.privAdditionalHeaders=I}get path(){return this.privPath}get requestId(){return this.privRequestId}get contentType(){return this.privContentType}get streamId(){return this.privStreamId}get additionalHeaders(){return this.privAdditionalHeaders}static fromConnectionMessage(b){let P=null,w=null,S=null,h=null;const m={};if(b.headers)for(const I in b.headers)I&&(I.toLowerCase()===v.HeaderNames.Path.toLowerCase()?P=b.headers[I]:I.toLowerCase()===v.HeaderNames.RequestId.toLowerCase()?w=b.headers[I]:I.toLowerCase()===v.HeaderNames.ContentType.toLowerCase()?S=b.headers[I]:I.toLowerCase()===v.HeaderNames.RequestStreamId.toLowerCase()?h=b.headers[I]:m[I]=b.headers[I]);return new _(b.messageType,P,w,S,b.body,h,m,b.id)}}p.SpeechConnectionMessage=_},1379:(ne,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.SpeechContext=void 0,p.SpeechContext=class y{constructor(v){this.privContext={},this.privDynamicGrammar=v}getSection(v){return this.privContext[v]||{}}setSection(v,_){this.privContext[v]=_}setPronunciationAssessmentParams(v,_,A=!1){void 0===this.privContext.phraseDetection&&(this.privContext.phraseDetection={enrichment:{pronunciationAssessment:{}}}),void 0===this.privContext.phraseDetection.enrichment&&(this.privContext.phraseDetection.enrichment={pronunciationAssessment:{}}),this.privContext.phraseDetection.enrichment.pronunciationAssessment=JSON.parse(v),A&&(this.privContext.phraseDetection.mode="Conversation"),this.setWordLevelTimings(),this.privContext.phraseOutput.detailed.options.push("PronunciationAssessment"),-1===this.privContext.phraseOutput.detailed.options.indexOf("SNR")&&this.privContext.phraseOutput.detailed.options.push("SNR"),_&&(this.privContext.phraseDetection.enrichment.contentAssessment={topic:_},this.privContext.phraseOutput.detailed.options.push("ContentAssessment"))}setDetailedOutputFormat(){void 0===this.privContext.phraseOutput&&(this.privContext.phraseOutput={detailed:{options:[]},format:{}}),void 0===this.privContext.phraseOutput.detailed&&(this.privContext.phraseOutput.detailed={options:[]}),this.privContext.phraseOutput.format="Detailed"}setWordLevelTimings(){void 0===this.privContext.phraseOutput&&(this.privContext.phraseOutput={detailed:{options:[]},format:{}}),void 0===this.privContext.phraseOutput.detailed&&(this.privContext.phraseOutput.detailed={options:[]}),this.privContext.phraseOutput.format="Detailed",-1===this.privContext.phraseOutput.detailed.options.indexOf("WordTimings")&&this.privContext.phraseOutput.detailed.options.push("WordTimings")}setSpeakerDiarizationAudioOffsetMs(v){this.privContext.phraseDetection.speakerDiarization.audioOffsetMs=v}toJSON(){const v=this.privDynamicGrammar.generateGrammarObject();return this.setSection("dgi",v),JSON.stringify(this.privContext)}}},4615:(ne,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.type=p.connectivity=p.Device=p.OS=p.System=p.Context=p.SpeechServiceConfig=void 0,p.SpeechServiceConfig=class y{constructor(S){this.context=S}serialize(){return JSON.stringify(this,(S,h)=>{if(h&&"object"==typeof h&&!Array.isArray(h)){const m={};for(const I in h)Object.hasOwnProperty.call(h,I)&&(m[I&&I.charAt(0).toLowerCase()+I.substring(1)]=h[I]);return m}return h})}get Context(){return this.context}get Recognition(){return this.recognition}set Recognition(S){this.recognition=S.toLowerCase()}},p.Context=class o{constructor(S){this.system=new v,this.os=S}};class v{constructor(){this.name="SpeechSDK",this.version="1.34.0",this.build="JavaScript",this.lang="JavaScript"}}var w;p.System=v,p.OS=class _{constructor(S,h,m){this.platform=S,this.name=h,this.version=m}},p.Device=class A{constructor(S,h,m){this.manufacturer=S,this.model=h,this.version=m}},(w=p.connectivity||(p.connectivity={})).Bluetooth="Bluetooth",w.Wired="Wired",w.WiFi="WiFi",w.Cellular="Cellular",w.InBuilt="InBuilt",w.Unknown="Unknown",function(w){w.Phone="Phone",w.Speaker="Speaker",w.Car="Car",w.Headset="Headset",w.Thermostat="Thermostat",w.Microphones="Microphones",w.Deskphone="Deskphone",w.RemoteControl="RemoteControl",w.Unknown="Unknown",w.File="File",w.Stream="Stream"}(p.type||(p.type={}))},8104:(ne,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0})},2522:function(ne,p,y){"use strict";var o=this&&this.__awaiter||function(b,P,w,S){return new(w||(w=Promise))(function(m,I){function M(L){try{N(S.next(L))}catch(z){I(z)}}function T(L){try{N(S.throw(L))}catch(z){I(z)}}function N(L){L.done?m(L.value):function h(m){return m instanceof w?m:new w(function(I){I(m)})}(L.value).then(M,T)}N((S=S.apply(b,P||[])).next())})};Object.defineProperty(p,"__esModule",{value:!0}),p.SpeechServiceRecognizer=void 0;const v=y(8323),_=y(9464);p.SpeechServiceRecognizer=class A extends _.ServiceRecognizerBase{constructor(P,w,S,h,m){super(P,w,S,h,m),this.privSpeechRecognizer=m}processTypeSpecificMessages(P){return o(this,void 0,void 0,function*(){let w;const S=new v.PropertyCollection;S.setProperty(v.PropertyId.SpeechServiceResponse_JsonResult,P.textBody);let h=!1;switch(P.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":const m=_.SpeechHypothesis.fromJSON(P.textBody),I=m.Offset+this.privRequestSession.currentTurnAudioOffset;w=new v.SpeechRecognitionResult(this.privRequestSession.requestId,v.ResultReason.RecognizingSpeech,m.Text,m.Duration,I,m.Language,m.LanguageDetectionConfidence,void 0,void 0,P.textBody,S),this.privRequestSession.onHypothesis(I);const M=new v.SpeechRecognitionEventArgs(w,m.Duration,this.privRequestSession.sessionId);if(this.privSpeechRecognizer.recognizing)try{this.privSpeechRecognizer.recognizing(this.privSpeechRecognizer,M)}catch{}h=!0;break;case"speech.phrase":const T=_.SimpleSpeechPhrase.fromJSON(P.textBody),N=_.EnumTranslation.implTranslateRecognitionResult(T.RecognitionStatus,this.privExpectContentAssessmentResponse);if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+T.Offset+T.Duration),v.ResultReason.Canceled===N){const L=_.EnumTranslation.implTranslateCancelResult(T.RecognitionStatus),z=_.EnumTranslation.implTranslateCancelErrorCode(T.RecognitionStatus);yield this.cancelRecognitionLocal(L,z,_.EnumTranslation.implTranslateErrorDetails(z))}else{if(!this.privRequestSession.isSpeechEnded||N!==v.ResultReason.NoMatch||T.RecognitionStatus===_.RecognitionStatus.InitialSilenceTimeout){if(this.privRecognizerConfig.parameters.getProperty(_.OutputFormatPropertyName)===v.OutputFormat[v.OutputFormat.Simple])w=new v.SpeechRecognitionResult(this.privRequestSession.requestId,N,T.DisplayText,T.Duration,T.Offset+this.privRequestSession.currentTurnAudioOffset,T.Language,T.LanguageDetectionConfidence,void 0,void 0,P.textBody,S);else{const z=_.DetailedSpeechPhrase.fromJSON(P.textBody),V=z.Offset+this.privRequestSession.currentTurnAudioOffset,q=z.getJsonWithCorrectedOffsets(V);w=new v.SpeechRecognitionResult(this.privRequestSession.requestId,N,z.RecognitionStatus===_.RecognitionStatus.Success?z.NBest[0].Display:void 0,z.Duration,V,z.Language,z.LanguageDetectionConfidence,void 0,void 0,q,S)}const L=new v.SpeechRecognitionEventArgs(w,w.offset,this.privRequestSession.sessionId);if(this.privSpeechRecognizer.recognized)try{this.privSpeechRecognizer.recognized(this.privSpeechRecognizer,L)}catch{}}if(this.privSuccessCallback){try{this.privSuccessCallback(w)}catch(L){this.privErrorCallback&&this.privErrorCallback(L)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}h=!0}return h})}cancelRecognition(P,w,S,h,m){const I=new v.PropertyCollection;if(I.setProperty(_.CancellationErrorCodePropertyName,v.CancellationErrorCode[h]),this.privSpeechRecognizer.canceled){const M=new v.SpeechRecognitionCanceledEventArgs(S,m,h,void 0,P);try{this.privSpeechRecognizer.canceled(this.privSpeechRecognizer,M)}catch{}}if(this.privSuccessCallback){const M=new v.SpeechRecognitionResult(w,v.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,m,void 0,I);try{this.privSuccessCallback(M),this.privSuccessCallback=void 0}catch{}}}}},3054:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.SpeechSynthesisAdapter=void 0;const o=y(8323),v=y(9464);p.SpeechSynthesisAdapter=class _ extends v.SynthesisAdapterBase{constructor(b,P,w,S,h){super(b,P,w,h),this.privSpeechSynthesizer=S,this.privSynthesizer=S}setSynthesisContextSynthesisSection(){this.privSynthesisContext.setSynthesisSection(this.privSpeechSynthesizer)}onSynthesisStarted(b){const P=new o.SpeechSynthesisEventArgs(new o.SpeechSynthesisResult(b,o.ResultReason.SynthesizingAudioStarted));this.privSpeechSynthesizer.synthesisStarted&&this.privSpeechSynthesizer.synthesisStarted(this.privSpeechSynthesizer,P)}onSynthesizing(b){if(this.privSpeechSynthesizer.synthesizing)try{const P=this.privSynthesisTurn.audioOutputFormat.addHeader(b),w=new o.SpeechSynthesisEventArgs(new o.SpeechSynthesisResult(this.privSynthesisTurn.requestId,o.ResultReason.SynthesizingAudio,P));this.privSpeechSynthesizer.synthesizing(this.privSpeechSynthesizer,w)}catch{}}onSynthesisCancelled(b){if(this.privSpeechSynthesizer.SynthesisCanceled){const P=new o.SpeechSynthesisEventArgs(b);try{this.privSpeechSynthesizer.SynthesisCanceled(this.privSpeechSynthesizer,P)}catch{}}}onSynthesisCompleted(b){if(this.privSpeechSynthesizer.synthesisCompleted)try{this.privSpeechSynthesizer.synthesisCompleted(this.privSpeechSynthesizer,new o.SpeechSynthesisEventArgs(b))}catch{}}onWordBoundary(b){if(this.privSpeechSynthesizer.wordBoundary)try{this.privSpeechSynthesizer.wordBoundary(this.privSpeechSynthesizer,b)}catch{}}onVisemeReceived(b){if(this.privSpeechSynthesizer.visemeReceived)try{this.privSpeechSynthesizer.visemeReceived(this.privSpeechSynthesizer,b)}catch{}}onBookmarkReached(b){if(this.privSpeechSynthesizer.bookmarkReached)try{this.privSpeechSynthesizer.bookmarkReached(this.privSpeechSynthesizer,b)}catch{}}}},2436:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.SpeechSynthesisConnectionFactory=void 0;const o=y(4853),v=y(8323),_=y(6389),A=y(9464),b=y(3747),P=y(5730);p.SpeechSynthesisConnectionFactory=class w{constructor(){this.synthesisUri="/cognitiveservices/websocket/v1"}create(h,m,I){let M=h.parameters.getProperty(v.PropertyId.SpeechServiceConnection_Endpoint,void 0);const T=h.parameters.getProperty(v.PropertyId.SpeechServiceConnection_Region,void 0),N=_.ConnectionFactoryBase.getHostSuffix(T),L=h.parameters.getProperty(v.PropertyId.SpeechServiceConnection_EndpointId,void 0),V=h.parameters.getProperty(v.PropertyId.SpeechServiceConnection_Host,"wss://"+T+"."+(void 0===L?"tts":"voice")+".speech"+N),q={},X={};void 0!==m.token&&""!==m.token&&(X[m.headerName]=m.token),X[b.HeaderNames.ConnectionId]=I,void 0!==L&&""!==L&&(!M||-1===M.search(P.QueryParameterNames.CustomVoiceDeploymentId))&&(q[P.QueryParameterNames.CustomVoiceDeploymentId]=L),h.avatarEnabled&&(!M||-1===M.search(P.QueryParameterNames.EnableAvatar))&&(q[P.QueryParameterNames.EnableAvatar]="true"),M||(M=V+this.synthesisUri),h.parameters.setProperty(v.PropertyId.SpeechServiceConnection_Url,M);const ce="true"===h.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new o.WebsocketConnection(M,q,X,new A.WebsocketMessageFormatter,o.ProxyInfo.fromParameters(h.parameters),ce,I)}}},9215:function(ne,p,y){"use strict";var o=this&&this.__awaiter||function(w,S,h,m){return new(h||(h=Promise))(function(M,T){function N(V){try{z(m.next(V))}catch(q){T(q)}}function L(V){try{z(m.throw(V))}catch(q){T(q)}}function z(V){V.done?M(V.value):function I(M){return M instanceof h?M:new h(function(T){T(M)})}(V.value).then(N,L)}z((m=m.apply(w,S||[])).next())})};Object.defineProperty(p,"__esModule",{value:!0}),p.SynthesisAdapterBase=void 0;const v=y(847),_=y(8323),A=y(9464),b=y(5328);class P{constructor(S,h,m,I){if(this.speakOverride=void 0,this.receiveMessageOverride=void 0,this.connectImplOverride=void 0,this.configConnectionOverride=void 0,this.privConnectionConfigurationPromise=void 0,!S)throw new v.ArgumentNullError("authentication");if(!h)throw new v.ArgumentNullError("connectionFactory");if(!m)throw new v.ArgumentNullError("synthesizerConfig");this.privAuthentication=S,this.privConnectionFactory=h,this.privSynthesizerConfig=m,this.privIsDisposed=!1,this.privSessionAudioDestination=I,this.privSynthesisTurn=new A.SynthesisTurn,this.privConnectionEvents=new v.EventSource,this.privServiceEvents=new v.EventSource,this.privSynthesisContext=new A.SynthesisContext,this.privAgentConfig=new A.AgentConfig,this.connectionEvents.attach(M=>{"ConnectionClosedEvent"===M.name&&1e3!==M.statusCode&&this.cancelSynthesisLocal(_.CancellationReason.Error,1007===M.statusCode?_.CancellationErrorCode.BadRequestParameters:_.CancellationErrorCode.ConnectionFailure,`${M.reason} websocket error code: ${M.statusCode}`)})}get synthesisContext(){return this.privSynthesisContext}get agentConfig(){return this.privAgentConfig}get connectionEvents(){return this.privConnectionEvents}get serviceEvents(){return this.privServiceEvents}set activityTemplate(S){this.privActivityTemplate=S}get activityTemplate(){return this.privActivityTemplate}set audioOutputFormat(S){this.privAudioOutputFormat=S,this.privSynthesisTurn.audioOutputFormat=S,void 0!==this.privSessionAudioDestination&&(this.privSessionAudioDestination.format=S),void 0!==this.synthesisContext&&(this.synthesisContext.audioOutputFormat=S)}isDisposed(){return this.privIsDisposed}dispose(S){return o(this,void 0,void 0,function*(){this.privIsDisposed=!0,void 0!==this.privSessionAudioDestination&&this.privSessionAudioDestination.close(),void 0!==this.privConnectionConfigurationPromise&&(yield(yield this.privConnectionConfigurationPromise).dispose(S))})}connect(){return o(this,void 0,void 0,function*(){yield this.connectImpl()})}sendNetworkMessage(S,h){return o(this,void 0,void 0,function*(){const m="string"==typeof h?v.MessageType.Text:v.MessageType.Binary,I="string"==typeof h?"application/json":"";return(yield this.fetchConnection()).send(new b.SpeechConnectionMessage(m,S,this.privSynthesisTurn.requestId,I,h))})}Speak(S,h,m,I,M,T){return o(this,void 0,void 0,function*(){let N;if(N=h?S:this.privSynthesizer.buildSsml(S),void 0!==this.speakOverride)return this.speakOverride(N,m,I,M);this.privSuccessCallback=I,this.privErrorCallback=M,this.privSynthesisTurn.startNewSynthesis(m,S,h,T);try{yield this.connectImpl();const L=yield this.fetchConnection();yield this.sendSynthesisContext(L),yield this.sendSsmlMessage(L,N,m),this.onSynthesisStarted(m),this.receiveMessage()}catch(L){return this.cancelSynthesisLocal(_.CancellationReason.Error,_.CancellationErrorCode.ConnectionFailure,L),Promise.reject(L)}})}stopSpeaking(){return o(this,void 0,void 0,function*(){return yield this.connectImpl(),(yield this.fetchConnection()).send(new b.SpeechConnectionMessage(v.MessageType.Text,"synthesis.control",this.privSynthesisTurn.requestId,"application/json",JSON.stringify({action:"stop"})))})}cancelSynthesis(S,h,m,I){const M=new _.PropertyCollection;M.setProperty(A.CancellationErrorCodePropertyName,_.CancellationErrorCode[m]);const T=new _.SpeechSynthesisResult(S,_.ResultReason.Canceled,void 0,I,M);if(this.onSynthesisCancelled(T),this.privSuccessCallback)try{this.privSuccessCallback(T)}catch{}}cancelSynthesisLocal(S,h,m){this.privSynthesisTurn.isSynthesizing&&(this.privSynthesisTurn.onStopSynthesizing(),this.cancelSynthesis(this.privSynthesisTurn.requestId,S,h,m))}processTypeSpecificMessages(S){return!0}receiveMessage(){return o(this,void 0,void 0,function*(){try{const h=yield(yield this.fetchConnection()).read();if(void 0!==this.receiveMessageOverride)return this.receiveMessageOverride();if(this.privIsDisposed)return;if(!h)return this.privSynthesisTurn.isSynthesizing?this.receiveMessage():void 0;const m=b.SpeechConnectionMessage.fromConnectionMessage(h);if(m.requestId.toLowerCase()===this.privSynthesisTurn.requestId.toLowerCase())switch(m.path.toLowerCase()){case"turn.start":this.privSynthesisTurn.onServiceTurnStartResponse(m.textBody);break;case"response":this.privSynthesisTurn.onServiceResponseMessage(m.textBody);break;case"audio":this.privSynthesisTurn.streamId.toLowerCase()===m.streamId.toLowerCase()&&m.binaryBody&&(this.privSynthesisTurn.onAudioChunkReceived(m.binaryBody),this.onSynthesizing(m.binaryBody),void 0!==this.privSessionAudioDestination&&this.privSessionAudioDestination.write(m.binaryBody));break;case"audio.metadata":const I=A.SynthesisAudioMetadata.fromJSON(m.textBody).Metadata;for(const T of I)switch(T.Type){case A.MetadataType.WordBoundary:case A.MetadataType.SentenceBoundary:this.privSynthesisTurn.onTextBoundaryEvent(T);const N=new _.SpeechSynthesisWordBoundaryEventArgs(T.Data.Offset,T.Data.Duration,T.Data.text.Text,T.Data.text.Length,T.Type===A.MetadataType.WordBoundary?this.privSynthesisTurn.currentTextOffset:this.privSynthesisTurn.currentSentenceOffset,T.Data.text.BoundaryType);this.onWordBoundary(N);break;case A.MetadataType.Bookmark:const L=new _.SpeechSynthesisBookmarkEventArgs(T.Data.Offset,T.Data.Bookmark);this.onBookmarkReached(L);break;case A.MetadataType.Viseme:if(this.privSynthesisTurn.onVisemeMetadataReceived(T),T.Data.IsLastAnimation){const z=new _.SpeechSynthesisVisemeEventArgs(T.Data.Offset,T.Data.VisemeId,this.privSynthesisTurn.getAndClearVisemeAnimation());this.onVisemeReceived(z)}break;case A.MetadataType.AvatarSignal:this.onAvatarEvent(T);break;case A.MetadataType.SessionEnd:this.privSynthesisTurn.onSessionEnd(T)}break;case"turn.end":let M;this.privSynthesisTurn.onServiceTurnEndResponse();try{M=yield this.privSynthesisTurn.constructSynthesisResult(),this.privSuccessCallback&&this.privSuccessCallback(M)}catch(T){this.privErrorCallback&&this.privErrorCallback(T)}this.onSynthesisCompleted(M);break;default:this.processTypeSpecificMessages(m)||this.privServiceEvents&&this.serviceEvents.onEvent(new v.ServiceEvent(m.path.toLowerCase(),m.textBody))}return this.receiveMessage()}catch{}})}sendSynthesisContext(S){this.setSynthesisContextSynthesisSection();const h=this.synthesisContext.toJSON();if(h)return S.send(new b.SpeechConnectionMessage(v.MessageType.Text,"synthesis.context",this.privSynthesisTurn.requestId,"application/json",h))}setSpeechConfigSynthesisSection(){}connectImpl(S=!1){if(null!=this.privConnectionPromise)return this.privConnectionPromise.then(m=>m.state()===v.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionPromise=null,this.connectImpl()):this.privConnectionPromise,()=>(this.privConnectionId=null,this.privConnectionPromise=null,this.connectImpl()));this.privAuthFetchEventId=v.createNoDashGuid(),this.privConnectionId=v.createNoDashGuid(),this.privSynthesisTurn.onPreConnectionStart(this.privAuthFetchEventId);const h=S?this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId):this.privAuthentication.fetch(this.privAuthFetchEventId);return this.privConnectionPromise=h.then(m=>o(this,void 0,void 0,function*(){this.privSynthesisTurn.onAuthCompleted(!1);const I=this.privConnectionFactory.create(this.privSynthesizerConfig,m,this.privConnectionId);I.events.attach(T=>{this.connectionEvents.onEvent(T)});const M=yield I.open();return 200===M.statusCode?(this.privSynthesisTurn.onConnectionEstablishCompleted(M.statusCode),Promise.resolve(I)):403!==M.statusCode||S?(this.privSynthesisTurn.onConnectionEstablishCompleted(M.statusCode),Promise.reject(`Unable to contact server. StatusCode: ${M.statusCode}, ${this.privSynthesizerConfig.parameters.getProperty(_.PropertyId.SpeechServiceConnection_Endpoint)} Reason: ${M.reason}`)):this.connectImpl(!0)}),m=>{throw this.privSynthesisTurn.onAuthCompleted(!0),new Error(m)}),this.privConnectionPromise.catch(()=>{}),this.privConnectionPromise}sendSpeechServiceConfig(S,h){if(h)return S.send(new b.SpeechConnectionMessage(v.MessageType.Text,"speech.config",this.privSynthesisTurn.requestId,"application/json",h))}sendSsmlMessage(S,h,m){return S.send(new b.SpeechConnectionMessage(v.MessageType.Text,"ssml",m,"application/ssml+xml",h))}fetchConnection(){return o(this,void 0,void 0,function*(){return void 0!==this.privConnectionConfigurationPromise?this.privConnectionConfigurationPromise.then(S=>S.state()===v.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.fetchConnection()):this.privConnectionConfigurationPromise,()=>(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.fetchConnection())):(this.privConnectionConfigurationPromise=this.configureConnection(),yield this.privConnectionConfigurationPromise)})}configureConnection(){return o(this,void 0,void 0,function*(){const S=yield this.connectImpl();return void 0!==this.configConnectionOverride?this.configConnectionOverride(S):(this.setSpeechConfigSynthesisSection(),yield this.sendSpeechServiceConfig(S,this.privSynthesizerConfig.SpeechServiceConfig.serialize()),S)})}onAvatarEvent(S){}onSynthesisStarted(S){}onSynthesizing(S){}onSynthesisCancelled(S){}onSynthesisCompleted(S){}onWordBoundary(S){}onVisemeReceived(S){}onBookmarkReached(S){}}p.SynthesisAdapterBase=P,P.telemetryDataEnabled=!0},3215:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.SynthesisContext=void 0;const o=y(8323);p.SynthesisContext=class v{constructor(){this.privContext={}}setSection(A,b){this.privContext[A]=b}set audioOutputFormat(A){this.privAudioOutputFormat=A}toJSON(){return JSON.stringify(this.privContext)}setSynthesisSection(A){const b=this.buildSynthesisContext(A);this.setSection("synthesis",b)}buildSynthesisContext(A){return{audio:{metadataOptions:{bookmarkEnabled:!!A?.bookmarkReached,punctuationBoundaryEnabled:A?.properties.getProperty(o.PropertyId.SpeechServiceResponse_RequestPunctuationBoundary,!!A?.wordBoundary),sentenceBoundaryEnabled:A?.properties.getProperty(o.PropertyId.SpeechServiceResponse_RequestSentenceBoundary,!1),sessionEndEnabled:!0,visemeEnabled:!!A?.visemeReceived,wordBoundaryEnabled:A?.properties.getProperty(o.PropertyId.SpeechServiceResponse_RequestWordBoundary,!!A?.wordBoundary)},outputFormat:this.privAudioOutputFormat.requestAudioFormatString},language:{autoDetection:A?.autoDetectSourceLanguage}}}}},4140:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.SynthesisStartedEvent=p.ConnectingToSynthesisServiceEvent=p.SynthesisTriggeredEvent=p.SpeechSynthesisEvent=void 0;const o=y(847);class v extends o.PlatformEvent{constructor(w,S,h=o.EventType.Info){super(w,h),this.privRequestId=S}get requestId(){return this.privRequestId}}p.SpeechSynthesisEvent=v,p.SynthesisTriggeredEvent=class _ extends v{constructor(w,S,h){super("SynthesisTriggeredEvent",w),this.privSessionAudioDestinationId=S,this.privTurnAudioDestinationId=h}get audioSessionDestinationId(){return this.privSessionAudioDestinationId}get audioTurnDestinationId(){return this.privTurnAudioDestinationId}},p.ConnectingToSynthesisServiceEvent=class A extends v{constructor(w,S){super("ConnectingToSynthesisServiceEvent",w),this.privAuthFetchEventId=S}get authFetchEventId(){return this.privAuthFetchEventId}},p.SynthesisStartedEvent=class b extends v{constructor(w,S){super("SynthesisStartedEvent",w),this.privAuthFetchEventId=S}get authFetchEventId(){return this.privAuthFetchEventId}}},4074:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.SynthesisRestAdapter=void 0;const o=y(4853),v=y(8323),_=y(6389),A=y(3747);p.SynthesisRestAdapter=class b{constructor(w,S){let h=w.parameters.getProperty(v.PropertyId.SpeechServiceConnection_Endpoint,void 0);if(!h){const I=w.parameters.getProperty(v.PropertyId.SpeechServiceConnection_Region,"westus"),M=_.ConnectionFactoryBase.getHostSuffix(I);h=w.parameters.getProperty(v.PropertyId.SpeechServiceConnection_Host,`https://${I}.tts.speech${M}`)}this.privUri=`${h}/cognitiveservices/voices/list`,this.privRestAdapter=new o.RestMessageAdapter(o.RestConfigBase.requestOptions),this.privAuthentication=S}getVoicesList(w){return this.privRestAdapter.setHeaders(A.HeaderNames.ConnectionId,w),this.privAuthentication.fetch(w).then(S=>(this.privRestAdapter.setHeaders(S.headerName,S.token),this.privRestAdapter.request(o.RestRequestType.Get,this.privUri)))}}},8050:function(ne,p,y){"use strict";var o=this&&this.__awaiter||function(S,h,m,I){return new(m||(m=Promise))(function(T,N){function L(q){try{V(I.next(q))}catch(X){N(X)}}function z(q){try{V(I.throw(q))}catch(X){N(X)}}function V(q){q.done?T(q.value):function M(T){return T instanceof m?T:new m(function(N){N(T)})}(q.value).then(L,z)}V((I=I.apply(S,h||[])).next())})};Object.defineProperty(p,"__esModule",{value:!0}),p.SynthesisTurn=void 0;const v=y(847),_=y(4989),A=y(8323),b=y(2305),P=y(4140);class w{constructor(){this.privIsDisposed=!1,this.privIsSynthesizing=!1,this.privIsSynthesisEnded=!1,this.privBytesReceived=0,this.privInTurn=!1,this.privTextOffset=0,this.privNextSearchTextIndex=0,this.privSentenceOffset=0,this.privNextSearchSentenceIndex=0,this.privRequestId=v.createNoDashGuid(),this.privTurnDeferral=new v.Deferred,this.privTurnDeferral.resolve()}get requestId(){return this.privRequestId}get streamId(){return this.privStreamId}set streamId(h){this.privStreamId=h}get audioOutputFormat(){return this.privAudioOutputFormat}set audioOutputFormat(h){this.privAudioOutputFormat=h}get turnCompletionPromise(){return this.privTurnDeferral.promise}get isSynthesisEnded(){return this.privIsSynthesisEnded}get isSynthesizing(){return this.privIsSynthesizing}get currentTextOffset(){return this.privTextOffset}get currentSentenceOffset(){return this.privSentenceOffset}get bytesReceived(){return this.privBytesReceived}get audioDuration(){return this.privAudioDuration}get extraProperties(){if(this.privWebRTCSDP){const h=new A.PropertyCollection;return h.setProperty(A.PropertyId.TalkingAvatarService_WebRTC_SDP,this.privWebRTCSDP),h}}getAllReceivedAudio(){return o(this,void 0,void 0,function*(){return this.privReceivedAudio?Promise.resolve(this.privReceivedAudio):this.privIsSynthesisEnded?(yield this.readAllAudioFromStream(),Promise.resolve(this.privReceivedAudio)):null})}getAllReceivedAudioWithHeader(){return o(this,void 0,void 0,function*(){if(this.privReceivedAudioWithHeader)return this.privReceivedAudioWithHeader;if(!this.privIsSynthesisEnded)return null;if(this.audioOutputFormat.hasHeader){const h=yield this.getAllReceivedAudio();return this.privReceivedAudioWithHeader=this.audioOutputFormat.addHeader(h),this.privReceivedAudioWithHeader}return this.getAllReceivedAudio()})}startNewSynthesis(h,m,I,M){this.privIsSynthesisEnded=!1,this.privIsSynthesizing=!0,this.privRequestId=h,this.privRawText=m,this.privIsSSML=I,this.privAudioOutputStream=new _.PullAudioOutputStreamImpl,this.privAudioOutputStream.format=this.privAudioOutputFormat,this.privReceivedAudio=null,this.privReceivedAudioWithHeader=null,this.privBytesReceived=0,this.privTextOffset=0,this.privNextSearchTextIndex=0,this.privSentenceOffset=0,this.privNextSearchSentenceIndex=0,this.privPartialVisemeAnimation="",this.privWebRTCSDP="",void 0!==M&&(this.privTurnAudioDestination=M,this.privTurnAudioDestination.format=this.privAudioOutputFormat),this.onEvent(new P.SynthesisTriggeredEvent(this.requestId,void 0,void 0===M?void 0:M.id()))}onPreConnectionStart(h){this.privAuthFetchEventId=h,this.onEvent(new P.ConnectingToSynthesisServiceEvent(this.privRequestId,this.privAuthFetchEventId))}onAuthCompleted(h){h&&this.onComplete()}onConnectionEstablishCompleted(h){if(200===h)return this.onEvent(new P.SynthesisStartedEvent(this.requestId,this.privAuthFetchEventId)),void(this.privBytesReceived=0);403===h&&this.onComplete()}onServiceResponseMessage(h){const m=JSON.parse(h);this.streamId=m.audio.streamId}onServiceTurnEndResponse(){this.privInTurn=!1,this.privTurnDeferral.resolve(),this.onComplete()}onServiceTurnStartResponse(h){this.privTurnDeferral&&this.privInTurn&&(this.privTurnDeferral.reject("Another turn started before current completed."),this.privTurnDeferral.promise.then().catch(()=>{})),this.privInTurn=!0,this.privTurnDeferral=new v.Deferred;const m=JSON.parse(h);m.webrtc&&(this.privWebRTCSDP=m.webrtc.connectionString)}onAudioChunkReceived(h){this.isSynthesizing&&(this.privAudioOutputStream.write(h),this.privBytesReceived+=h.byteLength,void 0!==this.privTurnAudioDestination&&this.privTurnAudioDestination.write(h))}onTextBoundaryEvent(h){this.updateTextOffset(h.Data.text.Text,h.Type)}onVisemeMetadataReceived(h){void 0!==h.Data.AnimationChunk&&(this.privPartialVisemeAnimation+=h.Data.AnimationChunk)}onSessionEnd(h){this.privAudioDuration=h.Data.Offset}constructSynthesisResult(){return o(this,void 0,void 0,function*(){const h=yield this.getAllReceivedAudioWithHeader();return new A.SpeechSynthesisResult(this.requestId,A.ResultReason.SynthesizingAudioCompleted,h,void 0,this.extraProperties,this.audioDuration)})}dispose(){this.privIsDisposed||(this.privIsDisposed=!0)}onStopSynthesizing(){this.onComplete()}getAndClearVisemeAnimation(){const h=this.privPartialVisemeAnimation;return this.privPartialVisemeAnimation="",h}onEvent(h){v.Events.instance.onEvent(h)}static isXmlTag(h){return h.length>=2&&"<"===h[0]&&">"===h[h.length-1]}updateTextOffset(h,m){m===b.MetadataType.WordBoundary?(this.privTextOffset=this.privRawText.indexOf(h,this.privNextSearchTextIndex),this.privTextOffset>=0&&(this.privNextSearchTextIndex=this.privTextOffset+h.length,this.privIsSSML&&this.withinXmlTag(this.privTextOffset)&&!w.isXmlTag(h)&&this.updateTextOffset(h,m))):(this.privSentenceOffset=this.privRawText.indexOf(h,this.privNextSearchSentenceIndex),this.privSentenceOffset>=0&&(this.privNextSearchSentenceIndex=this.privSentenceOffset+h.length,this.privIsSSML&&this.withinXmlTag(this.privSentenceOffset)&&!w.isXmlTag(h)&&this.updateTextOffset(h,m)))}onComplete(){this.privIsSynthesizing&&(this.privIsSynthesizing=!1,this.privIsSynthesisEnded=!0,this.privAudioOutputStream.close(),this.privInTurn=!1,void 0!==this.privTurnAudioDestination&&(this.privTurnAudioDestination.close(),this.privTurnAudioDestination=void 0))}readAllAudioFromStream(){return o(this,void 0,void 0,function*(){if(this.privIsSynthesisEnded){this.privReceivedAudio=new ArrayBuffer(this.bytesReceived);try{yield this.privAudioOutputStream.read(this.privReceivedAudio)}catch{this.privReceivedAudio=new ArrayBuffer(0)}}})}withinXmlTag(h){return this.privRawText.indexOf("<",h+1)>this.privRawText.indexOf(">",h+1)}}p.SynthesisTurn=w},8273:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.SynthesizerConfig=p.SynthesisServiceType=void 0;const o=y(9464);var v,A;(A=v=p.SynthesisServiceType||(p.SynthesisServiceType={}))[A.Standard=0]="Standard",A[A.Custom=1]="Custom",p.SynthesizerConfig=class _{constructor(b,P){this.privSynthesisServiceType=v.Standard,this.avatarEnabled=!1,this.privSpeechServiceConfig=b||new o.SpeechServiceConfig(new o.Context(null)),this.privParameters=P}get parameters(){return this.privParameters}get synthesisServiceType(){return this.privSynthesisServiceType}set synthesisServiceType(b){this.privSynthesisServiceType=b}set synthesisVideoSection(b){this.privSpeechServiceConfig.Context.synthesis={video:b}}get SpeechServiceConfig(){return this.privSpeechServiceConfig}}},9624:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.TranscriberConnectionFactory=void 0;const o=y(4853),v=y(8323),_=y(6389),A=y(9464),b=y(3747),P=y(5730);p.TranscriberConnectionFactory=class w extends _.ConnectionFactoryBase{constructor(){super(...arguments),this.multiaudioRelativeUri="/speech/recognition/multiaudio"}create(h,m,I){let M=h.parameters.getProperty(v.PropertyId.SpeechServiceConnection_Endpoint,void 0);const T=h.parameters.getProperty(v.PropertyId.SpeechServiceConnection_Region,"centralus"),N=_.ConnectionFactoryBase.getHostSuffix(T),z=h.parameters.getProperty(v.PropertyId.SpeechServiceConnection_Host,"wss://transcribe."+T+".cts.speech"+N+this.multiaudioRelativeUri),V={};this.setQueryParams(V,h,M),M||(M=z);const q={};void 0!==m.token&&""!==m.token&&(q[m.headerName]=m.token),q[b.HeaderNames.ConnectionId]=I,h.parameters.setProperty(v.PropertyId.SpeechServiceConnection_Url,M);const X="true"===h.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new o.WebsocketConnection(M,V,q,new A.WebsocketMessageFormatter,o.ProxyInfo.fromRecognizerConfig(h),X,I)}setQueryParams(h,m,I){const M=m.parameters.getProperty(v.PropertyId.SpeechServiceConnection_EndpointId,void 0),T=m.parameters.getProperty(v.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);M&&!(P.QueryParameterNames.CustomSpeechDeploymentId in h)&&(h[P.QueryParameterNames.CustomSpeechDeploymentId]=M),T&&!(P.QueryParameterNames.Language in h)&&(h[P.QueryParameterNames.Language]=T);const N="true"===m.parameters.getProperty(v.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"false").toLowerCase(),L=m.parameters.getProperty(A.OutputFormatPropertyName,v.OutputFormat[v.OutputFormat.Simple])!==v.OutputFormat[v.OutputFormat.Simple];(N||L)&&(h[P.QueryParameterNames.Format]=v.OutputFormat[v.OutputFormat.Detailed].toLowerCase()),this.setCommonUrlParams(m,h,I)}}},3351:function(ne,p,y){"use strict";var o=this&&this.__awaiter||function(w,S,h,m){return new(h||(h=Promise))(function(M,T){function N(V){try{z(m.next(V))}catch(q){T(q)}}function L(V){try{z(m.throw(V))}catch(q){T(q)}}function z(V){V.done?M(V.value):function I(M){return M instanceof h?M:new h(function(T){T(M)})}(V.value).then(N,L)}z((m=m.apply(w,S||[])).next())})};Object.defineProperty(p,"__esModule",{value:!0}),p.TranscriptionServiceRecognizer=void 0;const v=y(847),_=y(8323),A=y(9464),b=y(5328);p.TranscriptionServiceRecognizer=class P extends A.ConversationServiceRecognizer{constructor(S,h,m,I,M){super(S,h,m,I,M),this.privTranscriberRecognizer=M,this.sendPrePayloadJSONOverride=T=>this.sendTranscriptionStartJSON(T),"true"===this.privRecognizerConfig.parameters.getProperty(_.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps)&&this.privSpeechContext.setWordLevelTimings()}sendSpeechEventAsync(S,h){return o(this,void 0,void 0,function*(){if(this.privRequestSession.isRecognizing){const m=yield this.fetchConnection();yield this.sendSpeechEvent(m,this.createSpeechEventPayload(S,h))}})}sendMeetingSpeechEventAsync(S,h){return o(this,void 0,void 0,function*(){if(this.privRequestSession.isRecognizing){const m=yield this.fetchConnection();yield this.sendSpeechEvent(m,this.createMeetingSpeechEventPayload(S,h))}})}processTypeSpecificMessages(S){return this.processSpeechMessages(S)}handleRecognizedCallback(S,h,m){try{const I=new _.SpeechRecognitionEventArgs(S,h,m);if(this.privTranscriberRecognizer.recognized(this.privTranscriberRecognizer,I),this.privSuccessCallback){try{this.privSuccessCallback(S)}catch(M){this.privErrorCallback&&this.privErrorCallback(M)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}catch{}}handleRecognizingCallback(S,h,m){try{const I=new _.SpeechRecognitionEventArgs(S,h,m);this.privTranscriberRecognizer.recognizing(this.privTranscriberRecognizer,I)}catch{}}cancelRecognition(S,h,m,I,M){const T=new _.PropertyCollection;if(T.setProperty(A.CancellationErrorCodePropertyName,_.CancellationErrorCode[I]),this.privTranscriberRecognizer.IsMeetingRecognizer()){if(this.privTranscriberRecognizer.canceled){const N=new _.MeetingTranscriptionCanceledEventArgs(m,M,I,void 0,S);try{this.privTranscriberRecognizer.canceled(this.privTranscriberRecognizer,N)}catch{}}}else if(this.privTranscriberRecognizer.canceled){const N=new _.ConversationTranscriptionCanceledEventArgs(m,M,I,void 0,S);try{this.privTranscriberRecognizer.canceled(this.privTranscriberRecognizer,N)}catch{}}if(this.privSuccessCallback){const N=new _.SpeechRecognitionResult(h,_.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,M,void 0,T);try{this.privSuccessCallback(N),this.privSuccessCallback=void 0}catch{}}}sendTranscriptionStartJSON(S){return o(this,void 0,void 0,function*(){if(yield this.sendSpeechContext(S,!0),this.privTranscriberRecognizer.IsMeetingRecognizer()){const h=this.privTranscriberRecognizer.getMeetingInfo(),m=this.createMeetingSpeechEventPayload(h,"start");yield this.sendSpeechEvent(S,m)}else{const h=this.privTranscriberRecognizer.getConversationInfo(),m=this.createSpeechEventPayload(h,"start");yield this.sendSpeechEvent(S,m)}yield this.sendWaveHeader(S)})}sendSpeechEvent(S,h){const m=JSON.stringify(h);if(m)return S.send(new b.SpeechConnectionMessage(v.MessageType.Text,"speech.event",this.privRequestSession.requestId,"application/json",m))}createSpeechEventPayload(S,h){const m={id:"meeting",name:h,meeting:S.conversationProperties};return m.meeting.id=S.id,m.meeting.attendees=S.participants,m}createMeetingSpeechEventPayload(S,h){const m={id:"meeting",name:h,meeting:S.meetingProperties};return m.meeting.id=S.id,m.meeting.attendees=S.participants,m}}},7282:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.ConversationConnectionConfig=void 0;const o=y(9140);class v extends o.RestConfigBase{static get host(){return v.privHost}static get apiVersion(){return v.privApiVersion}static get clientAppId(){return v.privClientAppId}static get defaultLanguageCode(){return v.privDefaultLanguageCode}static get restPath(){return v.privRestPath}static get webSocketPath(){return v.privWebSocketPath}static get transcriptionEventKeys(){return v.privTranscriptionEventKeys}}p.ConversationConnectionConfig=v,v.privHost="dev.microsofttranslator.com",v.privRestPath="/capito/room",v.privApiVersion="2.0",v.privDefaultLanguageCode="en-US",v.privClientAppId="FC539C22-1767-4F1F-84BC-B4D811114F15",v.privWebSocketPath="/capito/translate",v.privTranscriptionEventKeys=["iCalUid","callId","organizer","FLAC","MTUri","DifferentiateGuestSpeakers","audiorecording","Threadid","OrganizerMri","OrganizerTenantId","UserToken"]},5184:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.ConversationConnectionFactory=void 0;const o=y(4853),v=y(847),_=y(5916),A=y(8323),b=y(6389),P=y(7282),w=y(7781);p.ConversationConnectionFactory=class S extends b.ConnectionFactoryBase{create(m,I,M){const T=m.parameters.getProperty(A.PropertyId.ConversationTranslator_Host,P.ConversationConnectionConfig.host),N=m.parameters.getProperty(A.PropertyId.ConversationTranslator_CorrelationId,v.createGuid()),L=`wss://${T}${P.ConversationConnectionConfig.webSocketPath}`,z=m.parameters.getProperty(A.PropertyId.ConversationTranslator_Token,void 0);_.Contracts.throwIfNullOrUndefined(z,"token");const V={};V[P.ConversationConnectionConfig.configParams.apiVersion]=P.ConversationConnectionConfig.apiVersion,V[P.ConversationConnectionConfig.configParams.token]=z,V[P.ConversationConnectionConfig.configParams.correlationId]=N;const q="true"===m.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new o.WebsocketConnection(L,V,{},new w.ConversationWebsocketMessageFormatter,o.ProxyInfo.fromRecognizerConfig(m),q,M)}}},6317:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.ConversationConnectionMessage=void 0;const o=y(847);p.ConversationConnectionMessage=class v extends o.ConnectionMessage{constructor(A,b,P,w){super(A,b,P,w);const S=JSON.parse(this.textBody);void 0!==S.type&&(this.privConversationMessageType=S.type)}get conversationMessageType(){return this.privConversationMessageType}}},9720:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.ConversationManager=void 0;const o=y(4853),v=y(5916),_=y(8323),A=y(7282);p.ConversationManager=class b{constructor(){this.privRequestParams=A.ConversationConnectionConfig.configParams,this.privErrors=A.ConversationConnectionConfig.restErrors,this.privHost=A.ConversationConnectionConfig.host,this.privApiVersion=A.ConversationConnectionConfig.apiVersion,this.privRestPath=A.ConversationConnectionConfig.restPath,this.privRestAdapter=new o.RestMessageAdapter({})}createOrJoin(w,S,h,m){try{v.Contracts.throwIfNullOrUndefined(w,"args");const I=w.getProperty(_.PropertyId.SpeechServiceConnection_RecoLanguage,A.ConversationConnectionConfig.defaultLanguageCode),M=w.getProperty(_.PropertyId.ConversationTranslator_Name,"conversation_host"),T=w.getProperty(_.PropertyId.ConversationTranslator_Host,this.privHost),N=w.getProperty(_.PropertyId.ConversationTranslator_CorrelationId),L=w.getProperty(_.PropertyId.SpeechServiceConnection_Key),z=w.getProperty(_.PropertyId.SpeechServiceConnection_Region),V=w.getProperty(_.PropertyId.SpeechServiceAuthorization_Token);v.Contracts.throwIfNullOrWhitespace(I,"languageCode"),v.Contracts.throwIfNullOrWhitespace(M,"nickname"),v.Contracts.throwIfNullOrWhitespace(T,"endpointHost");const q={};q[this.privRequestParams.apiVersion]=this.privApiVersion,q[this.privRequestParams.languageCode]=I,q[this.privRequestParams.nickname]=M;const X={};N&&(X[this.privRequestParams.correlationId]=N),X[this.privRequestParams.clientAppId]=A.ConversationConnectionConfig.clientAppId,void 0!==S?q[this.privRequestParams.roomId]=S:(v.Contracts.throwIfNullOrUndefined(z,this.privErrors.authInvalidSubscriptionRegion),X[this.privRequestParams.subscriptionRegion]=z,L?X[this.privRequestParams.subscriptionKey]=L:V?X[this.privRequestParams.authorization]=`Bearer ${V}`:v.Contracts.throwIfNullOrUndefined(L,this.privErrors.authInvalidSubscriptionKey));const ce={};ce.headers=X,this.privRestAdapter.options=ce,this.privRestAdapter.request(o.RestRequestType.Post,`https://${T}${this.privRestPath}`,q,null).then(pe=>{const Ae=o.RestMessageAdapter.extractHeaderValue(this.privRequestParams.requestId,pe.headers);if(!pe.ok){if(m){let we,Fe=this.privErrors.invalidCreateJoinConversationResponse.replace("{status}",pe.status.toString());try{we=JSON.parse(pe.data),Fe+=` [${we.error.code}: ${we.error.message}]`}catch{Fe+=` [${pe.data}]`}Ae&&(Fe+=` ${Ae}`),m(Fe)}return}const ke=JSON.parse(pe.data);if(ke&&(ke.requestId=Ae),h){try{h(ke)}catch(Fe){m&&m(Fe)}h=void 0}}).catch(()=>{})}catch(I){m&&(I instanceof Error?m(I.name+": "+I.message):m(I))}}leave(w,S){return new Promise((h,m)=>{try{v.Contracts.throwIfNullOrUndefined(w,this.privErrors.invalidArgs.replace("{arg}","config")),v.Contracts.throwIfNullOrWhitespace(S,this.privErrors.invalidArgs.replace("{arg}","token"));const I=w.getProperty(_.PropertyId.ConversationTranslator_Host,this.privHost),M=w.getProperty(_.PropertyId.ConversationTranslator_CorrelationId),T={};T[this.privRequestParams.apiVersion]=this.privApiVersion,T[this.privRequestParams.sessionToken]=S;const N={};M&&(N[this.privRequestParams.correlationId]=M);const L={};L.headers=N,this.privRestAdapter.options=L,this.privRestAdapter.request(o.RestRequestType.Delete,`https://${I}${this.privRestPath}`,T,null).then(V=>{h()}).catch(()=>{})}catch(I){I instanceof Error?m(I.name+": "+I.message):m(I)}})}}},2765:function(ne,p,y){"use strict";var o=this&&this.__awaiter||function(A,b,P,w){return new(P||(P=Promise))(function(h,m){function I(N){try{T(w.next(N))}catch(L){m(L)}}function M(N){try{T(w.throw(N))}catch(L){m(L)}}function T(N){N.done?h(N.value):function S(h){return h instanceof P?h:new P(function(m){m(h)})}(N.value).then(I,M)}T((w=w.apply(A,b||[])).next())})};Object.defineProperty(p,"__esModule",{value:!0}),p.ConversationRequestSession=void 0;const v=y(847);p.ConversationRequestSession=class _{constructor(b){this.privIsDisposed=!1,this.privDetachables=new Array,this.privSessionId=b,this.privRequestId=v.createNoDashGuid(),this.privRequestCompletionDeferral=new v.Deferred}get sessionId(){return this.privSessionId}get requestId(){return this.privRequestId}get completionPromise(){return this.privRequestCompletionDeferral.promise}onPreConnectionStart(b,P){this.privSessionId=P}onAuthCompleted(b){b&&this.onComplete()}onConnectionEstablishCompleted(b){200!==b&&403===b&&this.onComplete()}onServiceTurnEndResponse(b){b?this.privRequestId=v.createNoDashGuid():this.onComplete()}dispose(){return o(this,void 0,void 0,function*(){if(!this.privIsDisposed){this.privIsDisposed=!0;for(const b of this.privDetachables)yield b.detach()}})}onComplete(){}}},4402:function(ne,p,y){"use strict";var o=this&&this.__awaiter||function(I,M,T,N){return new(T||(T=Promise))(function(z,V){function q(fe){try{ce(N.next(fe))}catch(pe){V(pe)}}function X(fe){try{ce(N.throw(fe))}catch(pe){V(pe)}}function ce(fe){fe.done?z(fe.value):function L(z){return z instanceof T?z:new T(function(V){V(z)})}(fe.value).then(q,X)}ce((N=N.apply(I,M||[])).next())})};Object.defineProperty(p,"__esModule",{value:!0}),p.ConversationServiceAdapter=void 0;const v=y(847),_=y(8323),A=y(9464),b=y(6317),P=y(2765),w=y(5319),S=y(8039),h=y(5559);p.ConversationServiceAdapter=class m extends A.ServiceRecognizerBase{constructor(M,T,N,L,z){super(M,T,N,L,z),this.privConnectionConfigPromise=void 0,this.privLastPartialUtteranceId="",this.privConversationServiceConnector=z,this.privConversationAuthentication=M,this.receiveMessageOverride=()=>this.receiveConversationMessageOverride(),this.recognizeOverride=()=>this.noOp(),this.postConnectImplOverride=V=>this.conversationConnectImpl(V),this.configConnectionOverride=()=>this.configConnection(),this.disconnectOverride=()=>this.privDisconnect(),this.privConversationRequestSession=new P.ConversationRequestSession(v.createNoDashGuid()),this.privConversationConnectionFactory=T,this.privConversationIsDisposed=!1}isDisposed(){return super.isDisposed()||this.privConversationIsDisposed}dispose(M){const T=Object.create(null,{dispose:{get:()=>super.dispose}});return o(this,void 0,void 0,function*(){this.privConversationIsDisposed=!0,void 0!==this.privConnectionConfigPromise&&(yield(yield this.privConnectionConfigPromise).dispose(M)),yield T.dispose.call(this,M)})}sendMessage(M){return o(this,void 0,void 0,function*(){return(yield this.fetchConnection()).send(new b.ConversationConnectionMessage(v.MessageType.Text,M))})}sendMessageAsync(M){return o(this,void 0,void 0,function*(){yield(yield this.fetchConnection()).send(new b.ConversationConnectionMessage(v.MessageType.Text,M))})}privDisconnect(){if(!this.terminateMessageLoop)return this.cancelRecognition(this.privConversationRequestSession.sessionId,this.privConversationRequestSession.requestId,_.CancellationReason.Error,_.CancellationErrorCode.NoError,"Disconnecting"),this.terminateMessageLoop=!0,Promise.resolve()}processTypeSpecificMessages(){return o(this,void 0,void 0,function*(){return!0})}cancelRecognition(M,T,N,L,z){this.terminateMessageLoop=!0;const V=new _.ConversationTranslationCanceledEventArgs(N,z,L,void 0,M);try{this.privConversationServiceConnector.canceled&&this.privConversationServiceConnector.canceled(this.privConversationServiceConnector,V)}catch{}}conversationConnectImpl(M){return o(this,void 0,void 0,function*(){return this.privConnectionLoop=this.startMessageLoop(),M})}receiveConversationMessageOverride(){return o(this,void 0,void 0,function*(){if(this.isDisposed()||this.terminateMessageLoop)return Promise.resolve();const M=new v.Deferred;try{const N=yield(yield this.fetchConnection()).read();if(this.isDisposed()||this.terminateMessageLoop)return M.resolve(),Promise.resolve();if(!N)return this.receiveConversationMessageOverride();const L=this.privConversationRequestSession.sessionId,z=N.conversationMessageType.toLowerCase();let V=!1;try{switch(z){case"info":case"participant_command":case"command":const q=h.CommandResponsePayload.fromJSON(N.textBody);switch(q.command.toLowerCase()){case"participantlist":const ke=h.ParticipantsListPayloadResponse.fromJSON(N.textBody),Fe=ke.participants.map(Xe=>({avatar:Xe.avatar,displayName:Xe.nickname,id:Xe.participantId,isHost:Xe.ishost,isMuted:Xe.ismuted,isUsingTts:Xe.usetts,preferredLanguage:Xe.locale}));this.privConversationServiceConnector.participantsListReceived&&this.privConversationServiceConnector.participantsListReceived(this.privConversationServiceConnector,new w.ParticipantsListEventArgs(ke.roomid,ke.token,ke.translateTo,ke.profanityFilter,ke.roomProfanityFilter,ke.roomLocked,ke.muteAll,Fe,L));break;case"settranslatetolanguages":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new w.ParticipantAttributeEventArgs(q.participantId,S.ConversationTranslatorCommandTypes.setTranslateToLanguages,q.value,L));break;case"setprofanityfiltering":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new w.ParticipantAttributeEventArgs(q.participantId,S.ConversationTranslatorCommandTypes.setProfanityFiltering,q.value,L));break;case"setmute":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new w.ParticipantAttributeEventArgs(q.participantId,S.ConversationTranslatorCommandTypes.setMute,q.value,L));break;case"setmuteall":this.privConversationServiceConnector.muteAllCommandReceived&&this.privConversationServiceConnector.muteAllCommandReceived(this.privConversationServiceConnector,new w.MuteAllEventArgs(q.value,L));break;case"roomexpirationwarning":this.privConversationServiceConnector.conversationExpiration&&this.privConversationServiceConnector.conversationExpiration(this.privConversationServiceConnector,new _.ConversationExpirationEventArgs(q.value,this.privConversationRequestSession.sessionId));break;case"setusetts":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new w.ParticipantAttributeEventArgs(q.participantId,S.ConversationTranslatorCommandTypes.setUseTTS,q.value,L));break;case"setlockstate":this.privConversationServiceConnector.lockRoomCommandReceived&&this.privConversationServiceConnector.lockRoomCommandReceived(this.privConversationServiceConnector,new w.LockRoomEventArgs(q.value,L));break;case"changenickname":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new w.ParticipantAttributeEventArgs(q.participantId,S.ConversationTranslatorCommandTypes.changeNickname,q.value,L));break;case"joinsession":const we=h.ParticipantPayloadResponse.fromJSON(N.textBody);this.privConversationServiceConnector.participantJoinCommandReceived&&this.privConversationServiceConnector.participantJoinCommandReceived(this.privConversationServiceConnector,new w.ParticipantEventArgs({avatar:we.avatar,displayName:we.nickname,id:we.participantId,isHost:we.ishost,isMuted:we.ismuted,isUsingTts:we.usetts,preferredLanguage:we.locale},L));break;case"leavesession":this.privConversationServiceConnector.participantLeaveCommandReceived&&this.privConversationServiceConnector.participantLeaveCommandReceived(this.privConversationServiceConnector,new w.ParticipantEventArgs({id:q.participantId},L));break;case"disconnectsession":break;case"token":const ot=new A.CognitiveTokenAuthentication(()=>Promise.resolve(q.token),()=>Promise.resolve(q.token));this.authentication=ot,this.privConversationServiceConnector.onToken(ot)}break;case"partial":case"final":const X=h.SpeechResponsePayload.fromJSON(N.textBody),ce="final"===z?_.ResultReason.TranslatedParticipantSpeech:_.ResultReason.TranslatingParticipantSpeech,fe=new _.ConversationTranslationResult(X.participantId,this.getTranslations(X.translations),X.language,X.id,ce,X.recognition,void 0,void 0,N.textBody,void 0);X.isFinal?((void 0!==fe.text&&fe.text.length>0||X.id===this.privLastPartialUtteranceId)&&(V=!0),V&&this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new w.ConversationReceivedTranslationEventArgs(S.ConversationTranslatorMessageTypes.final,fe,L))):void 0!==fe.text&&(this.privLastPartialUtteranceId=X.id,this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new w.ConversationReceivedTranslationEventArgs(S.ConversationTranslatorMessageTypes.partial,fe,L)));break;case"translated_message":const pe=h.TextResponsePayload.fromJSON(N.textBody),Ae=new _.ConversationTranslationResult(pe.participantId,this.getTranslations(pe.translations),pe.language,void 0,void 0,pe.originalText,void 0,void 0,void 0,N.textBody,void 0);this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new w.ConversationReceivedTranslationEventArgs(S.ConversationTranslatorMessageTypes.instantMessage,Ae,L))}}catch{}return this.receiveConversationMessageOverride()}catch{this.terminateMessageLoop=!0}return M.promise})}startMessageLoop(){return o(this,void 0,void 0,function*(){if(this.isDisposed())return Promise.resolve();this.terminateMessageLoop=!1;const M=this.receiveConversationMessageOverride();try{return yield M}catch(T){return this.cancelRecognition(this.privRequestSession?this.privRequestSession.sessionId:"",this.privRequestSession?this.privRequestSession.requestId:"",_.CancellationReason.Error,_.CancellationErrorCode.RuntimeError,T),null}})}configConnection(){return this.isDisposed()?Promise.resolve(void 0):void 0!==this.privConnectionConfigPromise?this.privConnectionConfigPromise.then(M=>M.state()===v.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigPromise=void 0,this.configConnection()):this.privConnectionConfigPromise,()=>(this.privConnectionId=null,this.privConnectionConfigPromise=void 0,this.configConnection())):this.terminateMessageLoop?Promise.resolve(void 0):(this.privConnectionConfigPromise=this.connectImpl().then(M=>M),this.privConnectionConfigPromise)}getTranslations(M){let T;if(void 0!==M){T=new _.Translations;for(const N of M)T.set(N.lang,N.translation)}return T}}},4123:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.ConversationTranslatorConnectionFactory=void 0;const o=y(4853),v=y(2214),_=y(5916),A=y(8323),b=y(3747),P=y(5730),w=y(6389),S=y(9464);class h extends w.ConnectionFactoryBase{constructor(I){super(),_.Contracts.throwIfNullOrUndefined(I,"convGetter"),this.privConvGetter=I}create(I,M,T){const N="TRUE"===I.parameters.getProperty("ConversationTranslator_MultiChannelAudio","").toUpperCase(),L=this.privConvGetter().room,z=L.cognitiveSpeechRegion||I.parameters.getProperty(A.PropertyId.SpeechServiceConnection_Region,""),V={hostSuffix:w.ConnectionFactoryBase.getHostSuffix(z),path:h.CTS_VIRT_MIC_PATH,region:encodeURIComponent(z)};V[P.QueryParameterNames.Language]=encodeURIComponent(I.parameters.getProperty(A.PropertyId.SpeechServiceConnection_RecoLanguage,"")),V[P.QueryParameterNames.CtsMeetingId]=encodeURIComponent(L.roomId),V[P.QueryParameterNames.CtsDeviceId]=encodeURIComponent(L.participantId),V[P.QueryParameterNames.CtsIsParticipant]=L.isHost?"":"&"+P.QueryParameterNames.CtsIsParticipant;let q="";const X={},ce={};if(N){q=I.parameters.getProperty(A.PropertyId.SpeechServiceConnection_Endpoint),q||(q="wss://"+I.parameters.getProperty(A.PropertyId.SpeechServiceConnection_Host,"transcribe.{region}.cts.speech{hostSuffix}")+"{path}"),q=v.StringUtils.formatString(q,V);const pe=new URL(q);pe.searchParams.forEach((ke,Fe)=>{X[Fe]=ke}),(new S.TranscriberConnectionFactory).setQueryParams(X,I,q),X[P.QueryParameterNames.CtsMeetingId]=V[P.QueryParameterNames.CtsMeetingId],X[P.QueryParameterNames.CtsDeviceId]=V[P.QueryParameterNames.CtsDeviceId],L.isHost||(X[P.QueryParameterNames.CtsIsParticipant]=""),P.QueryParameterNames.Format in X||(X[P.QueryParameterNames.Format]="simple"),pe.searchParams.forEach((ke,Fe)=>{pe.searchParams.set(Fe,X[Fe]),delete X[Fe]}),q=pe.toString()}else{const pe=new S.TranslationConnectionFactory;q=pe.getEndpointUrl(I,!0),q=v.StringUtils.formatString(q,V),pe.setQueryParams(X,I,q)}ce[b.HeaderNames.ConnectionId]=T,ce[o.RestConfigBase.configParams.token]=L.token,M.token&&(ce[M.headerName]=M.token);const fe="TRUE"===I.parameters.getProperty("SPEECH-EnableWebsocketCompression","").toUpperCase();return new o.WebsocketConnection(q,X,ce,new S.WebsocketMessageFormatter,o.ProxyInfo.fromRecognizerConfig(I),fe,T)}}p.ConversationTranslatorConnectionFactory=h,h.CTS_VIRT_MIC_PATH="/speech/recognition/dynamicaudio"},5319:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.ConversationReceivedTranslationEventArgs=p.ParticipantsListEventArgs=p.ParticipantAttributeEventArgs=p.ParticipantEventArgs=p.LockRoomEventArgs=p.MuteAllEventArgs=void 0;const o=y(8323);p.MuteAllEventArgs=class v extends o.SessionEventArgs{constructor(h,m){super(m),this.privIsMuted=h}get isMuted(){return this.privIsMuted}},p.LockRoomEventArgs=class _ extends o.SessionEventArgs{constructor(h,m){super(m),this.privIsLocked=h}get isMuted(){return this.privIsLocked}},p.ParticipantEventArgs=class A extends o.SessionEventArgs{constructor(h,m){super(m),this.privParticipant=h}get participant(){return this.privParticipant}},p.ParticipantAttributeEventArgs=class b extends o.SessionEventArgs{constructor(h,m,I,M){super(M),this.privKey=m,this.privValue=I,this.privParticipantId=h}get value(){return this.privValue}get key(){return this.privKey}get id(){return this.privParticipantId}},p.ParticipantsListEventArgs=class P extends o.SessionEventArgs{constructor(h,m,I,M,T,N,L,z,V){super(V),this.privRoomId=h,this.privSessionToken=m,this.privTranslateTo=I,this.privProfanityFilter=M,this.privRoomProfanityFilter=T,this.privIsRoomLocked=N,this.privIsRoomLocked=L,this.privParticipants=z}get sessionToken(){return this.privSessionToken}get conversationId(){return this.privRoomId}get translateTo(){return this.privTranslateTo}get profanityFilter(){return this.privProfanityFilter}get roomProfanityFilter(){return this.privRoomProfanityFilter}get isRoomLocked(){return this.privIsRoomLocked}get isMuteAll(){return this.privIsMuteAll}get participants(){return this.privParticipants}},p.ConversationReceivedTranslationEventArgs=class w{constructor(h,m,I){this.privPayload=m,this.privCommand=h,this.privSessionId=I}get payload(){return this.privPayload}get command(){return this.privCommand}get sessionId(){return this.privSessionId}}},8039:(ne,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.ConversationTranslatorCommandTypes=p.ConversationTranslatorMessageTypes=p.InternalParticipants=void 0,p.InternalParticipants=class y{constructor(v=[],_){this.participants=v,this.meId=_}addOrUpdateParticipant(v){if(void 0===v)return;const _=this.getParticipantIndex(v.id);return _>-1?this.participants.splice(_,1,v):this.participants.push(v),this.getParticipant(v.id)}getParticipantIndex(v){return this.participants.findIndex(_=>_.id===v)}getParticipant(v){return this.participants.find(_=>_.id===v)}deleteParticipant(v){this.participants=this.participants.filter(_=>_.id!==v)}get host(){return this.participants.find(v=>!0===v.isHost)}get me(){return this.getParticipant(this.meId)}},p.ConversationTranslatorMessageTypes={command:"command",final:"final",info:"info",instantMessage:"instant_message",keepAlive:"keep_alive",partial:"partial",participantCommand:"participant_command",translatedMessage:"translated_message"},p.ConversationTranslatorCommandTypes={changeNickname:"ChangeNickname",disconnectSession:"DisconnectSession",ejectParticipant:"EjectParticipant",instant_message:"instant_message",joinSession:"JoinSession",leaveSession:"LeaveSession",participantList:"ParticipantList",roomExpirationWarning:"RoomExpirationWarning",setLockState:"SetLockState",setMute:"SetMute",setMuteAll:"SetMuteAll",setProfanityFiltering:"SetProfanityFiltering",setTranslateToLanguages:"SetTranslateToLanguages",setUseTTS:"SetUseTTS"}},4994:function(ne,p,y){"use strict";var o=this&&this.__awaiter||function(m,I,M,T){return new(M||(M=Promise))(function(L,z){function V(ce){try{X(T.next(ce))}catch(fe){z(fe)}}function q(ce){try{X(T.throw(ce))}catch(fe){z(fe)}}function X(ce){ce.done?L(ce.value):function N(L){return L instanceof M?L:new M(function(z){z(L)})}(ce.value).then(V,q)}X((T=T.apply(m,I||[])).next())})};Object.defineProperty(p,"__esModule",{value:!0}),p.ConversationTranslatorRecognizer=p.ConversationRecognizerFactory=void 0;const v=y(9464),_=y(847),A=y(5916),b=y(8323),P=y(5184),w=y(4402);p.ConversationRecognizerFactory=class S{static fromConfig(I,M,T){return new h(I,M,T)}};class h extends b.Recognizer{constructor(I,M,T){const N=M;A.Contracts.throwIfNull(N,"speechConfig");const L=I;A.Contracts.throwIfNull(L,"conversationImpl"),super(T,N.properties,new P.ConversationConnectionFactory),this.privConversation=L,this.privIsDisposed=!1,this.privProperties=N.properties.clone(),this.privConnection=b.Connection.fromRecognizer(this),"on"===this.privProperties.getProperty(b.PropertyId.WebWorkerLoadType,"on").toLowerCase()&&typeof Blob<"u"&&typeof Worker<"u"?(this.privSetTimeout=_.Timeout.setTimeout,this.privClearTimeout=_.Timeout.clearTimeout):typeof window<"u"?(this.privSetTimeout=window.setTimeout.bind(window),this.privClearTimeout=window.clearTimeout.bind(window)):(this.privSetTimeout=setTimeout,this.privClearTimeout=clearTimeout)}set connected(I){this.privConnection.connected=I}set disconnected(I){this.privConnection.disconnected=I}get speechRecognitionLanguage(){return this.privSpeechRecognitionLanguage}get properties(){return this.privProperties}isDisposed(){return this.privIsDisposed}connect(I,M,T){try{A.Contracts.throwIfDisposed(this.privIsDisposed),A.Contracts.throwIfNullOrWhitespace(I,"token"),this.privReco.conversationTranslatorToken=I,this.resetConversationTimeout(),this.privReco.connectAsync(M,T)}catch(N){T&&(N instanceof Error?T(N.name+": "+N.message):T(N))}}disconnect(I,M){try{A.Contracts.throwIfDisposed(this.privIsDisposed),void 0!==this.privTimeoutToken&&this.privClearTimeout(this.privTimeoutToken),this.privReco.disconnect().then(()=>{I&&I()},T=>{M&&M(T)})}catch(T){M&&(T instanceof Error?M(T.name+": "+T.message):M(T)),this.dispose(!0).catch(N=>{_.Events.instance.onEvent(new _.BackgroundEvent(N))})}}sendRequest(I,M,T){try{A.Contracts.throwIfDisposed(this.privIsDisposed),this.sendMessage(I,M,T)}catch(N){T&&(N instanceof Error?T(N.name+": "+N.message):T(N)),this.dispose(!0).catch(L=>{_.Events.instance.onEvent(new _.BackgroundEvent(L))})}}onToken(I){this.privConversation.onToken(I)}close(){return o(this,void 0,void 0,function*(){this.privIsDisposed||(this.privConnection&&(this.privConnection.closeConnection(),this.privConnection.close()),this.privConnection=void 0,yield this.dispose(!0))})}dispose(I){const M=Object.create(null,{dispose:{get:()=>super.dispose}});return o(this,void 0,void 0,function*(){this.privIsDisposed||I&&(void 0!==this.privTimeoutToken&&this.privClearTimeout(this.privTimeoutToken),this.privIsDisposed=!0,this.privConnection&&(this.privConnection.closeConnection(),this.privConnection.close(),this.privConnection=void 0),yield M.dispose.call(this,I))})}createRecognizerConfig(I){return new v.RecognizerConfig(I,this.privProperties)}createServiceRecognizer(I,M,T,N){return new w.ConversationServiceAdapter(I,M,T,N,this)}sendMessage(I,M,T){var z,V,q;z=this.privReco.sendMessageAsync(I),V=M,q=T,void 0!==z?z.then(()=>{try{V&&V()}catch(X){q&&q(`'Unhandled error on promise callback: ${X}'`)}},X=>{try{q&&q(X)}catch{}}):q&&q("Null promise"),this.resetConversationTimeout()}resetConversationTimeout(){void 0!==this.privTimeoutToken&&this.privClearTimeout(this.privTimeoutToken),this.privTimeoutToken=this.privSetTimeout(()=>{this.sendRequest(this.privConversation.getKeepAlive())},6e4)}}p.ConversationTranslatorRecognizer=h},7781:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.ConversationWebsocketMessageFormatter=void 0;const o=y(847),v=y(6317);p.ConversationWebsocketMessageFormatter=class _{toConnectionMessage(b){const P=new o.Deferred;try{if(b.messageType===o.MessageType.Text){const w=new v.ConversationConnectionMessage(b.messageType,b.textContent,{},b.id);P.resolve(w)}else b.messageType===o.MessageType.Binary&&P.resolve(new v.ConversationConnectionMessage(b.messageType,b.binaryContent,void 0,b.id))}catch(w){P.reject(`Error formatting the message. Error: ${w}`)}return P.promise}fromConnectionMessage(b){const P=new o.Deferred;try{b.messageType===o.MessageType.Text&&P.resolve(new o.RawWebsocketMessage(o.MessageType.Text,`${b.textBody?b.textBody:""}`,b.id))}catch(w){P.reject(`Error formatting the message. ${w}`)}return P.promise}}},1664:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0});var o=y(9720);Object.defineProperty(p,"ConversationManager",{enumerable:!0,get:function(){return o.ConversationManager}});var v=y(7282);Object.defineProperty(p,"ConversationConnectionConfig",{enumerable:!0,get:function(){return v.ConversationConnectionConfig}});var _=y(4994);Object.defineProperty(p,"ConversationRecognizerFactory",{enumerable:!0,get:function(){return _.ConversationRecognizerFactory}});var A=y(6414);Object.defineProperty(p,"TranscriberRecognizer",{enumerable:!0,get:function(){return A.TranscriberRecognizer}});var b=y(5319);Object.defineProperty(p,"ConversationReceivedTranslationEventArgs",{enumerable:!0,get:function(){return b.ConversationReceivedTranslationEventArgs}}),Object.defineProperty(p,"LockRoomEventArgs",{enumerable:!0,get:function(){return b.LockRoomEventArgs}}),Object.defineProperty(p,"MuteAllEventArgs",{enumerable:!0,get:function(){return b.MuteAllEventArgs}}),Object.defineProperty(p,"ParticipantAttributeEventArgs",{enumerable:!0,get:function(){return b.ParticipantAttributeEventArgs}}),Object.defineProperty(p,"ParticipantEventArgs",{enumerable:!0,get:function(){return b.ParticipantEventArgs}}),Object.defineProperty(p,"ParticipantsListEventArgs",{enumerable:!0,get:function(){return b.ParticipantsListEventArgs}});var P=y(8039);Object.defineProperty(p,"ConversationTranslatorCommandTypes",{enumerable:!0,get:function(){return P.ConversationTranslatorCommandTypes}}),Object.defineProperty(p,"ConversationTranslatorMessageTypes",{enumerable:!0,get:function(){return P.ConversationTranslatorMessageTypes}}),Object.defineProperty(p,"InternalParticipants",{enumerable:!0,get:function(){return P.InternalParticipants}})},1533:(ne,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.CommandResponsePayload=void 0;class o{constructor(_){this.privCommandResponse=JSON.parse(_)}get type(){return this.privCommandResponse.type}get command(){return this.privCommandResponse.command}get id(){return this.privCommandResponse.id}get nickname(){return this.privCommandResponse.nickname}get participantId(){return this.privCommandResponse.participantId}get roomid(){return this.privCommandResponse.roomid}get value(){return this.privCommandResponse.value}get token(){return this.privCommandResponse.token}static fromJSON(_){return new o(_)}}p.CommandResponsePayload=o},5559:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0});var o=y(1533);Object.defineProperty(p,"CommandResponsePayload",{enumerable:!0,get:function(){return o.CommandResponsePayload}});var v=y(9379);Object.defineProperty(p,"ParticipantsListPayloadResponse",{enumerable:!0,get:function(){return v.ParticipantsListPayloadResponse}}),Object.defineProperty(p,"ParticipantPayloadResponse",{enumerable:!0,get:function(){return v.ParticipantPayloadResponse}});var _=y(7870);Object.defineProperty(p,"SpeechResponsePayload",{enumerable:!0,get:function(){return _.SpeechResponsePayload}}),Object.defineProperty(p,"TextResponsePayload",{enumerable:!0,get:function(){return _.TextResponsePayload}})},9379:(ne,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.ParticipantPayloadResponse=p.ParticipantsListPayloadResponse=void 0;class v{constructor(b){this.privParticipantsPayloadResponse=JSON.parse(b)}get roomid(){return this.privParticipantsPayloadResponse.roomid}get id(){return this.privParticipantsPayloadResponse.id}get command(){return this.privParticipantsPayloadResponse.command}get participants(){return this.privParticipantsPayloadResponse.participants}get token(){return this.privParticipantsPayloadResponse.token}get translateTo(){return this.privParticipantsPayloadResponse.translateTo}get profanityFilter(){return this.privParticipantsPayloadResponse.profanityFilter}get roomProfanityFilter(){return this.privParticipantsPayloadResponse.roomProfanityFilter}get roomLocked(){return this.privParticipantsPayloadResponse.roomLocked}get muteAll(){return this.privParticipantsPayloadResponse.muteAll}get type(){return this.privParticipantsPayloadResponse.type}static fromJSON(b){return new v(b)}}p.ParticipantsListPayloadResponse=v;class _{constructor(b){this.privParticipantPayloadResponse=JSON.parse(b)}get nickname(){return this.privParticipantPayloadResponse.nickname}get locale(){return this.privParticipantPayloadResponse.locale}get usetts(){return this.privParticipantPayloadResponse.usetts}get ismuted(){return this.privParticipantPayloadResponse.ismuted}get ishost(){return this.privParticipantPayloadResponse.ishost}get participantId(){return this.privParticipantPayloadResponse.participantId}get avatar(){return this.privParticipantPayloadResponse.avatar}static fromJSON(b){return new _(b)}}p.ParticipantPayloadResponse=_},7870:(ne,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.TextResponsePayload=p.SpeechResponsePayload=void 0;class v{constructor(b){this.privSpeechResponse=JSON.parse(b)}get recognition(){return this.privSpeechResponse.recognition}get translations(){return this.privSpeechResponse.translations}get id(){return this.privSpeechResponse.id}get language(){return this.privSpeechResponse.language}get nickname(){return this.privSpeechResponse.nickname}get participantId(){return this.privSpeechResponse.participantId}get roomid(){return this.privSpeechResponse.roomid}get timestamp(){return this.privSpeechResponse.timestamp}get type(){return this.privSpeechResponse.type}get isFinal(){return"final"===this.privSpeechResponse.type}static fromJSON(b){return new v(b)}}p.SpeechResponsePayload=v;class _{constructor(b){this.privTextResponse=JSON.parse(b)}get originalText(){return this.privTextResponse.originalText}get translations(){return this.privTextResponse.translations}get id(){return this.privTextResponse.id}get language(){return this.privTextResponse.language}get nickname(){return this.privTextResponse.nickname}get participantId(){return this.privTextResponse.participantId}get roomid(){return this.privTextResponse.roomid}get timestamp(){return this.privTextResponse.timestamp}get type(){return this.privTextResponse.type}static fromJSON(b){return new _(b)}}p.TextResponsePayload=_},6414:function(ne,p,y){"use strict";var o=this&&this.__awaiter||function(w,S,h,m){return new(h||(h=Promise))(function(M,T){function N(V){try{z(m.next(V))}catch(q){T(q)}}function L(V){try{z(m.throw(V))}catch(q){T(q)}}function z(V){V.done?M(V.value):function I(M){return M instanceof h?M:new h(function(T){T(M)})}(V.value).then(N,L)}z((m=m.apply(w,S||[])).next())})};Object.defineProperty(p,"__esModule",{value:!0}),p.TranscriberRecognizer=void 0;const v=y(847),_=y(5916),A=y(8323),b=y(9464);p.TranscriberRecognizer=class P extends A.Recognizer{constructor(S,h){const m=S;_.Contracts.throwIfNull(m,"speechTranslationConfig"),_.Contracts.throwIfNull(h,"audioConfigImpl"),_.Contracts.throwIfNullOrWhitespace(m.speechRecognitionLanguage,A.PropertyId[A.PropertyId.SpeechServiceConnection_RecoLanguage]),super(h,m.properties,new b.TranscriberConnectionFactory),this.privDisposedRecognizer=!1,this.isMeetingRecognizer=!1}get speechRecognitionLanguage(){return _.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(A.PropertyId.SpeechServiceConnection_RecoLanguage)}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(A.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(S){_.Contracts.throwIfNullOrWhitespace(S,"token"),this.properties.setProperty(A.PropertyId.SpeechServiceAuthorization_Token,S)}set conversation(S){_.Contracts.throwIfNullOrUndefined(S,"Conversation"),this.isMeetingRecognizer=!1,this.privConversation=S}getConversationInfo(){return _.Contracts.throwIfNullOrUndefined(this.privConversation,"Conversation"),this.privConversation.conversationInfo}set meeting(S){_.Contracts.throwIfNullOrUndefined(S,"Meeting"),this.isMeetingRecognizer=!0,this.privMeeting=S}getMeetingInfo(){return _.Contracts.throwIfNullOrUndefined(this.privMeeting,"Meeting"),this.privMeeting.meetingInfo}IsMeetingRecognizer(){return this.isMeetingRecognizer}startContinuousRecognitionAsync(S,h){v.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(b.RecognitionMode.Conversation),S,h)}stopContinuousRecognitionAsync(S,h){v.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),S,h)}close(){return o(this,void 0,void 0,function*(){this.privDisposedRecognizer||(yield this.dispose(!0))})}pushConversationEvent(S,h){return o(this,void 0,void 0,function*(){const m=this.privReco;_.Contracts.throwIfNullOrUndefined(m,"serviceRecognizer"),yield m.sendSpeechEventAsync(S,h)})}pushMeetingEvent(S,h){return o(this,void 0,void 0,function*(){const m=this.privReco;_.Contracts.throwIfNullOrUndefined(m,"serviceRecognizer"),yield m.sendMeetingSpeechEventAsync(S,h)})}enforceAudioGating(){return o(this,void 0,void 0,function*(){const m=(yield this.audioConfig.format).channels;if(1===m){if("true"!==this.properties.getProperty("f0f5debc-f8c9-4892-ac4b-90a7ab359fd2","false").toLowerCase())throw new Error("Single channel audio configuration for MeetingTranscriber is currently under private preview, please contact diarizationrequest@microsoft.com for more details")}else if(8!==m)throw new Error(`Unsupported audio configuration: Detected ${m}-channel audio`)})}connectMeetingCallbacks(S){this.isMeetingRecognizer=!0,this.canceled=(h,m)=>{S.canceled&&S.canceled(S,m)},this.recognizing=(h,m)=>{S.transcribing&&S.transcribing(S,m)},this.recognized=(h,m)=>{S.transcribed&&S.transcribed(S,m)},this.sessionStarted=(h,m)=>{S.sessionStarted&&S.sessionStarted(S,m)},this.sessionStopped=(h,m)=>{S.sessionStopped&&S.sessionStopped(S,m)}}disconnectCallbacks(){this.canceled=void 0,this.recognizing=void 0,this.recognized=void 0,this.sessionStarted=void 0,this.sessionStopped=void 0}dispose(S){const h=Object.create(null,{dispose:{get:()=>super.dispose}});return o(this,void 0,void 0,function*(){this.privDisposedRecognizer||(S&&(this.privDisposedRecognizer=!0,yield this.implRecognizerStop()),yield h.dispose.call(this,S))})}createRecognizerConfig(S){return new b.RecognizerConfig(S,this.properties)}createServiceRecognizer(S,h,m,I){return new b.TranscriptionServiceRecognizer(S,h,m,I,this)}}},8444:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.TranslationConnectionFactory=void 0;const o=y(4853),v=y(2214),_=y(8323),A=y(6389),b=y(9464),P=y(3747),w=y(5730);p.TranslationConnectionFactory=class S extends A.ConnectionFactoryBase{create(m,I,M){const T=this.getEndpointUrl(m),N={};void 0!==m.autoDetectSourceLanguages&&(N[w.QueryParameterNames.EnableLanguageId]="true"),this.setQueryParams(N,m,T);const L={};void 0!==I.token&&""!==I.token&&(L[I.headerName]=I.token),L[P.HeaderNames.ConnectionId]=M,m.parameters.setProperty(_.PropertyId.SpeechServiceConnection_Url,T);const z="true"===m.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new o.WebsocketConnection(T,N,L,new b.WebsocketMessageFormatter,o.ProxyInfo.fromRecognizerConfig(m),z,M)}getEndpointUrl(m,I){const M=m.parameters.getProperty(_.PropertyId.SpeechServiceConnection_Region),T=A.ConnectionFactoryBase.getHostSuffix(M);let N=m.parameters.getProperty(_.PropertyId.SpeechServiceConnection_Endpoint,void 0);return N||(N=void 0!==m.autoDetectSourceLanguages?m.parameters.getProperty(_.PropertyId.SpeechServiceConnection_Host,"wss://{region}.stt.speech"+T)+"/speech/universal/v2":m.parameters.getProperty(_.PropertyId.SpeechServiceConnection_Host,"wss://{region}.s2s.speech"+T)+"/speech/translation/cognitiveservices/v1"),!0===I?N:v.StringUtils.formatString(N,{region:M})}setQueryParams(m,I,M){m.from=I.parameters.getProperty(_.PropertyId.SpeechServiceConnection_RecoLanguage),m.to=I.parameters.getProperty(_.PropertyId.SpeechServiceConnection_TranslationToLanguages),m.scenario=I.recognitionMode===b.RecognitionMode.Interactive?"interactive":I.recognitionMode===b.RecognitionMode.Conversation?"conversation":"",this.setCommonUrlParams(I,m,M),this.setUrlParameter(_.PropertyId.SpeechServiceResponse_TranslationRequestStablePartialResult,w.QueryParameterNames.StableTranslation,I,m,M);const T=I.parameters.getProperty(_.PropertyId.SpeechServiceConnection_TranslationVoice,void 0);void 0!==T&&(m.voice=T,m.features="texttospeech")}}},9386:function(ne,p,y){"use strict";var o=this&&this.__awaiter||function(P,w,S,h){return new(S||(S=Promise))(function(I,M){function T(z){try{L(h.next(z))}catch(V){M(V)}}function N(z){try{L(h.throw(z))}catch(V){M(V)}}function L(z){z.done?I(z.value):function m(I){return I instanceof S?I:new S(function(M){M(I)})}(z.value).then(T,N)}L((h=h.apply(P,w||[])).next())})};Object.defineProperty(p,"__esModule",{value:!0}),p.TranslationServiceRecognizer=void 0;const v=y(847),_=y(8323),A=y(9464);p.TranslationServiceRecognizer=class b extends A.ConversationServiceRecognizer{constructor(w,S,h,m,I){super(w,S,h,m,I),this.privTranslationRecognizer=I,this.connectionEvents.attach(M=>{"ConnectionEstablishedEvent"===M.name&&this.privTranslationRecognizer.onConnection()})}processTypeSpecificMessages(w){return o(this,void 0,void 0,function*(){const S=new _.PropertyCollection;let h=yield this.processSpeechMessages(w);if(h)return!0;const m=M=>o(this,void 0,void 0,function*(){if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+M.Offset+M.Duration),M.RecognitionStatus===A.RecognitionStatus.Success){const T=this.fireEventForResult(M,S);if(this.privTranslationRecognizer.recognized)try{this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,T)}catch{}if(this.privSuccessCallback){try{this.privSuccessCallback(T.result)}catch(N){this.privErrorCallback&&this.privErrorCallback(N)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}else{const T=A.EnumTranslation.implTranslateRecognitionResult(M.RecognitionStatus),N=new _.TranslationRecognitionResult(void 0,this.privRequestSession.requestId,T,M.Text,M.Duration,this.privRequestSession.currentTurnAudioOffset+M.Offset,M.Language,M.Confidence,void 0,w.textBody,S);if(T===_.ResultReason.Canceled){const L=A.EnumTranslation.implTranslateCancelResult(M.RecognitionStatus),z=A.EnumTranslation.implTranslateCancelErrorCode(M.RecognitionStatus);yield this.cancelRecognitionLocal(L,z,A.EnumTranslation.implTranslateErrorDetails(z))}else{if(!this.privRequestSession.isSpeechEnded||T!==_.ResultReason.NoMatch||M.RecognitionStatus===A.RecognitionStatus.InitialSilenceTimeout){const L=new _.TranslationRecognitionEventArgs(N,N.offset,this.privRequestSession.sessionId);if(this.privTranslationRecognizer.recognized)try{this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,L)}catch{}}if(this.privSuccessCallback){try{this.privSuccessCallback(N)}catch(L){this.privErrorCallback&&this.privErrorCallback(L)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}h=!0}}),I=(M,T)=>{const N=this.fireEventForResult(M,T);if(this.privRequestSession.onHypothesis(this.privRequestSession.currentTurnAudioOffset+N.offset),this.privTranslationRecognizer.recognizing)try{this.privTranslationRecognizer.recognizing(this.privTranslationRecognizer,N)}catch{}h=!0};switch(w.messageType===v.MessageType.Text&&S.setProperty(_.PropertyId.SpeechServiceResponse_JsonResult,w.textBody),w.path.toLowerCase()){case"translation.hypothesis":I(A.TranslationHypothesis.fromJSON(w.textBody),S);break;case"translation.response":const M=JSON.parse(w.textBody);if(M.SpeechPhrase)yield m(A.TranslationPhrase.fromTranslationResponse(M));else{const N=JSON.parse(w.textBody);N.SpeechHypothesis&&I(A.TranslationHypothesis.fromTranslationResponse(N),S)}break;case"translation.phrase":yield m(A.TranslationPhrase.fromJSON(w.textBody));break;case"translation.synthesis":this.sendSynthesisAudio(w.binaryBody,this.privRequestSession.sessionId),h=!0;break;case"audio.end":case"translation.synthesis.end":const T=A.TranslationSynthesisEnd.fromJSON(w.textBody);switch(T.SynthesisStatus){case A.SynthesisStatus.Error:if(this.privTranslationRecognizer.synthesizing){const N=new _.TranslationSynthesisResult(_.ResultReason.Canceled,void 0),L=new _.TranslationSynthesisEventArgs(N,this.privRequestSession.sessionId);try{this.privTranslationRecognizer.synthesizing(this.privTranslationRecognizer,L)}catch{}}if(this.privTranslationRecognizer.canceled){const N=new _.TranslationRecognitionCanceledEventArgs(this.privRequestSession.sessionId,_.CancellationReason.Error,T.FailureReason,_.CancellationErrorCode.ServiceError,null);try{this.privTranslationRecognizer.canceled(this.privTranslationRecognizer,N)}catch{}}break;case A.SynthesisStatus.Success:this.sendSynthesisAudio(void 0,this.privRequestSession.sessionId)}h=!0}return h})}cancelRecognition(w,S,h,m,I){const M=new _.PropertyCollection;if(M.setProperty(A.CancellationErrorCodePropertyName,_.CancellationErrorCode[m]),this.privTranslationRecognizer.canceled){const T=new _.TranslationRecognitionCanceledEventArgs(w,h,I,m,void 0);try{this.privTranslationRecognizer.canceled(this.privTranslationRecognizer,T)}catch{}}if(this.privSuccessCallback){const T=new _.TranslationRecognitionResult(void 0,S,_.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,I,void 0,M);try{this.privSuccessCallback(T),this.privSuccessCallback=void 0}catch{}}}handleRecognizingCallback(w,S,h){try{const m=new _.TranslationRecognitionEventArgs(_.TranslationRecognitionResult.fromSpeechRecognitionResult(w),S,h);this.privTranslationRecognizer.recognizing(this.privTranslationRecognizer,m)}catch{}}handleRecognizedCallback(w,S,h){try{const m=new _.TranslationRecognitionEventArgs(_.TranslationRecognitionResult.fromSpeechRecognitionResult(w),S,h);this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,m)}catch{}}fireEventForResult(w,S){let h,m,I;if(void 0!==w.Translation.Translations){h=new _.Translations;for(const z of w.Translation.Translations)h.set(z.Language,z.Text||z.DisplayText)}w instanceof A.TranslationPhrase?(m=w.Translation&&w.Translation.TranslationStatus===v.TranslationStatus.Success?_.ResultReason.TranslatedSpeech:_.ResultReason.RecognizedSpeech,I=w.Confidence):m=_.ResultReason.TranslatingSpeech;const T=w.Offset+this.privRequestSession.currentTurnAudioOffset,N=new _.TranslationRecognitionResult(h,this.privRequestSession.requestId,m,w.Text,w.Duration,T,w.Language,I,w.Translation.FailureReason,JSON.stringify(w),S);return new _.TranslationRecognitionEventArgs(N,T,this.privRequestSession.sessionId)}sendSynthesisAudio(w,S){const m=new _.TranslationSynthesisResult(void 0===w?_.ResultReason.SynthesizingAudioCompleted:_.ResultReason.SynthesizingAudio,w),I=new _.TranslationSynthesisEventArgs(m,S);if(this.privTranslationRecognizer.synthesizing)try{this.privTranslationRecognizer.synthesizing(this.privTranslationRecognizer,I)}catch{}}}},4609:(ne,p)=>{"use strict";var o;Object.defineProperty(p,"__esModule",{value:!0}),p.TranslationStatus=void 0,(o=p.TranslationStatus||(p.TranslationStatus={}))[o.Success=0]="Success",o[o.Error=1]="Error"},7210:function(ne,p,y){"use strict";var o=this&&this.__awaiter||function(S,h,m,I){return new(m||(m=Promise))(function(T,N){function L(q){try{V(I.next(q))}catch(X){N(X)}}function z(q){try{V(I.throw(q))}catch(X){N(X)}}function V(q){q.done?T(q.value):function M(T){return T instanceof m?T:new m(function(N){N(T)})}(q.value).then(L,z)}V((I=I.apply(S,h||[])).next())})};Object.defineProperty(p,"__esModule",{value:!0}),p.VoiceServiceRecognizer=void 0;const v=y(4853),_=y(847),A=y(8323),b=y(9464),P=y(5328);p.VoiceServiceRecognizer=class w extends b.ServiceRecognizerBase{constructor(h,m,I,M,T){super(h,m,I,M,T),this.privDeferralMap=new _.DeferralMap,this.privSpeakerAudioSource=I,this.sendPrePayloadJSONOverride=()=>this.noOp()}set SpeakerAudioSource(h){this.privSpeakerAudioSource=h}processTypeSpecificMessages(h){let m=!1;const I=new A.PropertyCollection;switch(h.messageType===_.MessageType.Text&&I.setProperty(A.PropertyId.SpeechServiceResponse_JsonResult,h.textBody),h.path.toLowerCase()){case"speaker.profiles":const T=JSON.parse(h.textBody);switch(T.operation.toLowerCase()){case"create":this.handleCreateResponse(T,h.requestId);break;case"delete":case"reset":this.handleResultResponse(T,h.requestId);break;case"fetch":const V=JSON.parse(h.textBody);this.handleFetchResponse(V,h.requestId)}m=!0;break;case"speaker.phrases":const N=JSON.parse(h.textBody);this.handlePhrasesResponse(N,h.requestId),m=!0;break;case"speaker.profile.enrollment":const L=JSON.parse(h.textBody),z=new A.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(L.enrollment?L.enrollment.enrollmentStatus:L.status.statusCode),L.enrollment?JSON.stringify(L.enrollment):void 0,L.status.reason);this.privDeferralMap.getId(h.requestId)&&this.privDeferralMap.complete(h.requestId,z),this.privRequestSession.onSpeechEnded(),m=!0}const M=new _.Deferred;return M.resolve(m),M.promise}cancelRecognition(h,m,I,M,T){(new A.PropertyCollection).setProperty(b.CancellationErrorCodePropertyName,A.CancellationErrorCode[M]);const L=new A.VoiceProfileEnrollmentResult(A.ResultReason.Canceled,T,T);this.privDeferralMap.getId(m)&&this.privDeferralMap.complete(m,L)}createProfile(h,m){return o(this,void 0,void 0,function*(){this.voiceProfileType=h.toString();const I=this.connectImpl();try{const M=new _.Deferred;return yield I,yield this.sendCreateProfile(M,h,m),this.receiveMessage(),M.promise}catch(M){throw M}})}resetProfile(h){return o(this,void 0,void 0,function*(){return this.voiceProfileType=h.profileType.toString(),this.sendCommonRequest("reset",h.profileType,h)})}deleteProfile(h){return o(this,void 0,void 0,function*(){return this.voiceProfileType=h.profileType.toString(),this.sendCommonRequest("delete",h.profileType,h)})}retrieveEnrollmentResult(h){return o(this,void 0,void 0,function*(){return this.voiceProfileType=h.profileType.toString(),this.privExpectedProfileId=h.profileId,this.sendCommonRequest("fetch",h.profileType,h)})}getAllProfiles(h){return o(this,void 0,void 0,function*(){return this.voiceProfileType=h.toString(),this.sendCommonRequest("fetch",h)})}getActivationPhrases(h,m){return o(this,void 0,void 0,function*(){this.voiceProfileType=h.toString();const I=this.connectImpl();try{const M=new _.Deferred;return yield I,yield this.sendPhrasesRequest(M,h,m),this.receiveMessage(),M.promise}catch(M){throw M}})}enrollProfile(h){return o(this,void 0,void 0,function*(){this.voiceProfileType=h.profileType.toString();const m=new _.Deferred;this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privSpeakerAudioSource.events),this.privRecognizerConfig.parameters.setProperty(A.PropertyId.Speech_SessionId,this.privRequestSession.sessionId);const I=this.connectImpl(),M=this.sendPreAudioMessages(h,m),T=yield this.privSpeakerAudioSource.attach(this.privRequestSession.audioNodeId),N=yield this.privSpeakerAudioSource.format,L=yield this.privSpeakerAudioSource.deviceInfo,z=new v.ReplayableAudioNode(T,N.avgBytesPerSec);yield this.privRequestSession.onAudioSourceAttachCompleted(z,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:L};try{yield I,yield M}catch(X){this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,A.CancellationReason.Error,A.CancellationErrorCode.ConnectionFailure,X)}const V=new A.SessionEventArgs(this.privRequestSession.sessionId);return this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,V),this.receiveMessage(),this.sendAudio(z).then(()=>{},X=>{this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,A.CancellationReason.Error,A.CancellationErrorCode.RuntimeError,X)}),m.promise})}sendPreAudioMessages(h,m){return o(this,void 0,void 0,function*(){const I=yield this.fetchConnection();this.privRequestSession.onSpeechContext(),this.privDeferralMap.add(this.privRequestSession.requestId,m),yield this.sendBaseRequest(I,"enroll",this.scenarioFrom(h.profileType),h)})}sendPhrasesRequest(h,m,I){return o(this,void 0,void 0,function*(){const M=yield this.fetchConnection();this.privRequestSession.onSpeechContext(),this.privDeferralMap.add(this.privRequestSession.requestId,h);const T=this.scenarioFrom(m);return M.send(new P.SpeechConnectionMessage(_.MessageType.Text,"speaker.profile.phrases",this.privRequestSession.requestId,"application/json; charset=utf-8",JSON.stringify({locale:I,scenario:T})))})}sendCreateProfile(h,m,I){return o(this,void 0,void 0,function*(){const M=yield this.fetchConnection();return this.privRequestSession.onSpeechContext(),this.privDeferralMap.add(this.privRequestSession.requestId,h),M.send(new P.SpeechConnectionMessage(_.MessageType.Text,"speaker.profile.create",this.privRequestSession.requestId,"application/json; charset=utf-8",JSON.stringify({locale:I,number:"1",scenario:m===A.VoiceProfileType.TextIndependentIdentification?"TextIndependentIdentification":m===A.VoiceProfileType.TextIndependentVerification?"TextIndependentVerification":"TextDependentVerification"})))})}sendCommonRequest(h,m,I){return o(this,void 0,void 0,function*(){const M=this.connectImpl();try{const T=new _.Deferred;this.privRequestSession.onSpeechContext(),yield M;const N=yield this.fetchConnection();return this.privDeferralMap.add(this.privRequestSession.requestId,T),yield this.sendBaseRequest(N,h,this.scenarioFrom(m),I),this.receiveMessage(),T.promise}catch(T){throw T}})}sendBaseRequest(h,m,I,M){return o(this,void 0,void 0,function*(){const T={scenario:I};return M?T.profileIds=[M.profileId]:T.maxPageSize=-1,h.send(new P.SpeechConnectionMessage(_.MessageType.Text,`speaker.profile.${m}`,this.privRequestSession.requestId,"application/json; charset=utf-8",JSON.stringify(T)))})}extractSpeakerContext(h){return{features:{interimResult:"enabled",progressiveDetection:"disabled"},profileIds:h.profileIds,scenario:h.scenario}}handlePhrasesResponse(h,m){if(!this.privDeferralMap.getId(m))throw new Error(`Voice Profile get activation phrases request for requestID ${m} not found`);if("success"!==h.status.statusCode.toLowerCase()){const M=new A.VoiceProfilePhraseResult(A.ResultReason.Canceled,h.status.statusCode,h.passPhraseType,[]);this.privDeferralMap.complete(m,M)}else{if(!(h.phrases&&h.phrases.length>0))throw new Error("Voice Profile get activation phrases failed, no phrases received");{const M=new A.VoiceProfilePhraseResult(A.ResultReason.EnrollingVoiceProfile,h.status.statusCode,h.passPhraseType,h.phrases);this.privDeferralMap.complete(m,M)}}}handleCreateResponse(h,m){if(!(h.profiles&&h.profiles.length>0))throw new Error("Voice Profile create failed, no profile id received");if(!this.privDeferralMap.getId(m))throw new Error(`Voice Profile create request for requestID ${m} not found`);{const I=h.profiles.map(M=>M.profileId);this.privDeferralMap.complete(m,I)}}handleResultResponse(h,m){if(!this.privDeferralMap.getId(m))throw new Error(`Voice Profile create request for requestID ${m} not found`);{const I="delete"===h.operation.toLowerCase()?A.ResultReason.DeletedVoiceProfile:A.ResultReason.ResetVoiceProfile,M="success"===h.status.statusCode.toLowerCase()?I:A.ResultReason.Canceled,T=new A.VoiceProfileResult(M,`statusCode: ${h.status.statusCode}, errorDetails: ${h.status.reason}`);this.privDeferralMap.complete(m,T)}}handleFetchResponse(h,m){if(!this.privDeferralMap.getId(m)||!h.profiles[0])throw new Error(`Voice Profile fetch request for requestID ${m} not found`);if(this.privExpectedProfileId&&1===h.profiles.length&&h.profiles[0].profileId===this.privExpectedProfileId){this.privExpectedProfileId=void 0;const I=h.profiles[0],M=new A.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(I.enrollmentStatus),JSON.stringify(I),h.status.reason);this.privDeferralMap.complete(m,M)}else if(h.profiles.length>0){const I=h.profiles,M=[];for(const T of I)M.push(new A.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(T.enrollmentStatus),JSON.stringify(T),h.status.reason));this.privDeferralMap.complete(m,M)}}enrollmentReasonFrom(h){switch(h.toLowerCase()){case"enrolled":return A.ResultReason.EnrolledVoiceProfile;case"invalidlocale":case"invalidphrase":case"invalidaudioformat":case"invalidscenario":case"invalidprofilecount":case"invalidoperation":case"audiotooshort":case"audiotoolong":case"toomanyenrollments":case"storageconflict":case"profilenotfound":case"incompatibleprofiles":case"incompleteenrollment":return A.ResultReason.Canceled;default:return A.ResultReason.EnrollingVoiceProfile}}scenarioFrom(h){return h===A.VoiceProfileType.TextIndependentIdentification?"TextIndependentIdentification":h===A.VoiceProfileType.TextIndependentVerification?"TextIndependentVerification":"TextDependentVerification"}}},7220:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.WebsocketMessageFormatter=void 0;const o=y(847);p.WebsocketMessageFormatter=class _{toConnectionMessage(b){const P=new o.Deferred;try{if(b.messageType===o.MessageType.Text){const w=b.textContent;let S={},h=null;if(w){const m=w.split("\r\n\r\n");m&&m.length>0&&(S=this.parseHeaders(m[0]),m.length>1&&(h=m[1]))}P.resolve(new o.ConnectionMessage(b.messageType,h,S,b.id))}else if(b.messageType===o.MessageType.Binary){const w=b.binaryContent;let S={},h=null;if(!w||w.byteLength<2)throw new Error("Invalid binary message format. Header length missing.");const m=new DataView(w),I=m.getInt16(0);if(w.byteLength<I+2)throw new Error("Invalid binary message format. Header content missing.");let M="";for(let T=0;T<I;T++)M+=String.fromCharCode(m.getInt8(T+2));S=this.parseHeaders(M),w.byteLength>I+2&&(h=w.slice(2+I)),P.resolve(new o.ConnectionMessage(b.messageType,h,S,b.id))}}catch(w){P.reject(`Error formatting the message. Error: ${w}`)}return P.promise}fromConnectionMessage(b){const P=new o.Deferred;try{if(b.messageType===o.MessageType.Text){const w=`${this.makeHeaders(b)}\r\n${b.textBody?b.textBody:""}`;P.resolve(new o.RawWebsocketMessage(o.MessageType.Text,w,b.id))}else if(b.messageType===o.MessageType.Binary){const w=this.makeHeaders(b),S=b.binaryBody,h=this.stringToArrayBuffer(w),m=new Int8Array(h),I=m.byteLength,M=new Int8Array(2+I+(S?S.byteLength:0));if(M[0]=I>>8&255,M[1]=255&I,M.set(m,2),S){const N=new Int8Array(S);M.set(N,2+I)}P.resolve(new o.RawWebsocketMessage(o.MessageType.Binary,M.buffer,b.id))}}catch(w){P.reject(`Error formatting the message. ${w}`)}return P.promise}makeHeaders(b){let P="";if(b.headers)for(const w in b.headers)w&&(P+=`${w}: ${b.headers[w]}\r\n`);return P}parseHeaders(b){const P={};if(b){const w=b.match(/[^\r\n]+/g);if(P)for(const S of w)if(S){const h=S.indexOf(":"),m=h>0?S.substr(0,h).trim().toLowerCase():S,I=h>0&&S.length>h+1?S.substr(h+1).trim():"";P[m]=I}}return P}stringToArrayBuffer(b){const P=new ArrayBuffer(b.length),w=new DataView(P);for(let S=0;S<b.length;S++)w.setUint8(S,b.charCodeAt(S));return P}}},9992:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.AudioStreamNodeErrorEvent=p.AudioStreamNodeDetachedEvent=p.AudioStreamNodeAttachedEvent=p.AudioStreamNodeAttachingEvent=p.AudioStreamNodeEvent=p.AudioSourceErrorEvent=p.AudioSourceOffEvent=p.AudioSourceReadyEvent=p.AudioSourceInitializingEvent=p.AudioSourceEvent=void 0;const o=y(3980);class v extends o.PlatformEvent{constructor(T,N,L=o.EventType.Info){super(T,L),this.privAudioSourceId=N}get audioSourceId(){return this.privAudioSourceId}}p.AudioSourceEvent=v,p.AudioSourceInitializingEvent=class _ extends v{constructor(T){super("AudioSourceInitializingEvent",T)}},p.AudioSourceReadyEvent=class A extends v{constructor(T){super("AudioSourceReadyEvent",T)}},p.AudioSourceOffEvent=class b extends v{constructor(T){super("AudioSourceOffEvent",T)}},p.AudioSourceErrorEvent=class P extends v{constructor(T,N){super("AudioSourceErrorEvent",T,o.EventType.Error),this.privError=N}get error(){return this.privError}};class w extends v{constructor(T,N,L){super(T,N),this.privAudioNodeId=L}get audioNodeId(){return this.privAudioNodeId}}p.AudioStreamNodeEvent=w,p.AudioStreamNodeAttachingEvent=class S extends w{constructor(T,N){super("AudioStreamNodeAttachingEvent",T,N)}},p.AudioStreamNodeAttachedEvent=class h extends w{constructor(T,N){super("AudioStreamNodeAttachedEvent",T,N)}},p.AudioStreamNodeDetachedEvent=class m extends w{constructor(T,N){super("AudioStreamNodeDetachedEvent",T,N)}},p.AudioStreamNodeErrorEvent=class I extends w{constructor(T,N,L){super("AudioStreamNodeErrorEvent",T,N),this.privError=L}get error(){return this.privError}}},7e3:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.BackgroundEvent=void 0;const o=y(847);p.BackgroundEvent=class v extends o.PlatformEvent{constructor(A){super("BackgroundEvent",o.EventType.Error),this.privError=A}get error(){return this.privError}}},4692:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.ChunkedArrayBufferStream=void 0;const o=y(847);p.ChunkedArrayBufferStream=class v extends o.Stream{constructor(A,b){super(b),this.privTargetChunkSize=A,this.privNextBufferReadyBytes=0}writeStreamChunk(A){if(A.isEnd||0===this.privNextBufferReadyBytes&&A.buffer.byteLength===this.privTargetChunkSize)return void super.writeStreamChunk(A);let b=0;for(;b<A.buffer.byteLength;){void 0===this.privNextBufferToWrite&&(this.privNextBufferToWrite=new ArrayBuffer(this.privTargetChunkSize),this.privNextBufferStartTime=A.timeReceived);const P=Math.min(A.buffer.byteLength-b,this.privTargetChunkSize-this.privNextBufferReadyBytes),w=new Uint8Array(this.privNextBufferToWrite),S=new Uint8Array(A.buffer.slice(b,P+b));w.set(S,this.privNextBufferReadyBytes),this.privNextBufferReadyBytes+=P,b+=P,this.privNextBufferReadyBytes===this.privTargetChunkSize&&(super.writeStreamChunk({buffer:this.privNextBufferToWrite,isEnd:!1,timeReceived:this.privNextBufferStartTime}),this.privNextBufferReadyBytes=0,this.privNextBufferToWrite=void 0)}}close(){0!==this.privNextBufferReadyBytes&&!this.isClosed&&super.writeStreamChunk({buffer:this.privNextBufferToWrite.slice(0,this.privNextBufferReadyBytes),isEnd:!1,timeReceived:this.privNextBufferStartTime}),super.close()}}},3717:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.ConnectionMessageSentEvent=p.ConnectionMessageReceivedEvent=p.ConnectionEstablishErrorEvent=p.ConnectionErrorEvent=p.ConnectionClosedEvent=p.ConnectionEstablishedEvent=p.ConnectionStartEvent=p.ConnectionEvent=p.ServiceEvent=void 0;const o=y(3980);p.ServiceEvent=class v extends o.PlatformEvent{constructor(M,T,N=o.EventType.Info){super(M,N),this.privJsonResult=T}get jsonString(){return this.privJsonResult}};class _ extends o.PlatformEvent{constructor(M,T,N=o.EventType.Info){super(M,N),this.privConnectionId=T}get connectionId(){return this.privConnectionId}}p.ConnectionEvent=_,p.ConnectionStartEvent=class A extends _{constructor(M,T,N){super("ConnectionStartEvent",M),this.privUri=T,this.privHeaders=N}get uri(){return this.privUri}get headers(){return this.privHeaders}},p.ConnectionEstablishedEvent=class b extends _{constructor(M){super("ConnectionEstablishedEvent",M)}},p.ConnectionClosedEvent=class P extends _{constructor(M,T,N){super("ConnectionClosedEvent",M,o.EventType.Debug),this.privReason=N,this.privStatusCode=T}get reason(){return this.privReason}get statusCode(){return this.privStatusCode}},p.ConnectionErrorEvent=class w extends _{constructor(M,T,N){super("ConnectionErrorEvent",M,o.EventType.Debug),this.privMessage=T,this.privType=N}get message(){return this.privMessage}get type(){return this.privType}},p.ConnectionEstablishErrorEvent=class S extends _{constructor(M,T,N){super("ConnectionEstablishErrorEvent",M,o.EventType.Error),this.privStatusCode=T,this.privReason=N}get reason(){return this.privReason}get statusCode(){return this.privStatusCode}},p.ConnectionMessageReceivedEvent=class h extends _{constructor(M,T,N){super("ConnectionMessageReceivedEvent",M),this.privNetworkReceivedTime=T,this.privMessage=N}get networkReceivedTime(){return this.privNetworkReceivedTime}get message(){return this.privMessage}},p.ConnectionMessageSentEvent=class m extends _{constructor(M,T,N){super("ConnectionMessageSentEvent",M),this.privNetworkSentTime=T,this.privMessage=N}get networkSentTime(){return this.privNetworkSentTime}get message(){return this.privMessage}}},4643:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.ConnectionMessage=p.MessageType=void 0;const o=y(5723),v=y(6023);var _,b;(b=_=p.MessageType||(p.MessageType={}))[b.Text=0]="Text",b[b.Binary=1]="Binary",p.ConnectionMessage=class A{constructor(P,w,S,h){if(this.privBody=null,P===_.Text&&w&&"string"!=typeof w)throw new o.InvalidOperationError("Payload must be a string");if(P===_.Binary&&w&&!(w instanceof ArrayBuffer))throw new o.InvalidOperationError("Payload must be ArrayBuffer");switch(this.privMessageType=P,this.privBody=w,this.privHeaders=S||{},this.privId=h||v.createNoDashGuid(),this.messageType){case _.Binary:this.privSize=null!==this.binaryBody?this.binaryBody.byteLength:0;break;case _.Text:this.privSize=this.textBody.length}}get messageType(){return this.privMessageType}get headers(){return this.privHeaders}get body(){return this.privBody}get textBody(){if(this.privMessageType===_.Binary)throw new o.InvalidOperationError("Not supported for binary message");return this.privBody}get binaryBody(){if(this.privMessageType===_.Text)throw new o.InvalidOperationError("Not supported for text message");return this.privBody}get id(){return this.privId}}},7896:(ne,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.ConnectionOpenResponse=void 0,p.ConnectionOpenResponse=class y{constructor(v,_){this.privStatusCode=v,this.privReason=_}get statusCode(){return this.privStatusCode}get reason(){return this.privReason}}},6647:(ne,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.DeferralMap=void 0,p.DeferralMap=class y{constructor(){this.privMap={}}add(v,_){this.privMap[v]=_}getId(v){return this.privMap[v]}complete(v,_){try{this.privMap[v].resolve(_)}catch(A){this.privMap[v].reject(A)}finally{this.privMap[v]=void 0}}}},7003:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.SendingAgentContextMessageEvent=p.DialogEvent=void 0;const o=y(3980);class v extends o.PlatformEvent{constructor(b,P=o.EventType.Info){super(b,P)}}p.DialogEvent=v,p.SendingAgentContextMessageEvent=class _ extends v{constructor(b){super("SendingAgentContextMessageEvent"),this.privAgentConfig=b}get agentConfig(){return this.privAgentConfig}}},5723:(ne,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.ObjectDisposedError=p.InvalidOperationError=p.ArgumentNullError=void 0;class y extends Error{constructor(A){super(A),this.name="ArgumentNull",this.message=A}}p.ArgumentNullError=y;class o extends Error{constructor(A){super(A),this.name="InvalidOperation",this.message=A}}p.InvalidOperationError=o;class v extends Error{constructor(A,b){super(b),this.name=A+"ObjectDisposed",this.message=b}}p.ObjectDisposedError=v},5333:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.EventSource=void 0;const o=y(5723),v=y(6023);p.EventSource=class _{constructor(b){this.privEventListeners={},this.privIsDisposed=!1,this.privConsoleListener=void 0,this.privMetadata=b}onEvent(b){if(this.isDisposed())throw new o.ObjectDisposedError("EventSource");if(this.metadata)for(const P in this.metadata)P&&b.metadata&&(b.metadata[P]||(b.metadata[P]=this.metadata[P]));for(const P in this.privEventListeners)P&&this.privEventListeners[P]&&this.privEventListeners[P](b)}attach(b){const P=v.createNoDashGuid();return this.privEventListeners[P]=b,{detach:()=>(delete this.privEventListeners[P],Promise.resolve())}}attachListener(b){return this.attach(P=>b.onEvent(P))}attachConsoleListener(b){return this.privConsoleListener&&this.privConsoleListener.detach(),this.privConsoleListener=this.attach(P=>b.onEvent(P)),this.privConsoleListener}isDisposed(){return this.privIsDisposed}dispose(){this.privEventListeners=null,this.privIsDisposed=!0}get metadata(){return this.privMetadata}}},1164:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.Events=void 0;const o=y(5723),v=y(5333);class _{static setEventSource(b){if(!b)throw new o.ArgumentNullError("eventSource");_.privInstance=b}static get instance(){return _.privInstance}}p.Events=_,_.privInstance=new v.EventSource},847:function(ne,p,y){"use strict";var o=this&&this.__createBinding||(Object.create?function(A,b,P,w){void 0===w&&(w=P),Object.defineProperty(A,w,{enumerable:!0,get:function(){return b[P]}})}:function(A,b,P,w){void 0===w&&(w=P),A[w]=b[P]}),v=this&&this.__exportStar||function(A,b){for(var P in A)"default"!==P&&!b.hasOwnProperty(P)&&o(b,A,P)};Object.defineProperty(p,"__esModule",{value:!0}),v(y(9992),p),v(y(3717),p),v(y(4643),p),v(y(7896),p),v(y(6647),p),v(y(7003),p),v(y(5723),p),v(y(1164),p),v(y(5333),p),v(y(6023),p),v(y(4342),p),v(y(6625),p),v(y(6674),p),v(y(772),p),v(y(6339),p),v(y(5306),p),v(y(4703),p),v(y(3005),p),v(y(8754),p),v(y(3733),p),v(y(8494),p),v(y(3980),p),v(y(700),p),v(y(219),p),v(y(8823),p),v(y(8810),p),v(y(4618),p);var _=y(4609);Object.defineProperty(p,"TranslationStatus",{enumerable:!0,get:function(){return _.TranslationStatus}}),v(y(4692),p),v(y(2300),p),v(y(6498),p),v(y(8191),p),v(y(7e3),p)},6023:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.createNoDashGuid=p.createGuid=void 0;const o=y(7843),v=()=>o.v4();p.createGuid=v,p.createNoDashGuid=()=>v().replace(new RegExp("-","g"),"").toUpperCase()},2300:(ne,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0})},4342:(ne,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0})},6625:(ne,p)=>{"use strict";var o;Object.defineProperty(p,"__esModule",{value:!0}),p.ConnectionState=void 0,(o=p.ConnectionState||(p.ConnectionState={}))[o.None=0]="None",o[o.Connected=1]="Connected",o[o.Connecting=2]="Connecting",o[o.Disconnected=3]="Disconnected"},6674:(ne,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0})},772:(ne,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0})},6339:(ne,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0})},3005:(ne,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0})},5306:(ne,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0})},4703:(ne,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0})},8754:(ne,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0})},3733:(ne,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0})},8494:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.List=void 0;const o=y(5723);class v{constructor(A){if(this.privSubscriptionIdCounter=0,this.privAddSubscriptions={},this.privRemoveSubscriptions={},this.privDisposedSubscriptions={},this.privDisposeReason=null,this.privList=[],A)for(const b of A)this.privList.push(b)}get(A){return this.throwIfDisposed(),this.privList[A]}first(){return this.get(0)}last(){return this.get(this.length()-1)}add(A){this.throwIfDisposed(),this.insertAt(this.privList.length,A)}insertAt(A,b){this.throwIfDisposed(),0===A?this.privList.unshift(b):A===this.privList.length?this.privList.push(b):this.privList.splice(A,0,b),this.triggerSubscriptions(this.privAddSubscriptions)}removeFirst(){return this.throwIfDisposed(),this.removeAt(0)}removeLast(){return this.throwIfDisposed(),this.removeAt(this.length()-1)}removeAt(A){return this.throwIfDisposed(),this.remove(A,1)[0]}remove(A,b){this.throwIfDisposed();const P=this.privList.splice(A,b);return this.triggerSubscriptions(this.privRemoveSubscriptions),P}clear(){this.throwIfDisposed(),this.remove(0,this.length())}length(){return this.throwIfDisposed(),this.privList.length}onAdded(A){this.throwIfDisposed();const b=this.privSubscriptionIdCounter++;return this.privAddSubscriptions[b]=A,{detach:()=>(delete this.privAddSubscriptions[b],Promise.resolve())}}onRemoved(A){this.throwIfDisposed();const b=this.privSubscriptionIdCounter++;return this.privRemoveSubscriptions[b]=A,{detach:()=>(delete this.privRemoveSubscriptions[b],Promise.resolve())}}onDisposed(A){this.throwIfDisposed();const b=this.privSubscriptionIdCounter++;return this.privDisposedSubscriptions[b]=A,{detach:()=>(delete this.privDisposedSubscriptions[b],Promise.resolve())}}join(A){return this.throwIfDisposed(),this.privList.join(A)}toArray(){const A=Array();return this.privList.forEach(b=>{A.push(b)}),A}any(A){return this.throwIfDisposed(),A?this.where(A).length()>0:this.length()>0}all(A){return this.throwIfDisposed(),this.where(A).length()===this.length()}forEach(A){this.throwIfDisposed();for(let b=0;b<this.length();b++)A(this.privList[b],b)}select(A){this.throwIfDisposed();const b=[];for(let P=0;P<this.privList.length;P++)b.push(A(this.privList[P],P));return new v(b)}where(A){this.throwIfDisposed();const b=new v;for(let P=0;P<this.privList.length;P++)A(this.privList[P],P)&&b.add(this.privList[P]);return b}orderBy(A){this.throwIfDisposed();const P=this.toArray().sort(A);return new v(P)}orderByDesc(A){return this.throwIfDisposed(),this.orderBy((b,P)=>A(P,b))}clone(){return this.throwIfDisposed(),new v(this.toArray())}concat(A){return this.throwIfDisposed(),new v(this.privList.concat(A.toArray()))}concatArray(A){return this.throwIfDisposed(),new v(this.privList.concat(A))}isDisposed(){return null==this.privList}dispose(A){this.isDisposed()||(this.privDisposeReason=A,this.privList=null,this.privAddSubscriptions=null,this.privRemoveSubscriptions=null,this.triggerSubscriptions(this.privDisposedSubscriptions))}throwIfDisposed(){if(this.isDisposed())throw new o.ObjectDisposedError("List",this.privDisposeReason)}triggerSubscriptions(A){if(A)for(const b in A)b&&A[b]()}}p.List=v},8191:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.OCSPCacheUpdateErrorEvent=p.OCSPResponseRetrievedEvent=p.OCSPCacheFetchErrorEvent=p.OCSPVerificationFailedEvent=p.OCSPCacheHitEvent=p.OCSPCacheEntryNeedsRefreshEvent=p.OCSPCacheEntryExpiredEvent=p.OCSPWSUpgradeStartedEvent=p.OCSPStapleReceivedEvent=p.OCSPCacheUpdateCompleteEvent=p.OCSPDiskCacheStoreEvent=p.OCSPMemoryCacheStoreEvent=p.OCSPCacheUpdateNeededEvent=p.OCSPDiskCacheHitEvent=p.OCSPCacheMissEvent=p.OCSPMemoryCacheHitEvent=p.OCSPEvent=void 0;const o=y(3980);class v extends o.PlatformEvent{constructor(ce,fe,pe){super(ce,fe),this.privSignature=pe}}p.OCSPEvent=v,p.OCSPMemoryCacheHitEvent=class _ extends v{constructor(ce){super("OCSPMemoryCacheHitEvent",o.EventType.Debug,ce)}},p.OCSPCacheMissEvent=class A extends v{constructor(ce){super("OCSPCacheMissEvent",o.EventType.Debug,ce)}},p.OCSPDiskCacheHitEvent=class b extends v{constructor(ce){super("OCSPDiskCacheHitEvent",o.EventType.Debug,ce)}},p.OCSPCacheUpdateNeededEvent=class P extends v{constructor(ce){super("OCSPCacheUpdateNeededEvent",o.EventType.Debug,ce)}},p.OCSPMemoryCacheStoreEvent=class w extends v{constructor(ce){super("OCSPMemoryCacheStoreEvent",o.EventType.Debug,ce)}},p.OCSPDiskCacheStoreEvent=class S extends v{constructor(ce){super("OCSPDiskCacheStoreEvent",o.EventType.Debug,ce)}},p.OCSPCacheUpdateCompleteEvent=class h extends v{constructor(ce){super("OCSPCacheUpdateCompleteEvent",o.EventType.Debug,ce)}},p.OCSPStapleReceivedEvent=class m extends v{constructor(){super("OCSPStapleReceivedEvent",o.EventType.Debug,"")}},p.OCSPWSUpgradeStartedEvent=class I extends v{constructor(ce){super("OCSPWSUpgradeStartedEvent",o.EventType.Debug,ce)}},p.OCSPCacheEntryExpiredEvent=class M extends v{constructor(ce,fe){super("OCSPCacheEntryExpiredEvent",o.EventType.Debug,ce),this.privExpireTime=fe}},p.OCSPCacheEntryNeedsRefreshEvent=class T extends v{constructor(ce,fe,pe){super("OCSPCacheEntryNeedsRefreshEvent",o.EventType.Debug,ce),this.privExpireTime=pe,this.privStartTime=fe}},p.OCSPCacheHitEvent=class N extends v{constructor(ce,fe,pe){super("OCSPCacheHitEvent",o.EventType.Debug,ce),this.privExpireTime=pe,this.privExpireTimeString=new Date(pe).toLocaleDateString(),this.privStartTime=fe,this.privStartTimeString=new Date(fe).toLocaleTimeString()}},p.OCSPVerificationFailedEvent=class L extends v{constructor(ce,fe){super("OCSPVerificationFailedEvent",o.EventType.Debug,ce),this.privError=fe}},p.OCSPCacheFetchErrorEvent=class z extends v{constructor(ce,fe){super("OCSPCacheFetchErrorEvent",o.EventType.Debug,ce),this.privError=fe}},p.OCSPResponseRetrievedEvent=class V extends v{constructor(ce){super("OCSPResponseRetrievedEvent",o.EventType.Debug,ce)}},p.OCSPCacheUpdateErrorEvent=class q extends v{constructor(ce,fe){super("OCSPCacheUpdateErrorEvent",o.EventType.Debug,ce),this.privError=fe}}},3980:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.PlatformEvent=p.EventType=void 0;const o=y(6023);var A;(A=p.EventType||(p.EventType={}))[A.Debug=0]="Debug",A[A.Info=1]="Info",A[A.Warning=2]="Warning",A[A.Error=3]="Error",A[A.None=4]="None",p.PlatformEvent=class _{constructor(b,P){this.privName=b,this.privEventId=o.createNoDashGuid(),this.privEventTime=(new Date).toISOString(),this.privEventType=P,this.privMetadata={}}get name(){return this.privName}get eventId(){return this.privEventId}get eventTime(){return this.privEventTime}get eventType(){return this.privEventType}get metadata(){return this.privMetadata}}},700:(ne,p)=>{"use strict";var y,P;Object.defineProperty(p,"__esModule",{value:!0}),p.marshalPromiseToCallbacks=p.Sink=p.Deferred=p.PromiseResultEventSource=p.PromiseResult=p.PromiseState=void 0,(P=y=p.PromiseState||(p.PromiseState={}))[P.None=0]="None",P[P.Resolved=1]="Resolved",P[P.Rejected=2]="Rejected";class o{constructor(w){this.throwIfError=()=>{if(this.isError)throw this.error},w.on(S=>{this.privIsCompleted||(this.privIsCompleted=!0,this.privIsError=!1,this.privResult=S)},S=>{this.privIsCompleted||(this.privIsCompleted=!0,this.privIsError=!0,this.privError=S)})}get isCompleted(){return this.privIsCompleted}get isError(){return this.privIsError}get error(){return this.privError}get result(){return this.privResult}}p.PromiseResult=o;class v{constructor(){this.setResult=w=>{this.privOnSetResult(w)},this.setError=w=>{this.privOnSetError(w)},this.on=(w,S)=>{this.privOnSetResult=w,this.privOnSetError=S}}}p.PromiseResultEventSource=v,p.Deferred=class _{constructor(){this.resolve=w=>(this.privResolve(w),this),this.reject=w=>(this.privReject(w),this),this.privPromise=new Promise((w,S)=>{this.privResolve=w,this.privReject=S})}get promise(){return this.privPromise}},p.Sink=class A{constructor(){this.privState=y.None,this.privPromiseResult=null,this.privPromiseResultEvents=null,this.privSuccessHandlers=[],this.privErrorHandlers=[],this.privPromiseResultEvents=new v,this.privPromiseResult=new o(this.privPromiseResultEvents)}get state(){return this.privState}get result(){return this.privPromiseResult}resolve(w){if(this.privState!==y.None)throw new Error("'Cannot resolve a completed promise'");this.privState=y.Resolved,this.privPromiseResultEvents.setResult(w);for(let S=0;S<this.privSuccessHandlers.length;S++)this.executeSuccessCallback(w,this.privSuccessHandlers[S],this.privErrorHandlers[S]);this.detachHandlers()}reject(w){if(this.privState!==y.None)throw new Error("'Cannot reject a completed promise'");this.privState=y.Rejected,this.privPromiseResultEvents.setError(w);for(const S of this.privErrorHandlers)this.executeErrorCallback(w,S);this.detachHandlers()}on(w,S){null==w&&(w=()=>{}),this.privState===y.None?(this.privSuccessHandlers.push(w),this.privErrorHandlers.push(S)):(this.privState===y.Resolved?this.executeSuccessCallback(this.privPromiseResult.result,w,S):this.privState===y.Rejected&&this.executeErrorCallback(this.privPromiseResult.error,S),this.detachHandlers())}executeSuccessCallback(w,S,h){try{S(w)}catch(m){this.executeErrorCallback(`'Unhandled callback error: ${m}'`,h)}}executeErrorCallback(w,S){if(!S)throw new Error(`'Unhandled error: ${w}'`);try{S(w)}catch(h){throw new Error(`'Unhandled callback error: ${h}. InnerError: ${w}'`)}}detachHandlers(){this.privErrorHandlers=[],this.privSuccessHandlers=[]}},p.marshalPromiseToCallbacks=function b(P,w,S){P.then(h=>{try{w&&w(h)}catch(m){if(S)try{m instanceof Error?S(m.name+": "+m.message):S(m)}catch{}}},h=>{if(S)try{h instanceof Error?S(h.name+": "+h.message):S(h)}catch{}})}},219:function(ne,p,y){"use strict";var o=this&&this.__awaiter||function(w,S,h,m){return new(h||(h=Promise))(function(M,T){function N(V){try{z(m.next(V))}catch(q){T(q)}}function L(V){try{z(m.throw(V))}catch(q){T(q)}}function z(V){V.done?M(V.value):function I(M){return M instanceof h?M:new h(function(T){T(M)})}(V.value).then(N,L)}z((m=m.apply(w,S||[])).next())})};Object.defineProperty(p,"__esModule",{value:!0}),p.Queue=void 0;const v=y(5723),_=y(8494),A=y(700);var b=(()=>{return(w=b||(b={}))[w.Dequeue=0]="Dequeue",w[w.Peek=1]="Peek",b;var w})();p.Queue=class P{constructor(S){this.privPromiseStore=new _.List,this.privIsDrainInProgress=!1,this.privIsDisposing=!1,this.privDisposeReason=null,this.privList=S||new _.List,this.privDetachables=[],this.privSubscribers=new _.List,this.privDetachables.push(this.privList.onAdded(()=>this.drain()))}enqueue(S){this.throwIfDispose(),this.enqueueFromPromise(new Promise(h=>h(S)))}enqueueFromPromise(S){this.throwIfDispose(),S.then(h=>{this.privList.add(h)},()=>{})}dequeue(){this.throwIfDispose();const S=new A.Deferred;return this.privSubscribers&&(this.privSubscribers.add({deferral:S,type:b.Dequeue}),this.drain()),S.promise}peek(){this.throwIfDispose();const S=new A.Deferred;return this.privSubscribers&&(this.privSubscribers.add({deferral:S,type:b.Peek}),this.drain()),S.promise}length(){return this.throwIfDispose(),this.privList.length()}isDisposed(){return null==this.privSubscribers}drainAndDispose(S,h){return o(this,void 0,void 0,function*(){if(!this.isDisposed()&&!this.privIsDisposing){this.privDisposeReason=h,this.privIsDisposing=!0;const m=this.privSubscribers;if(m){for(;m.length()>0;)m.removeFirst().deferral.resolve(void 0);this.privSubscribers===m&&(this.privSubscribers=m)}for(const I of this.privDetachables)yield I.detach();if(this.privPromiseStore.length()>0&&S){const I=[];return this.privPromiseStore.toArray().forEach(M=>{I.push(M)}),Promise.all(I).finally(()=>{this.privSubscribers=null,this.privList.forEach(M=>{S(M)}),this.privList=null}).then()}this.privSubscribers=null,this.privList=null}})}dispose(S){return o(this,void 0,void 0,function*(){yield this.drainAndDispose(null,S)})}drain(){if(!this.privIsDrainInProgress&&!this.privIsDisposing){this.privIsDrainInProgress=!0;const S=this.privSubscribers,h=this.privList;if(S&&h){for(;h.length()>0&&S.length()>0&&!this.privIsDisposing;){const m=S.removeFirst();if(m.type===b.Peek)m.deferral.resolve(h.first());else{const I=h.removeFirst();m.deferral.resolve(I)}}this.privSubscribers===S&&(this.privSubscribers=S),this.privList===h&&(this.privList=h)}this.privIsDrainInProgress=!1}}throwIfDispose(){if(this.isDisposed())throw this.privDisposeReason?new v.InvalidOperationError(this.privDisposeReason):new v.ObjectDisposedError("Queue");if(this.privIsDisposing)throw new v.InvalidOperationError("Queue disposing")}}},8823:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.RawWebsocketMessage=void 0;const o=y(4643),v=y(5723),_=y(6023);p.RawWebsocketMessage=class A{constructor(P,w,S){if(this.privPayload=null,!w)throw new v.ArgumentNullError("payload");if(P===o.MessageType.Binary&&"ArrayBuffer"!==w.__proto__.constructor.name)throw new v.InvalidOperationError("Payload must be ArrayBuffer");if(P===o.MessageType.Text&&"string"!=typeof w)throw new v.InvalidOperationError("Payload must be a string");this.privMessageType=P,this.privPayload=w,this.privId=S||_.createNoDashGuid()}get messageType(){return this.privMessageType}get payload(){return this.privPayload}get textContent(){if(this.privMessageType===o.MessageType.Binary)throw new v.InvalidOperationError("Not supported for binary message");return this.privPayload}get binaryContent(){if(this.privMessageType===o.MessageType.Text)throw new v.InvalidOperationError("Not supported for text message");return this.privPayload}get id(){return this.privId}}},8810:(ne,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.RiffPcmEncoder=void 0,p.RiffPcmEncoder=class y{constructor(v,_){this.privActualSampleRate=v,this.privDesiredSampleRate=_}encode(v){const _=this.downSampleAudioFrame(v,this.privActualSampleRate,this.privDesiredSampleRate);if(!_)return null;const b=new ArrayBuffer(2*_.length),P=new DataView(b);return this.floatTo16BitPCM(P,0,_),b}setString(v,_,A){for(let b=0;b<A.length;b++)v.setUint8(_+b,A.charCodeAt(b))}floatTo16BitPCM(v,_,A){for(let b=0;b<A.length;b++,_+=2){const P=Math.max(-1,Math.min(1,A[b]));v.setInt16(_,P<0?32768*P:32767*P,!0)}}downSampleAudioFrame(v,_,A){if(!v)return null;if(A===_||A>_)return v;const b=_/A,P=Math.round(v.length/b),w=new Float32Array(P);let S=0,h=0;for(;h<P;){const m=Math.round((h+1)*b);let I=0,M=0;for(;S<m&&S<v.length;)I+=v[S++],M++;w[h++]=I/M}return w}}},4618:function(ne,p,y){"use strict";var o=this&&this.__awaiter||function(P,w,S,h){return new(S||(S=Promise))(function(I,M){function T(z){try{L(h.next(z))}catch(V){M(V)}}function N(z){try{L(h.throw(z))}catch(V){M(V)}}function L(z){z.done?I(z.value):function m(I){return I instanceof S?I:new S(function(M){M(I)})}(z.value).then(T,N)}L((h=h.apply(P,w||[])).next())})};Object.defineProperty(p,"__esModule",{value:!0}),p.Stream=void 0;const v=y(5723),_=y(6023),A=y(219);p.Stream=class b{constructor(w){this.privIsWriteEnded=!1,this.privIsReadEnded=!1,this.privId=w||_.createNoDashGuid(),this.privReaderQueue=new A.Queue}get isClosed(){return this.privIsWriteEnded}get isReadEnded(){return this.privIsReadEnded}get id(){return this.privId}close(){this.privIsWriteEnded||(this.writeStreamChunk({buffer:null,isEnd:!0,timeReceived:Date.now()}),this.privIsWriteEnded=!0)}writeStreamChunk(w){if(this.throwIfClosed(),!this.privReaderQueue.isDisposed())try{this.privReaderQueue.enqueue(w)}catch{}}read(){if(this.privIsReadEnded)throw new v.InvalidOperationError("Stream read has already finished");return this.privReaderQueue.dequeue().then(w=>o(this,void 0,void 0,function*(){return(void 0===w||w.isEnd)&&(yield this.privReaderQueue.dispose("End of stream reached")),w}))}readEnded(){this.privIsReadEnded||(this.privIsReadEnded=!0,this.privReaderQueue=new A.Queue)}throwIfClosed(){if(this.privIsWriteEnded)throw new v.InvalidOperationError("Stream closed")}}},2214:(ne,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.StringUtils=void 0,p.StringUtils=class y{static formatString(v,_){if(!v)return"";if(!_)return v;let A="",b="";const P=h=>{A+=h},w=h=>{b+=h};let S=P;for(let h=0;h<v.length;h++){const m=v[h],I=h+1<v.length?v[h+1]:"";switch(m){case"{":"{"===I?(S("{"),h++):S=w;break;case"}":"}"===I?(S("}"),h++):(_.hasOwnProperty(b)&&(A+=_[b]),S=P,b="");break;default:S(m)}}return A}}},6498:(ne,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.Timeout=void 0;class y{static load(){const v=new Map([[0,()=>{}]]),_=new Map,b="data:text/javascript;base64,"+btoa('!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return d}));const r=new Map,o=new Map,i=e=>{const t=r.get(e);if(void 0===t)throw new Error(\'There is no interval scheduled with the given id "\'.concat(e,\'".\'));clearTimeout(t),r.delete(e)},u=e=>{const t=o.get(e);if(void 0===t)throw new Error(\'There is no timeout scheduled with the given id "\'.concat(e,\'".\'));clearTimeout(t),o.delete(e)},f=(e,t)=>{let n,r;if("performance"in self){const o=performance.now();n=o,r=e-Math.max(0,o-t)}else n=Date.now(),r=e;return{expected:n+r,remainingDelay:r}},c=(e,t,n,r)=>{const o="performance"in self?performance.now():Date.now();o>n?postMessage({id:null,method:"call",params:{timerId:t}}):e.set(t,setTimeout(c,n-o,e,t,n))},a=(e,t,n)=>{const{expected:o,remainingDelay:i}=f(e,n);r.set(t,setTimeout(c,i,r,t,o))},d=(e,t,n)=>{const{expected:r,remainingDelay:i}=f(e,n);o.set(t,setTimeout(c,i,o,t,r))}},function(e,t,n){"use strict";n.r(t);var r=n(2);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(3);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var u=n(4);for(var o in u)"default"!==o&&function(e){n.d(t,e,(function(){return u[e]}))}(o);var f=n(5);for(var o in f)"default"!==o&&function(e){n.d(t,e,(function(){return f[e]}))}(o);var c=n(6);for(var o in c)"default"!==o&&function(e){n.d(t,e,(function(){return c[e]}))}(o);var a=n(7);for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);var d=n(8);for(var o in d)"default"!==o&&function(e){n.d(t,e,(function(){return d[e]}))}(o);var s=n(9);for(var o in s)"default"!==o&&function(e){n.d(t,e,(function(){return s[e]}))}(o)},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(11);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(12);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var u=n(13);for(var o in u)"default"!==o&&function(e){n.d(t,e,(function(){return u[e]}))}(o)},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n(1);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);var u=n(10);for(var i in u)"default"!==i&&function(e){n.d(t,e,(function(){return u[e]}))}(i);addEventListener("message",({data:e})=>{try{if("clear"===e.method){const{id:t,params:{timerId:n}}=e;Object(r.b)(n),postMessage({error:null,id:t})}else{if("set"!==e.method)throw new Error(\'The given method "\'.concat(e.method,\'" is not supported\'));{const{params:{delay:t,now:n,timerId:o}}=e;Object(r.d)(t,o,n)}}}catch(t){postMessage({error:{message:t.message},id:e.id,result:null})}})}]);'),P=new Worker(b);return P.addEventListener("message",({data:h})=>{if(y.isCallNotification(h)){const{params:{timerId:m}}=h,I=v.get(m);if("number"==typeof I){const M=_.get(I);if(void 0===M||M!==m)throw new Error("The timer is in an undefined state.")}else{if(!(typeof I<"u"))throw new Error("The timer is in an undefined state.");I(),v.delete(m)}}else{if(!y.isClearResponse(h)){const{error:{message:m}}=h;throw new Error(m)}{const{id:m}=h,I=_.get(m);if(void 0===I)throw new Error("The timer is in an undefined state.");_.delete(m),v.delete(I)}}}),{clearTimeout:h=>{const m=Math.random();_.set(m,h),v.set(h,m),P.postMessage({id:m,method:"clear",params:{timerId:h}})},setTimeout:(h,m)=>{const I=Math.random();return v.set(I,h),P.postMessage({id:null,method:"set",params:{delay:m,now:performance.now(),timerId:I}}),I}}}static loadWorkerTimers(){return()=>(null!==y.workerTimers||(y.workerTimers=y.load()),y.workerTimers)}static isCallNotification(v){return void 0!==v.method&&"call"===v.method}static isClearResponse(v){return null===v.error&&"number"==typeof v.id}}p.Timeout=y,y.workerTimers=null,y.clearTimeout=o=>y.timers().clearTimeout(o),y.setTimeout=(o,v)=>y.timers().setTimeout(o,v),y.timers=y.loadWorkerTimers()},4049:(ne,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.ActivityReceivedEventArgs=void 0,p.ActivityReceivedEventArgs=class y{constructor(v,_){this.privActivity=v,this.privAudioStream=_}get activity(){return this.privActivity}get audioStream(){return this.privAudioStream}}},4794:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.AudioOutputConfigImpl=p.AudioConfigImpl=p.AudioConfig=void 0;const o=y(4853),v=y(5916),_=y(8323),A=y(7725),b=y(7596),P=y(4989);class w{static fromDefaultMicrophoneInput(){const I=new o.PcmRecorder(!0);return new S(new o.MicAudioSource(I))}static fromMicrophoneInput(I){const M=new o.PcmRecorder(!0);return new S(new o.MicAudioSource(M,I))}static fromWavFileInput(I,M="unnamedBuffer.wav"){return new S(new o.FileAudioSource(I,M))}static fromStreamInput(I){if(I instanceof _.PullAudioInputStreamCallback)return new S(new b.PullAudioInputStreamImpl(I));if(I instanceof _.AudioInputStream)return new S(I);if(typeof MediaStream<"u"&&I instanceof MediaStream){const M=new o.PcmRecorder(!1);return new S(new o.MicAudioSource(M,null,null,I))}throw new Error("Not Supported Type")}static fromDefaultSpeakerOutput(){return new h(new _.SpeakerAudioDestination)}static fromSpeakerOutput(I){if(void 0===I)return w.fromDefaultSpeakerOutput();if(I instanceof _.SpeakerAudioDestination)return new h(I);throw new Error("Not Supported Type")}static fromAudioFileOutput(I){return new h(new A.AudioFileWriter(I))}static fromStreamOutput(I){if(I instanceof _.PushAudioOutputStreamCallback)return new h(new P.PushAudioOutputStreamImpl(I));if(I instanceof _.PushAudioOutputStream)return new h(I);if(I instanceof _.PullAudioOutputStream)return new h(I);throw new Error("Not Supported Type")}}p.AudioConfig=w;class S extends w{constructor(I){super(),this.privSource=I}get format(){return this.privSource.format}close(I,M){this.privSource.turnOff().then(()=>{I&&I()},T=>{M&&M(T)})}id(){return this.privSource.id()}turnOn(){return this.privSource.turnOn()}attach(I){return this.privSource.attach(I)}detach(I){return this.privSource.detach(I)}turnOff(){return this.privSource.turnOff()}get events(){return this.privSource.events}setProperty(I,M){if(v.Contracts.throwIfNull(M,"value"),void 0===this.privSource.setProperty)throw new Error("This AudioConfig instance does not support setting properties.");this.privSource.setProperty(I,M)}getProperty(I,M){if(void 0!==this.privSource.getProperty)return this.privSource.getProperty(I,M);throw new Error("This AudioConfig instance does not support getting properties.")}get deviceInfo(){return this.privSource.deviceInfo}}p.AudioConfigImpl=S;class h extends w{constructor(I){super(),this.privDestination=I}set format(I){this.privDestination.format=I}write(I){this.privDestination.write(I)}close(){this.privDestination.close()}id(){return this.privDestination.id()}setProperty(){throw new Error("This AudioConfig instance does not support setting properties.")}getProperty(){throw new Error("This AudioConfig instance does not support getting properties.")}}p.AudioOutputConfigImpl=h},7725:function(ne,p,y){"use strict";var o=this&&this.__createBinding||(Object.create?function(w,S,h,m){void 0===m&&(m=h),Object.defineProperty(w,m,{enumerable:!0,get:function(){return S[h]}})}:function(w,S,h,m){void 0===m&&(m=h),w[m]=S[h]}),v=this&&this.__setModuleDefault||(Object.create?function(w,S){Object.defineProperty(w,"default",{enumerable:!0,value:S})}:function(w,S){w.default=S}),_=this&&this.__importStar||function(w){if(w&&w.__esModule)return w;var S={};if(null!=w)for(var h in w)"default"!==h&&Object.hasOwnProperty.call(w,h)&&o(S,w,h);return v(S,w),S};Object.defineProperty(p,"__esModule",{value:!0}),p.AudioFileWriter=void 0;const A=_(y(2088)),b=y(5916);p.AudioFileWriter=class P{constructor(S){b.Contracts.throwIfNullOrUndefined(A.openSync,"\nFile System access not available, please use Push or PullAudioOutputStream"),this.privFd=A.openSync(S,"w")}set format(S){b.Contracts.throwIfNotUndefined(this.privAudioFormat,"format is already set"),this.privAudioFormat=S;let h=0;this.privAudioFormat.hasHeader&&(h=this.privAudioFormat.header.byteLength),void 0!==this.privFd&&(this.privWriteStream=A.createWriteStream("",{fd:this.privFd,start:h,autoClose:!1}))}write(S){b.Contracts.throwIfNullOrUndefined(this.privAudioFormat,"must set format before writing."),void 0!==this.privWriteStream&&this.privWriteStream.write(new Uint8Array(S.slice(0)))}close(){void 0!==this.privFd&&(this.privWriteStream.on("finish",()=>{this.privAudioFormat.hasHeader&&(this.privAudioFormat.updateHeader(this.privWriteStream.bytesWritten),A.writeSync(this.privFd,new Int8Array(this.privAudioFormat.header),0,this.privAudioFormat.header.byteLength,0)),A.closeSync(this.privFd),this.privFd=void 0}),this.privWriteStream.end())}id(){return this.privId}}},7596:function(ne,p,y){"use strict";var o=this&&this.__awaiter||function(M,T,N,L){return new(N||(N=Promise))(function(V,q){function X(pe){try{fe(L.next(pe))}catch(Ae){q(Ae)}}function ce(pe){try{fe(L.throw(pe))}catch(Ae){q(Ae)}}function fe(pe){pe.done?V(pe.value):function z(V){return V instanceof N?V:new N(function(q){q(V)})}(pe.value).then(X,ce)}fe((L=L.apply(M,T||[])).next())})};Object.defineProperty(p,"__esModule",{value:!0}),p.PullAudioInputStreamImpl=p.PullAudioInputStream=p.PushAudioInputStreamImpl=p.PushAudioInputStream=p.AudioInputStream=void 0;const v=y(9464),_=y(847),A=y(6023),b=y(8323),P=y(7833);class w{constructor(){}static createPushStream(T){return S.create(T)}static createPullStream(T,N){return m.create(T,N)}}p.AudioInputStream=w;class S extends w{static create(T){return new h(T)}}p.PushAudioInputStream=S;class h extends S{constructor(T){super(),this.privFormat=void 0===T?P.AudioStreamFormatImpl.getDefaultInputFormat():T,this.privEvents=new _.EventSource,this.privId=A.createNoDashGuid(),this.privStream=new _.ChunkedArrayBufferStream(this.privFormat.avgBytesPerSec/10)}get format(){return Promise.resolve(this.privFormat)}write(T){this.privStream.writeStreamChunk({buffer:T,isEnd:!1,timeReceived:Date.now()})}close(){this.privStream.close()}id(){return this.privId}turnOn(){this.onEvent(new _.AudioSourceInitializingEvent(this.privId)),this.onEvent(new _.AudioSourceReadyEvent(this.privId))}attach(T){return o(this,void 0,void 0,function*(){this.onEvent(new _.AudioStreamNodeAttachingEvent(this.privId,T)),yield this.turnOn();const N=this.privStream;return this.onEvent(new _.AudioStreamNodeAttachedEvent(this.privId,T)),{detach:()=>o(this,void 0,void 0,function*(){return this.onEvent(new _.AudioStreamNodeDetachedEvent(this.privId,T)),this.turnOff()}),id:()=>T,read:()=>N.read()}})}detach(T){this.onEvent(new _.AudioStreamNodeDetachedEvent(this.privId,T))}turnOff(){}get events(){return this.privEvents}get deviceInfo(){return Promise.resolve({bitspersample:this.privFormat.bitsPerSample,channelcount:this.privFormat.channels,connectivity:v.connectivity.Unknown,manufacturer:"Speech SDK",model:"PushStream",samplerate:this.privFormat.samplesPerSec,type:v.type.Stream})}onEvent(T){this.privEvents.onEvent(T),_.Events.instance.onEvent(T)}toBuffer(T){const N=Buffer.alloc(T.byteLength),L=new Uint8Array(T);for(let z=0;z<N.length;++z)N[z]=L[z];return N}}p.PushAudioInputStreamImpl=h;class m extends w{constructor(){super()}static create(T,N){return new I(T,N)}}p.PullAudioInputStream=m;class I extends m{constructor(T,N){super(),this.privFormat=void 0===N?b.AudioStreamFormat.getDefaultInputFormat():N,this.privEvents=new _.EventSource,this.privId=A.createNoDashGuid(),this.privCallback=T,this.privIsClosed=!1,this.privBufferSize=this.privFormat.avgBytesPerSec/10}get format(){return Promise.resolve(this.privFormat)}close(){this.privIsClosed=!0,this.privCallback.close()}id(){return this.privId}turnOn(){this.onEvent(new _.AudioSourceInitializingEvent(this.privId)),this.onEvent(new _.AudioSourceReadyEvent(this.privId))}attach(T){return o(this,void 0,void 0,function*(){return this.onEvent(new _.AudioStreamNodeAttachingEvent(this.privId,T)),yield this.turnOn(),this.onEvent(new _.AudioStreamNodeAttachedEvent(this.privId,T)),{detach:()=>(this.privCallback.close(),this.onEvent(new _.AudioStreamNodeDetachedEvent(this.privId,T)),this.turnOff()),id:()=>T,read:()=>{let L,N=0;for(;N<this.privBufferSize;){const z=new ArrayBuffer(this.privBufferSize-N),V=this.privCallback.read(z);if(void 0===L?L=z:new Int8Array(L).set(new Int8Array(z),N),0===V)break;N+=V}return Promise.resolve({buffer:L.slice(0,N),isEnd:this.privIsClosed||0===N,timeReceived:Date.now()})}}})}detach(T){this.onEvent(new _.AudioStreamNodeDetachedEvent(this.privId,T))}turnOff(){}get events(){return this.privEvents}get deviceInfo(){return Promise.resolve({bitspersample:this.privFormat.bitsPerSample,channelcount:this.privFormat.channels,connectivity:v.connectivity.Unknown,manufacturer:"Speech SDK",model:"PullStream",samplerate:this.privFormat.samplesPerSec,type:v.type.Stream})}onEvent(T){this.privEvents.onEvent(T),_.Events.instance.onEvent(T)}}p.PullAudioInputStreamImpl=I},7176:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.AudioOutputFormatImpl=void 0;const o=y(4418),v=y(7833);class _ extends v.AudioStreamFormatImpl{constructor(b,P,w,S,h,m,I,M,T){super(w,m,P,b),this.formatTag=b,this.avgBytesPerSec=S,this.blockAlign=h,this.priAudioFormatString=I,this.priRequestAudioFormatString=M,this.priHasHeader=T}static fromSpeechSynthesisOutputFormat(b){return void 0===b?_.getDefaultOutputFormat():_.fromSpeechSynthesisOutputFormatString(_.SpeechSynthesisOutputFormatToString[b])}static fromSpeechSynthesisOutputFormatString(b){switch(b){case"raw-8khz-8bit-mono-mulaw":return new _(v.AudioFormatTag.MuLaw,1,8e3,8e3,1,8,b,b,!1);case"riff-16khz-16kbps-mono-siren":return new _(v.AudioFormatTag.Siren,1,16e3,2e3,40,0,b,"audio-16khz-16kbps-mono-siren",!0);case"audio-16khz-16kbps-mono-siren":return new _(v.AudioFormatTag.Siren,1,16e3,2e3,40,0,b,b,!1);case"audio-16khz-32kbitrate-mono-mp3":return new _(v.AudioFormatTag.MP3,1,16e3,4096,2,16,b,b,!1);case"audio-16khz-128kbitrate-mono-mp3":return new _(v.AudioFormatTag.MP3,1,16e3,16384,2,16,b,b,!1);case"audio-16khz-64kbitrate-mono-mp3":return new _(v.AudioFormatTag.MP3,1,16e3,8192,2,16,b,b,!1);case"audio-24khz-48kbitrate-mono-mp3":return new _(v.AudioFormatTag.MP3,1,24e3,6144,2,16,b,b,!1);case"audio-24khz-96kbitrate-mono-mp3":return new _(v.AudioFormatTag.MP3,1,24e3,12288,2,16,b,b,!1);case"audio-24khz-160kbitrate-mono-mp3":return new _(v.AudioFormatTag.MP3,1,24e3,20480,2,16,b,b,!1);case"raw-16khz-16bit-mono-truesilk":return new _(v.AudioFormatTag.SILKSkype,1,16e3,32e3,2,16,b,b,!1);case"riff-8khz-16bit-mono-pcm":return new _(v.AudioFormatTag.PCM,1,8e3,16e3,2,16,b,"raw-8khz-16bit-mono-pcm",!0);case"riff-24khz-16bit-mono-pcm":return new _(v.AudioFormatTag.PCM,1,24e3,48e3,2,16,b,"raw-24khz-16bit-mono-pcm",!0);case"riff-8khz-8bit-mono-mulaw":return new _(v.AudioFormatTag.MuLaw,1,8e3,8e3,1,8,b,"raw-8khz-8bit-mono-mulaw",!0);case"raw-16khz-16bit-mono-pcm":return new _(v.AudioFormatTag.PCM,1,16e3,32e3,2,16,b,"raw-16khz-16bit-mono-pcm",!1);case"raw-24khz-16bit-mono-pcm":return new _(v.AudioFormatTag.PCM,1,24e3,48e3,2,16,b,"raw-24khz-16bit-mono-pcm",!1);case"raw-8khz-16bit-mono-pcm":return new _(v.AudioFormatTag.PCM,1,8e3,16e3,2,16,b,"raw-8khz-16bit-mono-pcm",!1);case"ogg-16khz-16bit-mono-opus":return new _(v.AudioFormatTag.OGG_OPUS,1,16e3,8192,2,16,b,b,!1);case"ogg-24khz-16bit-mono-opus":return new _(v.AudioFormatTag.OGG_OPUS,1,24e3,8192,2,16,b,b,!1);case"raw-48khz-16bit-mono-pcm":return new _(v.AudioFormatTag.PCM,1,48e3,96e3,2,16,b,"raw-48khz-16bit-mono-pcm",!1);case"riff-48khz-16bit-mono-pcm":return new _(v.AudioFormatTag.PCM,1,48e3,96e3,2,16,b,"raw-48khz-16bit-mono-pcm",!0);case"audio-48khz-96kbitrate-mono-mp3":return new _(v.AudioFormatTag.MP3,1,48e3,12288,2,16,b,b,!1);case"audio-48khz-192kbitrate-mono-mp3":return new _(v.AudioFormatTag.MP3,1,48e3,24576,2,16,b,b,!1);case"ogg-48khz-16bit-mono-opus":return new _(v.AudioFormatTag.OGG_OPUS,1,48e3,12e3,2,16,b,b,!1);case"webm-16khz-16bit-mono-opus":return new _(v.AudioFormatTag.WEBM_OPUS,1,16e3,4e3,2,16,b,b,!1);case"webm-24khz-16bit-mono-opus":return new _(v.AudioFormatTag.WEBM_OPUS,1,24e3,6e3,2,16,b,b,!1);case"webm-24khz-16bit-24kbps-mono-opus":return new _(v.AudioFormatTag.WEBM_OPUS,1,24e3,3e3,2,16,b,b,!1);case"audio-16khz-16bit-32kbps-mono-opus":return new _(v.AudioFormatTag.OPUS,1,16e3,4e3,2,16,b,b,!1);case"audio-24khz-16bit-48kbps-mono-opus":return new _(v.AudioFormatTag.OPUS,1,24e3,6e3,2,16,b,b,!1);case"audio-24khz-16bit-24kbps-mono-opus":return new _(v.AudioFormatTag.OPUS,1,24e3,3e3,2,16,b,b,!1);case"audio-24khz-16bit-mono-flac":return new _(v.AudioFormatTag.FLAC,1,24e3,24e3,2,16,b,b,!1);case"audio-48khz-16bit-mono-flac":return new _(v.AudioFormatTag.FLAC,1,48e3,3e4,2,16,b,b,!1);case"raw-24khz-16bit-mono-truesilk":return new _(v.AudioFormatTag.SILKSkype,1,24e3,48e3,2,16,b,b,!1);case"raw-8khz-8bit-mono-alaw":return new _(v.AudioFormatTag.ALaw,1,8e3,8e3,1,8,b,b,!1);case"riff-8khz-8bit-mono-alaw":return new _(v.AudioFormatTag.ALaw,1,8e3,8e3,1,8,b,"raw-8khz-8bit-mono-alaw",!0);case"raw-22050hz-16bit-mono-pcm":return new _(v.AudioFormatTag.PCM,1,22050,44100,2,16,b,b,!1);case"riff-22050hz-16bit-mono-pcm":return new _(v.AudioFormatTag.PCM,1,22050,44100,2,16,b,"raw-22050hz-16bit-mono-pcm",!0);case"raw-44100hz-16bit-mono-pcm":return new _(v.AudioFormatTag.PCM,1,44100,88200,2,16,b,b,!1);case"riff-44100hz-16bit-mono-pcm":return new _(v.AudioFormatTag.PCM,1,44100,88200,2,16,b,"raw-44100hz-16bit-mono-pcm",!0);default:return new _(v.AudioFormatTag.PCM,1,16e3,32e3,2,16,"riff-16khz-16bit-mono-pcm","raw-16khz-16bit-mono-pcm",!0)}}static getDefaultOutputFormat(){return _.fromSpeechSynthesisOutputFormatString(typeof window<"u"?"audio-24khz-48kbitrate-mono-mp3":"riff-16khz-16bit-mono-pcm")}get hasHeader(){return this.priHasHeader}get header(){if(this.hasHeader)return this.privHeader}updateHeader(b){if(this.priHasHeader){const P=new DataView(this.privHeader);P.setUint32(4,b+this.privHeader.byteLength-8,!0),P.setUint32(40,b,!0)}}get requestAudioFormatString(){return this.priRequestAudioFormatString}addHeader(b){if(!this.hasHeader)return b;this.updateHeader(b.byteLength);const P=new Uint8Array(b.byteLength+this.header.byteLength);return P.set(new Uint8Array(this.header),0),P.set(new Uint8Array(b),this.header.byteLength),P.buffer}}p.AudioOutputFormatImpl=_,_.SpeechSynthesisOutputFormatToString={[o.SpeechSynthesisOutputFormat.Raw8Khz8BitMonoMULaw]:"raw-8khz-8bit-mono-mulaw",[o.SpeechSynthesisOutputFormat.Riff16Khz16KbpsMonoSiren]:"riff-16khz-16kbps-mono-siren",[o.SpeechSynthesisOutputFormat.Audio16Khz16KbpsMonoSiren]:"audio-16khz-16kbps-mono-siren",[o.SpeechSynthesisOutputFormat.Audio16Khz32KBitRateMonoMp3]:"audio-16khz-32kbitrate-mono-mp3",[o.SpeechSynthesisOutputFormat.Audio16Khz128KBitRateMonoMp3]:"audio-16khz-128kbitrate-mono-mp3",[o.SpeechSynthesisOutputFormat.Audio16Khz64KBitRateMonoMp3]:"audio-16khz-64kbitrate-mono-mp3",[o.SpeechSynthesisOutputFormat.Audio24Khz48KBitRateMonoMp3]:"audio-24khz-48kbitrate-mono-mp3",[o.SpeechSynthesisOutputFormat.Audio24Khz96KBitRateMonoMp3]:"audio-24khz-96kbitrate-mono-mp3",[o.SpeechSynthesisOutputFormat.Audio24Khz160KBitRateMonoMp3]:"audio-24khz-160kbitrate-mono-mp3",[o.SpeechSynthesisOutputFormat.Raw16Khz16BitMonoTrueSilk]:"raw-16khz-16bit-mono-truesilk",[o.SpeechSynthesisOutputFormat.Riff16Khz16BitMonoPcm]:"riff-16khz-16bit-mono-pcm",[o.SpeechSynthesisOutputFormat.Riff8Khz16BitMonoPcm]:"riff-8khz-16bit-mono-pcm",[o.SpeechSynthesisOutputFormat.Riff24Khz16BitMonoPcm]:"riff-24khz-16bit-mono-pcm",[o.SpeechSynthesisOutputFormat.Riff8Khz8BitMonoMULaw]:"riff-8khz-8bit-mono-mulaw",[o.SpeechSynthesisOutputFormat.Raw16Khz16BitMonoPcm]:"raw-16khz-16bit-mono-pcm",[o.SpeechSynthesisOutputFormat.Raw24Khz16BitMonoPcm]:"raw-24khz-16bit-mono-pcm",[o.SpeechSynthesisOutputFormat.Raw8Khz16BitMonoPcm]:"raw-8khz-16bit-mono-pcm",[o.SpeechSynthesisOutputFormat.Ogg16Khz16BitMonoOpus]:"ogg-16khz-16bit-mono-opus",[o.SpeechSynthesisOutputFormat.Ogg24Khz16BitMonoOpus]:"ogg-24khz-16bit-mono-opus",[o.SpeechSynthesisOutputFormat.Raw48Khz16BitMonoPcm]:"raw-48khz-16bit-mono-pcm",[o.SpeechSynthesisOutputFormat.Riff48Khz16BitMonoPcm]:"riff-48khz-16bit-mono-pcm",[o.SpeechSynthesisOutputFormat.Audio48Khz96KBitRateMonoMp3]:"audio-48khz-96kbitrate-mono-mp3",[o.SpeechSynthesisOutputFormat.Audio48Khz192KBitRateMonoMp3]:"audio-48khz-192kbitrate-mono-mp3",[o.SpeechSynthesisOutputFormat.Ogg48Khz16BitMonoOpus]:"ogg-48khz-16bit-mono-opus",[o.SpeechSynthesisOutputFormat.Webm16Khz16BitMonoOpus]:"webm-16khz-16bit-mono-opus",[o.SpeechSynthesisOutputFormat.Webm24Khz16BitMonoOpus]:"webm-24khz-16bit-mono-opus",[o.SpeechSynthesisOutputFormat.Webm24Khz16Bit24KbpsMonoOpus]:"webm-24khz-16bit-24kbps-mono-opus",[o.SpeechSynthesisOutputFormat.Raw24Khz16BitMonoTrueSilk]:"raw-24khz-16bit-mono-truesilk",[o.SpeechSynthesisOutputFormat.Raw8Khz8BitMonoALaw]:"raw-8khz-8bit-mono-alaw",[o.SpeechSynthesisOutputFormat.Riff8Khz8BitMonoALaw]:"riff-8khz-8bit-mono-alaw",[o.SpeechSynthesisOutputFormat.Audio16Khz16Bit32KbpsMonoOpus]:"audio-16khz-16bit-32kbps-mono-opus",[o.SpeechSynthesisOutputFormat.Audio24Khz16Bit48KbpsMonoOpus]:"audio-24khz-16bit-48kbps-mono-opus",[o.SpeechSynthesisOutputFormat.Audio24Khz16Bit24KbpsMonoOpus]:"audio-24khz-16bit-24kbps-mono-opus",[o.SpeechSynthesisOutputFormat.Raw22050Hz16BitMonoPcm]:"raw-22050hz-16bit-mono-pcm",[o.SpeechSynthesisOutputFormat.Riff22050Hz16BitMonoPcm]:"riff-22050hz-16bit-mono-pcm",[o.SpeechSynthesisOutputFormat.Raw44100Hz16BitMonoPcm]:"raw-44100hz-16bit-mono-pcm",[o.SpeechSynthesisOutputFormat.Riff44100Hz16BitMonoPcm]:"riff-44100hz-16bit-mono-pcm"}},4989:function(ne,p,y){"use strict";var o=this&&this.__awaiter||function(m,I,M,T){return new(M||(M=Promise))(function(L,z){function V(ce){try{X(T.next(ce))}catch(fe){z(fe)}}function q(ce){try{X(T.throw(ce))}catch(fe){z(fe)}}function X(ce){ce.done?L(ce.value):function N(L){return L instanceof M?L:new M(function(z){z(L)})}(ce.value).then(V,q)}X((T=T.apply(m,I||[])).next())})};Object.defineProperty(p,"__esModule",{value:!0}),p.PushAudioOutputStreamImpl=p.PushAudioOutputStream=p.PullAudioOutputStreamImpl=p.PullAudioOutputStream=p.AudioOutputStream=void 0;const v=y(847),_=y(5916),A=y(7176);class b{constructor(){}static createPullStream(){return P.create()}}p.AudioOutputStream=b;class P extends b{static create(){return new w}}p.PullAudioOutputStream=P;class w extends P{constructor(){super(),this.privId=v.createNoDashGuid(),this.privStream=new v.Stream}set format(I){null==I&&(this.privFormat=A.AudioOutputFormatImpl.getDefaultOutputFormat()),this.privFormat=I}get format(){return this.privFormat}get isClosed(){return this.privStream.isClosed}id(){return this.privId}read(I){return o(this,void 0,void 0,function*(){const M=new Int8Array(I);let T=0;if(void 0!==this.privLastChunkView){if(this.privLastChunkView.length>I.byteLength)return M.set(this.privLastChunkView.slice(0,I.byteLength)),this.privLastChunkView=this.privLastChunkView.slice(I.byteLength),Promise.resolve(I.byteLength);M.set(this.privLastChunkView),T=this.privLastChunkView.length,this.privLastChunkView=void 0}for(;T<I.byteLength&&!this.privStream.isReadEnded;){const N=yield this.privStream.read();if(void 0===N||N.isEnd)this.privStream.readEnded();else{let L;N.buffer.byteLength>I.byteLength-T?(L=N.buffer.slice(0,I.byteLength-T),this.privLastChunkView=new Int8Array(N.buffer.slice(I.byteLength-T))):L=N.buffer,M.set(new Int8Array(L),T),T+=L.byteLength}}return T})}write(I){_.Contracts.throwIfNullOrUndefined(this.privStream,"must set format before writing"),this.privStream.writeStreamChunk({buffer:I,isEnd:!1,timeReceived:Date.now()})}close(){this.privStream.close()}}p.PullAudioOutputStreamImpl=w;class S extends b{constructor(){super()}static create(I){return new h(I)}}p.PushAudioOutputStream=S;class h extends S{constructor(I){super(),this.privId=v.createNoDashGuid(),this.privCallback=I}set format(I){}write(I){this.privCallback.write&&this.privCallback.write(I)}close(){this.privCallback.close&&this.privCallback.close()}id(){return this.privId}}p.PushAudioOutputStreamImpl=h},7833:(ne,p)=>{"use strict";var y,_;Object.defineProperty(p,"__esModule",{value:!0}),p.AudioStreamFormatImpl=p.AudioStreamFormat=p.AudioFormatTag=void 0,(_=y=p.AudioFormatTag||(p.AudioFormatTag={}))[_.PCM=1]="PCM",_[_.MuLaw=2]="MuLaw",_[_.Siren=3]="Siren",_[_.MP3=4]="MP3",_[_.SILKSkype=5]="SILKSkype",_[_.OGG_OPUS=6]="OGG_OPUS",_[_.WEBM_OPUS=7]="WEBM_OPUS",_[_.ALaw=8]="ALaw",_[_.FLAC=9]="FLAC",_[_.OPUS=10]="OPUS";class o{static getDefaultInputFormat(){return v.getDefaultInputFormat()}static getWaveFormat(A,b,P,w){return new v(A,b,P,w)}static getWaveFormatPCM(A,b,P){return new v(A,b,P)}}p.AudioStreamFormat=o;class v extends o{constructor(A=16e3,b=16,P=1,w=y.PCM){super();let S=!0;switch(w){case y.PCM:this.formatTag=1;break;case y.ALaw:this.formatTag=6;break;case y.MuLaw:this.formatTag=7;break;default:S=!1}if(this.bitsPerSample=b,this.samplesPerSec=A,this.channels=P,this.avgBytesPerSec=this.samplesPerSec*this.channels*(this.bitsPerSample/8),this.blockAlign=this.channels*Math.max(this.bitsPerSample,8),S){this.privHeader=new ArrayBuffer(44);const h=new DataView(this.privHeader);this.setString(h,0,"RIFF"),h.setUint32(4,0,!0),this.setString(h,8,"WAVEfmt "),h.setUint32(16,16,!0),h.setUint16(20,this.formatTag,!0),h.setUint16(22,this.channels,!0),h.setUint32(24,this.samplesPerSec,!0),h.setUint32(28,this.avgBytesPerSec,!0),h.setUint16(32,this.channels*(this.bitsPerSample/8),!0),h.setUint16(34,this.bitsPerSample,!0),this.setString(h,36,"data"),h.setUint32(40,0,!0)}}static getDefaultInputFormat(){return new v}static getAudioContext(A){const b=window.AudioContext||window.webkitAudioContext||!1;if(b)return void 0!==A&&navigator.mediaDevices.getSupportedConstraints().sampleRate?new b({sampleRate:A}):new b;throw new Error("Browser does not support Web Audio API (AudioContext is not available).")}close(){}get header(){return this.privHeader}setString(A,b,P){for(let w=0;w<P.length;w++)A.setUint8(b+w,P.charCodeAt(w))}}p.AudioStreamFormatImpl=v},7633:function(ne,p,y){"use strict";var o=this&&this.__awaiter||function(P,w,S,h){return new(S||(S=Promise))(function(I,M){function T(z){try{L(h.next(z))}catch(V){M(V)}}function N(z){try{L(h.throw(z))}catch(V){M(V)}}function L(z){z.done?I(z.value):function m(I){return I instanceof S?I:new S(function(M){M(I)})}(z.value).then(T,N)}L((h=h.apply(P,w||[])).next())})};Object.defineProperty(p,"__esModule",{value:!0}),p.BaseAudioPlayer=void 0;const v=y(5723),_=y(8323),A=y(7833);p.BaseAudioPlayer=class b{constructor(w){this.audioContext=null,this.gainNode=null,this.autoUpdateBufferTimer=0,void 0===w&&(w=_.AudioStreamFormat.getDefaultInputFormat()),this.init(w)}playAudioSample(w,S,h){try{this.ensureInitializedContext();const m=this.formatAudioData(w),I=new Float32Array(this.samples.length+m.length);I.set(this.samples,0),I.set(m,this.samples.length),this.samples=I,S&&S()}catch(m){h&&h(m)}}stopAudio(w,S){null!==this.audioContext&&(this.samples=new Float32Array,clearInterval(this.autoUpdateBufferTimer),this.audioContext.close().then(()=>{w&&w()},h=>{S&&S(h)}),this.audioContext=null)}init(w){this.audioFormat=w,this.samples=new Float32Array}ensureInitializedContext(){null===this.audioContext&&(this.createAudioContext(),this.autoUpdateBufferTimer=setInterval(()=>{this.updateAudioBuffer()},200))}createAudioContext(){this.audioContext=A.AudioStreamFormatImpl.getAudioContext(),this.gainNode=this.audioContext.createGain(),this.gainNode.gain.value=1,this.gainNode.connect(this.audioContext.destination),this.startTime=this.audioContext.currentTime}formatAudioData(w){switch(this.audioFormat.bitsPerSample){case 8:return this.formatArrayBuffer(new Int8Array(w),128);case 16:return this.formatArrayBuffer(new Int16Array(w),32768);case 32:return this.formatArrayBuffer(new Int32Array(w),2147483648);default:throw new v.InvalidOperationError("Only WAVE_FORMAT_PCM (8/16/32 bps) format supported at this time")}}formatArrayBuffer(w,S){const h=new Float32Array(w.length);for(let m=0;m<w.length;m++)h[m]=w[m]/S;return h}updateAudioBuffer(){if(0===this.samples.length)return;const w=this.audioFormat.channels,S=this.audioContext.createBufferSource(),m=this.audioContext.createBuffer(w,this.samples.length/w,this.audioFormat.samplesPerSec);for(let I=0;I<w;I++){let M=I;const T=m.getChannelData(I);for(let N=0;N<this.samples.length;N++,M+=w)T[N]=this.samples[M]}this.startTime<this.audioContext.currentTime&&(this.startTime=this.audioContext.currentTime),S.buffer=m,S.connect(this.gainNode),S.start(this.startTime),this.startTime+=m.duration,this.samples=new Float32Array}playAudio(w){return o(this,void 0,void 0,function*(){null===this.audioContext&&this.createAudioContext();const S=this.audioContext.createBufferSource(),h=this.audioContext.destination;yield this.audioContext.decodeAudioData(w,m=>{S.buffer=m,S.connect(h),S.start(0)})})}}},7374:(ne,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.PullAudioInputStreamCallback=void 0,p.PullAudioInputStreamCallback=class y{}},3424:(ne,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.PushAudioOutputStreamCallback=void 0,p.PushAudioOutputStreamCallback=class y{}},1819:function(ne,p,y){"use strict";var o=this&&this.__awaiter||function(S,h,m,I){return new(m||(m=Promise))(function(T,N){function L(q){try{V(I.next(q))}catch(X){N(X)}}function z(q){try{V(I.throw(q))}catch(X){N(X)}}function V(q){q.done?T(q.value):function M(T){return T instanceof m?T:new m(function(N){N(T)})}(q.value).then(L,z)}V((I=I.apply(S,h||[])).next())})};Object.defineProperty(p,"__esModule",{value:!0}),p.SpeakerAudioDestination=void 0;const v=y(847),_=y(4989),A=y(7833),P={[A.AudioFormatTag.PCM]:"audio/wav",[A.AudioFormatTag.MuLaw]:"audio/x-wav",[A.AudioFormatTag.MP3]:"audio/mpeg",[A.AudioFormatTag.OGG_OPUS]:"audio/ogg",[A.AudioFormatTag.WEBM_OPUS]:"audio/webm; codecs=opus",[A.AudioFormatTag.ALaw]:"audio/x-wav",[A.AudioFormatTag.FLAC]:"audio/flac"};p.SpeakerAudioDestination=class w{constructor(h){this.privPlaybackStarted=!1,this.privAppendingToBuffer=!1,this.privMediaSourceOpened=!1,this.privBytesReceived=0,this.privId=h||v.createNoDashGuid(),this.privIsPaused=!1,this.privIsClosed=!1}id(){return this.privId}write(h,m,I){void 0!==this.privAudioBuffer?(this.privAudioBuffer.push(h),this.updateSourceBuffer().then(()=>{m&&m()},M=>{I&&I(M)})):void 0!==this.privAudioOutputStream&&(this.privAudioOutputStream.write(h),this.privBytesReceived+=h.byteLength)}close(h,m){if(this.privIsClosed=!0,void 0!==this.privSourceBuffer)this.handleSourceBufferUpdateEnd().then(()=>{h&&h()},I=>{m&&m(I)});else if(void 0!==this.privAudioOutputStream&&typeof window<"u")if(this.privFormat.formatTag!==A.AudioFormatTag.PCM&&this.privFormat.formatTag!==A.AudioFormatTag.MuLaw&&this.privFormat.formatTag!==A.AudioFormatTag.ALaw||!1!==this.privFormat.hasHeader){let I=new ArrayBuffer(this.privBytesReceived);this.privAudioOutputStream.read(I).then(()=>{I=this.privFormat.addHeader(I);const M=new Blob([I],{type:P[this.privFormat.formatTag]});this.privAudio.src=window.URL.createObjectURL(M),this.notifyPlayback().then(()=>{h&&h()},T=>{m&&m(T)})},M=>{m&&m(M)})}else console.warn("Play back is not supported for raw PCM, mulaw or alaw format without header."),this.onAudioEnd&&this.onAudioEnd(this);else this.onAudioEnd&&this.onAudioEnd(this)}set format(h){if(typeof AudioContext<"u"||typeof window<"u"&&typeof window.webkitAudioContext<"u"){this.privFormat=h;const m=P[this.privFormat.formatTag];void 0===m?console.warn(`Unknown mimeType for format ${A.AudioFormatTag[this.privFormat.formatTag]}; playback is not supported.`):typeof MediaSource<"u"&&MediaSource.isTypeSupported(m)?(this.privAudio=new Audio,this.privAudioBuffer=[],this.privMediaSource=new MediaSource,this.privAudio.src=URL.createObjectURL(this.privMediaSource),this.privAudio.load(),this.privMediaSource.onsourceopen=()=>{this.privMediaSourceOpened=!0,this.privMediaSource.duration=1800,this.privSourceBuffer=this.privMediaSource.addSourceBuffer(m),this.privSourceBuffer.onupdate=()=>{this.updateSourceBuffer().catch(I=>{v.Events.instance.onEvent(new v.BackgroundEvent(I))})},this.privSourceBuffer.onupdateend=()=>{this.handleSourceBufferUpdateEnd().catch(I=>{v.Events.instance.onEvent(new v.BackgroundEvent(I))})},this.privSourceBuffer.onupdatestart=()=>{this.privAppendingToBuffer=!1}},this.updateSourceBuffer().catch(I=>{v.Events.instance.onEvent(new v.BackgroundEvent(I))})):(console.warn(`Format ${A.AudioFormatTag[this.privFormat.formatTag]} could not be played by MSE, streaming playback is not enabled.`),this.privAudioOutputStream=new _.PullAudioOutputStreamImpl,this.privAudioOutputStream.format=this.privFormat,this.privAudio=new Audio)}}get volume(){var h,m;return null!==(m=null===(h=this.privAudio)||void 0===h?void 0:h.volume)&&void 0!==m?m:-1}set volume(h){this.privAudio&&(this.privAudio.volume=h)}mute(){this.privAudio&&(this.privAudio.muted=!0)}unmute(){this.privAudio&&(this.privAudio.muted=!1)}get isClosed(){return this.privIsClosed}get currentTime(){return void 0!==this.privAudio?this.privAudio.currentTime:-1}pause(){!this.privIsPaused&&void 0!==this.privAudio&&(this.privAudio.pause(),this.privIsPaused=!0)}resume(h,m){this.privIsPaused&&void 0!==this.privAudio&&(this.privAudio.play().then(()=>{h&&h()},I=>{m&&m(I)}),this.privIsPaused=!1)}get internalAudio(){return this.privAudio}updateSourceBuffer(){return o(this,void 0,void 0,function*(){if(void 0!==this.privAudioBuffer&&this.privAudioBuffer.length>0&&this.sourceBufferAvailable()){this.privAppendingToBuffer=!0;const h=this.privAudioBuffer.shift();try{this.privSourceBuffer.appendBuffer(h)}catch{return this.privAudioBuffer.unshift(h),void console.log("buffer filled, pausing addition of binaries until space is made")}yield this.notifyPlayback()}else this.canEndStream()&&(yield this.handleSourceBufferUpdateEnd())})}handleSourceBufferUpdateEnd(){return o(this,void 0,void 0,function*(){this.canEndStream()&&this.sourceBufferAvailable()&&(this.privMediaSource.endOfStream(),yield this.notifyPlayback())})}notifyPlayback(){return o(this,void 0,void 0,function*(){!this.privPlaybackStarted&&void 0!==this.privAudio&&(this.privPlaybackStarted=!0,this.onAudioStart&&this.onAudioStart(this),this.privAudio.onended=()=>{this.onAudioEnd&&this.onAudioEnd(this)},this.privIsPaused||(yield this.privAudio.play()))})}canEndStream(){return this.isClosed&&void 0!==this.privSourceBuffer&&0===this.privAudioBuffer.length&&this.privMediaSourceOpened&&!this.privAppendingToBuffer&&"open"===this.privMediaSource.readyState}sourceBufferAvailable(){return void 0!==this.privSourceBuffer&&!this.privSourceBuffer.updating}}},8984:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.AutoDetectSourceLanguageConfig=void 0;const o=y(9464),v=y(5916),_=y(8323),A=y(8964);class b{constructor(){this.privProperties=new _.PropertyCollection,this.privProperties.setProperty(_.PropertyId.SpeechServiceConnection_LanguageIdMode,"AtStart"),this.privLanguageIdMode=A.LanguageIdMode.AtStart}static fromOpenRange(){const w=new b;return w.properties.setProperty(_.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,o.AutoDetectSourceLanguagesOpenRangeOptionName),w}static fromLanguages(w){v.Contracts.throwIfArrayEmptyOrWhitespace(w,"languages");const S=new b;return S.properties.setProperty(_.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,w.join()),S}static fromSourceLanguageConfigs(w){if(w.length<1)throw new Error("Expected non-empty SourceLanguageConfig array.");const S=new b,h=[];return w.forEach(m=>{if(h.push(m.language),void 0!==m.endpointId&&""!==m.endpointId){const I=m.language+_.PropertyId.SpeechServiceConnection_EndpointId.toString();S.properties.setProperty(I,m.endpointId)}}),S.properties.setProperty(_.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,h.join()),S}get properties(){return this.privProperties}set mode(w){w===A.LanguageIdMode.Continuous?(this.privProperties.setProperty(_.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"2"),this.privProperties.setProperty(_.PropertyId.SpeechServiceConnection_LanguageIdMode,"Continuous")):(this.privProperties.setProperty(_.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"1"),this.privProperties.setProperty(_.PropertyId.SpeechServiceConnection_LanguageIdMode,"AtStart")),this.privLanguageIdMode=w}}p.AutoDetectSourceLanguageConfig=b},2873:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.AutoDetectSourceLanguageResult=void 0;const o=y(5916);class v{constructor(A,b){o.Contracts.throwIfNullOrUndefined(A,"language"),o.Contracts.throwIfNullOrUndefined(b,"languageDetectionConfidence"),this.privLanguage=A,this.privLanguageDetectionConfidence=b}static fromResult(A){return new v(A.language,A.languageDetectionConfidence)}static fromConversationTranscriptionResult(A){return new v(A.language,A.languageDetectionConfidence)}get language(){return this.privLanguage}get languageDetectionConfidence(){return this.privLanguageDetectionConfidence}}p.AutoDetectSourceLanguageResult=v},7288:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.AvatarConfig=void 0;const o=y(5916),v=y(8323);p.AvatarConfig=class _{constructor(b,P,w){this.privCustomized=!1,o.Contracts.throwIfNullOrWhitespace(b,"character"),this.character=b,this.style=P,void 0===w&&(w=new v.AvatarVideoFormat),this.videoFormat=w}get customized(){return this.privCustomized}set customized(b){this.privCustomized=b}get backgroundColor(){return this.privBackgroundColor}set backgroundColor(b){this.privBackgroundColor=b}}},3760:(ne,p)=>{"use strict";var v;Object.defineProperty(p,"__esModule",{value:!0}),p.AvatarEventArgs=p.AvatarEventTypes=void 0,(v=p.AvatarEventTypes||(p.AvatarEventTypes={})).SwitchedToSpeaking="SwitchedToSpeaking",v.SwitchedToIdle="SwitchedToIdle",v.SessionClosed="SessionClosed",p.AvatarEventArgs=class o{constructor(_,A){this.privOffset=_,this.privDescription=A}get type(){return this.privType}get offset(){return this.privOffset}get description(){return this.privDescription}}},6951:function(ne,p,y){"use strict";var o=this&&this.__awaiter||function(m,I,M,T){return new(M||(M=Promise))(function(L,z){function V(ce){try{X(T.next(ce))}catch(fe){z(fe)}}function q(ce){try{X(T.throw(ce))}catch(fe){z(fe)}}function X(ce){ce.done?L(ce.value):function N(L){return L instanceof M?L:new M(function(z){z(L)})}(ce.value).then(V,q)}X((T=T.apply(m,I||[])).next())})};Object.defineProperty(p,"__esModule",{value:!0}),p.AvatarSynthesizer=void 0;const v=y(2436),_=y(9464),A=y(847),b=y(7176),P=y(8323),w=y(5916),S=y(2344);p.AvatarSynthesizer=class h extends P.Synthesizer{constructor(I,M){super(I),w.Contracts.throwIfNullOrUndefined(M,"avatarConfig"),this.privConnectionFactory=new v.SpeechSynthesisConnectionFactory,this.privAvatarConfig=M,this.implCommonSynthesizeSetup()}implCommonSynthesizeSetup(){super.implCommonSynthesizeSetup(),this.privAdapter.audioOutputFormat=b.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormat(P.SpeechSynthesisOutputFormat.Riff24Khz16BitMonoPcm)}startAvatarAsync(I){return o(this,void 0,void 0,function*(){w.Contracts.throwIfNullOrUndefined(I,"peerConnection"),this.privIceServers=I.getConfiguration().iceServers,w.Contracts.throwIfNullOrUndefined(this.privIceServers,"Ice servers must be set.");const M=new A.Deferred;I.onicegatheringstatechange=()=>{A.Events.instance.onEvent(new A.PlatformEvent("peer connection: ice gathering state: "+I.iceGatheringState,A.EventType.Debug)),"complete"===I.iceGatheringState&&(A.Events.instance.onEvent(new A.PlatformEvent("peer connection: ice gathering complete.",A.EventType.Info)),M.resolve())};const T=yield I.createOffer();yield I.setLocalDescription(T),yield M.promise,A.Events.instance.onEvent(new A.PlatformEvent("peer connection: got local SDP.",A.EventType.Info)),this.privProperties.setProperty(P.PropertyId.TalkingAvatarService_WebRTC_SDP,JSON.stringify(I.localDescription));const N=yield this.speak("",!1);if(N.reason!==P.ResultReason.SynthesizingAudioCompleted)return new P.SynthesisResult(N.resultId,N.reason,N.errorDetails,N.properties);const L=atob(N.properties.getProperty(P.PropertyId.TalkingAvatarService_WebRTC_SDP)),z=new RTCSessionDescription(JSON.parse(L));return yield I.setRemoteDescription(z),new P.SynthesisResult(N.resultId,N.reason,void 0,N.properties)})}speakTextAsync(I){return o(this,void 0,void 0,function*(){const M=yield this.speak(I,!1);return new P.SynthesisResult(M.resultId,M.reason,M.errorDetails,M.properties)})}speakSsmlAsync(I){return o(this,void 0,void 0,function*(){const M=yield this.speak(I,!0);return new P.SynthesisResult(M.resultId,M.reason,M.errorDetails,M.properties)})}stopSpeakingAsync(){return o(this,void 0,void 0,function*(){for(;this.synthesisRequestQueue.length()>0;)(yield this.synthesisRequestQueue.dequeue()).err("Synthesis is canceled by user.");return this.privAdapter.stopSpeaking()})}stopAvatarAsync(){return o(this,void 0,void 0,function*(){return w.Contracts.throwIfDisposed(this.privDisposed),this.dispose(!0)})}close(){return o(this,void 0,void 0,function*(){if(!this.privDisposed)return this.dispose(!0)})}get iceServers(){return this.privIceServers}createSynthesisAdapter(I,M,T){return new _.AvatarSynthesisAdapter(I,M,T,this,this.privAvatarConfig)}createRestSynthesisAdapter(I,M){}createSynthesizerConfig(I){const M=super.createSynthesizerConfig(I);return M.avatarEnabled=!0,M}speak(I,M){return o(this,void 0,void 0,function*(){const T=A.createNoDashGuid(),N=new A.Deferred;return this.synthesisRequestQueue.enqueue(new S.SynthesisRequest(T,I,M,L=>{N.resolve(L),this.privSynthesizing=!1,this.adapterSpeak()},L=>{N.reject(L),this.privSynthesizing=!1})),this.adapterSpeak(),N.promise})}}},2027:(ne,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.AvatarVideoFormat=p.Coordinate=void 0,p.Coordinate=class y{constructor(_,A){this.x=_,this.y=A}},p.AvatarVideoFormat=class o{constructor(_="H264",A=2e6,b=1920,P=1080){this.codec=_,this.bitrate=A,this.width=b,this.height=P}setCropRange(_,A){this.cropRange={bottomRight:A,topLeft:_}}}},3247:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.AvatarWebRTCConnectionResult=void 0;const o=y(8323);p.AvatarWebRTCConnectionResult=class v extends o.SynthesisResult{constructor(A,b,P,w,S){super(b,P,w,S),this.privSDPAnswer=A}get SDPAnswer(){return this.privSDPAnswer}}},8649:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.BotFrameworkConfig=void 0;const o=y(5916),v=y(6824),_=y(8323);p.BotFrameworkConfig=class A extends v.DialogServiceConfigImpl{constructor(){super()}static fromSubscription(P,w,S){o.Contracts.throwIfNullOrWhitespace(P,"subscription"),o.Contracts.throwIfNullOrWhitespace(w,"region");const h=new v.DialogServiceConfigImpl;return h.setProperty(_.PropertyId.Conversation_DialogType,v.DialogServiceConfig.DialogTypes.BotFramework),h.setProperty(_.PropertyId.SpeechServiceConnection_Key,P),h.setProperty(_.PropertyId.SpeechServiceConnection_Region,w),S&&h.setProperty(_.PropertyId.Conversation_ApplicationId,S),h}static fromAuthorizationToken(P,w,S){o.Contracts.throwIfNullOrWhitespace(P,"authorizationToken"),o.Contracts.throwIfNullOrWhitespace(w,"region");const h=new v.DialogServiceConfigImpl;return h.setProperty(_.PropertyId.Conversation_DialogType,v.DialogServiceConfig.DialogTypes.BotFramework),h.setProperty(_.PropertyId.SpeechServiceAuthorization_Token,P),h.setProperty(_.PropertyId.SpeechServiceConnection_Region,w),S&&h.setProperty(_.PropertyId.Conversation_ApplicationId,S),h}static fromHost(P,w,S){o.Contracts.throwIfNullOrUndefined(P,"host");const h=P instanceof URL?P:new URL(`wss://${P}.convai.speech.azure.us`);o.Contracts.throwIfNullOrUndefined(h,"resolvedHost");const m=new v.DialogServiceConfigImpl;return m.setProperty(_.PropertyId.Conversation_DialogType,v.DialogServiceConfig.DialogTypes.BotFramework),m.setProperty(_.PropertyId.SpeechServiceConnection_Host,h.toString()),void 0!==w&&m.setProperty(_.PropertyId.SpeechServiceConnection_Key,w),m}static fromEndpoint(P,w){o.Contracts.throwIfNull(P,"endpoint");const S=new v.DialogServiceConfigImpl;return S.setProperty(_.PropertyId.Conversation_DialogType,v.DialogServiceConfig.DialogTypes.BotFramework),S.setProperty(_.PropertyId.SpeechServiceConnection_Endpoint,P.toString()),void 0!==w&&S.setProperty(_.PropertyId.SpeechServiceConnection_Key,w),S}}},5401:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.CancellationDetails=void 0;const o=y(9464),v=y(4572),_=y(8323);class A extends v.CancellationDetailsBase{constructor(P,w,S){super(P,w,S)}static fromResult(P){let w=_.CancellationReason.Error,S=_.CancellationErrorCode.NoError;if(P instanceof _.RecognitionResult&&P.json){const h=o.SimpleSpeechPhrase.fromJSON(P.json);w=o.EnumTranslation.implTranslateCancelResult(h.RecognitionStatus)}return P.properties&&(S=_.CancellationErrorCode[P.properties.getProperty(o.CancellationErrorCodePropertyName,_.CancellationErrorCode[_.CancellationErrorCode.NoError])]),new A(w,P.errorDetails||o.EnumTranslation.implTranslateErrorDetails(S),S)}}p.CancellationDetails=A},4572:(ne,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.CancellationDetailsBase=void 0,p.CancellationDetailsBase=class y{constructor(v,_,A){this.privReason=v,this.privErrorDetails=_,this.privErrorCode=A}get reason(){return this.privReason}get errorDetails(){return this.privErrorDetails}get ErrorCode(){return this.privErrorCode}}},5889:(ne,p)=>{"use strict";var o;Object.defineProperty(p,"__esModule",{value:!0}),p.CancellationErrorCode=void 0,(o=p.CancellationErrorCode||(p.CancellationErrorCode={}))[o.NoError=0]="NoError",o[o.AuthenticationFailure=1]="AuthenticationFailure",o[o.BadRequestParameters=2]="BadRequestParameters",o[o.TooManyRequests=3]="TooManyRequests",o[o.ConnectionFailure=4]="ConnectionFailure",o[o.ServiceTimeout=5]="ServiceTimeout",o[o.ServiceError=6]="ServiceError",o[o.RuntimeError=7]="RuntimeError",o[o.Forbidden=8]="Forbidden"},3245:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.CancellationEventArgsBase=void 0;const o=y(8323);p.CancellationEventArgsBase=class v extends o.RecognitionEventArgs{constructor(A,b,P,w,S){super(w,S),this.privReason=A,this.privErrorDetails=b,this.privErrorCode=P}get reason(){return this.privReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}}},835:(ne,p)=>{"use strict";var o;Object.defineProperty(p,"__esModule",{value:!0}),p.CancellationReason=void 0,(o=p.CancellationReason||(p.CancellationReason={}))[o.Error=0]="Error",o[o.EndOfStream=1]="EndOfStream"},9433:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.Connection=void 0;const o=y(9464),v=y(847),_=y(9646),A=y(5916),b=y(8323);class P{static fromRecognizer(S){const h=S.internalData,m=new P;return m.privInternalData=h,m.setupEvents(),m}static fromSynthesizer(S){const h=S.internalData,m=new P;return m.privInternalData=h,m.setupEvents(),m}openConnection(S,h){v.marshalPromiseToCallbacks(this.privInternalData.connect(),S,h)}closeConnection(S,h){if(this.privInternalData instanceof o.SynthesisAdapterBase)throw new Error("Disconnecting a synthesizer's connection is currently not supported");v.marshalPromiseToCallbacks(this.privInternalData.disconnect(),S,h)}setMessageProperty(S,h,m){if(A.Contracts.throwIfNullOrWhitespace(h,"propertyName"),this.privInternalData instanceof o.ServiceRecognizerBase){if("speech.context"!==S.toLowerCase())throw new Error("Only speech.context message property sets are currently supported for recognizer");this.privInternalData.speechContext.setSection(h,m)}else if(this.privInternalData instanceof o.SynthesisAdapterBase){if("synthesis.context"!==S.toLowerCase())throw new Error("Only synthesis.context message property sets are currently supported for synthesizer");this.privInternalData.synthesisContext.setSection(h,m)}}sendMessageAsync(S,h,m,I){v.marshalPromiseToCallbacks(this.privInternalData.sendNetworkMessage(S,h),m,I)}close(){}setupEvents(){this.privEventListener=this.privInternalData.connectionEvents.attach(S=>{"ConnectionEstablishedEvent"===S.name?this.connected&&this.connected(new b.ConnectionEventArgs(S.connectionId)):"ConnectionClosedEvent"===S.name?this.disconnected&&this.disconnected(new b.ConnectionEventArgs(S.connectionId)):"ConnectionMessageSentEvent"===S.name?this.messageSent&&this.messageSent(new b.ConnectionMessageEventArgs(new _.ConnectionMessageImpl(S.message))):"ConnectionMessageReceivedEvent"===S.name&&this.messageReceived&&this.messageReceived(new b.ConnectionMessageEventArgs(new _.ConnectionMessageImpl(S.message)))}),this.privServiceEventListener=this.privInternalData.serviceEvents.attach(S=>{this.receivedServiceMessage&&this.receivedServiceMessage(new b.ServiceEventArgs(S.jsonString,S.name))})}}p.Connection=P},651:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.ConnectionEventArgs=void 0;const o=y(8323);p.ConnectionEventArgs=class v extends o.SessionEventArgs{}},9646:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.ConnectionMessageImpl=p.ConnectionMessage=void 0;const o=y(3747),v=y(847),_=y(1549),A=y(1560);p.ConnectionMessage=class b{},p.ConnectionMessageImpl=class P{constructor(S){this.privConnectionMessage=S,this.privProperties=new _.PropertyCollection,this.privConnectionMessage.headers[o.HeaderNames.ConnectionId]&&this.privProperties.setProperty(A.PropertyId.Speech_SessionId,this.privConnectionMessage.headers[o.HeaderNames.ConnectionId]),Object.keys(this.privConnectionMessage.headers).forEach(h=>{this.privProperties.setProperty(h,this.privConnectionMessage.headers[h])})}get path(){return this.privConnectionMessage.headers[Object.keys(this.privConnectionMessage.headers).find(S=>S.toLowerCase()==="path".toLowerCase())]}get isTextMessage(){return this.privConnectionMessage.messageType===v.MessageType.Text}get isBinaryMessage(){return this.privConnectionMessage.messageType===v.MessageType.Binary}get TextMessage(){return this.privConnectionMessage.textBody}get binaryMessage(){return this.privConnectionMessage.binaryBody}get properties(){return this.privProperties}toString(){return""}}},122:(ne,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.ConnectionMessageEventArgs=void 0,p.ConnectionMessageEventArgs=class y{constructor(v){this.privConnectionMessage=v}get message(){return this.privConnectionMessage}toString(){return"Message: "+this.privConnectionMessage.toString()}}},5916:(ne,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.Contracts=void 0;class y{static throwIfNullOrUndefined(v,_){if(null==v)throw new Error("throwIfNullOrUndefined:"+_)}static throwIfNull(v,_){if(null===v)throw new Error("throwIfNull:"+_)}static throwIfNullOrWhitespace(v,_){if(y.throwIfNullOrUndefined(v,_),(""+v).trim().length<1)throw new Error("throwIfNullOrWhitespace:"+_)}static throwIfNullOrTooLong(v,_,A){if(y.throwIfNullOrUndefined(v,_),(""+v).length>A)throw new Error("throwIfNullOrTooLong:"+_+" (more than "+A.toString()+" characters)")}static throwIfNullOrTooShort(v,_,A){if(y.throwIfNullOrUndefined(v,_),(""+v).length<A)throw new Error("throwIfNullOrTooShort:"+_+" (less than "+A.toString()+" characters)")}static throwIfDisposed(v){if(v)throw new Error("the object is already disposed")}static throwIfArrayEmptyOrWhitespace(v,_){if(y.throwIfNullOrUndefined(v,_),0===v.length)throw new Error("throwIfArrayEmptyOrWhitespace:"+_);for(const A of v)y.throwIfNullOrWhitespace(A,_)}static throwIfFileDoesNotExist(v,_){y.throwIfNullOrWhitespace(v,_)}static throwIfNotUndefined(v,_){if(void 0!==v)throw new Error("throwIfNotUndefined:"+_)}}p.Contracts=y},7514:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.ConversationTranscriptionCanceledEventArgs=void 0;const o=y(3245);p.ConversationTranscriptionCanceledEventArgs=class v extends o.CancellationEventArgsBase{}},9154:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.CustomCommandsConfig=void 0;const o=y(5916),v=y(6824),_=y(8323);p.CustomCommandsConfig=class A extends v.DialogServiceConfigImpl{constructor(){super()}static fromSubscription(P,w,S){o.Contracts.throwIfNullOrWhitespace(P,"applicationId"),o.Contracts.throwIfNullOrWhitespace(w,"subscription"),o.Contracts.throwIfNullOrWhitespace(S,"region");const h=new v.DialogServiceConfigImpl;return h.setProperty(_.PropertyId.Conversation_DialogType,v.DialogServiceConfig.DialogTypes.CustomCommands),h.setProperty(_.PropertyId.Conversation_ApplicationId,P),h.setProperty(_.PropertyId.SpeechServiceConnection_Key,w),h.setProperty(_.PropertyId.SpeechServiceConnection_Region,S),h}static fromAuthorizationToken(P,w,S){o.Contracts.throwIfNullOrWhitespace(P,"applicationId"),o.Contracts.throwIfNullOrWhitespace(w,"authorizationToken"),o.Contracts.throwIfNullOrWhitespace(S,"region");const h=new v.DialogServiceConfigImpl;return h.setProperty(_.PropertyId.Conversation_DialogType,v.DialogServiceConfig.DialogTypes.CustomCommands),h.setProperty(_.PropertyId.Conversation_ApplicationId,P),h.setProperty(_.PropertyId.SpeechServiceAuthorization_Token,w),h.setProperty(_.PropertyId.SpeechServiceConnection_Region,S),h}set applicationId(P){o.Contracts.throwIfNullOrWhitespace(P,"value"),this.setProperty(_.PropertyId.Conversation_ApplicationId,P)}get applicationId(){return this.getProperty(_.PropertyId.Conversation_ApplicationId)}}},3566:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.Diagnostics=void 0;const o=y(4853),v=y(847);class _{static SetLoggingLevel(b){this.privListener=new o.ConsoleLoggingListener(b),v.Events.instance.attachConsoleListener(this.privListener)}static StartConsoleOutput(){this.privListener&&(this.privListener.enableConsoleOutput=!0)}static StopConsoleOutput(){this.privListener&&(this.privListener.enableConsoleOutput=!1)}static SetLogOutputPath(b){if(!(typeof window>"u"))throw new Error("File system logging not available in browser.");this.privListener&&(this.privListener.logPath=b)}}p.Diagnostics=_,_.privListener=void 0},6824:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.DialogServiceConfigImpl=p.DialogServiceConfig=void 0;const o=y(5916),v=y(8323);class _{constructor(){}set applicationId(P){}static get DialogTypes(){return{BotFramework:"bot_framework",CustomCommands:"custom_commands"}}}p.DialogServiceConfig=_,p.DialogServiceConfigImpl=class A extends _{constructor(){super(),this.privSpeechConfig=new v.SpeechConfigImpl}get properties(){return this.privSpeechConfig.properties}get speechRecognitionLanguage(){return this.privSpeechConfig.speechRecognitionLanguage}set speechRecognitionLanguage(P){o.Contracts.throwIfNullOrWhitespace(P,"value"),this.privSpeechConfig.speechRecognitionLanguage=P}get outputFormat(){return this.privSpeechConfig.outputFormat}set outputFormat(P){this.privSpeechConfig.outputFormat=P}setProperty(P,w){this.privSpeechConfig.setProperty(P,w)}getProperty(P,w){return this.privSpeechConfig.getProperty(P)}setProxy(P,w,S,h){this.setProperty(v.PropertyId.SpeechServiceConnection_ProxyHostName,P),this.setProperty(v.PropertyId.SpeechServiceConnection_ProxyPort,`${w}`),S&&this.setProperty(v.PropertyId.SpeechServiceConnection_ProxyUserName,S),h&&this.setProperty(v.PropertyId.SpeechServiceConnection_ProxyPassword,h)}setServiceProperty(P,w,S){this.privSpeechConfig.setServiceProperty(P,w)}close(){}}},5914:function(ne,p,y){"use strict";var o=this&&this.__awaiter||function(h,m,I,M){return new(I||(I=Promise))(function(N,L){function z(X){try{q(M.next(X))}catch(ce){L(ce)}}function V(X){try{q(M.throw(X))}catch(ce){L(ce)}}function q(X){X.done?N(X.value):function T(N){return N instanceof I?N:new I(function(L){L(N)})}(X.value).then(z,V)}q((M=M.apply(h,m||[])).next())})};Object.defineProperty(p,"__esModule",{value:!0}),p.DialogServiceConnector=void 0;const v=y(933),_=y(9464),A=y(847),b=y(5916),P=y(8323),w=y(1560);p.DialogServiceConnector=class S extends P.Recognizer{constructor(m,I){const M=m;b.Contracts.throwIfNull(m,"dialogConfig"),super(I,M.properties,new v.DialogConnectionFactory),this.isTurnComplete=!0,this.privIsDisposed=!1,this.privProperties=M.properties.clone();const T=this.buildAgentConfig();this.privReco.agentConfig.set(T)}connect(m,I){A.marshalPromiseToCallbacks(this.privReco.connect(),m,I)}disconnect(m,I){A.marshalPromiseToCallbacks(this.privReco.disconnect(),m,I)}get authorizationToken(){return this.properties.getProperty(w.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(m){b.Contracts.throwIfNullOrWhitespace(m,"token"),this.properties.setProperty(w.PropertyId.SpeechServiceAuthorization_Token,m)}get properties(){return this.privProperties}get speechActivityTemplate(){return this.properties.getProperty(w.PropertyId.Conversation_Speech_Activity_Template)}set speechActivityTemplate(m){this.properties.setProperty(w.PropertyId.Conversation_Speech_Activity_Template,m)}listenOnceAsync(m,I){if(this.isTurnComplete){b.Contracts.throwIfDisposed(this.privIsDisposed);const T=(()=>o(this,void 0,void 0,function*(){yield this.privReco.connect(),yield this.implRecognizerStop(),this.isTurnComplete=!1;const N=new A.Deferred;yield this.privReco.recognize(_.RecognitionMode.Conversation,N.resolve,N.reject);const L=yield N.promise;return yield this.implRecognizerStop(),L}))();T.catch(()=>{this.dispose(!0).catch(()=>{})}),A.marshalPromiseToCallbacks(T.finally(()=>{this.isTurnComplete=!0}),m,I)}}sendActivityAsync(m,I,M){A.marshalPromiseToCallbacks(this.privReco.sendMessage(m),I,M)}close(m,I){b.Contracts.throwIfDisposed(this.privIsDisposed),A.marshalPromiseToCallbacks(this.dispose(!0),m,I)}dispose(m){const I=Object.create(null,{dispose:{get:()=>super.dispose}});return o(this,void 0,void 0,function*(){this.privIsDisposed||m&&(this.privIsDisposed=!0,yield this.implRecognizerStop(),yield I.dispose.call(this,m))})}createRecognizerConfig(m){return new _.RecognizerConfig(m,this.privProperties)}createServiceRecognizer(m,I,M,T){return new _.DialogServiceAdapter(m,I,M,T,this)}buildAgentConfig(){return{botInfo:{commType:this.properties.getProperty("Conversation_Communication_Type","Default"),commandsCulture:void 0,connectionId:this.properties.getProperty(w.PropertyId.Conversation_Agent_Connection_Id),conversationId:this.properties.getProperty(w.PropertyId.Conversation_Conversation_Id,void 0),fromId:this.properties.getProperty(w.PropertyId.Conversation_From_Id,void 0),ttsAudioFormat:this.properties.getProperty(w.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)},version:.2}}}},8323:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0});var o=y(4794);Object.defineProperty(p,"AudioConfig",{enumerable:!0,get:function(){return o.AudioConfig}});var v=y(7833);Object.defineProperty(p,"AudioStreamFormat",{enumerable:!0,get:function(){return v.AudioStreamFormat}}),Object.defineProperty(p,"AudioFormatTag",{enumerable:!0,get:function(){return v.AudioFormatTag}});var _=y(7596);Object.defineProperty(p,"AudioInputStream",{enumerable:!0,get:function(){return _.AudioInputStream}}),Object.defineProperty(p,"PullAudioInputStream",{enumerable:!0,get:function(){return _.PullAudioInputStream}}),Object.defineProperty(p,"PushAudioInputStream",{enumerable:!0,get:function(){return _.PushAudioInputStream}});var A=y(4989);Object.defineProperty(p,"AudioOutputStream",{enumerable:!0,get:function(){return A.AudioOutputStream}}),Object.defineProperty(p,"PullAudioOutputStream",{enumerable:!0,get:function(){return A.PullAudioOutputStream}}),Object.defineProperty(p,"PushAudioOutputStream",{enumerable:!0,get:function(){return A.PushAudioOutputStream}});var b=y(835);Object.defineProperty(p,"CancellationReason",{enumerable:!0,get:function(){return b.CancellationReason}});var P=y(7374);Object.defineProperty(p,"PullAudioInputStreamCallback",{enumerable:!0,get:function(){return P.PullAudioInputStreamCallback}});var w=y(3424);Object.defineProperty(p,"PushAudioOutputStreamCallback",{enumerable:!0,get:function(){return w.PushAudioOutputStreamCallback}});var S=y(4708);Object.defineProperty(p,"KeywordRecognitionModel",{enumerable:!0,get:function(){return S.KeywordRecognitionModel}});var h=y(6388);Object.defineProperty(p,"SessionEventArgs",{enumerable:!0,get:function(){return h.SessionEventArgs}});var m=y(4541);Object.defineProperty(p,"RecognitionEventArgs",{enumerable:!0,get:function(){return m.RecognitionEventArgs}});var I=y(5586);Object.defineProperty(p,"OutputFormat",{enumerable:!0,get:function(){return I.OutputFormat}});var M=y(4377);Object.defineProperty(p,"IntentRecognitionEventArgs",{enumerable:!0,get:function(){return M.IntentRecognitionEventArgs}});var T=y(5483);Object.defineProperty(p,"RecognitionResult",{enumerable:!0,get:function(){return T.RecognitionResult}});var N=y(8277);Object.defineProperty(p,"SpeechRecognitionResult",{enumerable:!0,get:function(){return N.SpeechRecognitionResult}});var L=y(9366);Object.defineProperty(p,"IntentRecognitionResult",{enumerable:!0,get:function(){return L.IntentRecognitionResult}});var z=y(5633);Object.defineProperty(p,"LanguageUnderstandingModel",{enumerable:!0,get:function(){return z.LanguageUnderstandingModel}});var V=y(7377);Object.defineProperty(p,"SpeechRecognitionEventArgs",{enumerable:!0,get:function(){return V.SpeechRecognitionEventArgs}}),Object.defineProperty(p,"ConversationTranscriptionEventArgs",{enumerable:!0,get:function(){return V.ConversationTranscriptionEventArgs}}),Object.defineProperty(p,"MeetingTranscriptionEventArgs",{enumerable:!0,get:function(){return V.MeetingTranscriptionEventArgs}});var q=y(1794);Object.defineProperty(p,"SpeechRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return q.SpeechRecognitionCanceledEventArgs}});var X=y(2779);Object.defineProperty(p,"TranslationRecognitionEventArgs",{enumerable:!0,get:function(){return X.TranslationRecognitionEventArgs}});var ce=y(9471);Object.defineProperty(p,"TranslationSynthesisEventArgs",{enumerable:!0,get:function(){return ce.TranslationSynthesisEventArgs}});var fe=y(1505);Object.defineProperty(p,"TranslationRecognitionResult",{enumerable:!0,get:function(){return fe.TranslationRecognitionResult}});var pe=y(2198);Object.defineProperty(p,"TranslationSynthesisResult",{enumerable:!0,get:function(){return pe.TranslationSynthesisResult}});var Ae=y(4713);Object.defineProperty(p,"ResultReason",{enumerable:!0,get:function(){return Ae.ResultReason}});var ke=y(2140);Object.defineProperty(p,"SpeechConfig",{enumerable:!0,get:function(){return ke.SpeechConfig}}),Object.defineProperty(p,"SpeechConfigImpl",{enumerable:!0,get:function(){return ke.SpeechConfigImpl}});var Fe=y(3131);Object.defineProperty(p,"SpeechTranslationConfig",{enumerable:!0,get:function(){return Fe.SpeechTranslationConfig}}),Object.defineProperty(p,"SpeechTranslationConfigImpl",{enumerable:!0,get:function(){return Fe.SpeechTranslationConfigImpl}});var we=y(1549);Object.defineProperty(p,"PropertyCollection",{enumerable:!0,get:function(){return we.PropertyCollection}});var Le=y(1560);Object.defineProperty(p,"PropertyId",{enumerable:!0,get:function(){return Le.PropertyId}});var tt=y(4992);Object.defineProperty(p,"Recognizer",{enumerable:!0,get:function(){return tt.Recognizer}});var Ye=y(4858);Object.defineProperty(p,"SpeechRecognizer",{enumerable:!0,get:function(){return Ye.SpeechRecognizer}});var ot=y(1731);Object.defineProperty(p,"IntentRecognizer",{enumerable:!0,get:function(){return ot.IntentRecognizer}});var Xe=y(2526);Object.defineProperty(p,"VoiceProfileType",{enumerable:!0,get:function(){return Xe.VoiceProfileType}});var wn=y(5208);Object.defineProperty(p,"TranslationRecognizer",{enumerable:!0,get:function(){return wn.TranslationRecognizer}});var yr=y(9695);Object.defineProperty(p,"Translations",{enumerable:!0,get:function(){return yr.Translations}});var vn=y(7471);Object.defineProperty(p,"NoMatchReason",{enumerable:!0,get:function(){return vn.NoMatchReason}});var Cr=y(6508);Object.defineProperty(p,"NoMatchDetails",{enumerable:!0,get:function(){return Cr.NoMatchDetails}});var Ee=y(9526);Object.defineProperty(p,"TranslationRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return Ee.TranslationRecognitionCanceledEventArgs}});var De=y(885);Object.defineProperty(p,"IntentRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return De.IntentRecognitionCanceledEventArgs}});var be=y(4572);Object.defineProperty(p,"CancellationDetailsBase",{enumerable:!0,get:function(){return be.CancellationDetailsBase}});var _e=y(5401);Object.defineProperty(p,"CancellationDetails",{enumerable:!0,get:function(){return _e.CancellationDetails}});var Ke=y(5889);Object.defineProperty(p,"CancellationErrorCode",{enumerable:!0,get:function(){return Ke.CancellationErrorCode}});var Qe=y(651);Object.defineProperty(p,"ConnectionEventArgs",{enumerable:!0,get:function(){return Qe.ConnectionEventArgs}});var dt=y(1288);Object.defineProperty(p,"ServiceEventArgs",{enumerable:!0,get:function(){return dt.ServiceEventArgs}});var vt=y(9433);Object.defineProperty(p,"Connection",{enumerable:!0,get:function(){return vt.Connection}});var Sn=y(4567);Object.defineProperty(p,"PhraseListGrammar",{enumerable:!0,get:function(){return Sn.PhraseListGrammar}});var Dt=y(6824);Object.defineProperty(p,"DialogServiceConfig",{enumerable:!0,get:function(){return Dt.DialogServiceConfig}});var Gt=y(8649);Object.defineProperty(p,"BotFrameworkConfig",{enumerable:!0,get:function(){return Gt.BotFrameworkConfig}});var Pt=y(9154);Object.defineProperty(p,"CustomCommandsConfig",{enumerable:!0,get:function(){return Pt.CustomCommandsConfig}});var Ft=y(5914);Object.defineProperty(p,"DialogServiceConnector",{enumerable:!0,get:function(){return Ft.DialogServiceConnector}});var Un=y(4049);Object.defineProperty(p,"ActivityReceivedEventArgs",{enumerable:!0,get:function(){return Un.ActivityReceivedEventArgs}});var Cn=y(3097);Object.defineProperty(p,"TurnStatusReceivedEventArgs",{enumerable:!0,get:function(){return Cn.TurnStatusReceivedEventArgs}});var kn=y(4007);Object.defineProperty(p,"ServicePropertyChannel",{enumerable:!0,get:function(){return kn.ServicePropertyChannel}});var Ve=y(5810);Object.defineProperty(p,"ProfanityOption",{enumerable:!0,get:function(){return Ve.ProfanityOption}});var _n=y(7633);Object.defineProperty(p,"BaseAudioPlayer",{enumerable:!0,get:function(){return _n.BaseAudioPlayer}});var fn=y(122);Object.defineProperty(p,"ConnectionMessageEventArgs",{enumerable:!0,get:function(){return fn.ConnectionMessageEventArgs}});var at=y(9646);Object.defineProperty(p,"ConnectionMessage",{enumerable:!0,get:function(){return at.ConnectionMessage}});var Tr=y(5005);Object.defineProperty(p,"VoiceProfile",{enumerable:!0,get:function(){return Tr.VoiceProfile}});var Bi=y(2427);Object.defineProperty(p,"VoiceProfileEnrollmentResult",{enumerable:!0,get:function(){return Bi.VoiceProfileEnrollmentResult}}),Object.defineProperty(p,"VoiceProfileEnrollmentCancellationDetails",{enumerable:!0,get:function(){return Bi.VoiceProfileEnrollmentCancellationDetails}});var Vn=y(9942);Object.defineProperty(p,"VoiceProfileResult",{enumerable:!0,get:function(){return Vn.VoiceProfileResult}}),Object.defineProperty(p,"VoiceProfileCancellationDetails",{enumerable:!0,get:function(){return Vn.VoiceProfileCancellationDetails}});var Vt=y(4060);Object.defineProperty(p,"VoiceProfilePhraseResult",{enumerable:!0,get:function(){return Vt.VoiceProfilePhraseResult}});var gn=y(7939);Object.defineProperty(p,"VoiceProfileClient",{enumerable:!0,get:function(){return gn.VoiceProfileClient}});var Yt=y(1951);Object.defineProperty(p,"SpeakerRecognizer",{enumerable:!0,get:function(){return Yt.SpeakerRecognizer}});var Jt=y(1197);Object.defineProperty(p,"SpeakerIdentificationModel",{enumerable:!0,get:function(){return Jt.SpeakerIdentificationModel}});var lt=y(3421);Object.defineProperty(p,"SpeakerVerificationModel",{enumerable:!0,get:function(){return lt.SpeakerVerificationModel}});var Ct=y(8984);Object.defineProperty(p,"AutoDetectSourceLanguageConfig",{enumerable:!0,get:function(){return Ct.AutoDetectSourceLanguageConfig}});var rn=y(2873);Object.defineProperty(p,"AutoDetectSourceLanguageResult",{enumerable:!0,get:function(){return rn.AutoDetectSourceLanguageResult}});var zt=y(2280);Object.defineProperty(p,"SourceLanguageConfig",{enumerable:!0,get:function(){return zt.SourceLanguageConfig}});var sn=y(3989);Object.defineProperty(p,"SpeakerRecognitionResult",{enumerable:!0,get:function(){return sn.SpeakerRecognitionResult}}),Object.defineProperty(p,"SpeakerRecognitionResultType",{enumerable:!0,get:function(){return sn.SpeakerRecognitionResultType}}),Object.defineProperty(p,"SpeakerRecognitionCancellationDetails",{enumerable:!0,get:function(){return sn.SpeakerRecognitionCancellationDetails}});var bn=y(8479);Object.defineProperty(p,"Conversation",{enumerable:!0,get:function(){return bn.Conversation}}),Object.defineProperty(p,"ConversationExpirationEventArgs",{enumerable:!0,get:function(){return bn.ConversationExpirationEventArgs}}),Object.defineProperty(p,"ConversationParticipantsChangedEventArgs",{enumerable:!0,get:function(){return bn.ConversationParticipantsChangedEventArgs}}),Object.defineProperty(p,"ConversationTranslationCanceledEventArgs",{enumerable:!0,get:function(){return bn.ConversationTranslationCanceledEventArgs}}),Object.defineProperty(p,"ConversationTranslationEventArgs",{enumerable:!0,get:function(){return bn.ConversationTranslationEventArgs}}),Object.defineProperty(p,"ConversationTranslationResult",{enumerable:!0,get:function(){return bn.ConversationTranslationResult}}),Object.defineProperty(p,"ConversationTranslator",{enumerable:!0,get:function(){return bn.ConversationTranslator}}),Object.defineProperty(p,"ConversationTranscriber",{enumerable:!0,get:function(){return bn.ConversationTranscriber}}),Object.defineProperty(p,"ConversationTranscriptionResult",{enumerable:!0,get:function(){return bn.ConversationTranscriptionResult}}),Object.defineProperty(p,"Meeting",{enumerable:!0,get:function(){return bn.Meeting}}),Object.defineProperty(p,"MeetingTranscriber",{enumerable:!0,get:function(){return bn.MeetingTranscriber}}),Object.defineProperty(p,"Participant",{enumerable:!0,get:function(){return bn.Participant}}),Object.defineProperty(p,"ParticipantChangedReason",{enumerable:!0,get:function(){return bn.ParticipantChangedReason}}),Object.defineProperty(p,"User",{enumerable:!0,get:function(){return bn.User}});var Dn=y(2344);Object.defineProperty(p,"Synthesizer",{enumerable:!0,get:function(){return Dn.Synthesizer}});var cr=y(4418);Object.defineProperty(p,"SpeechSynthesisOutputFormat",{enumerable:!0,get:function(){return cr.SpeechSynthesisOutputFormat}});var ln=y(3530);Object.defineProperty(p,"SpeechSynthesizer",{enumerable:!0,get:function(){return ln.SpeechSynthesizer}});var ti=y(6541);Object.defineProperty(p,"SynthesisResult",{enumerable:!0,get:function(){return ti.SynthesisResult}});var Qt=y(2675);Object.defineProperty(p,"SpeechSynthesisResult",{enumerable:!0,get:function(){return Qt.SpeechSynthesisResult}});var tr=y(4509);Object.defineProperty(p,"SpeechSynthesisEventArgs",{enumerable:!0,get:function(){return tr.SpeechSynthesisEventArgs}});var mn=y(8121);Object.defineProperty(p,"SpeechSynthesisWordBoundaryEventArgs",{enumerable:!0,get:function(){return mn.SpeechSynthesisWordBoundaryEventArgs}});var Ne=y(1385);Object.defineProperty(p,"SpeechSynthesisBookmarkEventArgs",{enumerable:!0,get:function(){return Ne.SpeechSynthesisBookmarkEventArgs}});var de=y(7549);Object.defineProperty(p,"SpeechSynthesisVisemeEventArgs",{enumerable:!0,get:function(){return de.SpeechSynthesisVisemeEventArgs}});var je=y(263);Object.defineProperty(p,"SpeechSynthesisBoundaryType",{enumerable:!0,get:function(){return je.SpeechSynthesisBoundaryType}});var nt=y(9675);Object.defineProperty(p,"SynthesisVoicesResult",{enumerable:!0,get:function(){return nt.SynthesisVoicesResult}});var ht=y(1329);Object.defineProperty(p,"VoiceInfo",{enumerable:!0,get:function(){return ht.VoiceInfo}});var wt=y(1819);Object.defineProperty(p,"SpeakerAudioDestination",{enumerable:!0,get:function(){return wt.SpeakerAudioDestination}});var yn=y(7514);Object.defineProperty(p,"ConversationTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return yn.ConversationTranscriptionCanceledEventArgs}});var ue=y(4982);Object.defineProperty(p,"MeetingTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return ue.MeetingTranscriptionCanceledEventArgs}});var ae=y(6767);Object.defineProperty(p,"PronunciationAssessmentGradingSystem",{enumerable:!0,get:function(){return ae.PronunciationAssessmentGradingSystem}});var ge=y(2974);Object.defineProperty(p,"PronunciationAssessmentGranularity",{enumerable:!0,get:function(){return ge.PronunciationAssessmentGranularity}});var Ue=y(8267);Object.defineProperty(p,"PronunciationAssessmentConfig",{enumerable:!0,get:function(){return Ue.PronunciationAssessmentConfig}});var Ie=y(9377);Object.defineProperty(p,"PronunciationAssessmentResult",{enumerable:!0,get:function(){return Ie.PronunciationAssessmentResult}});var We=y(8964);Object.defineProperty(p,"LanguageIdMode",{enumerable:!0,get:function(){return We.LanguageIdMode}});var kt=y(7288);Object.defineProperty(p,"AvatarConfig",{enumerable:!0,get:function(){return kt.AvatarConfig}});var En=y(3760);Object.defineProperty(p,"AvatarEventArgs",{enumerable:!0,get:function(){return En.AvatarEventArgs}});var sr=y(6951);Object.defineProperty(p,"AvatarSynthesizer",{enumerable:!0,get:function(){return sr.AvatarSynthesizer}});var Ln=y(2027);Object.defineProperty(p,"AvatarVideoFormat",{enumerable:!0,get:function(){return Ln.AvatarVideoFormat}}),Object.defineProperty(p,"Coordinate",{enumerable:!0,get:function(){return Ln.Coordinate}});var Tn=y(3247);Object.defineProperty(p,"AvatarWebRTCConnectionResult",{enumerable:!0,get:function(){return Tn.AvatarWebRTCConnectionResult}});var on=y(3566);Object.defineProperty(p,"Diagnostics",{enumerable:!0,get:function(){return on.Diagnostics}});var Nr=y(7590);Object.defineProperty(p,"LogLevel",{enumerable:!0,get:function(){return Nr.LogLevel}})},885:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.IntentRecognitionCanceledEventArgs=void 0;const o=y(8323);p.IntentRecognitionCanceledEventArgs=class v extends o.IntentRecognitionEventArgs{constructor(A,b,P,w,S,h){super(w,S,h),this.privReason=A,this.privErrorDetails=b,this.privErrorCode=P}get reason(){return this.privReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}}},4377:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.IntentRecognitionEventArgs=void 0;const o=y(8323);p.IntentRecognitionEventArgs=class v extends o.RecognitionEventArgs{constructor(A,b,P){super(b,P),this.privResult=A}get result(){return this.privResult}}},9366:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.IntentRecognitionResult=void 0;const o=y(8323);p.IntentRecognitionResult=class v extends o.SpeechRecognitionResult{constructor(A,b,P,w,S,h,m,I,M,T,N){super(b,P,w,S,h,m,I,void 0,M,T,N),this.privIntentId=A}get intentId(){return this.privIntentId}}},1731:function(ne,p,y){"use strict";var o=this&&this.__awaiter||function(w,S,h,m){return new(h||(h=Promise))(function(M,T){function N(V){try{z(m.next(V))}catch(q){T(q)}}function L(V){try{z(m.throw(V))}catch(q){T(q)}}function z(V){V.done?M(V.value):function I(M){return M instanceof h?M:new h(function(T){T(M)})}(V.value).then(N,L)}z((m=m.apply(w,S||[])).next())})};Object.defineProperty(p,"__esModule",{value:!0}),p.IntentRecognizer=void 0;const v=y(9464),_=y(847),A=y(5916),b=y(8323);p.IntentRecognizer=class P extends b.Recognizer{constructor(S,h){A.Contracts.throwIfNullOrUndefined(S,"speechConfig");const m=S;A.Contracts.throwIfNullOrUndefined(m,"speechConfig"),super(h,m.properties,new v.IntentConnectionFactory),this.privAddedIntents=[],this.privAddedLmIntents={},this.privDisposedIntentRecognizer=!1,this.privProperties=m.properties,A.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(b.PropertyId.SpeechServiceConnection_RecoLanguage),b.PropertyId[b.PropertyId.SpeechServiceConnection_RecoLanguage])}get speechRecognitionLanguage(){return A.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),this.properties.getProperty(b.PropertyId.SpeechServiceConnection_RecoLanguage)}get authorizationToken(){return this.properties.getProperty(b.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(S){this.properties.setProperty(b.PropertyId.SpeechServiceAuthorization_Token,S)}get properties(){return this.privProperties}recognizeOnceAsync(S,h){if(A.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),0!==Object.keys(this.privAddedLmIntents).length||void 0!==this.privUmbrellaIntent){const m=this.buildSpeechContext();this.privReco.speechContext.setSection("intent",m.Intent),this.privReco.dynamicGrammar.addReferenceGrammar(m.ReferenceGrammars),this.privReco.setIntents(this.privAddedLmIntents,this.privUmbrellaIntent)}_.marshalPromiseToCallbacks(this.recognizeOnceAsyncImpl(v.RecognitionMode.Interactive),S,h)}startContinuousRecognitionAsync(S,h){if(0!==Object.keys(this.privAddedLmIntents).length||void 0!==this.privUmbrellaIntent){const m=this.buildSpeechContext();this.privReco.speechContext.setSection("intent",m.Intent),this.privReco.dynamicGrammar.addReferenceGrammar(m.ReferenceGrammars),this.privReco.setIntents(this.privAddedLmIntents,this.privUmbrellaIntent)}_.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(v.RecognitionMode.Conversation),S,h)}stopContinuousRecognitionAsync(S,h){_.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),S,h)}startKeywordRecognitionAsync(S,h,m){A.Contracts.throwIfNull(S,"model"),m&&m("Not yet implemented.")}stopKeywordRecognitionAsync(S,h){if(S)try{S()}catch(m){h&&h(m)}}addIntent(S,h){A.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),A.Contracts.throwIfNullOrWhitespace(h,"intentId"),A.Contracts.throwIfNullOrWhitespace(S,"simplePhrase"),this.privAddedIntents.push([h,S])}addIntentWithLanguageModel(S,h,m){A.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),A.Contracts.throwIfNullOrWhitespace(S,"intentId"),A.Contracts.throwIfNull(h,"model");const I=h;A.Contracts.throwIfNullOrWhitespace(I.appId,"model.appId"),this.privAddedLmIntents[S]=new v.AddedLmIntent(I,m)}addAllIntents(S,h){A.Contracts.throwIfNull(S,"model");const m=S;A.Contracts.throwIfNullOrWhitespace(m.appId,"model.appId"),this.privUmbrellaIntent=new v.AddedLmIntent(m,h)}close(S,h){A.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),_.marshalPromiseToCallbacks(this.dispose(!0),S,h)}createRecognizerConfig(S){return new v.RecognizerConfig(S,this.privProperties)}createServiceRecognizer(S,h,m,I){return new v.IntentServiceRecognizer(S,h,m,I,this)}dispose(S){const h=Object.create(null,{dispose:{get:()=>super.dispose}});return o(this,void 0,void 0,function*(){this.privDisposedIntentRecognizer||S&&(this.privDisposedIntentRecognizer=!0,yield h.dispose.call(this,S))})}buildSpeechContext(){let S,h,m;const I=[];void 0!==this.privUmbrellaIntent&&(S=this.privUmbrellaIntent.modelImpl.appId,h=this.privUmbrellaIntent.modelImpl.region,m=this.privUmbrellaIntent.modelImpl.subscriptionKey);for(const M of Object.keys(this.privAddedLmIntents)){const T=this.privAddedLmIntents[M];if(void 0===S)S=T.modelImpl.appId;else if(S!==T.modelImpl.appId)throw new Error("Intents must all be from the same LUIS model");if(void 0===h)h=T.modelImpl.region;else if(h!==T.modelImpl.region)throw new Error("Intents must all be from the same LUIS model in a single region");if(void 0===m)m=T.modelImpl.subscriptionKey;else if(m!==T.modelImpl.subscriptionKey)throw new Error("Intents must all use the same subscription key");I.push("luis/"+S+"-PRODUCTION#"+M)}return{Intent:{id:S,key:void 0===m?this.privProperties.getProperty(b.PropertyId[b.PropertyId.SpeechServiceConnection_Key]):m,provider:"LUIS"},ReferenceGrammars:void 0===this.privUmbrellaIntent?I:["luis/"+S+"-PRODUCTION"]}}}},4708:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.KeywordRecognitionModel=void 0;const o=y(5916);p.KeywordRecognitionModel=class v{constructor(){this.privDisposed=!1}static fromFile(A){throw o.Contracts.throwIfFileDoesNotExist(A,"fileName"),new Error("Not yet implemented.")}static fromStream(A){throw o.Contracts.throwIfNull(A,"file"),new Error("Not yet implemented.")}close(){this.privDisposed||(this.privDisposed=!0)}}},8964:(ne,p)=>{"use strict";var o;Object.defineProperty(p,"__esModule",{value:!0}),p.LanguageIdMode=void 0,(o=p.LanguageIdMode||(p.LanguageIdMode={}))[o.AtStart=0]="AtStart",o[o.Continuous=1]="Continuous"},5633:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.LanguageUnderstandingModelImpl=p.LanguageUnderstandingModel=void 0;const o=y(5916);class v{constructor(){}static fromEndpoint(b){o.Contracts.throwIfNull(b,"uri"),o.Contracts.throwIfNullOrWhitespace(b.hostname,"uri");const P=new _,w=b.host.indexOf(".");if(-1===w)throw new Error("Could not determine region from endpoint");P.region=b.host.substr(0,w);const S=b.pathname.lastIndexOf("/")+1;if(-1===S)throw new Error("Could not determine appId from endpoint");if(P.appId=b.pathname.substr(S),P.subscriptionKey=b.searchParams.get("subscription-key"),void 0===P.subscriptionKey)throw new Error("Could not determine subscription key from endpoint");return P}static fromAppId(b){o.Contracts.throwIfNullOrWhitespace(b,"appId");const P=new _;return P.appId=b,P}static fromSubscription(b,P,w){o.Contracts.throwIfNullOrWhitespace(b,"subscriptionKey"),o.Contracts.throwIfNullOrWhitespace(P,"appId"),o.Contracts.throwIfNullOrWhitespace(w,"region");const S=new _;return S.appId=P,S.region=w,S.subscriptionKey=b,S}}p.LanguageUnderstandingModel=v;class _ extends v{}p.LanguageUnderstandingModelImpl=_},7590:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.LogLevel=void 0;const o=y(847);Object.defineProperty(p,"LogLevel",{enumerable:!0,get:function(){return o.EventType}})},4982:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.MeetingTranscriptionCanceledEventArgs=void 0;const o=y(3245);p.MeetingTranscriptionCanceledEventArgs=class v extends o.CancellationEventArgsBase{}},6508:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.NoMatchDetails=void 0;const o=y(9464),v=y(8323);class _{constructor(b){this.privReason=b}static fromResult(b){const P=o.SimpleSpeechPhrase.fromJSON(b.json);let w=v.NoMatchReason.NotRecognized;switch(P.RecognitionStatus){case o.RecognitionStatus.BabbleTimeout:w=v.NoMatchReason.InitialBabbleTimeout;break;case o.RecognitionStatus.InitialSilenceTimeout:w=v.NoMatchReason.InitialSilenceTimeout;break;default:w=v.NoMatchReason.NotRecognized}return new _(w)}get reason(){return this.privReason}}p.NoMatchDetails=_},7471:(ne,p)=>{"use strict";var o;Object.defineProperty(p,"__esModule",{value:!0}),p.NoMatchReason=void 0,(o=p.NoMatchReason||(p.NoMatchReason={}))[o.NotRecognized=0]="NotRecognized",o[o.InitialSilenceTimeout=1]="InitialSilenceTimeout",o[o.InitialBabbleTimeout=2]="InitialBabbleTimeout"},5586:(ne,p)=>{"use strict";var o;Object.defineProperty(p,"__esModule",{value:!0}),p.OutputFormat=void 0,(o=p.OutputFormat||(p.OutputFormat={}))[o.Simple=0]="Simple",o[o.Detailed=1]="Detailed"},4567:(ne,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.PhraseListGrammar=void 0;class y{constructor(v){this.privGrammerBuilder=v.dynamicGrammar}static fromRecognizer(v){return new y(v.internalData)}addPhrase(v){this.privGrammerBuilder.addPhrase(v)}addPhrases(v){this.privGrammerBuilder.addPhrase(v)}clear(){this.privGrammerBuilder.clearPhrases()}}p.PhraseListGrammar=y},5810:(ne,p)=>{"use strict";var o;Object.defineProperty(p,"__esModule",{value:!0}),p.ProfanityOption=void 0,(o=p.ProfanityOption||(p.ProfanityOption={}))[o.Masked=0]="Masked",o[o.Removed=1]="Removed",o[o.Raw=2]="Raw"},8267:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.PronunciationAssessmentConfig=void 0;const o=y(5916),v=y(8323);class _{constructor(b,P=v.PronunciationAssessmentGradingSystem.FivePoint,w=v.PronunciationAssessmentGranularity.Phoneme,S=!1){o.Contracts.throwIfNullOrUndefined(b,"referenceText"),this.privProperties=new v.PropertyCollection,this.privProperties.setProperty(v.PropertyId.PronunciationAssessment_ReferenceText,b),this.privProperties.setProperty(v.PropertyId.PronunciationAssessment_GradingSystem,v.PronunciationAssessmentGradingSystem[P]),this.privProperties.setProperty(v.PropertyId.PronunciationAssessment_Granularity,v.PronunciationAssessmentGranularity[w]),this.privProperties.setProperty(v.PropertyId.PronunciationAssessment_EnableMiscue,String(S))}static fromJSON(b){o.Contracts.throwIfNullOrUndefined(b,"json");const P=new _("");return P.privProperties=new v.PropertyCollection,P.properties.setProperty(v.PropertyId.PronunciationAssessment_Json,b),P}toJSON(){return this.updateJson(),this.privProperties.getProperty(v.PropertyId.PronunciationAssessment_Params)}applyTo(b){this.updateJson();const P=b.internalData;P.expectContentAssessmentResponse=!!this.privContentAssessmentTopic,P.speechContext.setPronunciationAssessmentParams(this.properties.getProperty(v.PropertyId.PronunciationAssessment_Params),this.privContentAssessmentTopic,P.isSpeakerDiarizationEnabled)}get referenceText(){return this.properties.getProperty(v.PropertyId.PronunciationAssessment_ReferenceText)}set referenceText(b){o.Contracts.throwIfNullOrWhitespace(b,"referenceText"),this.properties.setProperty(v.PropertyId.PronunciationAssessment_ReferenceText,b)}set phonemeAlphabet(b){o.Contracts.throwIfNullOrWhitespace(b,"phonemeAlphabet"),this.privPhonemeAlphabet=b}set enableMiscue(b){this.properties.setProperty(v.PropertyId.PronunciationAssessment_EnableMiscue,b?"true":"false")}get enableMiscue(){return"true"===this.properties.getProperty(v.PropertyId.PronunciationAssessment_EnableMiscue,"false").toLowerCase()}set nbestPhonemeCount(b){this.privNBestPhonemeCount=b}set enableProsodyAssessment(b){this.privEnableProsodyAssessment=b}enableContentAssessmentWithTopic(b){this.privContentAssessmentTopic=b}get properties(){return this.privProperties}updateJson(){const b=this.privProperties.getProperty(v.PropertyId.PronunciationAssessment_Json,"{}"),P=JSON.parse(b),w=this.privProperties.getProperty(v.PropertyId.PronunciationAssessment_ReferenceText);w&&(P.referenceText=w);const S=this.privProperties.getProperty(v.PropertyId.PronunciationAssessment_GradingSystem);S&&(P.gradingSystem=S);const h=this.privProperties.getProperty(v.PropertyId.PronunciationAssessment_Granularity);h&&(P.granularity=h),this.privPhonemeAlphabet&&(P.phonemeAlphabet=this.privPhonemeAlphabet),this.privNBestPhonemeCount&&(P.nbestPhonemeCount=this.privNBestPhonemeCount),P.enableProsodyAssessment=this.privEnableProsodyAssessment,P.dimension="Comprehensive",this.privProperties.getProperty(v.PropertyId.PronunciationAssessment_EnableMiscue)&&(P.enableMiscue=this.enableMiscue),this.privProperties.setProperty(v.PropertyId.PronunciationAssessment_Params,JSON.stringify(P))}}p.PronunciationAssessmentConfig=_},6767:(ne,p)=>{"use strict";var o;Object.defineProperty(p,"__esModule",{value:!0}),p.PronunciationAssessmentGradingSystem=void 0,(o=p.PronunciationAssessmentGradingSystem||(p.PronunciationAssessmentGradingSystem={}))[o.FivePoint=1]="FivePoint",o[o.HundredMark=2]="HundredMark"},2974:(ne,p)=>{"use strict";var o;Object.defineProperty(p,"__esModule",{value:!0}),p.PronunciationAssessmentGranularity=void 0,(o=p.PronunciationAssessmentGranularity||(p.PronunciationAssessmentGranularity={}))[o.Phoneme=1]="Phoneme",o[o.Word=2]="Word",o[o.FullText=3]="FullText"},9377:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.PronunciationAssessmentResult=p.ContentAssessmentResult=void 0;const o=y(5916),v=y(8323);class _{constructor(P){this.privPronJson=P}get grammarScore(){return this.privPronJson.ContentAssessment.GrammarScore}get vocabularyScore(){return this.privPronJson.ContentAssessment.VocabularyScore}get topicScore(){return this.privPronJson.ContentAssessment.TopicScore}}p.ContentAssessmentResult=_;class A{constructor(P){const w=JSON.parse(P);o.Contracts.throwIfNullOrUndefined(w.NBest[0],"NBest"),this.privPronJson=w.NBest[0]}static fromResult(P){o.Contracts.throwIfNullOrUndefined(P,"result");const w=P.properties.getProperty(v.PropertyId.SpeechServiceResponse_JsonResult);return o.Contracts.throwIfNullOrUndefined(w,"json"),new A(w)}get detailResult(){return this.privPronJson}get accuracyScore(){var P;return null===(P=this.detailResult.PronunciationAssessment)||void 0===P?void 0:P.AccuracyScore}get pronunciationScore(){var P;return null===(P=this.detailResult.PronunciationAssessment)||void 0===P?void 0:P.PronScore}get completenessScore(){var P;return null===(P=this.detailResult.PronunciationAssessment)||void 0===P?void 0:P.CompletenessScore}get fluencyScore(){var P;return null===(P=this.detailResult.PronunciationAssessment)||void 0===P?void 0:P.FluencyScore}get prosodyScore(){var P;return null===(P=this.detailResult.PronunciationAssessment)||void 0===P?void 0:P.ProsodyScore}get contentAssessmentResult(){if(void 0!==this.detailResult.ContentAssessment)return new _(this.detailResult)}}p.PronunciationAssessmentResult=A},1549:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.PropertyCollection=void 0;const o=y(8323);class v{constructor(){this.privKeys=[],this.privValues=[]}getProperty(A,b){let P;P="string"==typeof A?A:o.PropertyId[A];for(let w=0;w<this.privKeys.length;w++)if(this.privKeys[w]===P)return this.privValues[w];if(void 0!==b)return String(b)}setProperty(A,b){let P;P="string"==typeof A?A:o.PropertyId[A];for(let w=0;w<this.privKeys.length;w++)if(this.privKeys[w]===P)return void(this.privValues[w]=b);this.privKeys.push(P),this.privValues.push(b)}clone(){const A=new v;for(let b=0;b<this.privKeys.length;b++)A.privKeys.push(this.privKeys[b]),A.privValues.push(this.privValues[b]);return A}mergeTo(A){this.privKeys.forEach(b=>{if(void 0===A.getProperty(b,void 0)){const P=this.getProperty(b);A.setProperty(b,P)}})}get keys(){return this.privKeys}}p.PropertyCollection=v},1560:(ne,p)=>{"use strict";var o;Object.defineProperty(p,"__esModule",{value:!0}),p.PropertyId=void 0,(o=p.PropertyId||(p.PropertyId={}))[o.SpeechServiceConnection_Key=0]="SpeechServiceConnection_Key",o[o.SpeechServiceConnection_Endpoint=1]="SpeechServiceConnection_Endpoint",o[o.SpeechServiceConnection_Region=2]="SpeechServiceConnection_Region",o[o.SpeechServiceAuthorization_Token=3]="SpeechServiceAuthorization_Token",o[o.SpeechServiceAuthorization_Type=4]="SpeechServiceAuthorization_Type",o[o.SpeechServiceConnection_EndpointId=5]="SpeechServiceConnection_EndpointId",o[o.SpeechServiceConnection_TranslationToLanguages=6]="SpeechServiceConnection_TranslationToLanguages",o[o.SpeechServiceConnection_TranslationVoice=7]="SpeechServiceConnection_TranslationVoice",o[o.SpeechServiceConnection_TranslationFeatures=8]="SpeechServiceConnection_TranslationFeatures",o[o.SpeechServiceConnection_IntentRegion=9]="SpeechServiceConnection_IntentRegion",o[o.SpeechServiceConnection_ProxyHostName=10]="SpeechServiceConnection_ProxyHostName",o[o.SpeechServiceConnection_ProxyPort=11]="SpeechServiceConnection_ProxyPort",o[o.SpeechServiceConnection_ProxyUserName=12]="SpeechServiceConnection_ProxyUserName",o[o.SpeechServiceConnection_ProxyPassword=13]="SpeechServiceConnection_ProxyPassword",o[o.SpeechServiceConnection_RecoMode=14]="SpeechServiceConnection_RecoMode",o[o.SpeechServiceConnection_RecoLanguage=15]="SpeechServiceConnection_RecoLanguage",o[o.Speech_SessionId=16]="Speech_SessionId",o[o.SpeechServiceConnection_SynthLanguage=17]="SpeechServiceConnection_SynthLanguage",o[o.SpeechServiceConnection_SynthVoice=18]="SpeechServiceConnection_SynthVoice",o[o.SpeechServiceConnection_SynthOutputFormat=19]="SpeechServiceConnection_SynthOutputFormat",o[o.SpeechServiceConnection_AutoDetectSourceLanguages=20]="SpeechServiceConnection_AutoDetectSourceLanguages",o[o.SpeechServiceResponse_RequestDetailedResultTrueFalse=21]="SpeechServiceResponse_RequestDetailedResultTrueFalse",o[o.SpeechServiceResponse_RequestProfanityFilterTrueFalse=22]="SpeechServiceResponse_RequestProfanityFilterTrueFalse",o[o.SpeechServiceResponse_JsonResult=23]="SpeechServiceResponse_JsonResult",o[o.SpeechServiceResponse_JsonErrorDetails=24]="SpeechServiceResponse_JsonErrorDetails",o[o.CancellationDetails_Reason=25]="CancellationDetails_Reason",o[o.CancellationDetails_ReasonText=26]="CancellationDetails_ReasonText",o[o.CancellationDetails_ReasonDetailedText=27]="CancellationDetails_ReasonDetailedText",o[o.LanguageUnderstandingServiceResponse_JsonResult=28]="LanguageUnderstandingServiceResponse_JsonResult",o[o.SpeechServiceConnection_Url=29]="SpeechServiceConnection_Url",o[o.SpeechServiceConnection_InitialSilenceTimeoutMs=30]="SpeechServiceConnection_InitialSilenceTimeoutMs",o[o.SpeechServiceConnection_EndSilenceTimeoutMs=31]="SpeechServiceConnection_EndSilenceTimeoutMs",o[o.Speech_SegmentationSilenceTimeoutMs=32]="Speech_SegmentationSilenceTimeoutMs",o[o.SpeechServiceConnection_EnableAudioLogging=33]="SpeechServiceConnection_EnableAudioLogging",o[o.SpeechServiceConnection_LanguageIdMode=34]="SpeechServiceConnection_LanguageIdMode",o[o.SpeechServiceConnection_RecognitionEndpointVersion=35]="SpeechServiceConnection_RecognitionEndpointVersion",o[o.SpeechServiceConnection_SpeakerIdMode=36]="SpeechServiceConnection_SpeakerIdMode",o[o.SpeechServiceResponse_ProfanityOption=37]="SpeechServiceResponse_ProfanityOption",o[o.SpeechServiceResponse_PostProcessingOption=38]="SpeechServiceResponse_PostProcessingOption",o[o.SpeechServiceResponse_RequestWordLevelTimestamps=39]="SpeechServiceResponse_RequestWordLevelTimestamps",o[o.SpeechServiceResponse_StablePartialResultThreshold=40]="SpeechServiceResponse_StablePartialResultThreshold",o[o.SpeechServiceResponse_OutputFormatOption=41]="SpeechServiceResponse_OutputFormatOption",o[o.SpeechServiceResponse_TranslationRequestStablePartialResult=42]="SpeechServiceResponse_TranslationRequestStablePartialResult",o[o.SpeechServiceResponse_RequestWordBoundary=43]="SpeechServiceResponse_RequestWordBoundary",o[o.SpeechServiceResponse_RequestPunctuationBoundary=44]="SpeechServiceResponse_RequestPunctuationBoundary",o[o.SpeechServiceResponse_RequestSentenceBoundary=45]="SpeechServiceResponse_RequestSentenceBoundary",o[o.Conversation_ApplicationId=46]="Conversation_ApplicationId",o[o.Conversation_DialogType=47]="Conversation_DialogType",o[o.Conversation_Initial_Silence_Timeout=48]="Conversation_Initial_Silence_Timeout",o[o.Conversation_From_Id=49]="Conversation_From_Id",o[o.Conversation_Conversation_Id=50]="Conversation_Conversation_Id",o[o.Conversation_Custom_Voice_Deployment_Ids=51]="Conversation_Custom_Voice_Deployment_Ids",o[o.Conversation_Speech_Activity_Template=52]="Conversation_Speech_Activity_Template",o[o.Conversation_Request_Bot_Status_Messages=53]="Conversation_Request_Bot_Status_Messages",o[o.Conversation_Agent_Connection_Id=54]="Conversation_Agent_Connection_Id",o[o.SpeechServiceConnection_Host=55]="SpeechServiceConnection_Host",o[o.ConversationTranslator_Host=56]="ConversationTranslator_Host",o[o.ConversationTranslator_Name=57]="ConversationTranslator_Name",o[o.ConversationTranslator_CorrelationId=58]="ConversationTranslator_CorrelationId",o[o.ConversationTranslator_Token=59]="ConversationTranslator_Token",o[o.PronunciationAssessment_ReferenceText=60]="PronunciationAssessment_ReferenceText",o[o.PronunciationAssessment_GradingSystem=61]="PronunciationAssessment_GradingSystem",o[o.PronunciationAssessment_Granularity=62]="PronunciationAssessment_Granularity",o[o.PronunciationAssessment_EnableMiscue=63]="PronunciationAssessment_EnableMiscue",o[o.PronunciationAssessment_Json=64]="PronunciationAssessment_Json",o[o.PronunciationAssessment_Params=65]="PronunciationAssessment_Params",o[o.SpeakerRecognition_Api_Version=66]="SpeakerRecognition_Api_Version",o[o.WebWorkerLoadType=67]="WebWorkerLoadType",o[o.TalkingAvatarService_WebRTC_SDP=68]="TalkingAvatarService_WebRTC_SDP"},4541:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.RecognitionEventArgs=void 0;const o=y(8323);p.RecognitionEventArgs=class v extends o.SessionEventArgs{constructor(A,b){super(b),this.privOffset=A}get offset(){return this.privOffset}}},5483:(ne,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.RecognitionResult=void 0,p.RecognitionResult=class y{constructor(v,_,A,b,P,w,S,h,m,I){this.privResultId=v,this.privReason=_,this.privText=A,this.privDuration=b,this.privOffset=P,this.privLanguage=w,this.privLanguageDetectionConfidence=S,this.privErrorDetails=h,this.privJson=m,this.privProperties=I}get resultId(){return this.privResultId}get reason(){return this.privReason}get text(){return this.privText}get duration(){return this.privDuration}get offset(){return this.privOffset}get language(){return this.privLanguage}get languageDetectionConfidence(){return this.privLanguageDetectionConfidence}get errorDetails(){return this.privErrorDetails}get json(){return this.privJson}get properties(){return this.privProperties}}},4992:function(ne,p,y){"use strict";var o=this&&this.__awaiter||function(w,S,h,m){return new(h||(h=Promise))(function(M,T){function N(V){try{z(m.next(V))}catch(q){T(q)}}function L(V){try{z(m.throw(V))}catch(q){T(q)}}function z(V){V.done?M(V.value):function I(M){return M instanceof h?M:new h(function(T){T(M)})}(V.value).then(N,L)}z((m=m.apply(w,S||[])).next())})};Object.defineProperty(p,"__esModule",{value:!0}),p.Recognizer=void 0;const v=y(9464),_=y(847),A=y(5916),b=y(8323);class P{constructor(S,h,m){this.audioConfig=void 0!==S?S:b.AudioConfig.fromDefaultMicrophoneInput(),this.privDisposed=!1,this.privProperties=h.clone(),this.privConnectionFactory=m,this.implCommonRecognizerSetup()}close(S,h){A.Contracts.throwIfDisposed(this.privDisposed),_.marshalPromiseToCallbacks(this.dispose(!0),S,h)}get internalData(){return this.privReco}dispose(S){return o(this,void 0,void 0,function*(){this.privDisposed||(this.privDisposed=!0,S&&this.privReco&&(yield this.privReco.audioSource.turnOff(),yield this.privReco.dispose()))})}static get telemetryEnabled(){return v.ServiceRecognizerBase.telemetryDataEnabled}static enableTelemetry(S){v.ServiceRecognizerBase.telemetryDataEnabled=S}implCommonRecognizerSetup(){let S=typeof window<"u"?"Browser":"Node",h="unknown",m="unknown";typeof navigator<"u"&&(S=S+"/"+navigator.platform,h=navigator.userAgent,m=navigator.appVersion);const I=this.createRecognizerConfig(new v.SpeechServiceConfig(new v.Context(new v.OS(S,h,m))));this.privReco=this.createServiceRecognizer(P.getAuthFromProperties(this.privProperties),this.privConnectionFactory,this.audioConfig,I)}recognizeOnceAsyncImpl(S){return o(this,void 0,void 0,function*(){A.Contracts.throwIfDisposed(this.privDisposed);const h=new _.Deferred;yield this.implRecognizerStop(),yield this.privReco.recognize(S,h.resolve,h.reject);const m=yield h.promise;return yield this.implRecognizerStop(),m})}startContinuousRecognitionAsyncImpl(S){return o(this,void 0,void 0,function*(){A.Contracts.throwIfDisposed(this.privDisposed),yield this.implRecognizerStop(),yield this.privReco.recognize(S,void 0,void 0)})}stopContinuousRecognitionAsyncImpl(){return o(this,void 0,void 0,function*(){A.Contracts.throwIfDisposed(this.privDisposed),yield this.implRecognizerStop()})}implRecognizerStop(){return o(this,void 0,void 0,function*(){this.privReco&&(yield this.privReco.stopRecognizing())})}static getAuthFromProperties(S){const h=S.getProperty(b.PropertyId.SpeechServiceConnection_Key,void 0);return h&&""!==h?new v.CognitiveSubscriptionKeyAuthentication(h):new v.CognitiveTokenAuthentication(()=>{const I=S.getProperty(b.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(I)},()=>{const I=S.getProperty(b.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(I)})}}p.Recognizer=P},4713:(ne,p)=>{"use strict";var o;Object.defineProperty(p,"__esModule",{value:!0}),p.ResultReason=void 0,(o=p.ResultReason||(p.ResultReason={}))[o.NoMatch=0]="NoMatch",o[o.Canceled=1]="Canceled",o[o.RecognizingSpeech=2]="RecognizingSpeech",o[o.RecognizedSpeech=3]="RecognizedSpeech",o[o.RecognizedKeyword=4]="RecognizedKeyword",o[o.RecognizingIntent=5]="RecognizingIntent",o[o.RecognizedIntent=6]="RecognizedIntent",o[o.TranslatingSpeech=7]="TranslatingSpeech",o[o.TranslatedSpeech=8]="TranslatedSpeech",o[o.SynthesizingAudio=9]="SynthesizingAudio",o[o.SynthesizingAudioCompleted=10]="SynthesizingAudioCompleted",o[o.SynthesizingAudioStarted=11]="SynthesizingAudioStarted",o[o.EnrollingVoiceProfile=12]="EnrollingVoiceProfile",o[o.EnrolledVoiceProfile=13]="EnrolledVoiceProfile",o[o.RecognizedSpeakers=14]="RecognizedSpeakers",o[o.RecognizedSpeaker=15]="RecognizedSpeaker",o[o.ResetVoiceProfile=16]="ResetVoiceProfile",o[o.DeletedVoiceProfile=17]="DeletedVoiceProfile",o[o.VoicesListRetrieved=18]="VoicesListRetrieved",o[o.TranslatingParticipantSpeech=19]="TranslatingParticipantSpeech",o[o.TranslatedParticipantSpeech=20]="TranslatedParticipantSpeech",o[o.TranslatedInstantMessage=21]="TranslatedInstantMessage",o[o.TranslatedParticipantInstantMessage=22]="TranslatedParticipantInstantMessage"},1288:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.ServiceEventArgs=void 0;const o=y(8323);p.ServiceEventArgs=class v extends o.SessionEventArgs{constructor(A,b,P){super(P),this.privJsonResult=A,this.privEventName=b}get jsonString(){return this.privJsonResult}get eventName(){return this.privEventName}}},4007:(ne,p)=>{"use strict";var o;Object.defineProperty(p,"__esModule",{value:!0}),p.ServicePropertyChannel=void 0,(o=p.ServicePropertyChannel||(p.ServicePropertyChannel={}))[o.UriQueryParameter=0]="UriQueryParameter"},6388:(ne,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.SessionEventArgs=void 0,p.SessionEventArgs=class y{constructor(v){this.privSessionId=v}get sessionId(){return this.privSessionId}}},2280:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.SourceLanguageConfig=void 0;const o=y(5916);class v{constructor(A,b){o.Contracts.throwIfNullOrUndefined(A,"language"),this.privLanguage=A,this.privEndpointId=b}static fromLanguage(A,b){return new v(A,b)}get language(){return this.privLanguage}get endpointId(){return this.privEndpointId}}p.SourceLanguageConfig=v},1197:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.SpeakerIdentificationModel=void 0;const o=y(5916),v=y(8323);class _{constructor(b){if(this.privVoiceProfiles=[],this.privProfileIds=[],o.Contracts.throwIfNullOrUndefined(b,"VoiceProfiles"),0===b.length)throw new Error("Empty Voice Profiles array");for(const P of b){if(P.profileType!==v.VoiceProfileType.TextIndependentIdentification)throw new Error("Identification model can only be created from Identification profile: "+P.profileId);this.privVoiceProfiles.push(P),this.privProfileIds.push(P.profileId)}}static fromProfiles(b){return new _(b)}get voiceProfileIds(){return this.privProfileIds.join(",")}get profileIds(){return this.privProfileIds}get scenario(){return"TextIndependentIdentification"}}p.SpeakerIdentificationModel=_},3989:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.SpeakerRecognitionCancellationDetails=p.SpeakerRecognitionResult=p.SpeakerRecognitionResultType=void 0;const o=y(9464),v=y(8323);var _,P;(P=_=p.SpeakerRecognitionResultType||(p.SpeakerRecognitionResultType={}))[P.Verify=0]="Verify",P[P.Identify=1]="Identify",p.SpeakerRecognitionResult=class A{constructor(w,S=v.ResultReason.RecognizedSpeaker,h=v.CancellationErrorCode.NoError,m=""){this.privProperties=new v.PropertyCollection;const I="TextIndependentIdentification"===w.scenario?_.Identify:_.Verify;this.privReason=S,this.privReason!==v.ResultReason.Canceled?I===_.Identify?(this.privProfileId=w.identificationResult.identifiedProfile.profileId,this.privScore=w.identificationResult.identifiedProfile.score,this.privReason=v.ResultReason.RecognizedSpeakers):(this.privScore=w.verificationResult.score,"accept"!==w.verificationResult.recognitionResult.toLowerCase()&&(this.privReason=v.ResultReason.NoMatch),void 0!==w.verificationResult.profileId&&""!==w.verificationResult.profileId&&(this.privProfileId=w.verificationResult.profileId)):(this.privErrorDetails=m,this.privProperties.setProperty(o.CancellationErrorCodePropertyName,v.CancellationErrorCode[h])),this.privProperties.setProperty(v.PropertyId.SpeechServiceResponse_JsonResult,JSON.stringify(w))}get properties(){return this.privProperties}get reason(){return this.privReason}get profileId(){return this.privProfileId}get errorDetails(){return this.privErrorDetails}get score(){return this.privScore}};class b extends v.CancellationDetailsBase{constructor(w,S,h){super(w,S,h)}static fromResult(w){const S=v.CancellationReason.Error;let h=v.CancellationErrorCode.NoError;return w.properties&&(h=v.CancellationErrorCode[w.properties.getProperty(o.CancellationErrorCodePropertyName,v.CancellationErrorCode[v.CancellationErrorCode.NoError])]),new b(S,w.errorDetails,h)}}p.SpeakerRecognitionCancellationDetails=b},1951:function(ne,p,y){"use strict";var o=this&&this.__awaiter||function(P,w,S,h){return new(S||(S=Promise))(function(I,M){function T(z){try{L(h.next(z))}catch(V){M(V)}}function N(z){try{L(h.throw(z))}catch(V){M(V)}}function L(z){z.done?I(z.value):function m(I){return I instanceof S?I:new S(function(M){M(I)})}(z.value).then(T,N)}L((h=h.apply(P,w||[])).next())})};Object.defineProperty(p,"__esModule",{value:!0}),p.SpeakerRecognizer=void 0;const v=y(9464),_=y(5916),A=y(8323);p.SpeakerRecognizer=class b extends A.Recognizer{constructor(w,S){_.Contracts.throwIfNullOrUndefined(w,"speechConfig");const h=w;_.Contracts.throwIfNullOrUndefined(h,"speechConfig"),super(S,h.properties,new v.SpeakerRecognitionConnectionFactory),this.privAudioConfigImpl=S,_.Contracts.throwIfNull(this.privAudioConfigImpl,"audioConfig"),this.privDisposedSpeakerRecognizer=!1,this.privProperties=h.properties}get authorizationToken(){return this.properties.getProperty(A.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(w){_.Contracts.throwIfNullOrWhitespace(w,"token"),this.properties.setProperty(A.PropertyId.SpeechServiceAuthorization_Token,w)}get properties(){return this.privProperties}recognizeOnceAsync(w){return o(this,void 0,void 0,function*(){return _.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer),this.recognizeSpeakerOnceAsyncImpl(w)})}close(){return o(this,void 0,void 0,function*(){_.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer),yield this.dispose(!0)})}recognizeSpeakerOnceAsyncImpl(w){return o(this,void 0,void 0,function*(){_.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer),yield this.implRecognizerStop();const S=yield this.privReco.recognizeSpeaker(w);return yield this.implRecognizerStop(),S})}implRecognizerStop(){return o(this,void 0,void 0,function*(){this.privReco&&(yield this.privReco.stopRecognizing())})}createRecognizerConfig(w){return new v.RecognizerConfig(w,this.privProperties)}createServiceRecognizer(w,S,h,m){return new v.SpeakerServiceRecognizer(w,S,h,m,this)}dispose(w){const S=Object.create(null,{dispose:{get:()=>super.dispose}});return o(this,void 0,void 0,function*(){this.privDisposedSpeakerRecognizer||w&&(this.privDisposedSpeakerRecognizer=!0,yield S.dispose.call(this,w))})}}},3421:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.SpeakerVerificationModel=void 0;const o=y(5916),v=y(8323);class _{constructor(b){if(o.Contracts.throwIfNullOrUndefined(b,"VoiceProfile"),b.profileType===v.VoiceProfileType.TextIndependentIdentification)throw new Error("Verification model cannot be created from Identification profile");this.privVoiceProfile=b}static fromProfile(b){return new _(b)}get voiceProfile(){return this.privVoiceProfile}get profileIds(){return[this.voiceProfile.profileId]}get scenario(){return this.voiceProfile.profileType===v.VoiceProfileType.TextDependentVerification?"TextDependentVerification":"TextIndependentVerification"}}p.SpeakerVerificationModel=_},2140:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.SpeechConfigImpl=p.SpeechConfig=void 0;const o=y(9464),v=y(5916),_=y(8323);class A{constructor(){}static fromSubscription(w,S){v.Contracts.throwIfNullOrWhitespace(w,"subscriptionKey"),v.Contracts.throwIfNullOrWhitespace(S,"region");const h=new b;return h.setProperty(_.PropertyId.SpeechServiceConnection_Region,S),h.setProperty(_.PropertyId.SpeechServiceConnection_IntentRegion,S),h.setProperty(_.PropertyId.SpeechServiceConnection_Key,w),h}static fromEndpoint(w,S){v.Contracts.throwIfNull(w,"endpoint");const h=new b;return h.setProperty(_.PropertyId.SpeechServiceConnection_Endpoint,w.href),void 0!==S&&h.setProperty(_.PropertyId.SpeechServiceConnection_Key,S),h}static fromHost(w,S){v.Contracts.throwIfNull(w,"hostName");const h=new b;return h.setProperty(_.PropertyId.SpeechServiceConnection_Host,w.protocol+"//"+w.hostname+(""===w.port?"":":"+w.port)),void 0!==S&&h.setProperty(_.PropertyId.SpeechServiceConnection_Key,S),h}static fromAuthorizationToken(w,S){v.Contracts.throwIfNull(w,"authorizationToken"),v.Contracts.throwIfNullOrWhitespace(S,"region");const h=new b;return h.setProperty(_.PropertyId.SpeechServiceConnection_Region,S),h.setProperty(_.PropertyId.SpeechServiceConnection_IntentRegion,S),h.authorizationToken=w,h}close(){}}p.SpeechConfig=A;class b extends A{constructor(){super(),this.privProperties=new _.PropertyCollection,this.speechRecognitionLanguage="en-US",this.outputFormat=_.OutputFormat.Simple}get properties(){return this.privProperties}get endPoint(){return new URL(this.privProperties.getProperty(_.PropertyId.SpeechServiceConnection_Endpoint))}get subscriptionKey(){return this.privProperties.getProperty(_.PropertyId.SpeechServiceConnection_Key)}get region(){return this.privProperties.getProperty(_.PropertyId.SpeechServiceConnection_Region)}get authorizationToken(){return this.privProperties.getProperty(_.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(w){this.privProperties.setProperty(_.PropertyId.SpeechServiceAuthorization_Token,w)}get speechRecognitionLanguage(){return this.privProperties.getProperty(_.PropertyId.SpeechServiceConnection_RecoLanguage)}set speechRecognitionLanguage(w){this.privProperties.setProperty(_.PropertyId.SpeechServiceConnection_RecoLanguage,w)}get autoDetectSourceLanguages(){return this.privProperties.getProperty(_.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages)}set autoDetectSourceLanguages(w){this.privProperties.setProperty(_.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,w)}get outputFormat(){return _.OutputFormat[this.privProperties.getProperty(o.OutputFormatPropertyName,void 0)]}set outputFormat(w){this.privProperties.setProperty(o.OutputFormatPropertyName,_.OutputFormat[w])}get endpointId(){return this.privProperties.getProperty(_.PropertyId.SpeechServiceConnection_EndpointId)}set endpointId(w){this.privProperties.setProperty(_.PropertyId.SpeechServiceConnection_EndpointId,w)}setProperty(w,S){v.Contracts.throwIfNull(S,"value"),this.privProperties.setProperty(w,S)}getProperty(w,S){return this.privProperties.getProperty(w,S)}setProxy(w,S,h,m){this.setProperty(_.PropertyId[_.PropertyId.SpeechServiceConnection_ProxyHostName],w),this.setProperty(_.PropertyId[_.PropertyId.SpeechServiceConnection_ProxyPort],S),this.setProperty(_.PropertyId[_.PropertyId.SpeechServiceConnection_ProxyUserName],h),this.setProperty(_.PropertyId[_.PropertyId.SpeechServiceConnection_ProxyPassword],m)}setServiceProperty(w,S){const h=JSON.parse(this.privProperties.getProperty(o.ServicePropertiesPropertyName,"{}"));h[w]=S,this.privProperties.setProperty(o.ServicePropertiesPropertyName,JSON.stringify(h))}setProfanity(w){this.privProperties.setProperty(_.PropertyId.SpeechServiceResponse_ProfanityOption,_.ProfanityOption[w])}enableAudioLogging(){this.privProperties.setProperty(_.PropertyId.SpeechServiceConnection_EnableAudioLogging,"true")}requestWordLevelTimestamps(){this.privProperties.setProperty(_.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"true")}enableDictation(){this.privProperties.setProperty(o.ForceDictationPropertyName,"true")}clone(){const w=new b;return w.privProperties=this.privProperties.clone(),w}get speechSynthesisLanguage(){return this.privProperties.getProperty(_.PropertyId.SpeechServiceConnection_SynthLanguage)}set speechSynthesisLanguage(w){this.privProperties.setProperty(_.PropertyId.SpeechServiceConnection_SynthLanguage,w)}get speechSynthesisVoiceName(){return this.privProperties.getProperty(_.PropertyId.SpeechServiceConnection_SynthVoice)}set speechSynthesisVoiceName(w){this.privProperties.setProperty(_.PropertyId.SpeechServiceConnection_SynthVoice,w)}get speechSynthesisOutputFormat(){return _.SpeechSynthesisOutputFormat[this.privProperties.getProperty(_.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)]}set speechSynthesisOutputFormat(w){this.privProperties.setProperty(_.PropertyId.SpeechServiceConnection_SynthOutputFormat,_.SpeechSynthesisOutputFormat[w])}}p.SpeechConfigImpl=b},1794:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.SpeechRecognitionCanceledEventArgs=void 0;const o=y(3245);p.SpeechRecognitionCanceledEventArgs=class v extends o.CancellationEventArgsBase{}},7377:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.MeetingTranscriptionEventArgs=p.ConversationTranscriptionEventArgs=p.SpeechRecognitionEventArgs=void 0;const o=y(8323);class v extends o.RecognitionEventArgs{constructor(P,w,S){super(w,S),this.privResult=P}get result(){return this.privResult}}p.SpeechRecognitionEventArgs=v,p.ConversationTranscriptionEventArgs=class _ extends o.RecognitionEventArgs{constructor(P,w,S){super(w,S),this.privResult=P}get result(){return this.privResult}},p.MeetingTranscriptionEventArgs=class A extends v{}},8277:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.SpeechRecognitionResult=void 0;const o=y(8323);p.SpeechRecognitionResult=class v extends o.RecognitionResult{constructor(A,b,P,w,S,h,m,I,M,T,N){super(A,b,P,w,S,h,m,M,T,N),this.privSpeakerId=I}get speakerId(){return this.privSpeakerId}}},4858:function(ne,p,y){"use strict";var o=this&&this.__awaiter||function(w,S,h,m){return new(h||(h=Promise))(function(M,T){function N(V){try{z(m.next(V))}catch(q){T(q)}}function L(V){try{z(m.throw(V))}catch(q){T(q)}}function z(V){V.done?M(V.value):function I(M){return M instanceof h?M:new h(function(T){T(M)})}(V.value).then(N,L)}z((m=m.apply(w,S||[])).next())})};Object.defineProperty(p,"__esModule",{value:!0}),p.SpeechRecognizer=void 0;const v=y(9464),_=y(847),A=y(5916),b=y(8323);class P extends b.Recognizer{constructor(S,h){const m=S;A.Contracts.throwIfNull(m,"speechConfig"),A.Contracts.throwIfNullOrWhitespace(m.properties.getProperty(b.PropertyId.SpeechServiceConnection_RecoLanguage),b.PropertyId[b.PropertyId.SpeechServiceConnection_RecoLanguage]),super(h,m.properties,new v.SpeechConnectionFactory),this.privDisposedRecognizer=!1}static FromConfig(S,h,m){return h.properties.mergeTo(S.properties),new P(S,m)}get endpointId(){return A.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(b.PropertyId.SpeechServiceConnection_EndpointId,"00000000-0000-0000-0000-000000000000")}get authorizationToken(){return this.properties.getProperty(b.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(S){A.Contracts.throwIfNullOrWhitespace(S,"token"),this.properties.setProperty(b.PropertyId.SpeechServiceAuthorization_Token,S)}get speechRecognitionLanguage(){return A.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(b.PropertyId.SpeechServiceConnection_RecoLanguage)}get outputFormat(){return A.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(v.OutputFormatPropertyName,b.OutputFormat[b.OutputFormat.Simple])===b.OutputFormat[b.OutputFormat.Simple]?b.OutputFormat.Simple:b.OutputFormat.Detailed}get properties(){return this.privProperties}recognizeOnceAsync(S,h){_.marshalPromiseToCallbacks(this.recognizeOnceAsyncImpl(v.RecognitionMode.Interactive),S,h)}startContinuousRecognitionAsync(S,h){_.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(v.RecognitionMode.Conversation),S,h)}stopContinuousRecognitionAsync(S,h){_.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),S,h)}startKeywordRecognitionAsync(S,h,m){A.Contracts.throwIfNull(S,"model"),m&&m("Not yet implemented.")}stopKeywordRecognitionAsync(S){S&&S()}close(S,h){A.Contracts.throwIfDisposed(this.privDisposedRecognizer),_.marshalPromiseToCallbacks(this.dispose(!0),S,h)}dispose(S){const h=Object.create(null,{dispose:{get:()=>super.dispose}});return o(this,void 0,void 0,function*(){this.privDisposedRecognizer||(S&&(this.privDisposedRecognizer=!0,yield this.implRecognizerStop()),yield h.dispose.call(this,S))})}createRecognizerConfig(S){return new v.RecognizerConfig(S,this.privProperties)}createServiceRecognizer(S,h,m,I){return new v.SpeechServiceRecognizer(S,h,m,I,this)}}p.SpeechRecognizer=P},1385:(ne,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.SpeechSynthesisBookmarkEventArgs=void 0,p.SpeechSynthesisBookmarkEventArgs=class y{constructor(v,_){this.privAudioOffset=v,this.privText=_}get audioOffset(){return this.privAudioOffset}get text(){return this.privText}}},263:(ne,p)=>{"use strict";var o;Object.defineProperty(p,"__esModule",{value:!0}),p.SpeechSynthesisBoundaryType=void 0,(o=p.SpeechSynthesisBoundaryType||(p.SpeechSynthesisBoundaryType={})).Word="WordBoundary",o.Punctuation="PunctuationBoundary",o.Sentence="SentenceBoundary"},4509:(ne,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.SpeechSynthesisEventArgs=void 0,p.SpeechSynthesisEventArgs=class y{constructor(v){this.privResult=v}get result(){return this.privResult}}},4418:(ne,p)=>{"use strict";var o;Object.defineProperty(p,"__esModule",{value:!0}),p.SpeechSynthesisOutputFormat=void 0,(o=p.SpeechSynthesisOutputFormat||(p.SpeechSynthesisOutputFormat={}))[o.Raw8Khz8BitMonoMULaw=0]="Raw8Khz8BitMonoMULaw",o[o.Riff16Khz16KbpsMonoSiren=1]="Riff16Khz16KbpsMonoSiren",o[o.Audio16Khz16KbpsMonoSiren=2]="Audio16Khz16KbpsMonoSiren",o[o.Audio16Khz32KBitRateMonoMp3=3]="Audio16Khz32KBitRateMonoMp3",o[o.Audio16Khz128KBitRateMonoMp3=4]="Audio16Khz128KBitRateMonoMp3",o[o.Audio16Khz64KBitRateMonoMp3=5]="Audio16Khz64KBitRateMonoMp3",o[o.Audio24Khz48KBitRateMonoMp3=6]="Audio24Khz48KBitRateMonoMp3",o[o.Audio24Khz96KBitRateMonoMp3=7]="Audio24Khz96KBitRateMonoMp3",o[o.Audio24Khz160KBitRateMonoMp3=8]="Audio24Khz160KBitRateMonoMp3",o[o.Raw16Khz16BitMonoTrueSilk=9]="Raw16Khz16BitMonoTrueSilk",o[o.Riff16Khz16BitMonoPcm=10]="Riff16Khz16BitMonoPcm",o[o.Riff8Khz16BitMonoPcm=11]="Riff8Khz16BitMonoPcm",o[o.Riff24Khz16BitMonoPcm=12]="Riff24Khz16BitMonoPcm",o[o.Riff8Khz8BitMonoMULaw=13]="Riff8Khz8BitMonoMULaw",o[o.Raw16Khz16BitMonoPcm=14]="Raw16Khz16BitMonoPcm",o[o.Raw24Khz16BitMonoPcm=15]="Raw24Khz16BitMonoPcm",o[o.Raw8Khz16BitMonoPcm=16]="Raw8Khz16BitMonoPcm",o[o.Ogg16Khz16BitMonoOpus=17]="Ogg16Khz16BitMonoOpus",o[o.Ogg24Khz16BitMonoOpus=18]="Ogg24Khz16BitMonoOpus",o[o.Raw48Khz16BitMonoPcm=19]="Raw48Khz16BitMonoPcm",o[o.Riff48Khz16BitMonoPcm=20]="Riff48Khz16BitMonoPcm",o[o.Audio48Khz96KBitRateMonoMp3=21]="Audio48Khz96KBitRateMonoMp3",o[o.Audio48Khz192KBitRateMonoMp3=22]="Audio48Khz192KBitRateMonoMp3",o[o.Ogg48Khz16BitMonoOpus=23]="Ogg48Khz16BitMonoOpus",o[o.Webm16Khz16BitMonoOpus=24]="Webm16Khz16BitMonoOpus",o[o.Webm24Khz16BitMonoOpus=25]="Webm24Khz16BitMonoOpus",o[o.Raw24Khz16BitMonoTrueSilk=26]="Raw24Khz16BitMonoTrueSilk",o[o.Raw8Khz8BitMonoALaw=27]="Raw8Khz8BitMonoALaw",o[o.Riff8Khz8BitMonoALaw=28]="Riff8Khz8BitMonoALaw",o[o.Webm24Khz16Bit24KbpsMonoOpus=29]="Webm24Khz16Bit24KbpsMonoOpus",o[o.Audio16Khz16Bit32KbpsMonoOpus=30]="Audio16Khz16Bit32KbpsMonoOpus",o[o.Audio24Khz16Bit48KbpsMonoOpus=31]="Audio24Khz16Bit48KbpsMonoOpus",o[o.Audio24Khz16Bit24KbpsMonoOpus=32]="Audio24Khz16Bit24KbpsMonoOpus",o[o.Raw22050Hz16BitMonoPcm=33]="Raw22050Hz16BitMonoPcm",o[o.Riff22050Hz16BitMonoPcm=34]="Riff22050Hz16BitMonoPcm",o[o.Raw44100Hz16BitMonoPcm=35]="Raw44100Hz16BitMonoPcm",o[o.Riff44100Hz16BitMonoPcm=36]="Riff44100Hz16BitMonoPcm"},2675:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.SpeechSynthesisResult=void 0;const o=y(8323);p.SpeechSynthesisResult=class v extends o.SynthesisResult{constructor(A,b,P,w,S,h){super(A,b,w,S),this.privAudioData=P,this.privAudioDuration=h}get audioData(){return this.privAudioData}get audioDuration(){return this.privAudioDuration}}},7549:(ne,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.SpeechSynthesisVisemeEventArgs=void 0,p.SpeechSynthesisVisemeEventArgs=class y{constructor(v,_,A){this.privAudioOffset=v,this.privVisemeId=_,this.privAnimation=A}get audioOffset(){return this.privAudioOffset}get visemeId(){return this.privVisemeId}get animation(){return this.privAnimation}}},8121:(ne,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.SpeechSynthesisWordBoundaryEventArgs=void 0,p.SpeechSynthesisWordBoundaryEventArgs=class y{constructor(v,_,A,b,P,w){this.privAudioOffset=v,this.privDuration=_,this.privText=A,this.privWordLength=b,this.privTextOffset=P,this.privBoundaryType=w}get audioOffset(){return this.privAudioOffset}get duration(){return this.privDuration}get text(){return this.privText}get wordLength(){return this.privWordLength}get textOffset(){return this.privTextOffset}get boundaryType(){return this.privBoundaryType}}},3530:function(ne,p,y){"use strict";var o=this&&this.__awaiter||function(I,M,T,N){return new(T||(T=Promise))(function(z,V){function q(fe){try{ce(N.next(fe))}catch(pe){V(pe)}}function X(fe){try{ce(N.throw(fe))}catch(pe){V(pe)}}function ce(fe){fe.done?z(fe.value):function L(z){return z instanceof T?z:new T(function(V){V(z)})}(fe.value).then(q,X)}ce((N=N.apply(I,M||[])).next())})};Object.defineProperty(p,"__esModule",{value:!0}),p.SpeechSynthesizer=void 0;const v=y(9464),_=y(847),A=y(7725),b=y(7176),P=y(4989),w=y(5916),S=y(8323),h=y(2344);class m extends S.Synthesizer{constructor(M,T){super(M),null!==T&&(this.audioConfig=void 0===T?typeof window>"u"?void 0:S.AudioConfig.fromDefaultSpeakerOutput():T),this.privConnectionFactory=new v.SpeechSynthesisConnectionFactory,this.implCommonSynthesizeSetup()}static FromConfig(M,T,N){return T.properties.mergeTo(M.properties),new m(M,N)}speakTextAsync(M,T,N,L){this.speakImpl(M,!1,T,N,L)}speakSsmlAsync(M,T,N,L){this.speakImpl(M,!0,T,N,L)}getVoicesAsync(M=""){return o(this,void 0,void 0,function*(){return this.getVoices(M)})}close(M,T){w.Contracts.throwIfDisposed(this.privDisposed),_.marshalPromiseToCallbacks(this.dispose(!0),M,T)}get internalData(){return this.privAdapter}createSynthesisAdapter(M,T,N){return new v.SpeechSynthesisAdapter(M,T,N,this,this.audioConfig)}createRestSynthesisAdapter(M,T){return new v.SynthesisRestAdapter(T,M)}implCommonSynthesizeSetup(){super.implCommonSynthesizeSetup(),this.privAdapter.audioOutputFormat=b.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormat(S.SpeechSynthesisOutputFormat[this.properties.getProperty(S.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)])}speakImpl(M,T,N,L,z){try{w.Contracts.throwIfDisposed(this.privDisposed);const V=_.createNoDashGuid();let q;q=z instanceof S.PushAudioOutputStreamCallback?new P.PushAudioOutputStreamImpl(z):z instanceof S.PullAudioOutputStream?z:void 0!==z?new A.AudioFileWriter(z):void 0,this.synthesisRequestQueue.enqueue(new h.SynthesisRequest(V,M,T,X=>{if(this.privSynthesizing=!1,N)try{N(X)}catch(ce){L&&L(ce)}N=void 0,this.adapterSpeak().catch(()=>{})},X=>{L&&L(X)},q)),this.adapterSpeak().catch(()=>{})}catch(V){L&&(V instanceof Error?L(V.name+": "+V.message):L(V)),this.dispose(!0).catch(()=>{})}}getVoices(M){return o(this,void 0,void 0,function*(){const T=_.createNoDashGuid(),N=yield this.privRestAdapter.getVoicesList(T);if(N.ok&&Array.isArray(N.json)){let L=N.json;return M&&M.length>0&&(L=L.filter(z=>!!z.Locale&&z.Locale.toLowerCase()===M.toLowerCase())),new S.SynthesisVoicesResult(T,L,void 0)}return new S.SynthesisVoicesResult(T,void 0,`Error: ${N.status}: ${N.statusText}`)})}}p.SpeechSynthesizer=m},3131:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.SpeechTranslationConfigImpl=p.SpeechTranslationConfig=void 0;const o=y(9464),v=y(5916),_=y(8323);class A extends _.SpeechConfig{constructor(){super()}static fromSubscription(w,S){v.Contracts.throwIfNullOrWhitespace(w,"subscriptionKey"),v.Contracts.throwIfNullOrWhitespace(S,"region");const h=new b;return h.properties.setProperty(_.PropertyId.SpeechServiceConnection_Key,w),h.properties.setProperty(_.PropertyId.SpeechServiceConnection_Region,S),h}static fromAuthorizationToken(w,S){v.Contracts.throwIfNullOrWhitespace(w,"authorizationToken"),v.Contracts.throwIfNullOrWhitespace(S,"region");const h=new b;return h.properties.setProperty(_.PropertyId.SpeechServiceAuthorization_Token,w),h.properties.setProperty(_.PropertyId.SpeechServiceConnection_Region,S),h}static fromHost(w,S){v.Contracts.throwIfNull(w,"hostName");const h=new b;return h.setProperty(_.PropertyId.SpeechServiceConnection_Host,w.protocol+"//"+w.hostname+(""===w.port?"":":"+w.port)),void 0!==S&&h.setProperty(_.PropertyId.SpeechServiceConnection_Key,S),h}static fromEndpoint(w,S){v.Contracts.throwIfNull(w,"endpoint"),v.Contracts.throwIfNull(S,"subscriptionKey");const h=new b;return h.properties.setProperty(_.PropertyId.SpeechServiceConnection_Endpoint,w.href),h.properties.setProperty(_.PropertyId.SpeechServiceConnection_Key,S),h}}p.SpeechTranslationConfig=A;class b extends A{constructor(){super(),this.privSpeechProperties=new _.PropertyCollection,this.outputFormat=_.OutputFormat.Simple}set authorizationToken(w){v.Contracts.throwIfNullOrWhitespace(w,"value"),this.privSpeechProperties.setProperty(_.PropertyId.SpeechServiceAuthorization_Token,w)}set speechRecognitionLanguage(w){v.Contracts.throwIfNullOrWhitespace(w,"value"),this.privSpeechProperties.setProperty(_.PropertyId.SpeechServiceConnection_RecoLanguage,w)}get speechRecognitionLanguage(){return this.privSpeechProperties.getProperty(_.PropertyId[_.PropertyId.SpeechServiceConnection_RecoLanguage])}get subscriptionKey(){return this.privSpeechProperties.getProperty(_.PropertyId[_.PropertyId.SpeechServiceConnection_Key])}get outputFormat(){return _.OutputFormat[this.privSpeechProperties.getProperty(o.OutputFormatPropertyName,void 0)]}set outputFormat(w){this.privSpeechProperties.setProperty(o.OutputFormatPropertyName,_.OutputFormat[w])}get endpointId(){return this.privSpeechProperties.getProperty(_.PropertyId.SpeechServiceConnection_EndpointId)}set endpointId(w){this.privSpeechProperties.setProperty(_.PropertyId.SpeechServiceConnection_EndpointId,w)}addTargetLanguage(w){v.Contracts.throwIfNullOrWhitespace(w,"value");const S=this.targetLanguages;S.includes(w)||(S.push(w),this.privSpeechProperties.setProperty(_.PropertyId.SpeechServiceConnection_TranslationToLanguages,S.join(",")))}get targetLanguages(){return void 0!==this.privSpeechProperties.getProperty(_.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)?this.privSpeechProperties.getProperty(_.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","):[]}get voiceName(){return this.getProperty(_.PropertyId[_.PropertyId.SpeechServiceConnection_TranslationVoice])}set voiceName(w){v.Contracts.throwIfNullOrWhitespace(w,"value"),this.privSpeechProperties.setProperty(_.PropertyId.SpeechServiceConnection_TranslationVoice,w)}get region(){return this.privSpeechProperties.getProperty(_.PropertyId.SpeechServiceConnection_Region)}setProxy(w,S,h,m){this.setProperty(_.PropertyId[_.PropertyId.SpeechServiceConnection_ProxyHostName],w),this.setProperty(_.PropertyId[_.PropertyId.SpeechServiceConnection_ProxyPort],S),this.setProperty(_.PropertyId[_.PropertyId.SpeechServiceConnection_ProxyUserName],h),this.setProperty(_.PropertyId[_.PropertyId.SpeechServiceConnection_ProxyPassword],m)}getProperty(w,S){return this.privSpeechProperties.getProperty(w,S)}setProperty(w,S){this.privSpeechProperties.setProperty(w,S)}get properties(){return this.privSpeechProperties}close(){}setServiceProperty(w,S){const h=JSON.parse(this.privSpeechProperties.getProperty(o.ServicePropertiesPropertyName,"{}"));h[w]=S,this.privSpeechProperties.setProperty(o.ServicePropertiesPropertyName,JSON.stringify(h))}setProfanity(w){this.privSpeechProperties.setProperty(_.PropertyId.SpeechServiceResponse_ProfanityOption,_.ProfanityOption[w])}enableAudioLogging(){this.privSpeechProperties.setProperty(_.PropertyId.SpeechServiceConnection_EnableAudioLogging,"true")}requestWordLevelTimestamps(){this.privSpeechProperties.setProperty(_.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"true")}enableDictation(){this.privSpeechProperties.setProperty(o.ForceDictationPropertyName,"true")}get speechSynthesisLanguage(){return this.privSpeechProperties.getProperty(_.PropertyId.SpeechServiceConnection_SynthLanguage)}set speechSynthesisLanguage(w){this.privSpeechProperties.setProperty(_.PropertyId.SpeechServiceConnection_SynthLanguage,w)}get speechSynthesisVoiceName(){return this.privSpeechProperties.getProperty(_.PropertyId.SpeechServiceConnection_SynthVoice)}set speechSynthesisVoiceName(w){this.privSpeechProperties.setProperty(_.PropertyId.SpeechServiceConnection_SynthVoice,w)}get speechSynthesisOutputFormat(){return _.SpeechSynthesisOutputFormat[this.privSpeechProperties.getProperty(_.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)]}set speechSynthesisOutputFormat(w){this.privSpeechProperties.setProperty(_.PropertyId.SpeechServiceConnection_SynthOutputFormat,_.SpeechSynthesisOutputFormat[w])}}p.SpeechTranslationConfigImpl=b},6541:(ne,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.SynthesisResult=void 0,p.SynthesisResult=class y{constructor(v,_,A,b){this.privResultId=v,this.privReason=_,this.privErrorDetails=A,this.privProperties=b}get resultId(){return this.privResultId}get reason(){return this.privReason}get errorDetails(){return this.privErrorDetails}get properties(){return this.privProperties}}},9675:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.SynthesisVoicesResult=void 0;const o=y(8323);p.SynthesisVoicesResult=class v extends o.SynthesisResult{constructor(A,b,P){if(Array.isArray(b)){super(A,o.ResultReason.VoicesListRetrieved,void 0,new o.PropertyCollection),this.privVoices=[];for(const w of b)this.privVoices.push(new o.VoiceInfo(w))}else super(A,o.ResultReason.Canceled,P||"Error information unavailable",new o.PropertyCollection)}get voices(){return this.privVoices}}},2344:function(ne,p,y){"use strict";var o=this&&this.__awaiter||function(S,h,m,I){return new(m||(m=Promise))(function(T,N){function L(q){try{V(I.next(q))}catch(X){N(X)}}function z(q){try{V(I.throw(q))}catch(X){N(X)}}function V(q){q.done?T(q.value):function M(T){return T instanceof m?T:new m(function(N){N(T)})}(q.value).then(L,z)}V((I=I.apply(S,h||[])).next())})};Object.defineProperty(p,"__esModule",{value:!0}),p.SynthesisRequest=p.Synthesizer=void 0;const v=y(9464),_=y(847),A=y(5916),b=y(8323);class P{constructor(h){const m=h;A.Contracts.throwIfNull(m,"speechConfig"),this.privProperties=m.properties.clone(),this.privDisposed=!1,this.privSynthesizing=!1,this.synthesisRequestQueue=new _.Queue}get authorizationToken(){return this.properties.getProperty(b.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(h){A.Contracts.throwIfNullOrWhitespace(h,"token"),this.properties.setProperty(b.PropertyId.SpeechServiceAuthorization_Token,h)}get properties(){return this.privProperties}get autoDetectSourceLanguage(){return this.properties.getProperty(b.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages)===v.AutoDetectSourceLanguagesOpenRangeOptionName}buildSsml(h){let I=this.properties.getProperty(b.PropertyId.SpeechServiceConnection_SynthLanguage,"en-US"),M=this.properties.getProperty(b.PropertyId.SpeechServiceConnection_SynthVoice,""),T=P.XMLEncode(h);return this.autoDetectSourceLanguage?I="en-US":M=M||{"af-ZA":"af-ZA-AdriNeural","am-ET":"am-ET-AmehaNeural","ar-AE":"ar-AE-FatimaNeural","ar-BH":"ar-BH-AliNeural","ar-DZ":"ar-DZ-AminaNeural","ar-EG":"ar-EG-SalmaNeural","ar-IQ":"ar-IQ-BasselNeural","ar-JO":"ar-JO-SanaNeural","ar-KW":"ar-KW-FahedNeural","ar-LY":"ar-LY-ImanNeural","ar-MA":"ar-MA-JamalNeural","ar-QA":"ar-QA-AmalNeural","ar-SA":"ar-SA-HamedNeural","ar-SY":"ar-SY-AmanyNeural","ar-TN":"ar-TN-HediNeural","ar-YE":"ar-YE-MaryamNeural","bg-BG":"bg-BG-BorislavNeural","bn-BD":"bn-BD-NabanitaNeural","bn-IN":"bn-IN-BashkarNeural","ca-ES":"ca-ES-JoanaNeural","cs-CZ":"cs-CZ-AntoninNeural","cy-GB":"cy-GB-AledNeural","da-DK":"da-DK-ChristelNeural","de-AT":"de-AT-IngridNeural","de-CH":"de-CH-JanNeural","de-DE":"de-DE-KatjaNeural","el-GR":"el-GR-AthinaNeural","en-AU":"en-AU-NatashaNeural","en-CA":"en-CA-ClaraNeural","en-GB":"en-GB-LibbyNeural","en-HK":"en-HK-SamNeural","en-IE":"en-IE-ConnorNeural","en-IN":"en-IN-NeerjaNeural","en-KE":"en-KE-AsiliaNeural","en-NG":"en-NG-AbeoNeural","en-NZ":"en-NZ-MitchellNeural","en-PH":"en-PH-JamesNeural","en-SG":"en-SG-LunaNeural","en-TZ":"en-TZ-ElimuNeural","en-US":"en-US-JennyNeural","en-ZA":"en-ZA-LeahNeural","es-AR":"es-AR-ElenaNeural","es-BO":"es-BO-MarceloNeural","es-CL":"es-CL-CatalinaNeural","es-CO":"es-CO-GonzaloNeural","es-CR":"es-CR-JuanNeural","es-CU":"es-CU-BelkysNeural","es-DO":"es-DO-EmilioNeural","es-EC":"es-EC-AndreaNeural","es-ES":"es-ES-AlvaroNeural","es-GQ":"es-GQ-JavierNeural","es-GT":"es-GT-AndresNeural","es-HN":"es-HN-CarlosNeural","es-MX":"es-MX-DaliaNeural","es-NI":"es-NI-FedericoNeural","es-PA":"es-PA-MargaritaNeural","es-PE":"es-PE-AlexNeural","es-PR":"es-PR-KarinaNeural","es-PY":"es-PY-MarioNeural","es-SV":"es-SV-LorenaNeural","es-US":"es-US-AlonsoNeural","es-UY":"es-UY-MateoNeural","es-VE":"es-VE-PaolaNeural","et-EE":"et-EE-AnuNeural","fa-IR":"fa-IR-DilaraNeural","fi-FI":"fi-FI-SelmaNeural","fil-PH":"fil-PH-AngeloNeural","fr-BE":"fr-BE-CharlineNeural","fr-CA":"fr-CA-SylvieNeural","fr-CH":"fr-CH-ArianeNeural","fr-FR":"fr-FR-DeniseNeural","ga-IE":"ga-IE-ColmNeural","gl-ES":"gl-ES-RoiNeural","gu-IN":"gu-IN-DhwaniNeural","he-IL":"he-IL-AvriNeural","hi-IN":"hi-IN-MadhurNeural","hr-HR":"hr-HR-GabrijelaNeural","hu-HU":"hu-HU-NoemiNeural","id-ID":"id-ID-ArdiNeural","is-IS":"is-IS-GudrunNeural","it-IT":"it-IT-IsabellaNeural","ja-JP":"ja-JP-NanamiNeural","jv-ID":"jv-ID-DimasNeural","kk-KZ":"kk-KZ-AigulNeural","km-KH":"km-KH-PisethNeural","kn-IN":"kn-IN-GaganNeural","ko-KR":"ko-KR-SunHiNeural","lo-LA":"lo-LA-ChanthavongNeural","lt-LT":"lt-LT-LeonasNeural","lv-LV":"lv-LV-EveritaNeural","mk-MK":"mk-MK-AleksandarNeural","ml-IN":"ml-IN-MidhunNeural","mr-IN":"mr-IN-AarohiNeural","ms-MY":"ms-MY-OsmanNeural","mt-MT":"mt-MT-GraceNeural","my-MM":"my-MM-NilarNeural","nb-NO":"nb-NO-PernilleNeural","nl-BE":"nl-BE-ArnaudNeural","nl-NL":"nl-NL-ColetteNeural","pl-PL":"pl-PL-AgnieszkaNeural","ps-AF":"ps-AF-GulNawazNeural","pt-BR":"pt-BR-FranciscaNeural","pt-PT":"pt-PT-DuarteNeural","ro-RO":"ro-RO-AlinaNeural","ru-RU":"ru-RU-SvetlanaNeural","si-LK":"si-LK-SameeraNeural","sk-SK":"sk-SK-LukasNeural","sl-SI":"sl-SI-PetraNeural","so-SO":"so-SO-MuuseNeural","sr-RS":"sr-RS-NicholasNeural","su-ID":"su-ID-JajangNeural","sv-SE":"sv-SE-SofieNeural","sw-KE":"sw-KE-RafikiNeural","sw-TZ":"sw-TZ-DaudiNeural","ta-IN":"ta-IN-PallaviNeural","ta-LK":"ta-LK-KumarNeural","ta-SG":"ta-SG-AnbuNeural","te-IN":"te-IN-MohanNeural","th-TH":"th-TH-PremwadeeNeural","tr-TR":"tr-TR-AhmetNeural","uk-UA":"uk-UA-OstapNeural","ur-IN":"ur-IN-GulNeural","ur-PK":"ur-PK-AsadNeural","uz-UZ":"uz-UZ-MadinaNeural","vi-VN":"vi-VN-HoaiMyNeural","zh-CN":"zh-CN-XiaoxiaoNeural","zh-HK":"zh-HK-HiuMaanNeural","zh-TW":"zh-TW-HsiaoChenNeural","zu-ZA":"zu-ZA-ThandoNeural"}[I],M&&(T=`<voice name='${M}'>${T}</voice>`),T=`<speak version='1.0' xmlns='http://www.w3.org/2001/10/synthesis' xmlns:mstts='http://www.w3.org/2001/mstts' xmlns:emo='http://www.w3.org/2009/10/emotionml' xml:lang='${I}'>${T}</speak>`,T}dispose(h){return o(this,void 0,void 0,function*(){this.privDisposed||(h&&this.privAdapter&&(yield this.privAdapter.dispose()),this.privDisposed=!0)})}adapterSpeak(){return o(this,void 0,void 0,function*(){if(!this.privDisposed&&!this.privSynthesizing){this.privSynthesizing=!0;const h=yield this.synthesisRequestQueue.dequeue();return this.privAdapter.Speak(h.text,h.isSSML,h.requestId,h.cb,h.err,h.dataStream)}})}createSynthesizerConfig(h){return new v.SynthesizerConfig(h,this.privProperties)}implCommonSynthesizeSetup(){let h=typeof window<"u"?"Browser":"Node",m="unknown",I="unknown";typeof navigator<"u"&&(h=h+"/"+navigator.platform,m=navigator.userAgent,I=navigator.appVersion);const M=this.createSynthesizerConfig(new v.SpeechServiceConfig(new v.Context(new v.OS(h,m,I)))),T=this.privProperties.getProperty(b.PropertyId.SpeechServiceConnection_Key,void 0),N=T&&""!==T?new v.CognitiveSubscriptionKeyAuthentication(T):new v.CognitiveTokenAuthentication(()=>{const L=this.privProperties.getProperty(b.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(L)},()=>{const L=this.privProperties.getProperty(b.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(L)});this.privAdapter=this.createSynthesisAdapter(N,this.privConnectionFactory,M),this.privRestAdapter=this.createRestSynthesisAdapter(N,M)}static XMLEncode(h){return h.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}}p.Synthesizer=P,p.SynthesisRequest=class w{constructor(h,m,I,M,T,N){this.requestId=h,this.text=m,this.isSSML=I,this.cb=M,this.err=T,this.dataStream=N}}},4693:function(ne,p,y){"use strict";var o=this&&this.__awaiter||function(S,h,m,I){return new(m||(m=Promise))(function(T,N){function L(q){try{V(I.next(q))}catch(X){N(X)}}function z(q){try{V(I.throw(q))}catch(X){N(X)}}function V(q){q.done?T(q.value):function M(T){return T instanceof m?T:new m(function(N){N(T)})}(q.value).then(L,z)}V((I=I.apply(S,h||[])).next())})};Object.defineProperty(p,"__esModule",{value:!0}),p.ConversationImpl=p.Conversation=void 0;const v=y(9464),_=y(847),A=y(5916),b=y(8323);class P{constructor(){}static createConversationAsync(h,m,I,M){let T,N,L;return A.Contracts.throwIfNullOrUndefined(h,v.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","config")),A.Contracts.throwIfNullOrUndefined(h.region,v.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Region")),!h.subscriptionKey&&!h.getProperty(b.PropertyId[b.PropertyId.SpeechServiceAuthorization_Token])&&A.Contracts.throwIfNullOrUndefined(h.subscriptionKey,v.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Key")),"string"==typeof m?(T=new w(h,m),_.marshalPromiseToCallbacks((()=>o(this,void 0,void 0,function*(){}))(),I,M)):(T=new w(h),N=m,L=I,T.createConversationAsync(()=>{N&&N()},z=>{L&&L(z)})),T}}p.Conversation=P;class w extends P{constructor(h,m){if(super(),this.privErrors=v.ConversationConnectionConfig.restErrors,this.onConnected=T=>{var N;this.privIsConnected=!0;try{null!==(N=this.privConversationTranslator)&&void 0!==N&&N.sessionStarted&&this.privConversationTranslator.sessionStarted(this.privConversationTranslator,T)}catch{}},this.onDisconnected=T=>{var N;try{null!==(N=this.privConversationTranslator)&&void 0!==N&&N.sessionStopped&&this.privConversationTranslator.sessionStopped(this.privConversationTranslator,T)}catch{}finally{this.close(!1)}},this.onCanceled=(T,N)=>{var L;try{null!==(L=this.privConversationTranslator)&&void 0!==L&&L.canceled&&this.privConversationTranslator.canceled(this.privConversationTranslator,N)}catch{}},this.onParticipantUpdateCommandReceived=(T,N)=>{try{const L=this.privParticipants.getParticipant(N.id);if(void 0!==L){switch(N.key){case v.ConversationTranslatorCommandTypes.changeNickname:L.displayName=N.value;break;case v.ConversationTranslatorCommandTypes.setUseTTS:L.isUsingTts=N.value;break;case v.ConversationTranslatorCommandTypes.setProfanityFiltering:L.profanity=N.value;break;case v.ConversationTranslatorCommandTypes.setMute:L.isMuted=N.value;break;case v.ConversationTranslatorCommandTypes.setTranslateToLanguages:L.translateToLanguages=N.value}this.privParticipants.addOrUpdateParticipant(L),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new b.ConversationParticipantsChangedEventArgs(b.ParticipantChangedReason.Updated,[this.toParticipant(L)],N.sessionId))}}catch{}},this.onLockRoomCommandReceived=()=>{},this.onMuteAllCommandReceived=(T,N)=>{try{this.privParticipants.participants.forEach(L=>L.isMuted=!L.isHost&&N.isMuted),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new b.ConversationParticipantsChangedEventArgs(b.ParticipantChangedReason.Updated,this.toParticipants(!1),N.sessionId))}catch{}},this.onParticipantJoinCommandReceived=(T,N)=>{try{const L=this.privParticipants.addOrUpdateParticipant(N.participant);void 0!==L&&this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new b.ConversationParticipantsChangedEventArgs(b.ParticipantChangedReason.JoinedConversation,[this.toParticipant(L)],N.sessionId))}catch{}},this.onParticipantLeaveCommandReceived=(T,N)=>{try{const L=this.privParticipants.getParticipant(N.participant.id);void 0!==L&&(this.privParticipants.deleteParticipant(N.participant.id),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new b.ConversationParticipantsChangedEventArgs(b.ParticipantChangedReason.LeftConversation,[this.toParticipant(L)],N.sessionId)))}catch{}},this.onTranslationReceived=(T,N)=>{try{switch(N.command){case v.ConversationTranslatorMessageTypes.final:this.privConversationTranslator&&this.privConversationTranslator.transcribed(this.privConversationTranslator,new b.ConversationTranslationEventArgs(N.payload,void 0,N.sessionId));break;case v.ConversationTranslatorMessageTypes.partial:this.privConversationTranslator&&this.privConversationTranslator.transcribing(this.privConversationTranslator,new b.ConversationTranslationEventArgs(N.payload,void 0,N.sessionId));break;case v.ConversationTranslatorMessageTypes.instantMessage:this.privConversationTranslator&&this.privConversationTranslator.textMessageReceived(this.privConversationTranslator,new b.ConversationTranslationEventArgs(N.payload,void 0,N.sessionId))}}catch{}},this.onParticipantsListReceived=(T,N)=>{var L;try{if(null!=N.sessionToken&&(this.privRoom.token=N.sessionToken),this.privParticipants.participants=[...N.participants],void 0!==this.privParticipants.me&&(this.privIsReady=!0),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new b.ConversationParticipantsChangedEventArgs(b.ParticipantChangedReason.JoinedConversation,this.toParticipants(!0),N.sessionId)),this.me.isHost){const z=null===(L=this.privConversationTranslator)||void 0===L?void 0:L.properties.getProperty(b.PropertyId.ConversationTranslator_Name);void 0!==z&&z.length>0&&z!==this.me.displayName&&this.changeNicknameAsync(z)}}catch{}},this.onConversationExpiration=(T,N)=>{try{this.privConversationTranslator&&this.privConversationTranslator.conversationExpiration(this.privConversationTranslator,N)}catch{}},this.privIsConnected=!1,this.privIsDisposed=!1,this.privConversationId="",this.privProperties=new b.PropertyCollection,this.privManager=new v.ConversationManager,h.getProperty(b.PropertyId[b.PropertyId.SpeechServiceConnection_RecoLanguage])||h.setProperty(b.PropertyId[b.PropertyId.SpeechServiceConnection_RecoLanguage],v.ConversationConnectionConfig.defaultLanguageCode),this.privLanguage=h.getProperty(b.PropertyId[b.PropertyId.SpeechServiceConnection_RecoLanguage]),m)this.privConversationId=m;else{0===h.targetLanguages.length&&h.addTargetLanguage(this.privLanguage),h.getProperty(b.PropertyId[b.PropertyId.SpeechServiceResponse_ProfanityOption])||h.setProfanity(b.ProfanityOption.Masked);let N=h.getProperty(b.PropertyId[b.PropertyId.ConversationTranslator_Name]);null==N&&(N="Host"),A.Contracts.throwIfNullOrTooLong(N,"nickname",50),A.Contracts.throwIfNullOrTooShort(N,"nickname",2),h.setProperty(b.PropertyId[b.PropertyId.ConversationTranslator_Name],N)}this.privConfig=h;const M=h;A.Contracts.throwIfNull(M,"speechConfig"),this.privProperties=M.properties.clone(),this.privIsConnected=!1,this.privParticipants=new v.InternalParticipants,this.privIsReady=!1,this.privTextMessageMaxLength=1e3}get room(){return this.privRoom}get connection(){return this.privConversationRecognizer}get config(){return this.privConfig}get conversationId(){return this.privRoom?this.privRoom.roomId:this.privConversationId}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privLanguage}get isMutedByHost(){var h,m;return(null===(h=this.privParticipants.me)||void 0===h||!h.isHost)&&(null===(m=this.privParticipants.me)||void 0===m?void 0:m.isMuted)}get isConnected(){return this.privIsConnected&&this.privIsReady}get participants(){return this.toParticipants(!0)}get me(){return this.toParticipant(this.privParticipants.me)}get host(){return this.toParticipant(this.privParticipants.host)}get transcriberRecognizer(){return this.privTranscriberRecognizer}get conversationInfo(){const h=this.conversationId,m=this.participants.map(T=>({id:T.id,preferredLanguage:T.preferredLanguage,voice:T.voice})),I={};for(const T of v.ConversationConnectionConfig.transcriptionEventKeys){const N=this.properties.getProperty(T,"");""!==N&&(I[T]=N)}return{id:h,participants:m,conversationProperties:I}}get canSend(){var h;return this.privIsConnected&&!(null!==(h=this.privParticipants.me)&&void 0!==h&&h.isMuted)}get canSendAsHost(){var h;return this.privIsConnected&&(null===(h=this.privParticipants.me)||void 0===h?void 0:h.isHost)}get authorizationToken(){return this.privToken}set authorizationToken(h){A.Contracts.throwIfNullOrWhitespace(h,"authorizationToken"),this.privToken=h}set conversationTranslator(h){this.privConversationTranslator=h}onToken(h){this.privConversationTranslator.onToken(h)}createConversationAsync(h,m){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),m),this.privManager.createOrJoin(this.privProperties,void 0,I=>{I||this.handleError(new Error(this.privErrors.permissionDeniedConnect),m),this.privRoom=I,this.handleCallback(h,m)},I=>{this.handleError(I,m)})}catch(I){this.handleError(I,m)}}startConversationAsync(h,m){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),m),A.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedConnect),this.privParticipants.meId=this.privRoom.participantId,this.privConversationRecognizer=v.ConversationRecognizerFactory.fromConfig(this,this.privConfig),this.privConversationRecognizer.connected=this.onConnected,this.privConversationRecognizer.disconnected=this.onDisconnected,this.privConversationRecognizer.canceled=this.onCanceled,this.privConversationRecognizer.participantUpdateCommandReceived=this.onParticipantUpdateCommandReceived,this.privConversationRecognizer.lockRoomCommandReceived=this.onLockRoomCommandReceived,this.privConversationRecognizer.muteAllCommandReceived=this.onMuteAllCommandReceived,this.privConversationRecognizer.participantJoinCommandReceived=this.onParticipantJoinCommandReceived,this.privConversationRecognizer.participantLeaveCommandReceived=this.onParticipantLeaveCommandReceived,this.privConversationRecognizer.translationReceived=this.onTranslationReceived,this.privConversationRecognizer.participantsListReceived=this.onParticipantsListReceived,this.privConversationRecognizer.conversationExpiration=this.onConversationExpiration,this.privConversationRecognizer.connect(this.privRoom.token,()=>{this.handleCallback(h,m)},I=>{this.handleError(I,m)})}catch(I){this.handleError(I,m)}}addParticipantAsync(h,m,I){A.Contracts.throwIfNullOrUndefined(h,"Participant"),_.marshalPromiseToCallbacks(this.addParticipantImplAsync(h),m,I)}joinConversationAsync(h,m,I,M,T){try{A.Contracts.throwIfNullOrWhitespace(h,this.privErrors.invalidArgs.replace("{arg}","conversationId")),A.Contracts.throwIfNullOrWhitespace(m,this.privErrors.invalidArgs.replace("{arg}","nickname")),A.Contracts.throwIfNullOrWhitespace(I,this.privErrors.invalidArgs.replace("{arg}","language")),this.privManager.createOrJoin(this.privProperties,h,N=>{A.Contracts.throwIfNullOrUndefined(N,this.privErrors.permissionDeniedConnect),this.privRoom=N,this.privConfig.authorizationToken=N.cognitiveSpeechAuthToken,M&&M(N.cognitiveSpeechAuthToken)},N=>{this.handleError(N,T)})}catch(N){this.handleError(N,T)}}deleteConversationAsync(h,m){_.marshalPromiseToCallbacks(this.deleteConversationImplAsync(),h,m)}deleteConversationImplAsync(){return o(this,void 0,void 0,function*(){A.Contracts.throwIfNullOrUndefined(this.privProperties,this.privErrors.permissionDeniedConnect),A.Contracts.throwIfNullOrWhitespace(this.privRoom.token,this.privErrors.permissionDeniedConnect),yield this.privManager.leave(this.privProperties,this.privRoom.token),this.dispose()})}endConversationAsync(h,m){_.marshalPromiseToCallbacks(this.endConversationImplAsync(),h,m)}endConversationImplAsync(){return this.close(!0)}lockConversationAsync(h,m){try{A.Contracts.throwIfDisposed(this.privIsDisposed),A.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),A.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","lock")),m),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!0),()=>{this.handleCallback(h,m)},I=>{this.handleError(I,m)})}catch(I){this.handleError(I,m)}}muteAllParticipantsAsync(h,m){try{A.Contracts.throwIfDisposed(this.privIsDisposed),A.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),A.Contracts.throwIfNullOrUndefined(this.privConversationRecognizer,this.privErrors.permissionDeniedSend),A.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","mute")),m),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!0),()=>{this.handleCallback(h,m)},I=>{this.handleError(I,m)})}catch(I){this.handleError(I,m)}}muteParticipantAsync(h,m,I){try{A.Contracts.throwIfDisposed(this.privIsDisposed),A.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),A.Contracts.throwIfNullOrWhitespace(h,this.privErrors.invalidArgs.replace("{arg}","userId")),A.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),I),!this.me.isHost&&this.me.id!==h&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),I),-1===this.privParticipants.getParticipantIndex(h)&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),I),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(h,!0),()=>{this.handleCallback(m,I)},T=>{this.handleError(T,I)})}catch(M){this.handleError(M,I)}}removeParticipantAsync(h,m,I){try{if(A.Contracts.throwIfDisposed(this.privIsDisposed),this.privTranscriberRecognizer&&h.hasOwnProperty("id"))_.marshalPromiseToCallbacks(this.removeParticipantImplAsync(h),m,I);else{A.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),A.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","remove")),I);let M="";"string"==typeof h?M=h:h.hasOwnProperty("id")?M=h.id:h.hasOwnProperty("userId")&&(M=h.userId),A.Contracts.throwIfNullOrWhitespace(M,this.privErrors.invalidArgs.replace("{arg}","userId")),-1===this.participants.findIndex(N=>N.id===M)&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),I),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getEjectCommand(M),()=>{this.handleCallback(m,I)},N=>{this.handleError(N,I)})}}catch(M){this.handleError(M,I)}}unlockConversationAsync(h,m){try{A.Contracts.throwIfDisposed(this.privIsDisposed),A.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),A.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unlock")),m),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!1),()=>{this.handleCallback(h,m)},I=>{this.handleError(I,m)})}catch(I){this.handleError(I,m)}}unmuteAllParticipantsAsync(h,m){try{A.Contracts.throwIfDisposed(this.privIsDisposed),A.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),A.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unmute all")),m),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!1),()=>{this.handleCallback(h,m)},I=>{this.handleError(I,m)})}catch(I){this.handleError(I,m)}}unmuteParticipantAsync(h,m,I){try{A.Contracts.throwIfDisposed(this.privIsDisposed),A.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),A.Contracts.throwIfNullOrWhitespace(h,this.privErrors.invalidArgs.replace("{arg}","userId")),A.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),I),!this.me.isHost&&this.me.id!==h&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),I),-1===this.privParticipants.getParticipantIndex(h)&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),I),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(h,!1),()=>{this.handleCallback(m,I)},T=>{this.handleError(T,I)})}catch(M){this.handleError(M,I)}}sendTextMessageAsync(h,m,I){try{A.Contracts.throwIfDisposed(this.privIsDisposed),A.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),A.Contracts.throwIfNullOrWhitespace(h,this.privErrors.invalidArgs.replace("{arg}","message")),A.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),I),h.length>this.privTextMessageMaxLength&&this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","message length")),I),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMessageCommand(h),()=>{this.handleCallback(m,I)},M=>{this.handleError(M,I)})}catch(M){this.handleError(M,I)}}setTranslatedLanguagesAsync(h,m,I){try{A.Contracts.throwIfDisposed(this.privIsDisposed),A.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),A.Contracts.throwIfArrayEmptyOrWhitespace(h,this.privErrors.invalidArgs.replace("{arg}","languages")),A.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),I),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getSetTranslateToLanguagesCommand(h),()=>{this.handleCallback(m,I)},M=>{this.handleError(M,I)})}catch(M){this.handleError(M,I)}}changeNicknameAsync(h,m,I){try{A.Contracts.throwIfDisposed(this.privIsDisposed),A.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),A.Contracts.throwIfNullOrWhitespace(h,this.privErrors.invalidArgs.replace("{arg}","nickname")),A.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),I),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getChangeNicknameCommand(h),()=>{this.handleCallback(m,I)},M=>{this.handleError(M,I)})}catch(M){this.handleError(M,I)}}isDisposed(){return this.privIsDisposed}dispose(){this.isDisposed||(this.privIsDisposed=!0,this.config&&this.config.close(),this.privConfig=void 0,this.privLanguage=void 0,this.privProperties=void 0,this.privRoom=void 0,this.privToken=void 0,this.privManager=void 0,this.privIsConnected=!1,this.privIsReady=!1,this.privParticipants=void 0)}connectTranscriberRecognizer(h){return o(this,void 0,void 0,function*(){this.privTranscriberRecognizer&&(yield this.privTranscriberRecognizer.close()),yield h.enforceAudioGating(),this.privTranscriberRecognizer=h,this.privTranscriberRecognizer.conversation=this})}getKeepAlive(){return JSON.stringify({id:"0",nickname:this.me?this.me.displayName:"default_nickname",participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,type:v.ConversationTranslatorMessageTypes.keepAlive})}addParticipantImplAsync(h){if(void 0!==this.privParticipants.addOrUpdateParticipant(h)&&this.privTranscriberRecognizer){const I=this.conversationInfo;return I.participants=[h],this.privTranscriberRecognizer.pushConversationEvent(I,"join")}}removeParticipantImplAsync(h){this.privParticipants.deleteParticipant(h.id);const m=this.conversationInfo;return m.participants=[h],this.privTranscriberRecognizer.pushConversationEvent(m,"leave")}close(h){var m;return o(this,void 0,void 0,function*(){try{this.privIsConnected=!1,yield null===(m=this.privConversationRecognizer)||void 0===m?void 0:m.close(),this.privConversationRecognizer=void 0,this.privConversationTranslator&&this.privConversationTranslator.dispose()}catch(I){throw I}h&&this.dispose()})}handleCallback(h,m){if(h){try{h()}catch(I){m&&m(I)}h=void 0}}handleError(h,m){m&&(h instanceof Error?m(h.name+": "+h.message):m(h))}toParticipants(h){const m=this.privParticipants.participants.map(I=>this.toParticipant(I));return h?m:m.filter(I=>!1===I.isHost)}toParticipant(h){return new b.Participant(h.id,h.avatar,h.displayName,h.isHost,h.isMuted,h.isUsingTts,h.preferredLanguage,h.voice)}getMuteAllCommand(h){return A.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),A.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:v.ConversationTranslatorCommandTypes.setMuteAll,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:v.ConversationTranslatorMessageTypes.participantCommand,value:h})}getMuteCommand(h,m){return A.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),A.Contracts.throwIfNullOrWhitespace(h,"participantId"),JSON.stringify({command:v.ConversationTranslatorCommandTypes.setMute,participantId:h,roomid:this.privRoom.roomId,type:v.ConversationTranslatorMessageTypes.participantCommand,value:m})}getLockCommand(h){return A.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),A.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:v.ConversationTranslatorCommandTypes.setLockState,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:v.ConversationTranslatorMessageTypes.participantCommand,value:h})}getEjectCommand(h){return A.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),A.Contracts.throwIfNullOrWhitespace(h,"participantId"),JSON.stringify({command:v.ConversationTranslatorCommandTypes.ejectParticipant,participantId:h,roomid:this.privRoom.roomId,type:v.ConversationTranslatorMessageTypes.participantCommand})}getSetTranslateToLanguagesCommand(h){return A.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),A.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:v.ConversationTranslatorCommandTypes.setTranslateToLanguages,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:v.ConversationTranslatorMessageTypes.participantCommand,value:h})}getChangeNicknameCommand(h){return A.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),A.Contracts.throwIfNullOrWhitespace(h,"nickname"),A.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:v.ConversationTranslatorCommandTypes.changeNickname,nickname:h,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:v.ConversationTranslatorMessageTypes.participantCommand,value:h})}getMessageCommand(h){return A.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),A.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),A.Contracts.throwIfNullOrWhitespace(h,"message"),JSON.stringify({participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,text:h,type:v.ConversationTranslatorMessageTypes.instantMessage})}}p.ConversationImpl=w},2860:(ne,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.ConversationCommon=void 0,p.ConversationCommon=class y{constructor(v){this.privAudioConfig=v}handleCallback(v,_){if(v){try{v()}catch(A){_&&_(A)}v=void 0}}handleError(v,_){_&&(v instanceof Error?_(v.name+": "+v.message):_(v))}}},517:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.ConversationExpirationEventArgs=void 0;const o=y(8323);p.ConversationExpirationEventArgs=class v extends o.SessionEventArgs{constructor(A,b){super(b),this.privExpirationTime=A}get expirationTime(){return this.privExpirationTime}}},5587:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.ConversationParticipantsChangedEventArgs=void 0;const o=y(8323);p.ConversationParticipantsChangedEventArgs=class v extends o.SessionEventArgs{constructor(A,b,P){super(P),this.privReason=A,this.privParticipant=b}get reason(){return this.privReason}get participants(){return this.privParticipant}}},397:function(ne,p,y){"use strict";var o=this&&this.__awaiter||function(w,S,h,m){return new(h||(h=Promise))(function(M,T){function N(V){try{z(m.next(V))}catch(q){T(q)}}function L(V){try{z(m.throw(V))}catch(q){T(q)}}function z(V){V.done?M(V.value):function I(M){return M instanceof h?M:new h(function(T){T(M)})}(V.value).then(N,L)}z((m=m.apply(w,S||[])).next())})};Object.defineProperty(p,"__esModule",{value:!0}),p.ConversationTranscriber=void 0;const v=y(9464),_=y(847),A=y(5916),b=y(8323);class P extends b.Recognizer{constructor(S,h){const m=S;A.Contracts.throwIfNull(m,"speechConfig"),A.Contracts.throwIfNullOrWhitespace(m.properties.getProperty(b.PropertyId.SpeechServiceConnection_RecoLanguage),b.PropertyId[b.PropertyId.SpeechServiceConnection_RecoLanguage]),super(h,m.properties,new v.ConversationTranscriberConnectionFactory),this.privProperties.setProperty(b.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"2"),this.privDisposedRecognizer=!1}static FromConfig(S,h,m){return h.properties.mergeTo(S.properties),new P(S,m)}get endpointId(){return A.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(b.PropertyId.SpeechServiceConnection_EndpointId,"00000000-0000-0000-0000-000000000000")}get authorizationToken(){return this.properties.getProperty(b.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(S){A.Contracts.throwIfNullOrWhitespace(S,"token"),this.properties.setProperty(b.PropertyId.SpeechServiceAuthorization_Token,S)}get speechRecognitionLanguage(){return A.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(b.PropertyId.SpeechServiceConnection_RecoLanguage)}get outputFormat(){return A.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(v.OutputFormatPropertyName,b.OutputFormat[b.OutputFormat.Simple])===b.OutputFormat[b.OutputFormat.Simple]?b.OutputFormat.Simple:b.OutputFormat.Detailed}get properties(){return this.privProperties}startTranscribingAsync(S,h){_.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(v.RecognitionMode.Conversation),S,h)}stopTranscribingAsync(S,h){_.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),S,h)}close(S,h){A.Contracts.throwIfDisposed(this.privDisposedRecognizer),_.marshalPromiseToCallbacks(this.dispose(!0),S,h)}dispose(S){const h=Object.create(null,{dispose:{get:()=>super.dispose}});return o(this,void 0,void 0,function*(){this.privDisposedRecognizer||(S&&(this.privDisposedRecognizer=!0,yield this.implRecognizerStop()),yield h.dispose.call(this,S))})}createRecognizerConfig(S){return new v.RecognizerConfig(S,this.privProperties)}createServiceRecognizer(S,h,m,I){const M=m;return I.isSpeakerDiarizationEnabled=!0,new v.ConversationTranscriptionServiceRecognizer(S,h,M,I,this)}}p.ConversationTranscriber=P},7702:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.ConversationTranscriptionResult=void 0;const o=y(8323);p.ConversationTranscriptionResult=class v extends o.RecognitionResult{constructor(A,b,P,w,S,h,m,I,M,T,N){super(A,b,P,w,S,h,m,M,T,N),this.privSpeakerId=I}get speakerId(){return this.privSpeakerId}}},9928:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.ConversationTranslationCanceledEventArgs=void 0;const o=y(3245);p.ConversationTranslationCanceledEventArgs=class v extends o.CancellationEventArgsBase{}},1479:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.ConversationTranslationEventArgs=void 0;const o=y(8323);p.ConversationTranslationEventArgs=class v extends o.RecognitionEventArgs{constructor(A,b,P){super(b,P),this.privResult=A}get result(){return this.privResult}}},7943:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.ConversationTranslationResult=void 0;const o=y(1505);p.ConversationTranslationResult=class v extends o.TranslationRecognitionResult{constructor(A,b,P,w,S,h,m,I,M,T,N){super(b,w,S,h,m,I,void 0,void 0,M,T,N),this.privId=A,this.privOrigLang=P}get participantId(){return this.privId}get originalLang(){return this.privOrigLang}}},5578:function(ne,p,y){"use strict";var o=this&&this.__awaiter||function(M,T,N,L){return new(N||(N=Promise))(function(V,q){function X(pe){try{fe(L.next(pe))}catch(Ae){q(Ae)}}function ce(pe){try{fe(L.throw(pe))}catch(Ae){q(Ae)}}function fe(pe){pe.done?V(pe.value):function z(V){return V instanceof N?V:new N(function(q){q(V)})}(pe.value).then(X,ce)}fe((L=L.apply(M,T||[])).next())})};Object.defineProperty(p,"__esModule",{value:!0}),p.ConversationTranslator=p.SpeechState=void 0;const v=y(9464),_=y(4123),A=y(847),b=y(5916),P=y(8323),w=y(4693),S=y(8479);var h,M;(M=h=p.SpeechState||(p.SpeechState={}))[M.Inactive=0]="Inactive",M[M.Connecting=1]="Connecting",M[M.Connected=2]="Connected";class m extends P.TranslationRecognizer{constructor(T,N,L,z){super(T,N,new _.ConversationTranslatorConnectionFactory(z)),this.privSpeechState=h.Inactive,L&&(this.privTranslator=L,this.sessionStarted=()=>{this.privSpeechState=h.Connected},this.sessionStopped=()=>{this.privSpeechState=h.Inactive},this.recognizing=(V,q)=>{this.privTranslator.recognizing&&this.privTranslator.recognizing(this.privTranslator,q)},this.recognized=(V,q)=>o(this,void 0,void 0,function*(){var X;null!==(X=q.result)&&void 0!==X&&X.errorDetails?(yield this.cancelSpeech(),this.fireCancelEvent(q.result.errorDetails)):this.privTranslator.recognized&&this.privTranslator.recognized(this.privTranslator,q)}),this.canceled=()=>o(this,void 0,void 0,function*(){if(this.privSpeechState!==h.Inactive)try{yield this.cancelSpeech()}catch{this.privSpeechState=h.Inactive}}))}get state(){return this.privSpeechState}set state(T){this.privSpeechState=T}set authentication(T){this.privReco.authentication=T}onConnection(){this.privSpeechState=h.Connected}onCancelSpeech(){return o(this,void 0,void 0,function*(){this.privSpeechState=h.Inactive,yield this.cancelSpeech()})}fireCancelEvent(T){try{if(this.privTranslator.canceled){const N=new S.ConversationTranslationCanceledEventArgs(P.CancellationReason.Error,T,P.CancellationErrorCode.RuntimeError);this.privTranslator.canceled(this.privTranslator,N)}}catch{}}cancelSpeech(){var T;return o(this,void 0,void 0,function*(){try{this.stopContinuousRecognitionAsync(),yield null===(T=this.privReco)||void 0===T?void 0:T.disconnect(),this.privSpeechState=h.Inactive}catch{}})}}p.ConversationTranslator=class I extends S.ConversationCommon{constructor(T){super(T),this.privErrors=v.ConversationConnectionConfig.restErrors,this.privIsDisposed=!1,this.privIsSpeaking=!1,this.privPlaceholderKey="abcdefghijklmnopqrstuvwxyz012345",this.privPlaceholderRegion="westus",this.privProperties=new P.PropertyCollection}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privSpeechRecognitionLanguage}get participants(){var T;return null===(T=this.privConversation)||void 0===T?void 0:T.participants}get canSpeak(){return!(!this.privConversation.isConnected||!this.privCTRecognizer||this.privIsSpeaking||this.privCTRecognizer.state===h.Connected||this.privCTRecognizer.state===h.Connecting||this.privConversation.isMutedByHost)}onToken(T){this.privCTRecognizer.authentication=T}setServiceProperty(T,N){const L=JSON.parse(this.privProperties.getProperty(v.ServicePropertiesPropertyName,"{}"));L[T]=N,this.privProperties.setProperty(v.ServicePropertiesPropertyName,JSON.stringify(L))}joinConversationAsync(T,N,L,z,V){try{if("string"==typeof T){b.Contracts.throwIfNullOrUndefined(T,this.privErrors.invalidArgs.replace("{arg}","conversation id")),b.Contracts.throwIfNullOrWhitespace(N,this.privErrors.invalidArgs.replace("{arg}","nickname")),this.privConversation&&this.handleError(new Error(this.privErrors.permissionDeniedStart),V);let q=L;(null==q||""===q)&&(q=v.ConversationConnectionConfig.defaultLanguageCode),this.privSpeechTranslationConfig=P.SpeechTranslationConfig.fromSubscription(this.privPlaceholderKey,this.privPlaceholderRegion),this.privSpeechTranslationConfig.setProfanity(P.ProfanityOption.Masked),this.privSpeechTranslationConfig.addTargetLanguage(q),this.privSpeechTranslationConfig.setProperty(P.PropertyId[P.PropertyId.SpeechServiceConnection_RecoLanguage],q),this.privSpeechTranslationConfig.setProperty(P.PropertyId[P.PropertyId.ConversationTranslator_Name],N);const X=[P.PropertyId.SpeechServiceConnection_Host,P.PropertyId.ConversationTranslator_Host,P.PropertyId.SpeechServiceConnection_Endpoint,P.PropertyId.SpeechServiceConnection_ProxyHostName,P.PropertyId.SpeechServiceConnection_ProxyPassword,P.PropertyId.SpeechServiceConnection_ProxyPort,P.PropertyId.SpeechServiceConnection_ProxyUserName,"ConversationTranslator_MultiChannelAudio","ConversationTranslator_Region"];for(const fe of X){const pe=this.privProperties.getProperty(fe);pe&&this.privSpeechTranslationConfig.setProperty("string"==typeof fe?fe:P.PropertyId[fe],pe)}const ce=JSON.parse(this.privProperties.getProperty(v.ServicePropertiesPropertyName,"{}"));for(const fe of Object.keys(ce))this.privSpeechTranslationConfig.setServiceProperty(fe,ce[fe],P.ServicePropertyChannel.UriQueryParameter);this.privConversation=new w.ConversationImpl(this.privSpeechTranslationConfig),this.privConversation.conversationTranslator=this,this.privConversation.joinConversationAsync(T,N,q,fe=>{fe||this.handleError(new Error(this.privErrors.permissionDeniedConnect),V),this.privSpeechTranslationConfig.authorizationToken=fe,this.privConversation.room.isHost=!1,this.privConversation.startConversationAsync(()=>{this.handleCallback(z,V)},pe=>{this.handleError(pe,V)})},fe=>{this.handleError(fe,V)})}else"object"==typeof T?(b.Contracts.throwIfNullOrUndefined(T,this.privErrors.invalidArgs.replace("{arg}","conversation id")),b.Contracts.throwIfNullOrWhitespace(N,this.privErrors.invalidArgs.replace("{arg}","nickname")),this.privProperties.setProperty(P.PropertyId.ConversationTranslator_Name,N),this.privConversation=T,this.privConversation.conversationTranslator=this,this.privConversation.room.isHost=!0,b.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedConnect),b.Contracts.throwIfNullOrUndefined(this.privConversation.room.token,this.privErrors.permissionDeniedConnect),this.privSpeechTranslationConfig=T.config,this.handleCallback(L,z)):this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","invalid conversation type")),z)}catch(q){this.handleError(q,"string"==typeof L?V:z)}}leaveConversationAsync(T,N){A.marshalPromiseToCallbacks((()=>o(this,void 0,void 0,function*(){yield this.cancelSpeech(),yield this.privConversation.endConversationImplAsync(),yield this.privConversation.deleteConversationImplAsync(),this.dispose()}))(),T,N)}sendTextMessageAsync(T,N,L){try{b.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedSend),b.Contracts.throwIfNullOrWhitespace(T,this.privErrors.invalidArgs.replace("{arg}",T)),this.privConversation.sendTextMessageAsync(T,N,L)}catch(z){this.handleError(z,L)}}startTranscribingAsync(T,N){A.marshalPromiseToCallbacks((()=>o(this,void 0,void 0,function*(){try{b.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedSend),b.Contracts.throwIfNullOrUndefined(this.privConversation.room.token,this.privErrors.permissionDeniedConnect),void 0===this.privCTRecognizer&&(yield this.connectTranslatorRecognizer()),b.Contracts.throwIfNullOrUndefined(this.privCTRecognizer,this.privErrors.permissionDeniedSend),this.canSpeak||this.handleError(new Error(this.privErrors.permissionDeniedSend),N),yield this.startContinuousRecognition(),this.privIsSpeaking=!0}catch(L){throw this.privIsSpeaking=!1,yield this.cancelSpeech(),L}}))(),T,N)}stopTranscribingAsync(T,N){A.marshalPromiseToCallbacks((()=>o(this,void 0,void 0,function*(){try{if(!this.privIsSpeaking)return void(yield this.cancelSpeech());this.privIsSpeaking=!1,yield new Promise((L,z)=>{this.privCTRecognizer.stopContinuousRecognitionAsync(L,z)})}catch{yield this.cancelSpeech()}}))(),T,N)}isDisposed(){return this.privIsDisposed}dispose(T,N,L){A.marshalPromiseToCallbacks((()=>o(this,void 0,void 0,function*(){this.isDisposed&&!this.privIsSpeaking||(yield this.cancelSpeech(),this.privIsDisposed=!0,this.privSpeechTranslationConfig.close(),this.privSpeechRecognitionLanguage=void 0,this.privProperties=void 0,this.privAudioConfig=void 0,this.privSpeechTranslationConfig=void 0,this.privConversation.dispose(),this.privConversation=void 0)}))(),N,L)}cancelSpeech(){var T;return o(this,void 0,void 0,function*(){try{this.privIsSpeaking=!1,yield null===(T=this.privCTRecognizer)||void 0===T?void 0:T.onCancelSpeech(),this.privCTRecognizer=void 0}catch{}})}connectTranslatorRecognizer(){return o(this,void 0,void 0,function*(){try{void 0===this.privAudioConfig&&(this.privAudioConfig=P.AudioConfig.fromDefaultMicrophoneInput()),this.privSpeechTranslationConfig.getProperty(P.PropertyId[P.PropertyId.SpeechServiceConnection_Key])===this.privPlaceholderKey&&this.privSpeechTranslationConfig.setProperty(P.PropertyId[P.PropertyId.SpeechServiceConnection_Key],""),this.privCTRecognizer=new m(this.privSpeechTranslationConfig,this.privAudioConfig,this,()=>this.privConversation)}catch(T){throw yield this.cancelSpeech(),T}})}startContinuousRecognition(){return new Promise((T,N)=>{this.privCTRecognizer.startContinuousRecognitionAsync(T,N)})}}},8479:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0});var o=y(4693);Object.defineProperty(p,"Conversation",{enumerable:!0,get:function(){return o.Conversation}}),Object.defineProperty(p,"ConversationImpl",{enumerable:!0,get:function(){return o.ConversationImpl}});var v=y(2860);Object.defineProperty(p,"ConversationCommon",{enumerable:!0,get:function(){return v.ConversationCommon}});var _=y(517);Object.defineProperty(p,"ConversationExpirationEventArgs",{enumerable:!0,get:function(){return _.ConversationExpirationEventArgs}});var A=y(5587);Object.defineProperty(p,"ConversationParticipantsChangedEventArgs",{enumerable:!0,get:function(){return A.ConversationParticipantsChangedEventArgs}});var b=y(9928);Object.defineProperty(p,"ConversationTranslationCanceledEventArgs",{enumerable:!0,get:function(){return b.ConversationTranslationCanceledEventArgs}});var P=y(1479);Object.defineProperty(p,"ConversationTranslationEventArgs",{enumerable:!0,get:function(){return P.ConversationTranslationEventArgs}});var w=y(7943);Object.defineProperty(p,"ConversationTranslationResult",{enumerable:!0,get:function(){return w.ConversationTranslationResult}});var S=y(5578);Object.defineProperty(p,"ConversationTranslator",{enumerable:!0,get:function(){return S.ConversationTranslator}});var h=y(397);Object.defineProperty(p,"ConversationTranscriber",{enumerable:!0,get:function(){return h.ConversationTranscriber}});var m=y(6526);Object.defineProperty(p,"Participant",{enumerable:!0,get:function(){return m.Participant}}),Object.defineProperty(p,"User",{enumerable:!0,get:function(){return m.User}});var I=y(5221);Object.defineProperty(p,"ParticipantChangedReason",{enumerable:!0,get:function(){return I.ParticipantChangedReason}});var M=y(8770);Object.defineProperty(p,"Meeting",{enumerable:!0,get:function(){return M.Meeting}}),Object.defineProperty(p,"MeetingImpl",{enumerable:!0,get:function(){return M.MeetingImpl}});var T=y(9451);Object.defineProperty(p,"MeetingTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return T.MeetingTranscriptionCanceledEventArgs}});var N=y(6232);Object.defineProperty(p,"MeetingTranscriber",{enumerable:!0,get:function(){return N.MeetingTranscriber}});var L=y(7702);Object.defineProperty(p,"ConversationTranscriptionResult",{enumerable:!0,get:function(){return L.ConversationTranscriptionResult}})},6526:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.Participant=p.User=void 0;const o=y(8323);p.User=class v{constructor(b){this.privUserId=b}get userId(){return this.privUserId}};class _{constructor(b,P,w,S,h,m,I,M){this.privId=b,this.privAvatar=P,this.privDisplayName=w,this.privIsHost=S,this.privIsMuted=h,this.privIsUsingTts=m,this.privPreferredLanguage=I,this.privVoice=M,this.privProperties=new o.PropertyCollection}get avatar(){return this.privAvatar}get displayName(){return this.privDisplayName}get id(){return this.privId}get preferredLanguage(){return this.privPreferredLanguage}get isHost(){return this.privIsHost}get isMuted(){return this.privIsMuted}get isUsingTts(){return this.privIsUsingTts}get voice(){return this.privVoice}get properties(){return this.privProperties}static From(b,P,w){return new _(b,"",b,!1,!1,!1,P,w)}}p.Participant=_},8770:function(ne,p,y){"use strict";var o=this&&this.__awaiter||function(S,h,m,I){return new(m||(m=Promise))(function(T,N){function L(q){try{V(I.next(q))}catch(X){N(X)}}function z(q){try{V(I.throw(q))}catch(X){N(X)}}function V(q){q.done?T(q.value):function M(T){return T instanceof m?T:new m(function(N){N(T)})}(q.value).then(L,z)}V((I=I.apply(S,h||[])).next())})};Object.defineProperty(p,"__esModule",{value:!0}),p.MeetingImpl=p.Meeting=void 0;const v=y(9464),_=y(847),A=y(5916),b=y(8323);class P{constructor(){}static createMeetingAsync(h,m,I,M){if(A.Contracts.throwIfNullOrUndefined(h,v.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","config")),A.Contracts.throwIfNullOrUndefined(h.region,v.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Region")),A.Contracts.throwIfNull(m,"meetingId"),0===m.length)throw new Error("meetingId cannot be empty");!h.subscriptionKey&&!h.getProperty(b.PropertyId[b.PropertyId.SpeechServiceAuthorization_Token])&&A.Contracts.throwIfNullOrUndefined(h.subscriptionKey,v.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Key"));const T=new w(h,m);return _.marshalPromiseToCallbacks((()=>o(this,void 0,void 0,function*(){}))(),I,M),T}}p.Meeting=P;class w extends P{constructor(h,m){super(),this.privErrors=v.ConversationConnectionConfig.restErrors,this.onConnected=T=>{var N;this.privIsConnected=!0;try{null!==(N=this.privConversationTranslator)&&void 0!==N&&N.sessionStarted&&this.privConversationTranslator.sessionStarted(this.privConversationTranslator,T)}catch{}},this.onDisconnected=T=>{var N;try{null!==(N=this.privConversationTranslator)&&void 0!==N&&N.sessionStopped&&this.privConversationTranslator.sessionStopped(this.privConversationTranslator,T)}catch{}finally{this.close(!1)}},this.onCanceled=(T,N)=>{var L;try{null!==(L=this.privConversationTranslator)&&void 0!==L&&L.canceled&&this.privConversationTranslator.canceled(this.privConversationTranslator,N)}catch{}},this.onParticipantUpdateCommandReceived=(T,N)=>{try{const L=this.privParticipants.getParticipant(N.id);if(void 0!==L){switch(N.key){case v.ConversationTranslatorCommandTypes.changeNickname:L.displayName=N.value;break;case v.ConversationTranslatorCommandTypes.setUseTTS:L.isUsingTts=N.value;break;case v.ConversationTranslatorCommandTypes.setProfanityFiltering:L.profanity=N.value;break;case v.ConversationTranslatorCommandTypes.setMute:L.isMuted=N.value;break;case v.ConversationTranslatorCommandTypes.setTranslateToLanguages:L.translateToLanguages=N.value}this.privParticipants.addOrUpdateParticipant(L),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new b.ConversationParticipantsChangedEventArgs(b.ParticipantChangedReason.Updated,[this.toParticipant(L)],N.sessionId))}}catch{}},this.onLockRoomCommandReceived=()=>{},this.onMuteAllCommandReceived=(T,N)=>{try{this.privParticipants.participants.forEach(L=>L.isMuted=!L.isHost&&N.isMuted),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new b.ConversationParticipantsChangedEventArgs(b.ParticipantChangedReason.Updated,this.toParticipants(!1),N.sessionId))}catch{}},this.onParticipantJoinCommandReceived=(T,N)=>{try{const L=this.privParticipants.addOrUpdateParticipant(N.participant);void 0!==L&&this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new b.ConversationParticipantsChangedEventArgs(b.ParticipantChangedReason.JoinedConversation,[this.toParticipant(L)],N.sessionId))}catch{}},this.onParticipantLeaveCommandReceived=(T,N)=>{try{const L=this.privParticipants.getParticipant(N.participant.id);void 0!==L&&(this.privParticipants.deleteParticipant(N.participant.id),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new b.ConversationParticipantsChangedEventArgs(b.ParticipantChangedReason.LeftConversation,[this.toParticipant(L)],N.sessionId)))}catch{}},this.onTranslationReceived=(T,N)=>{try{switch(N.command){case v.ConversationTranslatorMessageTypes.final:this.privConversationTranslator&&this.privConversationTranslator.transcribed(this.privConversationTranslator,new b.ConversationTranslationEventArgs(N.payload,void 0,N.sessionId));break;case v.ConversationTranslatorMessageTypes.partial:this.privConversationTranslator&&this.privConversationTranslator.transcribing(this.privConversationTranslator,new b.ConversationTranslationEventArgs(N.payload,void 0,N.sessionId));break;case v.ConversationTranslatorMessageTypes.instantMessage:this.privConversationTranslator&&this.privConversationTranslator.textMessageReceived(this.privConversationTranslator,new b.ConversationTranslationEventArgs(N.payload,void 0,N.sessionId))}}catch{}},this.onParticipantsListReceived=(T,N)=>{var L;try{if(null!=N.sessionToken&&(this.privRoom.token=N.sessionToken),this.privParticipants.participants=[...N.participants],void 0!==this.privParticipants.me&&(this.privIsReady=!0),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new b.ConversationParticipantsChangedEventArgs(b.ParticipantChangedReason.JoinedConversation,this.toParticipants(!0),N.sessionId)),this.me.isHost){const z=null===(L=this.privConversationTranslator)||void 0===L?void 0:L.properties.getProperty(b.PropertyId.ConversationTranslator_Name);void 0!==z&&z.length>0&&z!==this.me.displayName&&this.changeNicknameAsync(z)}}catch{}},this.onConversationExpiration=(T,N)=>{try{this.privConversationTranslator&&this.privConversationTranslator.conversationExpiration(this.privConversationTranslator,N)}catch{}},this.privIsConnected=!1,this.privIsDisposed=!1,this.privConversationId="",this.privProperties=new b.PropertyCollection,this.privManager=new v.ConversationManager,h.getProperty(b.PropertyId[b.PropertyId.SpeechServiceConnection_RecoLanguage])||h.setProperty(b.PropertyId[b.PropertyId.SpeechServiceConnection_RecoLanguage],v.ConversationConnectionConfig.defaultLanguageCode),this.privLanguage=h.getProperty(b.PropertyId[b.PropertyId.SpeechServiceConnection_RecoLanguage]),this.privConversationId=m,this.privConfig=h;const M=h;A.Contracts.throwIfNull(M,"speechConfig"),this.privProperties=M.properties.clone(),this.privIsConnected=!1,this.privParticipants=new v.InternalParticipants,this.privIsReady=!1,this.privTextMessageMaxLength=1e3}get room(){return this.privRoom}get connection(){return this.privConversationRecognizer}get config(){return this.privConfig}get meetingId(){return this.privRoom?this.privRoom.roomId:this.privConversationId}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privLanguage}get isMutedByHost(){var h,m;return(null===(h=this.privParticipants.me)||void 0===h||!h.isHost)&&(null===(m=this.privParticipants.me)||void 0===m?void 0:m.isMuted)}get isConnected(){return this.privIsConnected&&this.privIsReady}get participants(){return this.toParticipants(!0)}get me(){return this.toParticipant(this.privParticipants.me)}get host(){return this.toParticipant(this.privParticipants.host)}get transcriberRecognizer(){return this.privTranscriberRecognizer}get meetingInfo(){const h=this.meetingId,m=this.participants.map(T=>({id:T.id,preferredLanguage:T.preferredLanguage,voice:T.voice})),I={};for(const T of v.ConversationConnectionConfig.transcriptionEventKeys){const N=this.properties.getProperty(T,"");""!==N&&(I[T]=N)}return{id:h,participants:m,meetingProperties:I}}get canSend(){var h;return this.privIsConnected&&!(null!==(h=this.privParticipants.me)&&void 0!==h&&h.isMuted)}get canSendAsHost(){var h;return this.privIsConnected&&(null===(h=this.privParticipants.me)||void 0===h?void 0:h.isHost)}get authorizationToken(){return this.privToken}set authorizationToken(h){A.Contracts.throwIfNullOrWhitespace(h,"authorizationToken"),this.privToken=h}createMeetingAsync(h,m){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),m),this.privManager.createOrJoin(this.privProperties,void 0,I=>{I||this.handleError(new Error(this.privErrors.permissionDeniedConnect),m),this.privRoom=I,this.handleCallback(h,m)},I=>{this.handleError(I,m)})}catch(I){this.handleError(I,m)}}startMeetingAsync(h,m){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),m),A.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedConnect),this.privParticipants.meId=this.privRoom.participantId,this.privConversationRecognizer.connected=this.onConnected,this.privConversationRecognizer.disconnected=this.onDisconnected,this.privConversationRecognizer.canceled=this.onCanceled,this.privConversationRecognizer.participantUpdateCommandReceived=this.onParticipantUpdateCommandReceived,this.privConversationRecognizer.lockRoomCommandReceived=this.onLockRoomCommandReceived,this.privConversationRecognizer.muteAllCommandReceived=this.onMuteAllCommandReceived,this.privConversationRecognizer.participantJoinCommandReceived=this.onParticipantJoinCommandReceived,this.privConversationRecognizer.participantLeaveCommandReceived=this.onParticipantLeaveCommandReceived,this.privConversationRecognizer.translationReceived=this.onTranslationReceived,this.privConversationRecognizer.participantsListReceived=this.onParticipantsListReceived,this.privConversationRecognizer.conversationExpiration=this.onConversationExpiration,this.privConversationRecognizer.connect(this.privRoom.token,()=>{this.handleCallback(h,m)},I=>{this.handleError(I,m)})}catch(I){this.handleError(I,m)}}addParticipantAsync(h,m,I){A.Contracts.throwIfNullOrUndefined(h,"Participant"),_.marshalPromiseToCallbacks(this.addParticipantImplAsync(h),m,I)}joinMeetingAsync(h,m,I,M,T){try{A.Contracts.throwIfNullOrWhitespace(h,this.privErrors.invalidArgs.replace("{arg}","conversationId")),A.Contracts.throwIfNullOrWhitespace(m,this.privErrors.invalidArgs.replace("{arg}","nickname")),A.Contracts.throwIfNullOrWhitespace(I,this.privErrors.invalidArgs.replace("{arg}","language")),this.privManager.createOrJoin(this.privProperties,h,N=>{A.Contracts.throwIfNullOrUndefined(N,this.privErrors.permissionDeniedConnect),this.privRoom=N,this.privConfig.authorizationToken=N.cognitiveSpeechAuthToken,M&&M(N.cognitiveSpeechAuthToken)},N=>{this.handleError(N,T)})}catch(N){this.handleError(N,T)}}deleteMeetingAsync(h,m){_.marshalPromiseToCallbacks(this.deleteMeetingImplAsync(),h,m)}deleteMeetingImplAsync(){return o(this,void 0,void 0,function*(){A.Contracts.throwIfNullOrUndefined(this.privProperties,this.privErrors.permissionDeniedConnect),A.Contracts.throwIfNullOrWhitespace(this.privRoom.token,this.privErrors.permissionDeniedConnect),yield this.privManager.leave(this.privProperties,this.privRoom.token),this.dispose()})}endMeetingAsync(h,m){_.marshalPromiseToCallbacks(this.endMeetingImplAsync(),h,m)}endMeetingImplAsync(){return this.close(!0)}lockMeetingAsync(h,m){try{A.Contracts.throwIfDisposed(this.privIsDisposed),A.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),A.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","lock")),m),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!0),()=>{this.handleCallback(h,m)},I=>{this.handleError(I,m)})}catch(I){this.handleError(I,m)}}muteAllParticipantsAsync(h,m){try{A.Contracts.throwIfDisposed(this.privIsDisposed),A.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),A.Contracts.throwIfNullOrUndefined(this.privConversationRecognizer,this.privErrors.permissionDeniedSend),A.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","mute")),m),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!0),()=>{this.handleCallback(h,m)},I=>{this.handleError(I,m)})}catch(I){this.handleError(I,m)}}muteParticipantAsync(h,m,I){try{A.Contracts.throwIfDisposed(this.privIsDisposed),A.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),A.Contracts.throwIfNullOrWhitespace(h,this.privErrors.invalidArgs.replace("{arg}","userId")),A.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),I),!this.me.isHost&&this.me.id!==h&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),I),-1===this.privParticipants.getParticipantIndex(h)&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),I),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(h,!0),()=>{this.handleCallback(m,I)},T=>{this.handleError(T,I)})}catch(M){this.handleError(M,I)}}removeParticipantAsync(h,m,I){try{if(A.Contracts.throwIfDisposed(this.privIsDisposed),this.privTranscriberRecognizer&&h.hasOwnProperty("id"))_.marshalPromiseToCallbacks(this.removeParticipantImplAsync(h),m,I);else{A.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),A.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","remove")),I);let M="";"string"==typeof h?M=h:h.hasOwnProperty("id")?M=h.id:h.hasOwnProperty("userId")&&(M=h.userId),A.Contracts.throwIfNullOrWhitespace(M,this.privErrors.invalidArgs.replace("{arg}","userId")),-1===this.participants.findIndex(N=>N.id===M)&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),I),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getEjectCommand(M),()=>{this.handleCallback(m,I)},N=>{this.handleError(N,I)})}}catch(M){this.handleError(M,I)}}unlockMeetingAsync(h,m){try{A.Contracts.throwIfDisposed(this.privIsDisposed),A.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),A.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unlock")),m),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!1),()=>{this.handleCallback(h,m)},I=>{this.handleError(I,m)})}catch(I){this.handleError(I,m)}}unmuteAllParticipantsAsync(h,m){try{A.Contracts.throwIfDisposed(this.privIsDisposed),A.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),A.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unmute all")),m),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!1),()=>{this.handleCallback(h,m)},I=>{this.handleError(I,m)})}catch(I){this.handleError(I,m)}}unmuteParticipantAsync(h,m,I){try{A.Contracts.throwIfDisposed(this.privIsDisposed),A.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),A.Contracts.throwIfNullOrWhitespace(h,this.privErrors.invalidArgs.replace("{arg}","userId")),A.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),I),!this.me.isHost&&this.me.id!==h&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),I),-1===this.privParticipants.getParticipantIndex(h)&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),I),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(h,!1),()=>{this.handleCallback(m,I)},T=>{this.handleError(T,I)})}catch(M){this.handleError(M,I)}}sendTextMessageAsync(h,m,I){try{A.Contracts.throwIfDisposed(this.privIsDisposed),A.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),A.Contracts.throwIfNullOrWhitespace(h,this.privErrors.invalidArgs.replace("{arg}","message")),A.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),I),h.length>this.privTextMessageMaxLength&&this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","message length")),I),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMessageCommand(h),()=>{this.handleCallback(m,I)},M=>{this.handleError(M,I)})}catch(M){this.handleError(M,I)}}setTranslatedLanguagesAsync(h,m,I){try{A.Contracts.throwIfDisposed(this.privIsDisposed),A.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),A.Contracts.throwIfArrayEmptyOrWhitespace(h,this.privErrors.invalidArgs.replace("{arg}","languages")),A.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),I),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getSetTranslateToLanguagesCommand(h),()=>{this.handleCallback(m,I)},M=>{this.handleError(M,I)})}catch(M){this.handleError(M,I)}}changeNicknameAsync(h,m,I){try{A.Contracts.throwIfDisposed(this.privIsDisposed),A.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),A.Contracts.throwIfNullOrWhitespace(h,this.privErrors.invalidArgs.replace("{arg}","nickname")),A.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),I),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getChangeNicknameCommand(h),()=>{this.handleCallback(m,I)},M=>{this.handleError(M,I)})}catch(M){this.handleError(M,I)}}isDisposed(){return this.privIsDisposed}dispose(){this.isDisposed||(this.privIsDisposed=!0,this.config&&this.config.close(),this.privConfig=void 0,this.privLanguage=void 0,this.privProperties=void 0,this.privRoom=void 0,this.privToken=void 0,this.privManager=void 0,this.privIsConnected=!1,this.privIsReady=!1,this.privParticipants=void 0)}connectTranscriberRecognizer(h){return o(this,void 0,void 0,function*(){this.privTranscriberRecognizer&&(yield this.privTranscriberRecognizer.close()),yield h.enforceAudioGating(),this.privTranscriberRecognizer=h,this.privTranscriberRecognizer.meeting=this})}getKeepAlive(){return JSON.stringify({id:"0",nickname:this.me?this.me.displayName:"default_nickname",participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,type:v.ConversationTranslatorMessageTypes.keepAlive})}addParticipantImplAsync(h){if(void 0!==this.privParticipants.addOrUpdateParticipant(h)&&this.privTranscriberRecognizer){const I=this.meetingInfo;return I.participants=[h],this.privTranscriberRecognizer.pushMeetingEvent(I,"join")}}removeParticipantImplAsync(h){this.privParticipants.deleteParticipant(h.id);const m=this.meetingInfo;return m.participants=[h],this.privTranscriberRecognizer.pushMeetingEvent(m,"leave")}close(h){var m;return o(this,void 0,void 0,function*(){try{this.privIsConnected=!1,yield null===(m=this.privConversationRecognizer)||void 0===m?void 0:m.close(),this.privConversationRecognizer=void 0,this.privConversationTranslator&&this.privConversationTranslator.dispose()}catch(I){throw I}h&&this.dispose()})}handleCallback(h,m){if(h){try{h()}catch(I){m&&m(I)}h=void 0}}handleError(h,m){m&&(h instanceof Error?m(h.name+": "+h.message):m(h))}toParticipants(h){const m=this.privParticipants.participants.map(I=>this.toParticipant(I));return h?m:m.filter(I=>!1===I.isHost)}toParticipant(h){return new b.Participant(h.id,h.avatar,h.displayName,h.isHost,h.isMuted,h.isUsingTts,h.preferredLanguage,h.voice)}getMuteAllCommand(h){return A.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingd"),A.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:v.ConversationTranslatorCommandTypes.setMuteAll,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:v.ConversationTranslatorMessageTypes.participantCommand,value:h})}getMuteCommand(h,m){return A.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),A.Contracts.throwIfNullOrWhitespace(h,"participantId"),JSON.stringify({command:v.ConversationTranslatorCommandTypes.setMute,participantId:h,roomid:this.privRoom.roomId,type:v.ConversationTranslatorMessageTypes.participantCommand,value:m})}getLockCommand(h){return A.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),A.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:v.ConversationTranslatorCommandTypes.setLockState,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:v.ConversationTranslatorMessageTypes.participantCommand,value:h})}getEjectCommand(h){return A.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),A.Contracts.throwIfNullOrWhitespace(h,"participantId"),JSON.stringify({command:v.ConversationTranslatorCommandTypes.ejectParticipant,participantId:h,roomid:this.privRoom.roomId,type:v.ConversationTranslatorMessageTypes.participantCommand})}getSetTranslateToLanguagesCommand(h){return A.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),A.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:v.ConversationTranslatorCommandTypes.setTranslateToLanguages,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:v.ConversationTranslatorMessageTypes.participantCommand,value:h})}getChangeNicknameCommand(h){return A.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),A.Contracts.throwIfNullOrWhitespace(h,"nickname"),A.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:v.ConversationTranslatorCommandTypes.changeNickname,nickname:h,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:v.ConversationTranslatorMessageTypes.participantCommand,value:h})}getMessageCommand(h){return A.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),A.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),A.Contracts.throwIfNullOrWhitespace(h,"message"),JSON.stringify({participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,text:h,type:v.ConversationTranslatorMessageTypes.instantMessage})}}p.MeetingImpl=w},6232:function(ne,p,y){"use strict";var o=this&&this.__awaiter||function(S,h,m,I){return new(m||(m=Promise))(function(T,N){function L(q){try{V(I.next(q))}catch(X){N(X)}}function z(q){try{V(I.throw(q))}catch(X){N(X)}}function V(q){q.done?T(q.value):function M(T){return T instanceof m?T:new m(function(N){N(T)})}(q.value).then(L,z)}V((I=I.apply(S,h||[])).next())})};Object.defineProperty(p,"__esModule",{value:!0}),p.MeetingTranscriber=void 0;const v=y(9464),_=y(847),A=y(5916),b=y(8323),P=y(8479);p.MeetingTranscriber=class w{constructor(h){this.privAudioConfig=h,this.privProperties=new b.PropertyCollection,this.privRecognizer=void 0,this.privDisposedRecognizer=!1}get speechRecognitionLanguage(){return A.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(b.PropertyId.SpeechServiceConnection_RecoLanguage)}get properties(){return this.privProperties}get internalData(){return this.privRecognizer.internalData}get connection(){return b.Connection.fromRecognizer(this.privRecognizer)}get authorizationToken(){return this.properties.getProperty(b.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(h){A.Contracts.throwIfNullOrWhitespace(h,"token"),this.properties.setProperty(b.PropertyId.SpeechServiceAuthorization_Token,h)}joinMeetingAsync(h,m,I){const M=h;A.Contracts.throwIfNullOrUndefined(P.MeetingImpl,"Meeting"),this.privRecognizer=new v.TranscriberRecognizer(h.config,this.privAudioConfig),A.Contracts.throwIfNullOrUndefined(this.privRecognizer,"Recognizer"),this.privRecognizer.connectMeetingCallbacks(this),_.marshalPromiseToCallbacks(M.connectTranscriberRecognizer(this.privRecognizer),m,I)}startTranscribingAsync(h,m){this.privRecognizer.startContinuousRecognitionAsync(h,m)}stopTranscribingAsync(h,m){this.privRecognizer.stopContinuousRecognitionAsync(h,m)}leaveMeetingAsync(h,m){this.privRecognizer.disconnectCallbacks(),_.marshalPromiseToCallbacks((()=>o(this,void 0,void 0,function*(){}))(),h,m)}close(h,m){A.Contracts.throwIfDisposed(this.privDisposedRecognizer),_.marshalPromiseToCallbacks(this.dispose(!0),h,m)}dispose(h){return o(this,void 0,void 0,function*(){this.privDisposedRecognizer||(this.privRecognizer&&(yield this.privRecognizer.close(),this.privRecognizer=void 0),h&&(this.privDisposedRecognizer=!0))})}}},9451:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.MeetingTranscriptionCanceledEventArgs=void 0;const o=y(3245);p.MeetingTranscriptionCanceledEventArgs=class v extends o.CancellationEventArgsBase{}},5221:(ne,p)=>{"use strict";var o;Object.defineProperty(p,"__esModule",{value:!0}),p.ParticipantChangedReason=void 0,(o=p.ParticipantChangedReason||(p.ParticipantChangedReason={}))[o.JoinedConversation=0]="JoinedConversation",o[o.LeftConversation=1]="LeftConversation",o[o.Updated=2]="Updated"},9526:(ne,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.TranslationRecognitionCanceledEventArgs=void 0,p.TranslationRecognitionCanceledEventArgs=class y{constructor(v,_,A,b,P){this.privCancelReason=_,this.privErrorDetails=A,this.privResult=P,this.privSessionId=v,this.privErrorCode=b}get result(){return this.privResult}get sessionId(){return this.privSessionId}get reason(){return this.privCancelReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}}},2779:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.TranslationRecognitionEventArgs=void 0;const o=y(8323);p.TranslationRecognitionEventArgs=class v extends o.RecognitionEventArgs{constructor(A,b,P){super(b,P),this.privResult=A}get result(){return this.privResult}}},1505:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.TranslationRecognitionResult=void 0;const o=y(8323);class v extends o.SpeechRecognitionResult{constructor(A,b,P,w,S,h,m,I,M,T,N){super(b,P,w,S,h,m,I,void 0,M,T,N),this.privTranslations=A}static fromSpeechRecognitionResult(A){return new v(void 0,A.resultId,A.reason,A.text,A.duration,A.offset,A.language,A.languageDetectionConfidence,A.errorDetails,A.json,A.properties)}get translations(){return this.privTranslations}}p.TranslationRecognitionResult=v},5208:function(ne,p,y){"use strict";var o=this&&this.__awaiter||function(S,h,m,I){return new(m||(m=Promise))(function(T,N){function L(q){try{V(I.next(q))}catch(X){N(X)}}function z(q){try{V(I.throw(q))}catch(X){N(X)}}function V(q){q.done?T(q.value):function M(T){return T instanceof m?T:new m(function(N){N(T)})}(q.value).then(L,z)}V((I=I.apply(S,h||[])).next())})};Object.defineProperty(p,"__esModule",{value:!0}),p.TranslationRecognizer=void 0;const v=y(9464),_=y(847),A=y(9433),b=y(5916),P=y(8323);class w extends P.Recognizer{constructor(h,m,I){const M=h;b.Contracts.throwIfNull(M,"speechConfig"),super(m,M.properties,I||new v.TranslationConnectionFactory),this.privDisposedTranslationRecognizer=!1,void 0!==this.properties.getProperty(P.PropertyId.SpeechServiceConnection_TranslationVoice,void 0)&&b.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(P.PropertyId.SpeechServiceConnection_TranslationVoice),P.PropertyId[P.PropertyId.SpeechServiceConnection_TranslationVoice]),b.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(P.PropertyId.SpeechServiceConnection_TranslationToLanguages),P.PropertyId[P.PropertyId.SpeechServiceConnection_TranslationToLanguages]),b.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(P.PropertyId.SpeechServiceConnection_RecoLanguage),P.PropertyId[P.PropertyId.SpeechServiceConnection_RecoLanguage])}static FromConfig(h,m,I){return m.properties.mergeTo(h.properties),new w(h,I)}get speechRecognitionLanguage(){return b.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(P.PropertyId.SpeechServiceConnection_RecoLanguage)}get targetLanguages(){return b.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(P.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(",")}get voiceName(){return b.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(P.PropertyId.SpeechServiceConnection_TranslationVoice,void 0)}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(P.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(h){this.properties.setProperty(P.PropertyId.SpeechServiceAuthorization_Token,h)}recognizeOnceAsync(h,m){b.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),_.marshalPromiseToCallbacks(this.recognizeOnceAsyncImpl(v.RecognitionMode.Interactive),h,m)}startContinuousRecognitionAsync(h,m){_.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(v.RecognitionMode.Conversation),h,m)}stopContinuousRecognitionAsync(h,m){_.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),h,m)}removeTargetLanguage(h){if(b.Contracts.throwIfNullOrUndefined(h,"language to be removed"),void 0!==this.properties.getProperty(P.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)){const m=this.properties.getProperty(P.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","),I=m.indexOf(h);I>-1&&(m.splice(I,1),this.properties.setProperty(P.PropertyId.SpeechServiceConnection_TranslationToLanguages,m.join(",")),this.updateLanguages(m))}}addTargetLanguage(h){b.Contracts.throwIfNullOrUndefined(h,"language to be added");let m=[];void 0!==this.properties.getProperty(P.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)?(m=this.properties.getProperty(P.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","),m.includes(h)||(m.push(h),this.properties.setProperty(P.PropertyId.SpeechServiceConnection_TranslationToLanguages,m.join(",")))):(this.properties.setProperty(P.PropertyId.SpeechServiceConnection_TranslationToLanguages,h),m=[h]),this.updateLanguages(m)}close(h,m){b.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),_.marshalPromiseToCallbacks(this.dispose(!0),h,m)}onConnection(){}dispose(h){const m=Object.create(null,{dispose:{get:()=>super.dispose}});return o(this,void 0,void 0,function*(){this.privDisposedTranslationRecognizer||(this.privDisposedTranslationRecognizer=!0,h&&(yield this.implRecognizerStop(),yield m.dispose.call(this,h)))})}createRecognizerConfig(h){return new v.RecognizerConfig(h,this.privProperties)}createServiceRecognizer(h,m,I,M){return new v.TranslationServiceRecognizer(h,m,I,M,this)}updateLanguages(h){const m=A.Connection.fromRecognizer(this);m&&(m.setMessageProperty("speech.context","translationcontext",{to:h}),m.sendMessageAsync("event",JSON.stringify({id:"translation",name:"updateLanguage",to:h})))}}p.TranslationRecognizer=w},9471:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.TranslationSynthesisEventArgs=void 0;const o=y(8323);p.TranslationSynthesisEventArgs=class v extends o.SessionEventArgs{constructor(A,b){super(b),this.privResult=A}get result(){return this.privResult}}},2198:(ne,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.TranslationSynthesisResult=void 0,p.TranslationSynthesisResult=class y{constructor(v,_){this.privReason=v,this.privAudio=_}get audio(){return this.privAudio}get reason(){return this.privReason}}},9695:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.Translations=void 0;const o=y(8323);p.Translations=class v{constructor(){this.privMap=new o.PropertyCollection}get languages(){return this.privMap.keys}get(A,b){return this.privMap.getProperty(A,b)}set(A,b){this.privMap.setProperty(A,b)}}},3097:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.TurnStatusReceivedEventArgs=void 0;const o=y(1058);p.TurnStatusReceivedEventArgs=class v{constructor(A){this.privTurnStatus=o.TurnStatusResponsePayload.fromJSON(A)}get interactionId(){return this.privTurnStatus.interactionId}get conversationId(){return this.privTurnStatus.conversationId}get statusCode(){return this.privTurnStatus.statusCode}}},1329:(ne,p)=>{"use strict";var y,_,o;Object.defineProperty(p,"__esModule",{value:!0}),p.VoiceInfo=p.SynthesisVoiceType=p.SynthesisVoiceGender=void 0,(_=y=p.SynthesisVoiceGender||(p.SynthesisVoiceGender={}))[_.Unknown=0]="Unknown",_[_.Female=1]="Female",_[_.Male=2]="Male",function(_){_[_.OnlineNeural=1]="OnlineNeural",_[_.OnlineStandard=2]="OnlineStandard",_[_.OfflineNeural=3]="OfflineNeural",_[_.OfflineStandard=4]="OfflineStandard"}(o=p.SynthesisVoiceType||(p.SynthesisVoiceType={})),p.VoiceInfo=class v{constructor(A){if(this.privStyleList=[],this.privVoicePath="",A&&(this.privName=A.Name,this.privLocale=A.Locale,this.privShortName=A.ShortName,this.privLocaleName=A.LocaleName,this.privDisplayName=A.DisplayName,this.privLocalName=A.LocalName,this.privVoiceType=A.VoiceType.endsWith("Standard")?o.OnlineStandard:o.OnlineNeural,this.privGender="Male"===A.Gender?y.Male:"Female"===A.Gender?y.Female:y.Unknown,A.StyleList&&Array.isArray(A.StyleList)))for(const b of A.StyleList)this.privStyleList.push(b)}get name(){return this.privName}get locale(){return this.privLocale}get shortName(){return this.privShortName}get displayName(){return this.privDisplayName}get localName(){return this.privLocalName}get localeName(){return this.privLocaleName}get gender(){return this.privGender}get voiceType(){return this.privVoiceType}get styleList(){return this.privStyleList}get voicePath(){return this.privVoicePath}}},5005:(ne,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.VoiceProfile=void 0,p.VoiceProfile=class y{constructor(v,_){this.privId=v,this.privProfileType=_}get profileId(){return this.privId}get profileType(){return this.privProfileType}}},7939:function(ne,p,y){"use strict";var o=this&&this.__awaiter||function(w,S,h,m){return new(h||(h=Promise))(function(M,T){function N(V){try{z(m.next(V))}catch(q){T(q)}}function L(V){try{z(m.throw(V))}catch(q){T(q)}}function z(V){V.done?M(V.value):function I(M){return M instanceof h?M:new h(function(T){T(M)})}(V.value).then(N,L)}z((m=m.apply(w,S||[])).next())})};Object.defineProperty(p,"__esModule",{value:!0}),p.VoiceProfileClient=void 0;const v=y(9464),_=y(4794),A=y(5916),b=y(8323);p.VoiceProfileClient=class P extends b.Recognizer{constructor(S){A.Contracts.throwIfNullOrUndefined(S,"speechConfig");const h=S;A.Contracts.throwIfNull(h,"speechConfig"),super(_.AudioConfig.fromStreamInput(b.AudioInputStream.createPushStream()),h.properties,new v.VoiceProfileConnectionFactory),this.privProperties=h.properties.clone(),this.privVoiceAdapter=this.privReco,this.privDisposedVoiceAdapter=!1}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(b.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(S){A.Contracts.throwIfNullOrWhitespace(S,"token"),this.properties.setProperty(b.PropertyId.SpeechServiceAuthorization_Token,S)}createProfileAsync(S,h){return o(this,void 0,void 0,function*(){const m=yield this.privVoiceAdapter.createProfile(S,h);return new b.VoiceProfile(m[0],S)})}retrieveEnrollmentResultAsync(S){return o(this,void 0,void 0,function*(){return this.privVoiceAdapter.retrieveEnrollmentResult(S)})}getAllProfilesAsync(S){return o(this,void 0,void 0,function*(){return this.privVoiceAdapter.getAllProfiles(S)})}getActivationPhrasesAsync(S,h){return o(this,void 0,void 0,function*(){return this.privVoiceAdapter.getActivationPhrases(S,h)})}enrollProfileAsync(S,h){return o(this,void 0,void 0,function*(){const m=h;return A.Contracts.throwIfNullOrUndefined(m,"audioConfig"),this.audioConfig=h,this.privVoiceAdapter.SpeakerAudioSource=m,this.privVoiceAdapter.enrollProfile(S)})}deleteProfileAsync(S){return o(this,void 0,void 0,function*(){return this.privVoiceAdapter.deleteProfile(S)})}resetProfileAsync(S){return o(this,void 0,void 0,function*(){return this.privVoiceAdapter.resetProfile(S)})}close(){return o(this,void 0,void 0,function*(){yield this.dispose(!0)})}createServiceRecognizer(S,h,m,I){return new v.VoiceServiceRecognizer(S,h,m,I,this)}dispose(S){const h=Object.create(null,{dispose:{get:()=>super.dispose}});return o(this,void 0,void 0,function*(){this.privDisposedVoiceAdapter||(this.privDisposedVoiceAdapter=!0,S&&(yield h.dispose.call(this,S)))})}createRecognizerConfig(S){return new v.RecognizerConfig(S,this.properties)}getResult(S,h){return new b.VoiceProfileResult(S.ok?h:b.ResultReason.Canceled,S.statusText)}}},2427:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.VoiceProfileEnrollmentCancellationDetails=p.VoiceProfileEnrollmentResult=void 0;const o=y(9464),v=y(8323);class _{constructor(P,w,S){this.privReason=P,this.privProperties=new v.PropertyCollection,this.privReason!==v.ResultReason.Canceled?w&&(this.privDetails=JSON.parse(w),"enrolling"===this.privDetails.enrollmentStatus.toLowerCase()&&(this.privReason=v.ResultReason.EnrollingVoiceProfile)):(this.privErrorDetails=S,this.privProperties.setProperty(o.CancellationErrorCodePropertyName,v.CancellationErrorCode[v.CancellationErrorCode.ServiceError]))}get reason(){return this.privReason}get enrollmentsCount(){return this.privDetails.enrollmentsCount}get enrollmentsLength(){return this.privDetails.enrollmentsLength}get properties(){return this.privProperties}get enrollmentResultDetails(){return this.privDetails}get errorDetails(){return this.privErrorDetails}static FromIdentificationProfileList(P){const w=[];for(const S of P.value){const h="enrolling"===S.enrollmentStatus.toLowerCase()?v.ResultReason.EnrollingVoiceProfile:"enrolled"===S.enrollmentStatus.toLowerCase()?v.ResultReason.EnrolledVoiceProfile:v.ResultReason.Canceled,m=new _(h,null,null);m.privDetails=this.getIdentificationDetails(S),w.push(m)}return w}static FromVerificationProfileList(P){const w=[];for(const S of P.value){const h="enrolling"===S.enrollmentStatus.toLowerCase()?v.ResultReason.EnrollingVoiceProfile:"enrolled"===S.enrollmentStatus.toLowerCase()?v.ResultReason.EnrolledVoiceProfile:v.ResultReason.Canceled,m=new _(h,null,null);m.privDetails=this.getVerificationDetails(S),w.push(m)}return w}static getIdentificationDetails(P){return{audioLength:P.audioLength?parseFloat(P.audioLength):0,audioSpeechLength:P.audioSpeechLength?parseFloat(P.audioSpeechLength):0,enrollmentStatus:P.enrollmentStatus,enrollmentsCount:P.enrollmentsCount||0,enrollmentsLength:P.enrollmentsLength?parseFloat(P.enrollmentsLength):0,enrollmentsSpeechLength:P.enrollmentsSpeechLength?parseFloat(P.enrollmentsSpeechLength):0,profileId:P.profileId||P.identificationProfileId,remainingEnrollmentsSpeechLength:P.remainingEnrollmentsSpeechLength?parseFloat(P.remainingEnrollmentsSpeechLength):0}}static getVerificationDetails(P){return{audioLength:P.audioLength?parseFloat(P.audioLength):0,audioSpeechLength:P.audioSpeechLength?parseFloat(P.audioSpeechLength):0,enrollmentStatus:P.enrollmentStatus,enrollmentsCount:P.enrollmentsCount,enrollmentsLength:P.enrollmentsLength?parseFloat(P.enrollmentsLength):0,enrollmentsSpeechLength:P.enrollmentsSpeechLength?parseFloat(P.enrollmentsSpeechLength):0,profileId:P.profileId||P.verificationProfileId,remainingEnrollmentsCount:P.remainingEnrollments||P.remainingEnrollmentsCount,remainingEnrollmentsSpeechLength:P.remainingEnrollmentsSpeechLength?parseFloat(P.remainingEnrollmentsSpeechLength):0}}}p.VoiceProfileEnrollmentResult=_;class A extends v.CancellationDetailsBase{constructor(P,w,S){super(P,w,S)}static fromResult(P){const w=v.CancellationReason.Error;let S=v.CancellationErrorCode.NoError;return P.properties&&(S=v.CancellationErrorCode[P.properties.getProperty(o.CancellationErrorCodePropertyName,v.CancellationErrorCode[v.CancellationErrorCode.NoError])]),new A(w,P.errorDetails,S)}}p.VoiceProfileEnrollmentCancellationDetails=A},4060:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.VoiceProfilePhraseResult=void 0;const o=y(5916),v=y(8323);p.VoiceProfilePhraseResult=class _ extends v.VoiceProfileResult{constructor(b,P,w,S){super(b,P),this.privPhrases=[],o.Contracts.throwIfNullOrUndefined(S,"phrase array"),this.privType=w,S&&S[0]&&(this.privPhrases=S)}get phrases(){return this.privPhrases}get type(){return this.privType}}},9942:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.VoiceProfileCancellationDetails=p.VoiceProfileResult=void 0;const o=y(9464),v=y(5916),_=y(8323);p.VoiceProfileResult=class A{constructor(w,S){this.privReason=w,this.privProperties=new _.PropertyCollection,w===_.ResultReason.Canceled&&(v.Contracts.throwIfNullOrUndefined(S,"statusText"),this.privErrorDetails=S,this.privProperties.setProperty(o.CancellationErrorCodePropertyName,_.CancellationErrorCode[_.CancellationErrorCode.ServiceError]))}get reason(){return this.privReason}get properties(){return this.privProperties}get errorDetails(){return this.privErrorDetails}};class b extends _.CancellationDetailsBase{constructor(w,S,h){super(w,S,h)}static fromResult(w){const S=_.CancellationReason.Error;let h=_.CancellationErrorCode.NoError;return w.properties&&(h=_.CancellationErrorCode[w.properties.getProperty(o.CancellationErrorCodePropertyName,_.CancellationErrorCode[_.CancellationErrorCode.NoError])]),new b(S,w.errorDetails,h)}}p.VoiceProfileCancellationDetails=b},2526:(ne,p)=>{"use strict";var o;Object.defineProperty(p,"__esModule",{value:!0}),p.VoiceProfileType=void 0,(o=p.VoiceProfileType||(p.VoiceProfileType={}))[o.TextIndependentIdentification=0]="TextIndependentIdentification",o[o.TextDependentVerification=1]="TextDependentVerification",o[o.TextIndependentVerification=2]="TextIndependentVerification"},7843:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),Object.defineProperty(p,"NIL",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(p,"parse",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(p,"stringify",{enumerable:!0,get:function(){return S.default}}),Object.defineProperty(p,"v1",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(p,"v3",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(p,"v4",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(p,"v5",{enumerable:!0,get:function(){return A.default}}),Object.defineProperty(p,"validate",{enumerable:!0,get:function(){return w.default}}),Object.defineProperty(p,"version",{enumerable:!0,get:function(){return P.default}});var o=m(y(3854)),v=m(y(1065)),_=m(y(373)),A=m(y(2626)),b=m(y(233)),P=m(y(139)),w=m(y(8459)),S=m(y(9199)),h=m(y(444));function m(I){return I&&I.__esModule?I:{default:I}}},795:(ne,p)=>{"use strict";function v(T){return 14+(T+64>>>9<<4)+1}function b(T,N){const L=(65535&T)+(65535&N);return(T>>16)+(N>>16)+(L>>16)<<16|65535&L}function w(T,N,L,z,V,q){return b(function P(T,N){return T<<N|T>>>32-N}(b(b(N,T),b(z,q)),V),L)}function S(T,N,L,z,V,q,X){return w(N&L|~N&z,T,N,V,q,X)}function h(T,N,L,z,V,q,X){return w(N&z|L&~z,T,N,V,q,X)}function m(T,N,L,z,V,q,X){return w(N^L^z,T,N,V,q,X)}function I(T,N,L,z,V,q,X){return w(L^(N|~z),T,N,V,q,X)}Object.defineProperty(p,"__esModule",{value:!0}),p.default=void 0,p.default=function y(T){if("string"==typeof T){const N=unescape(encodeURIComponent(T));T=new Uint8Array(N.length);for(let L=0;L<N.length;++L)T[L]=N.charCodeAt(L)}return function o(T){const N=[],L=32*T.length,z="0123456789abcdef";for(let V=0;V<L;V+=8){const q=T[V>>5]>>>V%32&255,X=parseInt(z.charAt(q>>>4&15)+z.charAt(15&q),16);N.push(X)}return N}(function _(T,N){T[N>>5]|=128<<N%32,T[v(N)-1]=N;let L=1732584193,z=-271733879,V=-1732584194,q=271733878;for(let X=0;X<T.length;X+=16){const ce=L,fe=z,pe=V,Ae=q;L=S(L,z,V,q,T[X],7,-680876936),q=S(q,L,z,V,T[X+1],12,-389564586),V=S(V,q,L,z,T[X+2],17,606105819),z=S(z,V,q,L,T[X+3],22,-1044525330),L=S(L,z,V,q,T[X+4],7,-176418897),q=S(q,L,z,V,T[X+5],12,1200080426),V=S(V,q,L,z,T[X+6],17,-1473231341),z=S(z,V,q,L,T[X+7],22,-45705983),L=S(L,z,V,q,T[X+8],7,1770035416),q=S(q,L,z,V,T[X+9],12,-1958414417),V=S(V,q,L,z,T[X+10],17,-42063),z=S(z,V,q,L,T[X+11],22,-1990404162),L=S(L,z,V,q,T[X+12],7,1804603682),q=S(q,L,z,V,T[X+13],12,-40341101),V=S(V,q,L,z,T[X+14],17,-1502002290),z=S(z,V,q,L,T[X+15],22,1236535329),L=h(L,z,V,q,T[X+1],5,-165796510),q=h(q,L,z,V,T[X+6],9,-1069501632),V=h(V,q,L,z,T[X+11],14,643717713),z=h(z,V,q,L,T[X],20,-373897302),L=h(L,z,V,q,T[X+5],5,-701558691),q=h(q,L,z,V,T[X+10],9,38016083),V=h(V,q,L,z,T[X+15],14,-660478335),z=h(z,V,q,L,T[X+4],20,-405537848),L=h(L,z,V,q,T[X+9],5,568446438),q=h(q,L,z,V,T[X+14],9,-1019803690),V=h(V,q,L,z,T[X+3],14,-187363961),z=h(z,V,q,L,T[X+8],20,1163531501),L=h(L,z,V,q,T[X+13],5,-1444681467),q=h(q,L,z,V,T[X+2],9,-51403784),V=h(V,q,L,z,T[X+7],14,1735328473),z=h(z,V,q,L,T[X+12],20,-1926607734),L=m(L,z,V,q,T[X+5],4,-378558),q=m(q,L,z,V,T[X+8],11,-2022574463),V=m(V,q,L,z,T[X+11],16,1839030562),z=m(z,V,q,L,T[X+14],23,-35309556),L=m(L,z,V,q,T[X+1],4,-1530992060),q=m(q,L,z,V,T[X+4],11,1272893353),V=m(V,q,L,z,T[X+7],16,-155497632),z=m(z,V,q,L,T[X+10],23,-1094730640),L=m(L,z,V,q,T[X+13],4,681279174),q=m(q,L,z,V,T[X],11,-358537222),V=m(V,q,L,z,T[X+3],16,-722521979),z=m(z,V,q,L,T[X+6],23,76029189),L=m(L,z,V,q,T[X+9],4,-640364487),q=m(q,L,z,V,T[X+12],11,-421815835),V=m(V,q,L,z,T[X+15],16,530742520),z=m(z,V,q,L,T[X+2],23,-995338651),L=I(L,z,V,q,T[X],6,-198630844),q=I(q,L,z,V,T[X+7],10,1126891415),V=I(V,q,L,z,T[X+14],15,-1416354905),z=I(z,V,q,L,T[X+5],21,-57434055),L=I(L,z,V,q,T[X+12],6,1700485571),q=I(q,L,z,V,T[X+3],10,-1894986606),V=I(V,q,L,z,T[X+10],15,-1051523),z=I(z,V,q,L,T[X+1],21,-2054922799),L=I(L,z,V,q,T[X+8],6,1873313359),q=I(q,L,z,V,T[X+15],10,-30611744),V=I(V,q,L,z,T[X+6],15,-1560198380),z=I(z,V,q,L,T[X+13],21,1309151649),L=I(L,z,V,q,T[X+4],6,-145523070),q=I(q,L,z,V,T[X+11],10,-1120210379),V=I(V,q,L,z,T[X+2],15,718787259),z=I(z,V,q,L,T[X+9],21,-343485551),L=b(L,ce),z=b(z,fe),V=b(V,pe),q=b(q,Ae)}return[L,z,V,q]}(function A(T){if(0===T.length)return[];const N=8*T.length,L=new Uint32Array(v(N));for(let z=0;z<N;z+=8)L[z>>5]|=(255&T[z/8])<<z%32;return L}(T),8*T.length))}},683:(ne,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.default=void 0;var o={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};p.default=o},233:(ne,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.default=void 0,p.default="00000000-0000-0000-0000-000000000000"},444:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.default=void 0;var o=function v(b){return b&&b.__esModule?b:{default:b}}(y(8459));p.default=function _(b){if(!(0,o.default)(b))throw TypeError("Invalid UUID");let P;const w=new Uint8Array(16);return w[0]=(P=parseInt(b.slice(0,8),16))>>>24,w[1]=P>>>16&255,w[2]=P>>>8&255,w[3]=255&P,w[4]=(P=parseInt(b.slice(9,13),16))>>>8,w[5]=255&P,w[6]=(P=parseInt(b.slice(14,18),16))>>>8,w[7]=255&P,w[8]=(P=parseInt(b.slice(19,23),16))>>>8,w[9]=255&P,w[10]=(P=parseInt(b.slice(24,36),16))/1099511627776&255,w[11]=P/4294967296&255,w[12]=P>>>24&255,w[13]=P>>>16&255,w[14]=P>>>8&255,w[15]=255&P,w}},8946:(ne,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.default=void 0,p.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i},9132:(ne,p)=>{"use strict";let y;Object.defineProperty(p,"__esModule",{value:!0}),p.default=function v(){if(!y&&(y=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!y))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return y(o)};const o=new Uint8Array(16)},9552:(ne,p)=>{"use strict";function y(A,b,P,w){switch(A){case 0:return b&P^~b&w;case 1:case 3:return b^P^w;case 2:return b&P^b&w^P&w}}function o(A,b){return A<<b|A>>>32-b}Object.defineProperty(p,"__esModule",{value:!0}),p.default=void 0,p.default=function v(A){const b=[1518500249,1859775393,2400959708,3395469782],P=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof A){const m=unescape(encodeURIComponent(A));A=[];for(let I=0;I<m.length;++I)A.push(m.charCodeAt(I))}else Array.isArray(A)||(A=Array.prototype.slice.call(A));A.push(128);const S=Math.ceil((A.length/4+2)/16),h=new Array(S);for(let m=0;m<S;++m){const I=new Uint32Array(16);for(let M=0;M<16;++M)I[M]=A[64*m+4*M]<<24|A[64*m+4*M+1]<<16|A[64*m+4*M+2]<<8|A[64*m+4*M+3];h[m]=I}h[S-1][14]=8*(A.length-1)/Math.pow(2,32),h[S-1][14]=Math.floor(h[S-1][14]),h[S-1][15]=8*(A.length-1)&4294967295;for(let m=0;m<S;++m){const I=new Uint32Array(80);for(let V=0;V<16;++V)I[V]=h[m][V];for(let V=16;V<80;++V)I[V]=o(I[V-3]^I[V-8]^I[V-14]^I[V-16],1);let M=P[0],T=P[1],N=P[2],L=P[3],z=P[4];for(let V=0;V<80;++V){const q=Math.floor(V/20),X=o(M,5)+y(q,T,N,L)+z+b[q]+I[V]>>>0;z=L,L=N,N=o(T,30)>>>0,T=M,M=X}P[0]=P[0]+M>>>0,P[1]=P[1]+T>>>0,P[2]=P[2]+N>>>0,P[3]=P[3]+L>>>0,P[4]=P[4]+z>>>0}return[P[0]>>24&255,P[0]>>16&255,P[0]>>8&255,255&P[0],P[1]>>24&255,P[1]>>16&255,P[1]>>8&255,255&P[1],P[2]>>24&255,P[2]>>16&255,P[2]>>8&255,255&P[2],P[3]>>24&255,P[3]>>16&255,P[3]>>8&255,255&P[3],P[4]>>24&255,P[4]>>16&255,P[4]>>8&255,255&P[4]]}},9199:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.default=void 0,p.unsafeStringify=A;var o=function v(w){return w&&w.__esModule?w:{default:w}}(y(8459));const _=[];for(let w=0;w<256;++w)_.push((w+256).toString(16).slice(1));function A(w,S=0){return _[w[S+0]]+_[w[S+1]]+_[w[S+2]]+_[w[S+3]]+"-"+_[w[S+4]]+_[w[S+5]]+"-"+_[w[S+6]]+_[w[S+7]]+"-"+_[w[S+8]]+_[w[S+9]]+"-"+_[w[S+10]]+_[w[S+11]]+_[w[S+12]]+_[w[S+13]]+_[w[S+14]]+_[w[S+15]]}p.default=function b(w,S=0){const h=A(w,S);if(!(0,o.default)(h))throw TypeError("Stringified UUID is invalid");return h}},3854:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.default=void 0;var o=function _(m){return m&&m.__esModule?m:{default:m}}(y(9132)),v=y(9199);let A,b,P=0,w=0;p.default=function S(m,I,M){let T=I&&M||0;const N=I||new Array(16);let L=(m=m||{}).node||A,z=void 0!==m.clockseq?m.clockseq:b;if(null==L||null==z){const pe=m.random||(m.rng||o.default)();null==L&&(L=A=[1|pe[0],pe[1],pe[2],pe[3],pe[4],pe[5]]),null==z&&(z=b=16383&(pe[6]<<8|pe[7]))}let V=void 0!==m.msecs?m.msecs:Date.now(),q=void 0!==m.nsecs?m.nsecs:w+1;const X=V-P+(q-w)/1e4;if(X<0&&void 0===m.clockseq&&(z=z+1&16383),(X<0||V>P)&&void 0===m.nsecs&&(q=0),q>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");P=V,w=q,b=z,V+=122192928e5;const ce=(1e4*(268435455&V)+q)%4294967296;N[T++]=ce>>>24&255,N[T++]=ce>>>16&255,N[T++]=ce>>>8&255,N[T++]=255&ce;const fe=V/4294967296*1e4&268435455;N[T++]=fe>>>8&255,N[T++]=255&fe,N[T++]=fe>>>24&15|16,N[T++]=fe>>>16&255,N[T++]=z>>>8|128,N[T++]=255&z;for(let pe=0;pe<6;++pe)N[T+pe]=L[pe];return I||(0,v.unsafeStringify)(N)}},1065:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.default=void 0;var o=_(y(1977)),v=_(y(795));function _(P){return P&&P.__esModule?P:{default:P}}var b=(0,o.default)("v3",48,v.default);p.default=b},1977:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.URL=p.DNS=void 0,p.default=function w(S,h,m){function I(M,T,N,L){var z;if("string"==typeof M&&(M=function A(S){S=unescape(encodeURIComponent(S));const h=[];for(let m=0;m<S.length;++m)h.push(S.charCodeAt(m));return h}(M)),"string"==typeof T&&(T=(0,v.default)(T)),16!==(null===(z=T)||void 0===z?void 0:z.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let V=new Uint8Array(16+M.length);if(V.set(T),V.set(M,T.length),V=m(V),V[6]=15&V[6]|h,V[8]=63&V[8]|128,N){L=L||0;for(let q=0;q<16;++q)N[L+q]=V[q];return N}return(0,o.unsafeStringify)(V)}try{I.name=S}catch{}return I.DNS=b,I.URL=P,I};var o=y(9199),v=function _(S){return S&&S.__esModule?S:{default:S}}(y(444));const b="6ba7b810-9dad-11d1-80b4-00c04fd430c8";p.DNS=b;const P="6ba7b811-9dad-11d1-80b4-00c04fd430c8";p.URL=P},373:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.default=void 0;var o=A(y(683)),v=A(y(9132)),_=y(9199);function A(w){return w&&w.__esModule?w:{default:w}}p.default=function b(w,S,h){if(o.default.randomUUID&&!S&&!w)return o.default.randomUUID();const m=(w=w||{}).random||(w.rng||v.default)();if(m[6]=15&m[6]|64,m[8]=63&m[8]|128,S){h=h||0;for(let I=0;I<16;++I)S[h+I]=m[I];return S}return(0,_.unsafeStringify)(m)}},2626:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.default=void 0;var o=_(y(1977)),v=_(y(9552));function _(P){return P&&P.__esModule?P:{default:P}}var b=(0,o.default)("v5",80,v.default);p.default=b},8459:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.default=void 0;var o=function v(b){return b&&b.__esModule?b:{default:b}}(y(8946));p.default=function _(b){return"string"==typeof b&&o.default.test(b)}},139:(ne,p,y)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.default=void 0;var o=function v(b){return b&&b.__esModule?b:{default:b}}(y(8459));p.default=function _(b){if(!(0,o.default)(b))throw TypeError("Invalid UUID");return parseInt(b.slice(14,15),16)}},9751:(ne,p,y)=>{"use strict";y.d(p,{y:()=>S});var o=y(2961),v=y(727),_=y(8822),A=y(9635),b=y(2416),P=y(576),w=y(2806);let S=(()=>{class M{constructor(N){N&&(this._subscribe=N)}lift(N){const L=new M;return L.source=this,L.operator=N,L}subscribe(N,L,z){const V=function I(M){return M&&M instanceof o.Lv||function m(M){return M&&(0,P.m)(M.next)&&(0,P.m)(M.error)&&(0,P.m)(M.complete)}(M)&&(0,v.Nn)(M)}(N)?N:new o.Hp(N,L,z);return(0,w.x)(()=>{const{operator:q,source:X}=this;V.add(q?q.call(V,X):X?this._subscribe(V):this._trySubscribe(V))}),V}_trySubscribe(N){try{return this._subscribe(N)}catch(L){N.error(L)}}forEach(N,L){return new(L=h(L))((z,V)=>{const q=new o.Hp({next:X=>{try{N(X)}catch(ce){V(ce),q.unsubscribe()}},error:V,complete:z});this.subscribe(q)})}_subscribe(N){var L;return null===(L=this.source)||void 0===L?void 0:L.subscribe(N)}[_.L](){return this}pipe(...N){return(0,A.U)(N)(this)}toPromise(N){return new(N=h(N))((L,z)=>{let V;this.subscribe(q=>V=q,q=>z(q),()=>L(V))})}}return M.create=T=>new M(T),M})();function h(M){var T;return null!==(T=M??b.v.Promise)&&void 0!==T?T:Promise}},7579:(ne,p,y)=>{"use strict";y.d(p,{x:()=>w});var o=y(9751),v=y(727);const A=(0,y(3888).d)(h=>function(){h(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var b=y(8737),P=y(2806);let w=(()=>{class h extends o.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(I){const M=new S(this,this);return M.operator=I,M}_throwIfClosed(){if(this.closed)throw new A}next(I){(0,P.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const M of this.currentObservers)M.next(I)}})}error(I){(0,P.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=I;const{observers:M}=this;for(;M.length;)M.shift().error(I)}})}complete(){(0,P.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:I}=this;for(;I.length;)I.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var I;return(null===(I=this.observers)||void 0===I?void 0:I.length)>0}_trySubscribe(I){return this._throwIfClosed(),super._trySubscribe(I)}_subscribe(I){return this._throwIfClosed(),this._checkFinalizedStatuses(I),this._innerSubscribe(I)}_innerSubscribe(I){const{hasError:M,isStopped:T,observers:N}=this;return M||T?v.Lc:(this.currentObservers=null,N.push(I),new v.w0(()=>{this.currentObservers=null,(0,b.P)(N,I)}))}_checkFinalizedStatuses(I){const{hasError:M,thrownError:T,isStopped:N}=this;M?I.error(T):N&&I.complete()}asObservable(){const I=new o.y;return I.source=this,I}}return h.create=(m,I)=>new S(m,I),h})();class S extends w{constructor(m,I){super(),this.destination=m,this.source=I}next(m){var I,M;null===(M=null===(I=this.destination)||void 0===I?void 0:I.next)||void 0===M||M.call(I,m)}error(m){var I,M;null===(M=null===(I=this.destination)||void 0===I?void 0:I.error)||void 0===M||M.call(I,m)}complete(){var m,I;null===(I=null===(m=this.destination)||void 0===m?void 0:m.complete)||void 0===I||I.call(m)}_subscribe(m){var I,M;return null!==(M=null===(I=this.source)||void 0===I?void 0:I.subscribe(m))&&void 0!==M?M:v.Lc}}},2961:(ne,p,y)=>{"use strict";y.d(p,{Hp:()=>z,Lv:()=>M});var o=y(576),v=y(727),_=y(2416),A=y(7849);function b(){}const P=h("C",void 0,void 0);function h(fe,pe,Ae){return{kind:fe,value:pe,error:Ae}}var m=y(3410),I=y(2806);class M extends v.w0{constructor(pe){super(),this.isStopped=!1,pe?(this.destination=pe,(0,v.Nn)(pe)&&pe.add(this)):this.destination=ce}static create(pe,Ae,ke){return new z(pe,Ae,ke)}next(pe){this.isStopped?X(function S(fe){return h("N",fe,void 0)}(pe),this):this._next(pe)}error(pe){this.isStopped?X(function w(fe){return h("E",void 0,fe)}(pe),this):(this.isStopped=!0,this._error(pe))}complete(){this.isStopped?X(P,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(pe){this.destination.next(pe)}_error(pe){try{this.destination.error(pe)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const T=Function.prototype.bind;function N(fe,pe){return T.call(fe,pe)}class L{constructor(pe){this.partialObserver=pe}next(pe){const{partialObserver:Ae}=this;if(Ae.next)try{Ae.next(pe)}catch(ke){V(ke)}}error(pe){const{partialObserver:Ae}=this;if(Ae.error)try{Ae.error(pe)}catch(ke){V(ke)}else V(pe)}complete(){const{partialObserver:pe}=this;if(pe.complete)try{pe.complete()}catch(Ae){V(Ae)}}}class z extends M{constructor(pe,Ae,ke){let Fe;if(super(),(0,o.m)(pe)||!pe)Fe={next:pe??void 0,error:Ae??void 0,complete:ke??void 0};else{let we;this&&_.v.useDeprecatedNextContext?(we=Object.create(pe),we.unsubscribe=()=>this.unsubscribe(),Fe={next:pe.next&&N(pe.next,we),error:pe.error&&N(pe.error,we),complete:pe.complete&&N(pe.complete,we)}):Fe=pe}this.destination=new L(Fe)}}function V(fe){_.v.useDeprecatedSynchronousErrorHandling?(0,I.O)(fe):(0,A.h)(fe)}function X(fe,pe){const{onStoppedNotification:Ae}=_.v;Ae&&m.z.setTimeout(()=>Ae(fe,pe))}const ce={closed:!0,next:b,error:function q(fe){throw fe},complete:b}},727:(ne,p,y)=>{"use strict";y.d(p,{Lc:()=>P,w0:()=>b,Nn:()=>w});var o=y(576);const _=(0,y(3888).d)(h=>function(I){h(this),this.message=I?`${I.length} errors occurred during unsubscription:\n${I.map((M,T)=>`${T+1}) ${M.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=I});var A=y(8737);class b{constructor(m){this.initialTeardown=m,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let m;if(!this.closed){this.closed=!0;const{_parentage:I}=this;if(I)if(this._parentage=null,Array.isArray(I))for(const N of I)N.remove(this);else I.remove(this);const{initialTeardown:M}=this;if((0,o.m)(M))try{M()}catch(N){m=N instanceof _?N.errors:[N]}const{_finalizers:T}=this;if(T){this._finalizers=null;for(const N of T)try{S(N)}catch(L){m=m??[],L instanceof _?m=[...m,...L.errors]:m.push(L)}}if(m)throw new _(m)}}add(m){var I;if(m&&m!==this)if(this.closed)S(m);else{if(m instanceof b){if(m.closed||m._hasParent(this))return;m._addParent(this)}(this._finalizers=null!==(I=this._finalizers)&&void 0!==I?I:[]).push(m)}}_hasParent(m){const{_parentage:I}=this;return I===m||Array.isArray(I)&&I.includes(m)}_addParent(m){const{_parentage:I}=this;this._parentage=Array.isArray(I)?(I.push(m),I):I?[I,m]:m}_removeParent(m){const{_parentage:I}=this;I===m?this._parentage=null:Array.isArray(I)&&(0,A.P)(I,m)}remove(m){const{_finalizers:I}=this;I&&(0,A.P)(I,m),m instanceof b&&m._removeParent(this)}}b.EMPTY=(()=>{const h=new b;return h.closed=!0,h})();const P=b.EMPTY;function w(h){return h instanceof b||h&&"closed"in h&&(0,o.m)(h.remove)&&(0,o.m)(h.add)&&(0,o.m)(h.unsubscribe)}function S(h){(0,o.m)(h)?h():h.unsubscribe()}},2416:(ne,p,y)=>{"use strict";y.d(p,{v:()=>o});const o={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(ne,p,y)=>{"use strict";y.d(p,{E:()=>v});const v=new(y(9751).y)(b=>b.complete())},8996:(ne,p,y)=>{"use strict";y.d(p,{D:()=>pe});var o=y(8421),v=y(5363),_=y(9468),P=y(9751),S=y(2202),h=y(576),m=y(9672);function M(Ae,ke){if(!Ae)throw new Error("Iterable cannot be null");return new P.y(Fe=>{(0,m.f)(Fe,ke,()=>{const we=Ae[Symbol.asyncIterator]();(0,m.f)(Fe,ke,()=>{we.next().then(Le=>{Le.done?Fe.complete():Fe.next(Le.value)})},0,!0)})})}var T=y(3670),N=y(8239),L=y(1144),z=y(6495),V=y(2206),q=y(4532),X=y(3260);function pe(Ae,ke){return ke?function fe(Ae,ke){if(null!=Ae){if((0,T.c)(Ae))return function A(Ae,ke){return(0,o.Xf)(Ae).pipe((0,_.R)(ke),(0,v.Q)(ke))}(Ae,ke);if((0,L.z)(Ae))return function w(Ae,ke){return new P.y(Fe=>{let we=0;return ke.schedule(function(){we===Ae.length?Fe.complete():(Fe.next(Ae[we++]),Fe.closed||this.schedule())})})}(Ae,ke);if((0,N.t)(Ae))return function b(Ae,ke){return(0,o.Xf)(Ae).pipe((0,_.R)(ke),(0,v.Q)(ke))}(Ae,ke);if((0,V.D)(Ae))return M(Ae,ke);if((0,z.T)(Ae))return function I(Ae,ke){return new P.y(Fe=>{let we;return(0,m.f)(Fe,ke,()=>{we=Ae[S.h](),(0,m.f)(Fe,ke,()=>{let Le,tt;try{({value:Le,done:tt}=we.next())}catch(Ye){return void Fe.error(Ye)}tt?Fe.complete():Fe.next(Le)},0,!0)}),()=>(0,h.m)(we?.return)&&we.return()})}(Ae,ke);if((0,X.L)(Ae))return function ce(Ae,ke){return M((0,X.Q)(Ae),ke)}(Ae,ke)}throw(0,q.z)(Ae)}(Ae,ke):(0,o.Xf)(Ae)}},8421:(ne,p,y)=>{"use strict";y.d(p,{Xf:()=>T});var o=y(7582),v=y(1144),_=y(8239),A=y(9751),b=y(3670),P=y(2206),w=y(4532),S=y(6495),h=y(3260),m=y(576),I=y(7849),M=y(8822);function T(fe){if(fe instanceof A.y)return fe;if(null!=fe){if((0,b.c)(fe))return function N(fe){return new A.y(pe=>{const Ae=fe[M.L]();if((0,m.m)(Ae.subscribe))return Ae.subscribe(pe);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(fe);if((0,v.z)(fe))return function L(fe){return new A.y(pe=>{for(let Ae=0;Ae<fe.length&&!pe.closed;Ae++)pe.next(fe[Ae]);pe.complete()})}(fe);if((0,_.t)(fe))return function z(fe){return new A.y(pe=>{fe.then(Ae=>{pe.closed||(pe.next(Ae),pe.complete())},Ae=>pe.error(Ae)).then(null,I.h)})}(fe);if((0,P.D)(fe))return q(fe);if((0,S.T)(fe))return function V(fe){return new A.y(pe=>{for(const Ae of fe)if(pe.next(Ae),pe.closed)return;pe.complete()})}(fe);if((0,h.L)(fe))return function X(fe){return q((0,h.Q)(fe))}(fe)}throw(0,w.z)(fe)}function q(fe){return new A.y(pe=>{(function ce(fe,pe){var Ae,ke,Fe,we;return(0,o.mG)(this,void 0,void 0,function*(){try{for(Ae=(0,o.KL)(fe);!(ke=yield Ae.next()).done;)if(pe.next(ke.value),pe.closed)return}catch(Le){Fe={error:Le}}finally{try{ke&&!ke.done&&(we=Ae.return)&&(yield we.call(Ae))}finally{if(Fe)throw Fe.error}}pe.complete()})})(fe,pe).catch(Ae=>pe.error(Ae))})}},6451:(ne,p,y)=>{"use strict";y.d(p,{T:()=>P});var o=y(8189),v=y(8421),_=y(515),A=y(7669),b=y(8996);function P(...w){const S=(0,A.yG)(w),h=(0,A._6)(w,1/0),m=w;return m.length?1===m.length?(0,v.Xf)(m[0]):(0,o.J)(h)((0,b.D)(m,S)):_.E}},5403:(ne,p,y)=>{"use strict";y.d(p,{x:()=>v});var o=y(2961);function v(A,b,P,w,S){return new _(A,b,P,w,S)}class _ extends o.Lv{constructor(b,P,w,S,h,m){super(b),this.onFinalize=h,this.shouldUnsubscribe=m,this._next=P?function(I){try{P(I)}catch(M){b.error(M)}}:super._next,this._error=S?function(I){try{S(I)}catch(M){b.error(M)}finally{this.unsubscribe()}}:super._error,this._complete=w?function(){try{w()}catch(I){b.error(I)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var b;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:P}=this;super.unsubscribe(),!P&&(null===(b=this.onFinalize)||void 0===b||b.call(this))}}}},4004:(ne,p,y)=>{"use strict";y.d(p,{U:()=>_});var o=y(4482),v=y(5403);function _(A,b){return(0,o.e)((P,w)=>{let S=0;P.subscribe((0,v.x)(w,h=>{w.next(A.call(b,h,S++))}))})}},8189:(ne,p,y)=>{"use strict";y.d(p,{J:()=>_});var o=y(5577),v=y(4671);function _(A=1/0){return(0,o.z)(v.y,A)}},5577:(ne,p,y)=>{"use strict";y.d(p,{z:()=>S});var o=y(4004),v=y(8421),_=y(4482),A=y(9672),b=y(5403),w=y(576);function S(h,m,I=1/0){return(0,w.m)(m)?S((M,T)=>(0,o.U)((N,L)=>m(M,N,T,L))((0,v.Xf)(h(M,T))),I):("number"==typeof m&&(I=m),(0,_.e)((M,T)=>function P(h,m,I,M,T,N,L,z){const V=[];let q=0,X=0,ce=!1;const fe=()=>{ce&&!V.length&&!q&&m.complete()},pe=ke=>q<M?Ae(ke):V.push(ke),Ae=ke=>{N&&m.next(ke),q++;let Fe=!1;(0,v.Xf)(I(ke,X++)).subscribe((0,b.x)(m,we=>{T?.(we),N?pe(we):m.next(we)},()=>{Fe=!0},void 0,()=>{if(Fe)try{for(q--;V.length&&q<M;){const we=V.shift();L?(0,A.f)(m,L,()=>Ae(we)):Ae(we)}fe()}catch(we){m.error(we)}}))};return h.subscribe((0,b.x)(m,pe,()=>{ce=!0,fe()})),()=>{z?.()}}(M,T,h,I)))}},5363:(ne,p,y)=>{"use strict";y.d(p,{Q:()=>A});var o=y(9672),v=y(4482),_=y(5403);function A(b,P=0){return(0,v.e)((w,S)=>{w.subscribe((0,_.x)(S,h=>(0,o.f)(S,b,()=>S.next(h),P),()=>(0,o.f)(S,b,()=>S.complete(),P),h=>(0,o.f)(S,b,()=>S.error(h),P)))})}},3099:(ne,p,y)=>{"use strict";y.d(p,{B:()=>b});var o=y(8421),v=y(7579),_=y(2961),A=y(4482);function b(w={}){const{connector:S=(()=>new v.x),resetOnError:h=!0,resetOnComplete:m=!0,resetOnRefCountZero:I=!0}=w;return M=>{let T,N,L,z=0,V=!1,q=!1;const X=()=>{N?.unsubscribe(),N=void 0},ce=()=>{X(),T=L=void 0,V=q=!1},fe=()=>{const pe=T;ce(),pe?.unsubscribe()};return(0,A.e)((pe,Ae)=>{z++,!q&&!V&&X();const ke=L=L??S();Ae.add(()=>{z--,0===z&&!q&&!V&&(N=P(fe,I))}),ke.subscribe(Ae),!T&&z>0&&(T=new _.Hp({next:Fe=>ke.next(Fe),error:Fe=>{q=!0,X(),N=P(ce,h,Fe),ke.error(Fe)},complete:()=>{V=!0,X(),N=P(ce,m),ke.complete()}}),(0,o.Xf)(pe).subscribe(T))})(M)}}function P(w,S,...h){if(!0===S)return void w();if(!1===S)return;const m=new _.Hp({next:()=>{m.unsubscribe(),w()}});return(0,o.Xf)(S(...h)).subscribe(m)}},9468:(ne,p,y)=>{"use strict";y.d(p,{R:()=>v});var o=y(4482);function v(_,A=0){return(0,o.e)((b,P)=>{P.add(_.schedule(()=>b.subscribe(P),A))})}},8505:(ne,p,y)=>{"use strict";y.d(p,{b:()=>b});var o=y(576),v=y(4482),_=y(5403),A=y(4671);function b(P,w,S){const h=(0,o.m)(P)||w||S?{next:P,error:w,complete:S}:P;return h?(0,v.e)((m,I)=>{var M;null===(M=h.subscribe)||void 0===M||M.call(h);let T=!0;m.subscribe((0,_.x)(I,N=>{var L;null===(L=h.next)||void 0===L||L.call(h,N),I.next(N)},()=>{var N;T=!1,null===(N=h.complete)||void 0===N||N.call(h),I.complete()},N=>{var L;T=!1,null===(L=h.error)||void 0===L||L.call(h,N),I.error(N)},()=>{var N,L;T&&(null===(N=h.unsubscribe)||void 0===N||N.call(h)),null===(L=h.finalize)||void 0===L||L.call(h)}))}):A.y}},4408:(ne,p,y)=>{"use strict";y.d(p,{o:()=>b});var o=y(727);class v extends o.w0{constructor(w,S){super()}schedule(w,S=0){return this}}const _={setInterval(P,w,...S){const{delegate:h}=_;return h?.setInterval?h.setInterval(P,w,...S):setInterval(P,w,...S)},clearInterval(P){const{delegate:w}=_;return(w?.clearInterval||clearInterval)(P)},delegate:void 0};var A=y(8737);class b extends v{constructor(w,S){super(w,S),this.scheduler=w,this.work=S,this.pending=!1}schedule(w,S=0){var h;if(this.closed)return this;this.state=w;const m=this.id,I=this.scheduler;return null!=m&&(this.id=this.recycleAsyncId(I,m,S)),this.pending=!0,this.delay=S,this.id=null!==(h=this.id)&&void 0!==h?h:this.requestAsyncId(I,this.id,S),this}requestAsyncId(w,S,h=0){return _.setInterval(w.flush.bind(w,this),h)}recycleAsyncId(w,S,h=0){if(null!=h&&this.delay===h&&!1===this.pending)return S;null!=S&&_.clearInterval(S)}execute(w,S){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const h=this._execute(w,S);if(h)return h;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(w,S){let m,h=!1;try{this.work(w)}catch(I){h=!0,m=I||new Error("Scheduled action threw falsy error")}if(h)return this.unsubscribe(),m}unsubscribe(){if(!this.closed){const{id:w,scheduler:S}=this,{actions:h}=S;this.work=this.state=this.scheduler=null,this.pending=!1,(0,A.P)(h,this),null!=w&&(this.id=this.recycleAsyncId(S,w,null)),this.delay=null,super.unsubscribe()}}}},7565:(ne,p,y)=>{"use strict";y.d(p,{v:()=>_});var o=y(6063);class v{constructor(b,P=v.now){this.schedulerActionCtor=b,this.now=P}schedule(b,P=0,w){return new this.schedulerActionCtor(this,b).schedule(w,P)}}v.now=o.l.now;class _ extends v{constructor(b,P=v.now){super(b,P),this.actions=[],this._active=!1}flush(b){const{actions:P}=this;if(this._active)return void P.push(b);let w;this._active=!0;do{if(w=b.execute(b.state,b.delay))break}while(b=P.shift());if(this._active=!1,w){for(;b=P.shift();)b.unsubscribe();throw w}}}},4986:(ne,p,y)=>{"use strict";y.d(p,{z:()=>_});var o=y(4408);const _=new(y(7565).v)(o.o)},6063:(ne,p,y)=>{"use strict";y.d(p,{l:()=>o});const o={now:()=>(o.delegate||Date).now(),delegate:void 0}},3410:(ne,p,y)=>{"use strict";y.d(p,{z:()=>o});const o={setTimeout(v,_,...A){const{delegate:b}=o;return b?.setTimeout?b.setTimeout(v,_,...A):setTimeout(v,_,...A)},clearTimeout(v){const{delegate:_}=o;return(_?.clearTimeout||clearTimeout)(v)},delegate:void 0}},2202:(ne,p,y)=>{"use strict";y.d(p,{h:()=>v});const v=function o(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(ne,p,y)=>{"use strict";y.d(p,{L:()=>o});const o="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(ne,p,y)=>{"use strict";y.d(p,{_6:()=>P,jO:()=>A,yG:()=>b});var o=y(576);function _(w){return w[w.length-1]}function A(w){return(0,o.m)(_(w))?w.pop():void 0}function b(w){return function v(w){return w&&(0,o.m)(w.schedule)}(_(w))?w.pop():void 0}function P(w,S){return"number"==typeof _(w)?w.pop():S}},8737:(ne,p,y)=>{"use strict";function o(v,_){if(v){const A=v.indexOf(_);0<=A&&v.splice(A,1)}}y.d(p,{P:()=>o})},3888:(ne,p,y)=>{"use strict";function o(v){const A=v(b=>{Error.call(b),b.stack=(new Error).stack});return A.prototype=Object.create(Error.prototype),A.prototype.constructor=A,A}y.d(p,{d:()=>o})},2806:(ne,p,y)=>{"use strict";y.d(p,{O:()=>A,x:()=>_});var o=y(2416);let v=null;function _(b){if(o.v.useDeprecatedSynchronousErrorHandling){const P=!v;if(P&&(v={errorThrown:!1,error:null}),b(),P){const{errorThrown:w,error:S}=v;if(v=null,w)throw S}}else b()}function A(b){o.v.useDeprecatedSynchronousErrorHandling&&v&&(v.errorThrown=!0,v.error=b)}},9672:(ne,p,y)=>{"use strict";function o(v,_,A,b=0,P=!1){const w=_.schedule(function(){A(),P?v.add(this.schedule(null,b)):this.unsubscribe()},b);if(v.add(w),!P)return w}y.d(p,{f:()=>o})},4671:(ne,p,y)=>{"use strict";function o(v){return v}y.d(p,{y:()=>o})},1144:(ne,p,y)=>{"use strict";y.d(p,{z:()=>o});const o=v=>v&&"number"==typeof v.length&&"function"!=typeof v},2206:(ne,p,y)=>{"use strict";y.d(p,{D:()=>v});var o=y(576);function v(_){return Symbol.asyncIterator&&(0,o.m)(_?.[Symbol.asyncIterator])}},576:(ne,p,y)=>{"use strict";function o(v){return"function"==typeof v}y.d(p,{m:()=>o})},3670:(ne,p,y)=>{"use strict";y.d(p,{c:()=>_});var o=y(8822),v=y(576);function _(A){return(0,v.m)(A[o.L])}},6495:(ne,p,y)=>{"use strict";y.d(p,{T:()=>_});var o=y(2202),v=y(576);function _(A){return(0,v.m)(A?.[o.h])}},8239:(ne,p,y)=>{"use strict";y.d(p,{t:()=>v});var o=y(576);function v(_){return(0,o.m)(_?.then)}},3260:(ne,p,y)=>{"use strict";y.d(p,{L:()=>A,Q:()=>_});var o=y(7582),v=y(576);function _(b){return(0,o.FC)(this,arguments,function*(){const w=b.getReader();try{for(;;){const{value:S,done:h}=yield(0,o.qq)(w.read());if(h)return yield(0,o.qq)(void 0);yield yield(0,o.qq)(S)}}finally{w.releaseLock()}})}function A(b){return(0,v.m)(b?.getReader)}},4482:(ne,p,y)=>{"use strict";y.d(p,{A:()=>v,e:()=>_});var o=y(576);function v(A){return(0,o.m)(A?.lift)}function _(A){return b=>{if(v(b))return b.lift(function(P){try{return A(P,this)}catch(w){this.error(w)}});throw new TypeError("Unable to lift unknown Observable type")}}},9635:(ne,p,y)=>{"use strict";y.d(p,{U:()=>_,z:()=>v});var o=y(4671);function v(...A){return _(A)}function _(A){return 0===A.length?o.y:1===A.length?A[0]:function(P){return A.reduce((w,S)=>S(w),P)}}},7849:(ne,p,y)=>{"use strict";y.d(p,{h:()=>_});var o=y(2416),v=y(3410);function _(A){v.z.setTimeout(()=>{const{onUnhandledError:b}=o.v;if(!b)throw A;b(A)})}},4532:(ne,p,y)=>{"use strict";function o(v){return new TypeError(`You provided ${null!==v&&"object"==typeof v?"an invalid object":`'${v}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}y.d(p,{z:()=>o})},5226:function(ne){ne.exports=function(){"use strict";function p(j,B){return function v(j,B){return B.get?B.get.call(j):B.value}(j,o(j,B,"get"))}function y(j,B,Q){return function _(j,B,Q){if(B.set)B.set.call(j,Q);else{if(!B.writable)throw new TypeError("attempted to set read only private field");B.value=Q}}(j,o(j,B,"set"),Q),Q}function o(j,B,Q){if(!B.has(j))throw new TypeError("attempted to "+Q+" private field on non-instance");return B.get(j)}function b(j,B,Q){(function A(j,B){if(B.has(j))throw new TypeError("Cannot initialize the same private elements twice on an object")})(j,B),B.set(j,Q)}const w={},h=j=>new Promise(B=>{if(!j)return B();const Q=window.scrollX,se=window.scrollY;w.restoreFocusTimeout=setTimeout(()=>{w.previousActiveElement instanceof HTMLElement?(w.previousActiveElement.focus(),w.previousActiveElement=null):document.body&&document.body.focus(),B()},100),window.scrollTo(Q,se)});var m={innerParams:new WeakMap,domCache:new WeakMap};const I="swal2-",T=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error"].reduce((j,B)=>(j[B]=I+B,j),{}),L=["success","warning","info","question","error"].reduce((j,B)=>(j[B]=I+B,j),{}),z="SweetAlert2:",V=j=>j.charAt(0).toUpperCase()+j.slice(1),q=j=>{console.warn("".concat(z," ").concat("object"==typeof j?j.join(" "):j))},X=j=>{console.error("".concat(z," ").concat(j))},ce=[],pe=(j,B)=>{(j=>{ce.includes(j)||(ce.push(j),q(j))})('"'.concat(j,'" is deprecated and will be removed in the next major release. Please use "').concat(B,'" instead.'))},Ae=j=>"function"==typeof j?j():j,ke=j=>j&&"function"==typeof j.toPromise,Fe=j=>ke(j)?j.toPromise():Promise.resolve(j),we=j=>j&&Promise.resolve(j)===j,Le=()=>document.body.querySelector(".".concat(T.container)),tt=j=>{const B=Le();return B?B.querySelector(j):null},Ye=j=>tt(".".concat(j)),ot=()=>Ye(T.popup),Xe=()=>Ye(T.icon),yr=()=>Ye(T.title),vn=()=>Ye(T["html-container"]),Cr=()=>Ye(T.image),Ee=()=>Ye(T["progress-steps"]),De=()=>Ye(T["validation-message"]),be=()=>tt(".".concat(T.actions," .").concat(T.confirm)),_e=()=>tt(".".concat(T.actions," .").concat(T.cancel)),Ke=()=>tt(".".concat(T.actions," .").concat(T.deny)),dt=()=>tt(".".concat(T.loader)),vt=()=>Ye(T.actions),Sn=()=>Ye(T.footer),Dt=()=>Ye(T["timer-progress-bar"]),Gt=()=>Ye(T.close),Ft=()=>{const j=ot();if(!j)return[];const B=j.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),Q=Array.from(B).sort((St,an)=>{const Hn=parseInt(St.getAttribute("tabindex")||"0"),$n=parseInt(an.getAttribute("tabindex")||"0");return Hn>$n?1:Hn<$n?-1:0}),se=j.querySelectorAll('\n  a[href],\n  area[href],\n  input:not([disabled]),\n  select:not([disabled]),\n  textarea:not([disabled]),\n  button:not([disabled]),\n  iframe,\n  object,\n  embed,\n  [tabindex="0"],\n  [contenteditable],\n  audio[controls],\n  video[controls],\n  summary\n'),xe=Array.from(se).filter(St=>"-1"!==St.getAttribute("tabindex"));return[...new Set(Q.concat(xe))].filter(St=>sn(St))},Un=()=>_n(document.body,T.shown)&&!_n(document.body,T["toast-shown"])&&!_n(document.body,T["no-backdrop"]),Cn=()=>{const j=ot();return!!j&&_n(j,T.toast)},Ve=(j,B)=>{if(j.textContent="",B){const se=(new DOMParser).parseFromString(B,"text/html"),xe=se.querySelector("head");xe&&Array.from(xe.childNodes).forEach(an=>{j.appendChild(an)});const St=se.querySelector("body");St&&Array.from(St.childNodes).forEach(an=>{an instanceof HTMLVideoElement||an instanceof HTMLAudioElement?j.appendChild(an.cloneNode(!0)):j.appendChild(an)})}},_n=(j,B)=>{if(!B)return!1;const Q=B.split(/\s+/);for(let se=0;se<Q.length;se++)if(!j.classList.contains(Q[se]))return!1;return!0},at=(j,B,Q)=>{if(((j,B)=>{Array.from(j.classList).forEach(Q=>{!Object.values(T).includes(Q)&&!Object.values(L).includes(Q)&&!Object.values(B.showClass||{}).includes(Q)&&j.classList.remove(Q)})})(j,B),B.customClass&&B.customClass[Q]){if("string"!=typeof B.customClass[Q]&&!B.customClass[Q].forEach)return void q("Invalid type of customClass.".concat(Q,'! Expected string or iterable object, got "').concat(typeof B.customClass[Q],'"'));Vt(j,B.customClass[Q])}},Tr=(j,B)=>{if(!B)return null;switch(B){case"select":case"textarea":case"file":return j.querySelector(".".concat(T.popup," > .").concat(T[B]));case"checkbox":return j.querySelector(".".concat(T.popup," > .").concat(T.checkbox," input"));case"radio":return j.querySelector(".".concat(T.popup," > .").concat(T.radio," input:checked"))||j.querySelector(".".concat(T.popup," > .").concat(T.radio," input:first-child"));case"range":return j.querySelector(".".concat(T.popup," > .").concat(T.range," input"));default:return j.querySelector(".".concat(T.popup," > .").concat(T.input))}},Bi=j=>{if(j.focus(),"file"!==j.type){const B=j.value;j.value="",j.value=B}},Vn=(j,B,Q)=>{!j||!B||("string"==typeof B&&(B=B.split(/\s+/).filter(Boolean)),B.forEach(se=>{Array.isArray(j)?j.forEach(xe=>{Q?xe.classList.add(se):xe.classList.remove(se)}):Q?j.classList.add(se):j.classList.remove(se)}))},Vt=(j,B)=>{Vn(j,B,!0)},gn=(j,B)=>{Vn(j,B,!1)},Yt=(j,B)=>{const Q=Array.from(j.children);for(let se=0;se<Q.length;se++){const xe=Q[se];if(xe instanceof HTMLElement&&_n(xe,B))return xe}},Jt=(j,B,Q)=>{Q==="".concat(parseInt(Q))&&(Q=parseInt(Q)),Q||0===parseInt(Q)?j.style[B]="number"==typeof Q?"".concat(Q,"px"):Q:j.style.removeProperty(B)},lt=function(j){j&&(j.style.display=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"flex")},Ct=j=>{j&&(j.style.display="none")},rn=(j,B,Q,se)=>{const xe=j.querySelector(B);xe&&(xe.style[Q]=se)},zt=function(j,B){B?lt(j,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"flex"):Ct(j)},sn=j=>!(!j||!(j.offsetWidth||j.offsetHeight||j.getClientRects().length)),Dn=j=>j.scrollHeight>j.clientHeight,cr=j=>{const B=window.getComputedStyle(j),Q=parseFloat(B.getPropertyValue("animation-duration")||"0"),se=parseFloat(B.getPropertyValue("transition-duration")||"0");return Q>0||se>0},ln=function(j){let B=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const Q=Dt();Q&&sn(Q)&&(B&&(Q.style.transition="none",Q.style.width="100%"),setTimeout(()=>{Q.style.transition="width ".concat(j/1e3,"s linear"),Q.style.width="0%"},10))},Qt=()=>typeof window>"u"||typeof document>"u",tr='\n <div aria-labelledby="'.concat(T.title,'" aria-describedby="').concat(T["html-container"],'" class="').concat(T.popup,'" tabindex="-1">\n   <button type="button" class="').concat(T.close,'"></button>\n   <ul class="').concat(T["progress-steps"],'"></ul>\n   <div class="').concat(T.icon,'"></div>\n   <img class="').concat(T.image,'" />\n   <h2 class="').concat(T.title,'" id="').concat(T.title,'"></h2>\n   <div class="').concat(T["html-container"],'" id="').concat(T["html-container"],'"></div>\n   <input class="').concat(T.input,'" id="').concat(T.input,'" />\n   <input type="file" class="').concat(T.file,'" />\n   <div class="').concat(T.range,'">\n     <input type="range" />\n     <output></output>\n   </div>\n   <select class="').concat(T.select,'" id="').concat(T.select,'"></select>\n   <div class="').concat(T.radio,'"></div>\n   <label class="').concat(T.checkbox,'">\n     <input type="checkbox" id="').concat(T.checkbox,'" />\n     <span class="').concat(T.label,'"></span>\n   </label>\n   <textarea class="').concat(T.textarea,'" id="').concat(T.textarea,'"></textarea>\n   <div class="').concat(T["validation-message"],'" id="').concat(T["validation-message"],'"></div>\n   <div class="').concat(T.actions,'">\n     <div class="').concat(T.loader,'"></div>\n     <button type="button" class="').concat(T.confirm,'"></button>\n     <button type="button" class="').concat(T.deny,'"></button>\n     <button type="button" class="').concat(T.cancel,'"></button>\n   </div>\n   <div class="').concat(T.footer,'"></div>\n   <div class="').concat(T["timer-progress-bar-container"],'">\n     <div class="').concat(T["timer-progress-bar"],'"></div>\n   </div>\n </div>\n').replace(/(^|\n)\s*/g,""),Ne=()=>{w.currentInstance.resetValidationMessage()},wt=j=>{const B=(()=>{const j=Le();return!!j&&(j.remove(),gn([document.documentElement,document.body],[T["no-backdrop"],T["toast-shown"],T["has-column"]]),!0)})();if(Qt())return void X("SweetAlert2 requires document to initialize");const Q=document.createElement("div");Q.className=T.container,B&&Vt(Q,T["no-transition"]),Ve(Q,tr);const se=(j=>"string"==typeof j?document.querySelector(j):j)(j.target);se.appendChild(Q),(j=>{const B=ot();B.setAttribute("role",j.toast?"alert":"dialog"),B.setAttribute("aria-live",j.toast?"polite":"assertive"),j.toast||B.setAttribute("aria-modal","true")})(j),(j=>{"rtl"===window.getComputedStyle(j).direction&&Vt(Le(),T.rtl)})(se),(()=>{const j=ot(),B=Yt(j,T.input),Q=Yt(j,T.file),se=j.querySelector(".".concat(T.range," input")),xe=j.querySelector(".".concat(T.range," output")),St=Yt(j,T.select),an=j.querySelector(".".concat(T.checkbox," input")),Hn=Yt(j,T.textarea);B.oninput=Ne,Q.onchange=Ne,St.onchange=Ne,an.onchange=Ne,Hn.oninput=Ne,se.oninput=()=>{Ne(),xe.value=se.value},se.onchange=()=>{Ne(),xe.value=se.value}})()},yn=(j,B)=>{j instanceof HTMLElement?B.appendChild(j):"object"==typeof j?ue(j,B):j&&Ve(B,j)},ue=(j,B)=>{j.jquery?ae(B,j):Ve(B,j.toString())},ae=(j,B)=>{if(j.textContent="",0 in B)for(let Q=0;Q in B;Q++)j.appendChild(B[Q].cloneNode(!0));else j.appendChild(B.cloneNode(!0))},ge=(()=>{if(Qt())return!1;const j=document.createElement("div");return typeof j.style.webkitAnimation<"u"?"webkitAnimationEnd":typeof j.style.animation<"u"&&"animationend"})(),Ue=(j,B)=>{const Q=vt(),se=dt();!Q||!se||(B.showConfirmButton||B.showDenyButton||B.showCancelButton?lt(Q):Ct(Q),at(Q,B,"actions"),function Ie(j,B,Q){const se=be(),xe=Ke(),St=_e();!se||!xe||!St||(kt(se,"confirm",Q),kt(xe,"deny",Q),kt(St,"cancel",Q),function We(j,B,Q,se){se.buttonsStyling?(Vt([j,B,Q],T.styled),se.confirmButtonColor&&(j.style.backgroundColor=se.confirmButtonColor,Vt(j,T["default-outline"])),se.denyButtonColor&&(B.style.backgroundColor=se.denyButtonColor,Vt(B,T["default-outline"])),se.cancelButtonColor&&(Q.style.backgroundColor=se.cancelButtonColor,Vt(Q,T["default-outline"]))):gn([j,B,Q],T.styled)}(se,xe,St,Q),Q.reverseButtons&&(Q.toast?(j.insertBefore(St,se),j.insertBefore(xe,se)):(j.insertBefore(St,B),j.insertBefore(xe,B),j.insertBefore(se,B))))}(Q,se,B),Ve(se,B.loaderHtml||""),at(se,B,"loader"))};function kt(j,B,Q){const se=V(B);zt(j,Q["show".concat(se,"Button")],"inline-block"),Ve(j,Q["".concat(B,"ButtonText")]||""),j.setAttribute("aria-label",Q["".concat(B,"ButtonAriaLabel")]||""),j.className=T[B],at(j,Q,"".concat(B,"Button"))}const sr=(j,B)=>{const Q=Le();Q&&(function Ln(j,B){"string"==typeof B?j.style.background=B:B||Vt([document.documentElement,document.body],T["no-backdrop"])}(Q,B.backdrop),function Tn(j,B){B&&(B in T?Vt(j,T[B]):(q('The "position" parameter is not valid, defaulting to "center"'),Vt(j,T.center)))}(Q,B.position),function on(j,B){B&&Vt(j,T["grow-".concat(B)])}(Q,B.grow),at(Q,B,"container"))};const Nr=["input","file","range","select","radio","checkbox","textarea"],So=j=>{if(!j.input)return;if(!Rt[j.input])return void X('Unexpected type of input! Expected "text", "email", "password", "number", "tel", "select", "radio", "checkbox", "textarea", "file" or "url", got "'.concat(j.input,'"'));const B=ri(j.input),Q=Rt[j.input](B,j);lt(B),j.inputAutoFocus&&setTimeout(()=>{Bi(Q)})},Dc=(j,B)=>{const Q=Tr(ot(),j);if(Q){(j=>{for(let B=0;B<j.attributes.length;B++){const Q=j.attributes[B].name;["id","type","value","style"].includes(Q)||j.removeAttribute(Q)}})(Q);for(const se in B)Q.setAttribute(se,B[se])}},Zs=j=>{const B=ri(j.input);"object"==typeof j.customClass&&Vt(B,j.customClass.input)},Ms=(j,B)=>{(!j.placeholder||B.inputPlaceholder)&&(j.placeholder=B.inputPlaceholder)},ni=(j,B,Q)=>{if(Q.inputLabel){const se=document.createElement("label"),xe=T["input-label"];se.setAttribute("for",j.id),se.className=xe,"object"==typeof Q.customClass&&Vt(se,Q.customClass.inputLabel),se.innerText=Q.inputLabel,B.insertAdjacentElement("beforebegin",se)}},ri=j=>Yt(ot(),T[j]||T.input),Ks=(j,B)=>{["string","number"].includes(typeof B)?j.value="".concat(B):we(B)||q('Unexpected type of inputValue! Expected "string", "number" or "Promise", got "'.concat(typeof B,'"'))},Rt={};Rt.text=Rt.email=Rt.password=Rt.number=Rt.tel=Rt.url=(j,B)=>(Ks(j,B.inputValue),ni(j,j,B),Ms(j,B),j.type=B.input,j),Rt.file=(j,B)=>(ni(j,j,B),Ms(j,B),j),Rt.range=(j,B)=>{const Q=j.querySelector("input"),se=j.querySelector("output");return Ks(Q,B.inputValue),Q.type=B.input,Ks(se,B.inputValue),ni(Q,j,B),j},Rt.select=(j,B)=>{if(j.textContent="",B.inputPlaceholder){const Q=document.createElement("option");Ve(Q,B.inputPlaceholder),Q.value="",Q.disabled=!0,Q.selected=!0,j.appendChild(Q)}return ni(j,j,B),j},Rt.radio=j=>(j.textContent="",j),Rt.checkbox=(j,B)=>{const Q=Tr(ot(),"checkbox");Q.value="1",Q.checked=Boolean(B.inputValue);const se=j.querySelector("span");return Ve(se,B.inputPlaceholder),Q},Rt.textarea=(j,B)=>{Ks(j,B.inputValue),Ms(j,B),ni(j,j,B);return setTimeout(()=>{if("MutationObserver"in window){const se=parseInt(window.getComputedStyle(ot()).width);new MutationObserver(()=>{if(!document.body.contains(j))return;const St=j.offsetWidth+(se=>parseInt(window.getComputedStyle(se).marginLeft)+parseInt(window.getComputedStyle(se).marginRight))(j);St>se?ot().style.width="".concat(St,"px"):Jt(ot(),"width",B.width)}).observe(j,{attributes:!0,attributeFilter:["style"]})}}),j};const kr=(j,B)=>{const Q=vn();Q&&(at(Q,B,"htmlContainer"),B.html?(yn(B.html,Q),lt(Q,"block")):B.text?(Q.textContent=B.text,lt(Q,"block")):Ct(Q),((j,B)=>{const Q=ot();if(!Q)return;const se=m.innerParams.get(j),xe=!se||B.input!==se.input;Nr.forEach(St=>{const an=Yt(Q,T[St]);an&&(Dc(St,B.inputAttributes),an.className=T[St],xe&&Ct(an))}),B.input&&(xe&&So(B),Zs(B))})(j,B))},nr=(j,B)=>{for(const[Q,se]of Object.entries(L))B.icon!==Q&&gn(j,se);Vt(j,B.icon&&L[B.icon]),ft(j,B),qo(),at(j,B,"icon")},qo=()=>{const j=ot();if(!j)return;const B=window.getComputedStyle(j).getPropertyValue("background-color"),Q=j.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let se=0;se<Q.length;se++)Q[se].style.backgroundColor=B},ii=(j,B)=>{if(!B.icon&&!B.iconHtml)return;let Q=j.innerHTML,se="";B.iconHtml?se=jt(B.iconHtml):"success"===B.icon?(se='\n  <div class="swal2-success-circular-line-left"></div>\n  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>\n  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>\n  <div class="swal2-success-circular-line-right"></div>\n',Q=Q.replace(/ style=".*?"/g,"")):"error"===B.icon?se='\n  <span class="swal2-x-mark">\n    <span class="swal2-x-mark-line-left"></span>\n    <span class="swal2-x-mark-line-right"></span>\n  </span>\n':B.icon&&(se=jt({question:"?",warning:"!",info:"i"}[B.icon])),Q.trim()!==se.trim()&&Ve(j,se)},ft=(j,B)=>{if(B.iconColor){j.style.color=B.iconColor,j.style.borderColor=B.iconColor;for(const Q of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])rn(j,Q,"backgroundColor",B.iconColor);rn(j,".swal2-success-ring","borderColor",B.iconColor)}},jt=j=>'<div class="'.concat(T["icon-content"],'">').concat(j,"</div>"),gi=(j,B)=>{const Q=B.showClass||{};j.className="".concat(T.popup," ").concat(sn(j)?Q.popup:""),B.toast?(Vt([document.documentElement,document.body],T["toast-shown"]),Vt(j,T.toast)):Vt(j,T.modal),at(j,B,"popup"),"string"==typeof B.customClass&&Vt(j,B.customClass),B.icon&&Vt(j,T["icon-".concat(B.icon)])},Vi=j=>{const B=document.createElement("li");return Vt(B,T["progress-step"]),Ve(B,j),B},Zn=j=>{const B=document.createElement("li");return Vt(B,T["progress-step-line"]),j.progressStepsDistance&&Jt(B,"width",j.progressStepsDistance),B},Ti=(j,B)=>{((j,B)=>{const Q=Le(),se=ot();if(Q&&se){if(B.toast){Jt(Q,"width",B.width),se.style.width="100%";const xe=dt();xe&&se.insertBefore(xe,Xe())}else Jt(se,"width",B.width);Jt(se,"padding",B.padding),B.color&&(se.style.color=B.color),B.background&&(se.style.background=B.background),Ct(De()),gi(se,B)}})(0,B),sr(0,B),((j,B)=>{const Q=Ee();if(!Q)return;const{progressSteps:se,currentProgressStep:xe}=B;se&&0!==se.length&&void 0!==xe?(lt(Q),Q.textContent="",xe>=se.length&&q("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),se.forEach((St,an)=>{const Hn=Vi(St);if(Q.appendChild(Hn),an===xe&&Vt(Hn,T["active-progress-step"]),an!==se.length-1){const $n=Zn(B);Q.appendChild($n)}})):Ct(Q)})(0,B),((j,B)=>{const Q=m.innerParams.get(j),se=Xe();if(se){if(Q&&B.icon===Q.icon)return ii(se,B),void nr(se,B);if(!B.icon&&!B.iconHtml)return void Ct(se);if(B.icon&&-1===Object.keys(L).indexOf(B.icon))return X('Unknown icon! Expected "success", "error", "warning", "info" or "question", got "'.concat(B.icon,'"')),void Ct(se);lt(se),ii(se,B),nr(se,B),Vt(se,B.showClass&&B.showClass.icon)}})(j,B),((j,B)=>{const Q=Cr();if(Q){if(!B.imageUrl)return void Ct(Q);lt(Q,""),Q.setAttribute("src",B.imageUrl),Q.setAttribute("alt",B.imageAlt||""),Jt(Q,"width",B.imageWidth),Jt(Q,"height",B.imageHeight),Q.className=T.image,at(Q,B,"image")}})(0,B),((j,B)=>{const Q=yr();Q&&(zt(Q,B.title||B.titleText,"block"),B.title&&yn(B.title,Q),B.titleText&&(Q.innerText=B.titleText),at(Q,B,"title"))})(0,B),((j,B)=>{const Q=Gt();Q&&(Ve(Q,B.closeButtonHtml||""),at(Q,B,"closeButton"),zt(Q,B.showCloseButton),Q.setAttribute("aria-label",B.closeButtonAriaLabel||""))})(0,B),kr(j,B),Ue(0,B),((j,B)=>{const Q=Sn();Q&&(zt(Q,B.footer,"block"),B.footer&&yn(B.footer,Q),at(Q,B,"footer"))})(0,B);const Q=ot();"function"==typeof B.didRender&&Q&&B.didRender(Q)},Ko=()=>{var j;return null===(j=be())||void 0===j?void 0:j.click()},oi=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),rr=j=>{j.keydownTarget&&j.keydownHandlerAdded&&(j.keydownTarget.removeEventListener("keydown",j.keydownHandler,{capture:j.keydownListenerCapture}),j.keydownHandlerAdded=!1)},zi=(j,B)=>{const Q=Ft();if(Q.length)return(j+=B)===Q.length?j=0:-1===j&&(j=Q.length-1),void Q[j].focus();ot().focus()},Ai=["ArrowRight","ArrowDown"],Io=["ArrowLeft","ArrowUp"],Lr=(j,B,Q)=>{const se=m.innerParams.get(j);se&&(B.isComposing||229===B.keyCode||(se.stopKeydownPropagation&&B.stopPropagation(),"Enter"===B.key?Fn(j,B,se):"Tab"===B.key?Hi(B):[...Ai,...Io].includes(B.key)?Rc(B.key):"Escape"===B.key&&xa(B,se,Q)))},Fn=(j,B,Q)=>{if(Ae(Q.allowEnterKey)&&B.target&&j.getInput()&&B.target instanceof HTMLElement&&B.target.outerHTML===j.getInput().outerHTML){if(["textarea","file"].includes(Q.input))return;Ko(),B.preventDefault()}},Hi=j=>{const B=j.target,Q=Ft();let se=-1;for(let xe=0;xe<Q.length;xe++)if(B===Q[xe]){se=xe;break}zi(se,j.shiftKey?-1:1),j.stopPropagation(),j.preventDefault()},Rc=j=>{const B=be(),Q=Ke(),se=_e();if(document.activeElement instanceof HTMLElement&&![B,Q,se].includes(document.activeElement))return;const St=Ai.includes(j)?"nextElementSibling":"previousElementSibling";let an=document.activeElement;for(let Hn=0;Hn<vt().children.length;Hn++){if(an=an[St],!an)return;if(an instanceof HTMLButtonElement&&sn(an))break}an instanceof HTMLButtonElement&&an.focus()},xa=(j,B,Q)=>{Ae(B.allowEscapeKey)&&(j.preventDefault(),Q(oi.esc))};var Fr={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const Js=()=>{Array.from(document.body.children).forEach(B=>{B.hasAttribute("data-previous-aria-hidden")?(B.setAttribute("aria-hidden",B.getAttribute("data-previous-aria-hidden")||""),B.removeAttribute("data-previous-aria-hidden")):B.removeAttribute("aria-hidden")})},Ar=typeof window<"u"&&!!window.GestureEvent,Jr=()=>{const j=Le();if(!j)return;let B;j.ontouchstart=Q=>{B=Pi(Q)},j.ontouchmove=Q=>{B&&(Q.preventDefault(),Q.stopPropagation())}},Pi=j=>{const B=j.target,Q=Le(),se=vn();return!(!Q||!se||Yo(j)||Qo(j)||B!==Q&&(Dn(Q)||!(B instanceof HTMLElement)||"INPUT"===B.tagName||"TEXTAREA"===B.tagName||Dn(se)&&se.contains(B)))},Yo=j=>j.touches&&j.touches.length&&"stylus"===j.touches[0].touchType,Qo=j=>j.touches&&j.touches.length>1,Na=()=>{if(_n(document.body,T.iosfix)){const j=parseInt(document.body.style.top,10);gn(document.body,T.iosfix),document.body.style.top="",document.body.scrollTop=-1*j}};let bo=null;const Mc=j=>{null===bo&&(document.body.scrollHeight>window.innerHeight||"scroll"===j)&&(bo=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight="".concat(bo+(()=>{const j=document.createElement("div");j.className=T["scrollbar-measure"],document.body.appendChild(j);const B=j.getBoundingClientRect().width-j.clientWidth;return document.body.removeChild(j),B})(),"px"))},Xo=()=>{null!==bo&&(document.body.style.paddingRight="".concat(bo,"px"),bo=null)};function Oc(j,B,Q,se){Cn()?Ou(j,se):(h(Q).then(()=>Ou(j,se)),rr(w)),Ar?(B.setAttribute("style","display:none !important"),B.removeAttribute("class"),B.innerHTML=""):B.remove(),Un()&&(Xo(),Na(),Js()),function Ru(){gn([document.documentElement,document.body],[T.shown,T["height-auto"],T["no-backdrop"],T["toast-shown"]])}()}function xs(j){j=Mu(j);const B=Fr.swalPromiseResolve.get(this),Q=xc(this);this.isAwaitingPromise?j.isDismissed||(To(this),B(j)):Q&&B(j)}const xc=j=>{const B=ot();if(!B)return!1;const Q=m.innerParams.get(j);if(!Q||_n(B,Q.hideClass.popup))return!1;gn(B,Q.showClass.popup),Vt(B,Q.hideClass.popup);const se=Le();return gn(se,Q.showClass.backdrop),Vt(se,Q.hideClass.backdrop),ka(j,B,Q),!0};function Nl(j){const B=Fr.swalPromiseReject.get(this);To(this),B&&B(j)}const To=j=>{j.isAwaitingPromise&&(delete j.isAwaitingPromise,m.innerParams.get(j)||j._destroy())},Mu=j=>typeof j>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},j),ka=(j,B,Q)=>{const se=Le(),xe=ge&&cr(B);"function"==typeof Q.willClose&&Q.willClose(B),xe?ea(j,B,se,Q.returnFocus,Q.didClose):Oc(j,se,Q.returnFocus,Q.didClose)},ea=(j,B,Q,se,xe)=>{ge&&(w.swalCloseEventFinishedCallback=Oc.bind(null,j,Q,se,xe),B.addEventListener(ge,function(St){St.target===B&&(w.swalCloseEventFinishedCallback(),delete w.swalCloseEventFinishedCallback)}))},Ou=(j,B)=>{setTimeout(()=>{"function"==typeof B&&B.bind(j.params)(),j._destroy&&j._destroy()})},Ys=j=>{let B=ot();if(B||new ps,B=ot(),!B)return;const Q=dt();Cn()?Ct(Xe()):is(B,j),lt(Q),B.setAttribute("data-loading","true"),B.setAttribute("aria-busy","true"),B.focus()},is=(j,B)=>{const Q=vt(),se=dt();!Q||!se||(!B&&sn(be())&&(B=be()),lt(Q),B&&(Ct(B),se.setAttribute("data-button-to-replace",B.className),Q.insertBefore(se,B)),Vt([j,Q],T.loading))},Fa=j=>j.checked?1:0,xu=j=>j.checked?j.value:null,Ep=j=>j.files&&j.files.length?null!==j.getAttribute("multiple")?j.files:j.files[0]:null,kc=(j,B)=>{const Q=ot();if(!Q)return;const se=xe=>{"select"===B.input?function ja(j,B,Q){const se=Yt(j,T.select);if(!se)return;const xe=(St,an,Hn)=>{const $n=document.createElement("option");$n.value=Hn,Ve($n,an),$n.selected=Ao(Hn,Q.inputValue),St.appendChild($n)};B.forEach(St=>{const an=St[0],Hn=St[1];if(Array.isArray(Hn)){const $n=document.createElement("optgroup");$n.label=an,$n.disabled=!1,se.appendChild($n),Hn.forEach(Zi=>xe($n,Zi[1],Zi[0]))}else xe(se,Hn,an)}),se.focus()}(Q,ss(xe),B):"radio"===B.input&&function Nu(j,B,Q){const se=Yt(j,T.radio);if(!se)return;B.forEach(St=>{const an=St[0],Hn=St[1],$n=document.createElement("input"),Zi=document.createElement("label");$n.type="radio",$n.name=T.radio,$n.value=an,Ao(an,Q.inputValue)&&($n.checked=!0);const Kc=document.createElement("span");Ve(Kc,Hn),Kc.className=T.label,Zi.appendChild($n),Zi.appendChild(Kc),se.appendChild(Zi)});const xe=se.querySelectorAll("input");xe.length&&xe[0].focus()}(Q,ss(xe),B)};ke(B.inputOptions)||we(B.inputOptions)?(Ys(be()),Fe(B.inputOptions).then(xe=>{j.hideLoading(),se(xe)})):"object"==typeof B.inputOptions?se(B.inputOptions):X("Unexpected type of inputOptions! Expected object, Map or Promise, got ".concat(typeof B.inputOptions))},ta=(j,B)=>{const Q=j.getInput();Q&&(Ct(Q),Fe(B.inputValue).then(se=>{Q.value="".concat("number"===B.input?parseFloat(se)||0:se),lt(Q),Q.focus(),j.hideLoading()}).catch(se=>{X("Error in inputValue promise: ".concat(se)),Q.value="",lt(Q),Q.focus(),j.hideLoading()}))};const ss=j=>{const B=[];return j instanceof Map?j.forEach((Q,se)=>{let xe=Q;"object"==typeof xe&&(xe=ss(xe)),B.push([se,xe])}):Object.keys(j).forEach(Q=>{let se=j[Q];"object"==typeof se&&(se=ss(se)),B.push([Q,se])}),B},Ao=(j,B)=>!!B&&B.toString()===j.toString(),mi=(j,B)=>{const Q=m.innerParams.get(j);if(!Q.input)return void X('The "input" parameter is needed to be set when using returnInputValueOn'.concat(V(B)));const se=j.getInput(),xe=((j,B)=>{const Q=j.getInput();if(!Q)return null;switch(B.input){case"checkbox":return Fa(Q);case"radio":return xu(Q);case"file":return Ep(Q);default:return B.inputAutoTrim?Q.value.trim():Q.value}})(j,Q);Q.inputValidator?Lc(j,xe,B):se&&!se.checkValidity()?(j.enableButtons(),j.showValidationMessage(Q.validationMessage)):"deny"===B?os(j,xe):Po(j,xe)},Lc=(j,B,Q)=>{const se=m.innerParams.get(j);j.disableInput(),Promise.resolve().then(()=>Fe(se.inputValidator(B,se.validationMessage))).then(St=>{j.enableButtons(),j.enableInput(),St?j.showValidationMessage(St):"deny"===Q?os(j,B):Po(j,B)})},os=(j,B)=>{const Q=m.innerParams.get(j||void 0);Q.showLoaderOnDeny&&Ys(Ke()),Q.preDeny?(j.isAwaitingPromise=!0,Promise.resolve().then(()=>Fe(Q.preDeny(B,Q.validationMessage))).then(xe=>{!1===xe?(j.hideLoading(),To(j)):j.close({isDenied:!0,value:typeof xe>"u"?B:xe})}).catch(xe=>Qs(j||void 0,xe))):j.close({isDenied:!0,value:B})},ai=(j,B)=>{j.close({isConfirmed:!0,value:B})},Qs=(j,B)=>{j.rejectPromise(B)},Po=(j,B)=>{const Q=m.innerParams.get(j||void 0);Q.showLoaderOnConfirm&&Ys(),Q.preConfirm?(j.resetValidationMessage(),j.isAwaitingPromise=!0,Promise.resolve().then(()=>Fe(Q.preConfirm(B,Q.validationMessage))).then(xe=>{sn(De())||!1===xe?(j.hideLoading(),To(j)):ai(j,typeof xe>"u"?B:xe)}).catch(xe=>Qs(j||void 0,xe))):ai(j,B)};function zn(){const j=m.innerParams.get(this);if(!j)return;const B=m.domCache.get(this);Ct(B.loader),Cn()?j.icon&&lt(Xe()):Ua(B),gn([B.popup,B.actions],T.loading),B.popup.removeAttribute("aria-busy"),B.popup.removeAttribute("data-loading"),B.confirmButton.disabled=!1,B.denyButton.disabled=!1,B.cancelButton.disabled=!1}const Ua=j=>{const B=j.popup.getElementsByClassName(j.loader.getAttribute("data-button-to-replace"));B.length?lt(B[0],"inline-block"):!sn(be())&&!sn(Ke())&&!sn(_e())&&Ct(j.actions)};function Xs(){const j=m.innerParams.get(this),B=m.domCache.get(this);return B?Tr(B.popup,j.input):null}function or(j,B,Q){const se=m.domCache.get(j);B.forEach(xe=>{se[xe].disabled=Q})}function Ns(j,B){const Q=ot();if(Q&&j)if("radio"===j.type){const se=Q.querySelectorAll('[name="'.concat(T.radio,'"]'));for(let xe=0;xe<se.length;xe++)se[xe].disabled=B}else j.disabled=B}function Fc(){or(this,["confirmButton","denyButton","cancelButton"],!1)}function Yr(){or(this,["confirmButton","denyButton","cancelButton"],!0)}function Kn(){Ns(this.getInput(),!1)}function ku(){Ns(this.getInput(),!0)}function as(j){const B=m.domCache.get(this),Q=m.innerParams.get(this);Ve(B.validationMessage,j),B.validationMessage.className=T["validation-message"],Q.customClass&&Q.customClass.validationMessage&&Vt(B.validationMessage,Q.customClass.validationMessage),lt(B.validationMessage);const se=this.getInput();se&&(se.setAttribute("aria-invalid",!0),se.setAttribute("aria-describedby",T["validation-message"]),Bi(se),Vt(se,T.inputerror))}function Gi(){const j=m.domCache.get(this);j.validationMessage&&Ct(j.validationMessage);const B=this.getInput();B&&(B.removeAttribute("aria-invalid"),B.removeAttribute("aria-describedby"),gn(B,T.inputerror))}const _r={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},cs=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],ra={},Ut=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],Ba=j=>Object.prototype.hasOwnProperty.call(_r,j),Ll=j=>-1!==cs.indexOf(j),eo=j=>ra[j],Lu=j=>{Ba(j)||q('Unknown parameter "'.concat(j,'"'))},Va=j=>{Ut.includes(j)&&q('The parameter "'.concat(j,'" is incompatible with toasts'))},jc=j=>{const B=eo(j);B&&pe(j,B)};function Bc(j){const B=ot(),Q=m.innerParams.get(this);if(!B||_n(B,Q.hideClass.popup))return void q("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");const se=Re(j),xe=Object.assign({},Q,se);Ti(this,xe),m.innerParams.set(this,xe),Object.defineProperties(this,{params:{value:Object.assign({},this.params,j),writable:!1,enumerable:!0}})}const Re=j=>{const B={};return Object.keys(j).forEach(Q=>{Ll(Q)?B[Q]=j[Q]:q("Invalid parameter to update: ".concat(Q))}),B};function Wt(){const j=m.domCache.get(this),B=m.innerParams.get(this);B?(j.popup&&w.swalCloseEventFinishedCallback&&(w.swalCloseEventFinishedCallback(),delete w.swalCloseEventFinishedCallback),"function"==typeof B.didDestroy&&B.didDestroy(),Fl(this)):Do(this)}const Fl=j=>{Do(j),delete j.params,delete w.keydownHandler,delete w.keydownTarget,delete w.currentInstance},Do=j=>{j.isAwaitingPromise?(Jn(m,j),j.isAwaitingPromise=!0):(Jn(Fr,j),Jn(m,j),delete j.isAwaitingPromise,delete j.disableButtons,delete j.enableButtons,delete j.getInput,delete j.disableInput,delete j.enableInput,delete j.hideLoading,delete j.disableLoading,delete j.showValidationMessage,delete j.resetValidationMessage,delete j.close,delete j.closePopup,delete j.closeModal,delete j.closeToast,delete j.rejectPromise,delete j.update,delete j._destroy)},Jn=(j,B)=>{for(const Q in j)j[Q].delete(B)};var Vc=Object.freeze({__proto__:null,_destroy:Wt,close:xs,closeModal:xs,closePopup:xs,closeToast:xs,disableButtons:Yr,disableInput:ku,disableLoading:zn,enableButtons:Fc,enableInput:Kn,getInput:Xs,handleAwaitingPromise:To,hideLoading:zn,rejectPromise:Nl,resetValidationMessage:Gi,showValidationMessage:as,update:Bc});const vi=(j,B,Q)=>{B.popup.onclick=()=>{const se=m.innerParams.get(j);se&&(za(se)||se.timer||se.input)||Q(oi.close)}},za=j=>j.showConfirmButton||j.showDenyButton||j.showCancelButton||j.showCloseButton;let to=!1;const Fu=j=>{j.popup.onmousedown=()=>{j.container.onmouseup=function(B){j.container.onmouseup=void 0,B.target===j.container&&(to=!0)}}},Wi=j=>{j.container.onmousedown=()=>{j.popup.onmouseup=function(B){j.popup.onmouseup=void 0,(B.target===j.popup||j.popup.contains(B.target))&&(to=!0)}}},Ro=(j,B,Q)=>{B.container.onclick=se=>{const xe=m.innerParams.get(j);to?to=!1:se.target===B.container&&Ae(xe.allowOutsideClick)&&Q(oi.backdrop)}},jr=j=>j instanceof Element||(j=>"object"==typeof j&&j.jquery)(j);const no=()=>{if(w.timeout)return(()=>{const j=Dt();if(!j)return;const B=parseInt(window.getComputedStyle(j).width);j.style.removeProperty("transition"),j.style.width="100%";const Q=parseInt(window.getComputedStyle(j).width);j.style.width="".concat(B/Q*100,"%")})(),w.timeout.stop()},sa=()=>{if(w.timeout){const j=w.timeout.start();return ln(j),j}};let Mo=!1;const Ga={};const Oo=j=>{for(let B=j.target;B&&B!==document;B=B.parentNode)for(const Q in Ga){const se=B.getAttribute(Q);if(se)return void Ga[Q].fire({template:se})}};var xo=Object.freeze({__proto__:null,argsToParams:j=>{const B={};return"object"!=typeof j[0]||jr(j[0])?["title","html","icon"].forEach((Q,se)=>{const xe=j[se];"string"==typeof xe||jr(xe)?B[Q]=xe:void 0!==xe&&X("Unexpected type of ".concat(Q,'! Expected "string" or "Element", got ').concat(typeof xe))}):Object.assign(B,j[0]),B},bindClickHandler:function Wa(){Ga[arguments.length>0&&void 0!==arguments[0]?arguments[0]:"data-swal-template"]=this,Mo||(document.body.addEventListener("click",Oo),Mo=!0)},clickCancel:()=>{var j;return null===(j=_e())||void 0===j?void 0:j.click()},clickConfirm:Ko,clickDeny:()=>{var j;return null===(j=Ke())||void 0===j?void 0:j.click()},enableLoading:Ys,fire:function ls(){for(var B=arguments.length,Q=new Array(B),se=0;se<B;se++)Q[se]=arguments[se];return new this(...Q)},getActions:vt,getCancelButton:_e,getCloseButton:Gt,getConfirmButton:be,getContainer:Le,getDenyButton:Ke,getFocusableElements:Ft,getFooter:Sn,getHtmlContainer:vn,getIcon:Xe,getIconContent:()=>Ye(T["icon-content"]),getImage:Cr,getInputLabel:()=>Ye(T["input-label"]),getLoader:dt,getPopup:ot,getProgressSteps:Ee,getTimerLeft:()=>w.timeout&&w.timeout.getTimerLeft(),getTimerProgressBar:Dt,getTitle:yr,getValidationMessage:De,increaseTimer:j=>{if(w.timeout){const B=w.timeout.increase(j);return ln(B,!0),B}},isDeprecatedParameter:eo,isLoading:()=>{const j=ot();return!!j&&j.hasAttribute("data-loading")},isTimerRunning:()=>!(!w.timeout||!w.timeout.isRunning()),isUpdatableParameter:Ll,isValidParameter:Ba,isVisible:()=>sn(ot()),mixin:function ci(j){return class B extends(this){_main(se,xe){return super._main(se,Object.assign({},j,xe))}}},resumeTimer:sa,showLoading:Ys,stopTimer:no,toggleTimer:()=>{const j=w.timeout;return j&&(j.running?no():sa())}});class oa{constructor(B,Q){this.callback=B,this.remaining=Q,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=(new Date).getTime()-this.started.getTime()),this.remaining}increase(B){const Q=this.running;return Q&&this.stop(),this.remaining+=B,Q&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const ds=["swal-title","swal-html","swal-footer"],qa=j=>{const B={};return Array.from(j.querySelectorAll("swal-param")).forEach(se=>{hs(se,["name","value"]);const xe=se.getAttribute("name"),St=se.getAttribute("value");B[xe]="boolean"==typeof _r[xe]?"false"!==St:"object"==typeof _r[xe]?JSON.parse(St):St}),B},ju=j=>{const B={};return Array.from(j.querySelectorAll("swal-function-param")).forEach(se=>{const xe=se.getAttribute("name"),St=se.getAttribute("value");B[xe]=new Function("return ".concat(St))()}),B},Hc=j=>{const B={};return Array.from(j.querySelectorAll("swal-button")).forEach(se=>{hs(se,["type","color","aria-label"]);const xe=se.getAttribute("type");B["".concat(xe,"ButtonText")]=se.innerHTML,B["show".concat(V(xe),"Button")]=!0,se.hasAttribute("color")&&(B["".concat(xe,"ButtonColor")]=se.getAttribute("color")),se.hasAttribute("aria-label")&&(B["".concat(xe,"ButtonAriaLabel")]=se.getAttribute("aria-label"))}),B},Uu=j=>{const B={},Q=j.querySelector("swal-image");return Q&&(hs(Q,["src","width","height","alt"]),Q.hasAttribute("src")&&(B.imageUrl=Q.getAttribute("src")),Q.hasAttribute("width")&&(B.imageWidth=Q.getAttribute("width")),Q.hasAttribute("height")&&(B.imageHeight=Q.getAttribute("height")),Q.hasAttribute("alt")&&(B.imageAlt=Q.getAttribute("alt"))),B},dr=j=>{const B={},Q=j.querySelector("swal-icon");return Q&&(hs(Q,["type","color"]),Q.hasAttribute("type")&&(B.icon=Q.getAttribute("type")),Q.hasAttribute("color")&&(B.iconColor=Q.getAttribute("color")),B.iconHtml=Q.innerHTML),B},qi=j=>{const B={},Q=j.querySelector("swal-input");Q&&(hs(Q,["type","label","placeholder","value"]),B.input=Q.getAttribute("type")||"text",Q.hasAttribute("label")&&(B.inputLabel=Q.getAttribute("label")),Q.hasAttribute("placeholder")&&(B.inputPlaceholder=Q.getAttribute("placeholder")),Q.hasAttribute("value")&&(B.inputValue=Q.getAttribute("value")));const se=Array.from(j.querySelectorAll("swal-input-option"));return se.length&&(B.inputOptions={},se.forEach(xe=>{hs(xe,["value"]);const St=xe.getAttribute("value");B.inputOptions[St]=xe.innerHTML})),B},jn=(j,B)=>{const Q={};for(const se in B){const xe=B[se],St=j.querySelector(xe);St&&(hs(St,[]),Q[xe.replace(/^swal-/,"")]=St.innerHTML.trim())}return Q},$c=j=>{const B=ds.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(j.children).forEach(Q=>{const se=Q.tagName.toLowerCase();B.includes(se)||q("Unrecognized element <".concat(se,">"))})},hs=(j,B)=>{Array.from(j.attributes).forEach(Q=>{-1===B.indexOf(Q.name)&&q(['Unrecognized attribute "'.concat(Q.name,'" on <').concat(j.tagName.toLowerCase(),">."),"".concat(B.length?"Allowed attributes are: ".concat(B.join(", ")):"To set the value, use HTML within the element.")])})},Bu=j=>{const B=Le(),Q=ot();"function"==typeof j.willOpen&&j.willOpen(Q);const xe=window.getComputedStyle(document.body).overflowY;Wc(B,Q,j),setTimeout(()=>{Xd(B,Q)},10),Un()&&(No(B,j.scrollbarPadding,xe),Array.from(document.body.children).forEach(B=>{B===Le()||B.contains(Le())||(B.hasAttribute("aria-hidden")&&B.setAttribute("data-previous-aria-hidden",B.getAttribute("aria-hidden")||""),B.setAttribute("aria-hidden","true"))})),!Cn()&&!w.previousActiveElement&&(w.previousActiveElement=document.activeElement),"function"==typeof j.didOpen&&setTimeout(()=>j.didOpen(Q)),gn(B,T["no-transition"])},Gc=j=>{const B=ot();if(j.target!==B||!ge)return;const Q=Le();B.removeEventListener(ge,Gc),Q.style.overflowY="auto"},Xd=(j,B)=>{ge&&cr(B)?(j.style.overflowY="hidden",B.addEventListener(ge,Gc)):j.style.overflowY="auto"},No=(j,B,Q)=>{(()=>{if(Ar&&!_n(document.body,T.iosfix)){const j=document.body.scrollTop;document.body.style.top="".concat(-1*j,"px"),Vt(document.body,T.iosfix),Jr()}})(),B&&"hidden"!==Q&&Mc(Q),setTimeout(()=>{j.scrollTop=0})},Wc=(j,B,Q)=>{Vt(j,Q.showClass.backdrop),B.style.setProperty("opacity","0","important"),lt(B,"grid"),setTimeout(()=>{Vt(B,Q.showClass.popup),B.style.removeProperty("opacity")},10),Vt([document.documentElement,document.body],T.shown),Q.heightAuto&&Q.backdrop&&!Q.toast&&Vt([document.documentElement,document.body],T["height-auto"])};var Ka={email:(j,B)=>/^[a-zA-Z0-9.+_-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]{2,24}$/.test(j)?Promise.resolve():Promise.resolve(B||"Invalid email address"),url:(j,B)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(j)?Promise.resolve():Promise.resolve(B||"Invalid URL")};function ks(j){(function aa(j){j.inputValidator||("email"===j.input&&(j.inputValidator=Ka.email),"url"===j.input&&(j.inputValidator=Ka.url))})(j),j.showLoaderOnConfirm&&!j.preConfirm&&q("showLoaderOnConfirm is set to true, but preConfirm is not defined.\nshowLoaderOnConfirm should be used together with preConfirm, see usage example:\nhttps://sweetalert2.github.io/#ajax-request"),function Ja(j){(!j.target||"string"==typeof j.target&&!document.querySelector(j.target)||"string"!=typeof j.target&&!j.target.appendChild)&&(q('Target parameter is not valid, defaulting to "body"'),j.target="body")}(j),"string"==typeof j.title&&(j.title=j.title.split("\n").join("<br />")),wt(j)}let Ur;var Br=new WeakMap;class Qn{constructor(){if(b(this,Br,{writable:!0,value:void 0}),typeof window>"u")return;Ur=this;for(var B=arguments.length,Q=new Array(B),se=0;se<B;se++)Q[se]=arguments[se];const xe=Object.freeze(this.constructor.argsToParams(Q));this.params=xe,this.isAwaitingPromise=!1,y(this,Br,this._main(Ur.params))}_main(B){let Q=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(j=>{!1===j.backdrop&&j.allowOutsideClick&&q('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`');for(const B in j)Lu(B),j.toast&&Va(B),jc(B)})(Object.assign({},Q,B)),w.currentInstance&&(w.currentInstance._destroy(),Un()&&Js()),w.currentInstance=Ur;const se=ca(B,Q);ks(se),Object.freeze(se),w.timeout&&(w.timeout.stop(),delete w.timeout),clearTimeout(w.restoreFocusTimeout);const xe=Vu(Ur);return Ti(Ur,se),m.innerParams.set(Ur,se),Ya(Ur,xe,se)}then(B){return p(this,Br).then(B)}finally(B){return p(this,Br).finally(B)}}const Ya=(j,B,Q)=>new Promise((se,xe)=>{const St=an=>{j.close({isDismissed:!0,dismiss:an})};Fr.swalPromiseResolve.set(j,se),Fr.swalPromiseReject.set(j,xe),B.confirmButton.onclick=()=>{(j=>{const B=m.innerParams.get(j);j.disableButtons(),B.input?mi(j,"confirm"):Po(j,!0)})(j)},B.denyButton.onclick=()=>{(j=>{const B=m.innerParams.get(j);j.disableButtons(),B.returnInputValueOnDeny?mi(j,"deny"):os(j,!1)})(j)},B.cancelButton.onclick=()=>{((j,B)=>{j.disableButtons(),B(oi.cancel)})(j,St)},B.closeButton.onclick=()=>{St(oi.close)},((j,B,Q)=>{m.innerParams.get(j).toast?vi(j,B,Q):(Fu(B),Wi(B),Ro(j,B,Q))})(j,B,St),((j,B,Q,se)=>{rr(B),Q.toast||(B.keydownHandler=xe=>Lr(j,xe,se),B.keydownTarget=Q.keydownListenerCapture?window:ot(),B.keydownListenerCapture=Q.keydownListenerCapture,B.keydownTarget.addEventListener("keydown",B.keydownHandler,{capture:B.keydownListenerCapture}),B.keydownHandlerAdded=!0)})(j,w,Q,St),((j,B)=>{"select"===B.input||"radio"===B.input?kc(j,B):["text","email","number","tel","textarea"].some(Q=>Q===B.input)&&(ke(B.inputValue)||we(B.inputValue))&&(Ys(be()),ta(j,B))})(j,Q),Bu(Q),qc(w,Q,St),Zc(B,Q),setTimeout(()=>{B.container.scrollTop=0})}),ca=(j,B)=>{const Q=(j=>{const B="string"==typeof j.template?document.querySelector(j.template):j.template;if(!B)return{};const Q=B.content;return $c(Q),Object.assign(qa(Q),ju(Q),Hc(Q),Uu(Q),dr(Q),qi(Q),jn(Q,ds))})(j),se=Object.assign({},_r,B,Q,j);return se.showClass=Object.assign({},_r.showClass,se.showClass),se.hideClass=Object.assign({},_r.hideClass,se.hideClass),se},Vu=j=>{const B={popup:ot(),container:Le(),actions:vt(),confirmButton:be(),denyButton:Ke(),cancelButton:_e(),loader:dt(),closeButton:Gt(),validationMessage:De(),progressSteps:Ee()};return m.domCache.set(j,B),B},qc=(j,B,Q)=>{const se=Dt();Ct(se),B.timer&&(j.timeout=new oa(()=>{Q("timer"),delete j.timeout},B.timer),B.timerProgressBar&&(lt(se),at(se,B,"timerProgressBar"),setTimeout(()=>{j.timeout&&j.timeout.running&&ln(B.timer)})))},Zc=(j,B)=>{if(!B.toast){if(!Ae(B.allowEnterKey))return void ko();ua(j,B)||zi(-1,1)}},ua=(j,B)=>B.focusDeny&&sn(j.denyButton)?(j.denyButton.focus(),!0):B.focusCancel&&sn(j.cancelButton)?(j.cancelButton.focus(),!0):!(!B.focusConfirm||!sn(j.confirmButton)||(j.confirmButton.focus(),0)),ko=()=>{document.activeElement instanceof HTMLElement&&"function"==typeof document.activeElement.blur&&document.activeElement.blur()};if(typeof window<"u"&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|by|xn--p1ai)$/)){const j=new Date,B=localStorage.getItem("swal-initiation");B?(j.getTime()-Date.parse(B))/864e5>3&&setTimeout(()=>{document.body.style.pointerEvents="none";const Q=document.createElement("audio");Q.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",Q.loop=!0,document.body.appendChild(Q),setTimeout(()=>{Q.play().catch(()=>{})},2500)},500):localStorage.setItem("swal-initiation","".concat(j))}Qn.prototype.disableButtons=Yr,Qn.prototype.enableButtons=Fc,Qn.prototype.getInput=Xs,Qn.prototype.disableInput=ku,Qn.prototype.enableInput=Kn,Qn.prototype.hideLoading=zn,Qn.prototype.disableLoading=zn,Qn.prototype.showValidationMessage=as,Qn.prototype.resetValidationMessage=Gi,Qn.prototype.close=xs,Qn.prototype.closePopup=xs,Qn.prototype.closeModal=xs,Qn.prototype.closeToast=xs,Qn.prototype.rejectPromise=Nl,Qn.prototype.update=Bc,Qn.prototype._destroy=Wt,Object.assign(Qn,xo),Object.keys(Vc).forEach(j=>{Qn[j]=function(){return Ur&&Ur[j]?Ur[j](...arguments):null}}),Qn.DismissReason=oi,Qn.version="11.7.27";const ps=Qn;return ps.default=ps,ps}(),typeof this<"u"&&this.Sweetalert2&&(this.swal=this.sweetAlert=this.Swal=this.SweetAlert=this.Sweetalert2),typeof document<"u"&&function(p,y){var o=p.createElement("style");if(p.getElementsByTagName("head")[0].appendChild(o),o.styleSheet)o.styleSheet.disabled||(o.styleSheet.cssText=y);else try{o.innerHTML=y}catch{o.innerText=y}}(document,'.swal2-popup.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-popup.swal2-toast>*{grid-column:2}.swal2-popup.swal2-toast .swal2-title{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.5em;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-popup.swal2-toast .swal2-html-container{margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-popup.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-popup.swal2-toast .swal2-styled{margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;transform:rotate(45deg);border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{animation:swal2-toast-hide .1s forwards}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:rgba(0,0,0,.4)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;align-self:start;justify-self:center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;align-self:start;justify-self:end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;align-self:center;justify-self:center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;align-self:center;justify-self:end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;justify-self:center;align-self:end}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;align-self:end;justify-self:end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;color:#545454;font-family:inherit;font-size:1rem}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1))}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2))}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled).swal2-confirm{border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled).swal2-confirm:focus{box-shadow:0 0 0 3px rgba(112,102,224,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-deny{border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled).swal2-deny:focus{box-shadow:0 0 0 3px rgba(220,55,65,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-cancel{border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled).swal2-cancel:focus{box-shadow:0 0 0 3px rgba(110,120,129,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-default-outline:focus{box-shadow:0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-styled):focus{outline:none}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:inherit;font-size:1em;text-align:center}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:rgba(0,0,0,.2)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em}div:where(.swal2-container) button:where(.swal2-close){z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:rgba(0,0,0,0);color:#ccc;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:none;background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus{outline:none;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) .swal2-html-container{z-index:1;justify-content:center;margin:1em 1.6em .3em;padding:0;overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid #d9d9d9;border-radius:.1875em;background:rgba(0,0,0,0);box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:1px solid #b4dbed;outline:none;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:#fff}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:rgba(0,0,0,0);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:#fff;color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:#f0f0f0;color:#666;font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:0.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}div:where(.swal2-icon).swal2-warning{border-color:#facea8;color:#f8bb86}div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}div:where(.swal2-icon).swal2-info{border-color:#9de0f6;color:#3fc3ee}div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}div:where(.swal2-icon).swal2-question{border-color:#c9dae1;color:#87adbd}div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;transform:rotate(45deg);border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:swal2-show .3s}.swal2-hide{animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}@media print{body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown) .swal2-container{position:static !important}}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}')},6916:()=>{},9271:()=>{},2104:()=>{},4151:()=>{},4270:()=>{},2914:()=>{},2088:()=>{},7156:ne=>{function p(o,v,_,A,b,P,w){try{var S=o[P](w),h=S.value}catch(m){return void _(m)}S.done?v(h):Promise.resolve(h).then(A,b)}ne.exports=function y(o){return function(){var v=this,_=arguments;return new Promise(function(A,b){var P=o.apply(v,_);function w(h){p(P,A,b,w,S,"next",h)}function S(h){p(P,A,b,w,S,"throw",h)}w(void 0)})}},ne.exports.__esModule=!0,ne.exports.default=ne.exports},4650:(ne,p,y)=>{"use strict";y.d(p,{$8M:()=>la,$WT:()=>Kr,$Z:()=>Gy,AFp:()=>Me,ALo:()=>Od,AaK:()=>S,AsE:()=>Df,CHM:()=>Fl,CRH:()=>Iv,CZH:()=>pt,CqO:()=>zm,D6c:()=>Wv,EJc:()=>XD,EpF:()=>C0,F4k:()=>Sf,FYo:()=>ky,FiY:()=>Oi,Gf:()=>np,GfV:()=>Cm,Gpc:()=>I,JOm:()=>vs,KtG:()=>Do,LFG:()=>mn,LSH:()=>Xp,Lbi:()=>DT,Lck:()=>$f,MAs:()=>Sr,MMx:()=>Wf,MR2:()=>$e,NdJ:()=>Ef,O4$:()=>$c,OlP:()=>dn,Oqu:()=>Ym,P3R:()=>R,PXZ:()=>vo,Q6J:()=>aC,QGY:()=>li,Qsj:()=>MI,R0b:()=>Ts,RDi:()=>sm,Rgc:()=>Xf,SBq:()=>Mh,Sil:()=>iE,Suo:()=>u_,TTD:()=>Nu,TgZ:()=>Bm,WLB:()=>Kf,X6Q:()=>LT,XFs:()=>at,Xpm:()=>bi,Xts:()=>W,Y36:()=>_d,YKP:()=>Hf,YNc:()=>oC,Yjl:()=>Ks,Yz7:()=>vt,Z0I:()=>Pt,ZZ4:()=>Tc,_Bn:()=>lv,_UZ:()=>uC,_Vd:()=>rf,_c5:()=>SE,_uU:()=>V0,aQg:()=>Cg,c2e:()=>RT,cJS:()=>Dt,cg1:()=>Mf,dDg:()=>Te,dqk:()=>Yt,eFA:()=>lE,eJc:()=>Tv,ekj:()=>EC,eoX:()=>pg,f3M:()=>de,g9A:()=>nE,h0i:()=>bl,hGG:()=>EE,hij:()=>Gh,iGM:()=>Ev,ifc:()=>Ue,ip1:()=>tE,jDz:()=>JC,kL8:()=>sS,kcU:()=>Za,lG2:()=>ri,lcZ:()=>r_,lqb:()=>Ni,lri:()=>bu,n5z:()=>sh,oAB:()=>Zs,oxw:()=>hC,q4F:()=>Tw,qLn:()=>_m,qOj:()=>Qy,qZA:()=>Vm,rWj:()=>Lv,sBO:()=>FT,s_b:()=>tg,soG:()=>xv,tb:()=>E_,tp0:()=>Ju,uIk:()=>iC,vHH:()=>V,vpe:()=>wc,wAp:()=>Lt,xp6:()=>Ow,z2F:()=>Fv,zSh:()=>Rh,zs3:()=>hu});var o=y(7579),v=y(727),_=y(9751),A=y(6451),b=y(3099);function P(s){for(let a in s)if(s[a]===P)return a;throw Error("Could not find renamed property on target object.")}function w(s,a){for(const c in a)a.hasOwnProperty(c)&&!s.hasOwnProperty(c)&&(s[c]=a[c])}function S(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(S).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const a=s.toString();if(null==a)return""+a;const c=a.indexOf("\n");return-1===c?a:a.substring(0,c)}function h(s,a){return null==s||""===s?null===a?"":a:null==a||""===a?s:s+" "+a}const m=P({__forward_ref__:P});function I(s){return s.__forward_ref__=I,s.toString=function(){return S(this())},s}function M(s){return T(s)?s():s}function T(s){return"function"==typeof s&&s.hasOwnProperty(m)&&s.__forward_ref__===I}function N(s){return s&&!!s.\u0275providers}const z="https://g.co/ng/security#xss";class V extends Error{constructor(a,c){super(q(a,c)),this.code=a}}function q(s,a){return`NG0${Math.abs(s)}${a?": "+a.trim():""}`}function X(s){return"string"==typeof s?s:null==s?"":String(s)}function ke(s,a){throw new V(-201,!1)}function be(s,a){null==s&&function _e(s,a,c,l){throw new Error(`ASSERTION ERROR: ${s}`+(null==l?"":` [Expected=> ${c} ${l} ${a} <=Actual]`))}(a,s,null,"!=")}function vt(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Dt(s){return{providers:s.providers||[],imports:s.imports||[]}}function Gt(s){return Ft(s,kn)||Ft(s,_n)}function Pt(s){return null!==Gt(s)}function Ft(s,a){return s.hasOwnProperty(a)?s[a]:null}function Cn(s){return s&&(s.hasOwnProperty(Ve)||s.hasOwnProperty(fn))?s[Ve]:null}const kn=P({\u0275prov:P}),Ve=P({\u0275inj:P}),_n=P({ngInjectableDef:P}),fn=P({ngInjectorDef:P});var at=(()=>((at=at||{})[at.Default=0]="Default",at[at.Host=1]="Host",at[at.Self=2]="Self",at[at.SkipSelf=4]="SkipSelf",at[at.Optional=8]="Optional",at))();let Tr;function Vn(s){const a=Tr;return Tr=s,a}function Vt(s,a,c){const l=Gt(s);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:c&at.Optional?null:void 0!==a?a:void ke(S(s))}const Yt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),rn={},zt="__NG_DI_FLAG__",sn="ngTempTokenPath",bn="ngTokenPath",Dn=/\n/gm,cr="\u0275",ln="__source";let ti;function Qt(s){const a=ti;return ti=s,a}function tr(s,a=at.Default){if(void 0===ti)throw new V(-203,!1);return null===ti?Vt(s,void 0,a):ti.get(s,a&at.Optional?null:void 0,a)}function mn(s,a=at.Default){return(function Bi(){return Tr}()||tr)(M(s),a)}function de(s,a=at.Default){return mn(s,je(a))}function je(s){return typeof s>"u"||"number"==typeof s?s:0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)}function nt(s){const a=[];for(let c=0;c<s.length;c++){const l=M(s[c]);if(Array.isArray(l)){if(0===l.length)throw new V(900,!1);let f,E=at.Default;for(let x=0;x<l.length;x++){const U=l[x],$=wt(U);"number"==typeof $?-1===$?f=U.token:E|=$:f=U}a.push(mn(f,E))}else a.push(mn(l))}return a}function ht(s,a){return s[zt]=a,s.prototype[zt]=a,s}function wt(s){return s[zt]}function ae(s){return{toString:s}.toString()}var ge=(()=>((ge=ge||{})[ge.OnPush=0]="OnPush",ge[ge.Default=1]="Default",ge))(),Ue=(()=>{return(s=Ue||(Ue={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",Ue;var s})();const Ie={},We=[],kt=P({\u0275cmp:P}),En=P({\u0275dir:P}),sr=P({\u0275pipe:P}),Ln=P({\u0275mod:P}),Tn=P({\u0275fac:P}),on=P({__NG_ELEMENT_ID__:P});let Nr=0;function bi(s){return ae(()=>{const a=qo(s),c={...a,decls:s.decls,vars:s.vars,template:s.template,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,onPush:s.changeDetection===ge.OnPush,directiveDefs:null,pipeDefs:null,dependencies:a.standalone&&s.dependencies||null,getStandaloneInjector:null,data:s.data||{},encapsulation:s.encapsulation||Ue.Emulated,id:"c"+Nr++,styles:s.styles||We,_:null,schemas:s.schemas||null,tView:null};Du(c);const l=s.dependencies;return c.directiveDefs=ns(l,!1),c.pipeDefs=ns(l,!0),c})}function Pc(s){return Rt(s)||kr(s)}function Dc(s){return null!==s}function Zs(s){return ae(()=>({type:s.type,bootstrap:s.bootstrap||We,declarations:s.declarations||We,imports:s.imports||We,exports:s.exports||We,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function ni(s,a){if(null==s)return Ie;const c={};for(const l in s)if(s.hasOwnProperty(l)){let f=s[l],E=f;Array.isArray(f)&&(E=f[1],f=f[0]),c[f]=l,a&&(a[f]=E)}return c}function ri(s){return ae(()=>{const a=qo(s);return Du(a),a})}function Ks(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function Rt(s){return s[kt]||null}function kr(s){return s[En]||null}function qn(s){return s[sr]||null}function Kr(s){const a=Rt(s)||kr(s)||qn(s);return null!==a&&a.standalone}function nr(s,a){const c=s[Ln]||null;if(!c&&!0===a)throw new Error(`Type ${S(s)} does not have '\u0275mod' property.`);return c}function qo(s){const a={};return{type:s.type,providersResolver:null,factory:null,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:a,exportAs:s.exportAs||null,standalone:!0===s.standalone,selectors:s.selectors||We,viewQuery:s.viewQuery||null,features:s.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:ni(s.inputs,a),outputs:ni(s.outputs)}}function Du(s){s.features?.forEach(a=>a(s))}function ns(s,a){if(!s)return null;const c=a?qn:Pc;return()=>("function"==typeof s?s():s).map(l=>c(l)).filter(Dc)}const ii=0,ft=1,jt=2,Nn=3,si=4,gi=5,ur=6,Vi=7,Zn=8,Zo=9,Ti=10,Kt=11,Ko=12,rs=13,Jo=14,oi=15,rr=16,Eo=17,zi=18,Ai=19,Io=20,Lr=21,Fn=22,Rc=1,xa=2,Fr=7,Os=8,Js=9,Ar=10;function Jr(s){return Array.isArray(s)&&"object"==typeof s[Rc]}function Pi(s){return Array.isArray(s)&&!0===s[Rc]}function Yo(s){return 0!=(4&s.flags)}function Qo(s){return s.componentOffset>-1}function Na(s){return 1==(1&s.flags)}function $i(s){return!!s.template}function bo(s){return 0!=(256&s[jt])}function ta(s,a){return s.hasOwnProperty(Tn)?s[Tn]:null}class ja{constructor(a,c,l){this.previousValue=a,this.currentValue=c,this.firstChange=l}isFirstChange(){return this.firstChange}}function Nu(){return ss}function ss(s){return s.type.prototype.ngOnChanges&&(s.setInput=Di),Ao}function Ao(){const s=kl(this),a=s?.current;if(a){const c=s.previous;if(c===Ie)s.previous=a;else for(let l in a)c[l]=a[l];s.current=null,this.ngOnChanges(a)}}function Di(s,a,c,l){const f=this.declaredInputs[c],E=kl(s)||function mi(s,a){return s[na]=a}(s,{previous:Ie,current:null}),x=E.current||(E.current={}),U=E.previous,$=U[f];x[f]=new ja($&&$.currentValue,a,U===Ie),s[l]=a}Nu.ngInherit=!0;const na="__ngSimpleChanges__";function kl(s){return s[na]||null}const ai=function(s,a,c){},Qs="svg";function zn(s){for(;Array.isArray(s);)s=s[ii];return s}function Xs(s,a){return zn(a[s])}function or(s,a){return zn(a[s.index])}function Fc(s,a){return s.data[a]}function Yr(s,a){return s[a]}function Kn(s,a){const c=a[s];return Jr(c)?c:c[ii]}function as(s){return 64==(64&s[jt])}function _r(s,a){return null==a?null:s[a]}function cs(s){s[zi]=0}function ra(s,a){s[gi]+=a;let c=s,l=s[Nn];for(;null!==l&&(1===a&&1===c[gi]||-1===a&&0===c[gi]);)l[gi]+=a,c=l,l=l[Nn]}const Ut={lFrame:ds(null),bindingsEnabled:!0};function jc(){return Ut.bindingsEnabled}function Re(){return Ut.lFrame.lView}function Wt(){return Ut.lFrame.tView}function Fl(s){return Ut.lFrame.contextLView=s,s[Zn]}function Do(s){return Ut.lFrame.contextLView=null,s}function Jn(){let s=Vc();for(;null!==s&&64===s.type;)s=s.parent;return s}function Vc(){return Ut.lFrame.currentTNode}function vi(s,a){const c=Ut.lFrame;c.currentTNode=s,c.isParent=a}function za(){return Ut.lFrame.isParent}function lr(){const s=Ut.lFrame;let a=s.bindingRootIndex;return-1===a&&(a=s.bindingRootIndex=s.tView.bindingStartIndex),a}function ls(){return Ut.lFrame.bindingIndex++}function ci(s){const a=Ut.lFrame,c=a.bindingIndex;return a.bindingIndex=a.bindingIndex+s,c}function sa(s,a){const c=Ut.lFrame;c.bindingIndex=c.bindingRootIndex=s,Yn(a)}function Yn(s){Ut.lFrame.currentDirectiveIndex=s}function Mo(){return Ut.lFrame.currentQueryIndex}function Ga(s){Ut.lFrame.currentQueryIndex=s}function Wa(s){const a=s[ft];return 2===a.type?a.declTNode:1===a.type?s[ur]:null}function Oo(s,a,c){if(c&at.SkipSelf){let f=a,E=s;for(;!(f=f.parent,null!==f||c&at.Host||(f=Wa(E),null===f||(E=E[oi],10&f.type))););if(null===f)return!1;a=f,s=E}const l=Ut.lFrame=oa();return l.currentTNode=a,l.lView=s,!0}function xo(s){const a=oa(),c=s[ft];Ut.lFrame=a,a.currentTNode=c.firstChild,a.lView=s,a.tView=c,a.contextLView=s,a.bindingIndex=c.bindingStartIndex,a.inI18n=!1}function oa(){const s=Ut.lFrame,a=null===s?null:s.child;return null===a?ds(s):a}function ds(s){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=a),a}function zc(){const s=Ut.lFrame;return Ut.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const qa=zc;function ju(){const s=zc();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function dr(){return Ut.lFrame.selectedIndex}function qi(s){Ut.lFrame.selectedIndex=s}function jn(){const s=Ut.lFrame;return Fc(s.tView,s.selectedIndex)}function $c(){Ut.lFrame.currentNamespace=Qs}function Za(){!function Bu(){Ut.lFrame.currentNamespace=null}()}function No(s,a){for(let c=a.directiveStart,l=a.directiveEnd;c<l;c++){const E=s.data[c].type.prototype,{ngAfterContentInit:x,ngAfterContentChecked:U,ngAfterViewInit:$,ngAfterViewChecked:K,ngOnDestroy:ee}=E;x&&(s.contentHooks??(s.contentHooks=[])).push(-c,x),U&&((s.contentHooks??(s.contentHooks=[])).push(c,U),(s.contentCheckHooks??(s.contentCheckHooks=[])).push(c,U)),$&&(s.viewHooks??(s.viewHooks=[])).push(-c,$),K&&((s.viewHooks??(s.viewHooks=[])).push(c,K),(s.viewCheckHooks??(s.viewCheckHooks=[])).push(c,K)),null!=ee&&(s.destroyHooks??(s.destroyHooks=[])).push(c,ee)}}function Wc(s,a,c){Ja(s,a,3,c)}function Ka(s,a,c,l){(3&s[jt])===c&&Ja(s,a,c,l)}function aa(s,a){let c=s[jt];(3&c)===a&&(c&=2047,c+=1,s[jt]=c)}function Ja(s,a,c,l){const E=l??-1,x=a.length-1;let U=0;for(let $=void 0!==l?65535&s[zi]:0;$<x;$++)if("number"==typeof a[$+1]){if(U=a[$],null!=l&&U>=l)break}else a[$]<0&&(s[zi]+=65536),(U<E||-1==E)&&(ks(s,c,a,$),s[zi]=(4294901760&s[zi])+$+2),$++}function ks(s,a,c,l){const f=c[l]<0,E=c[l+1],U=s[f?-c[l]:c[l]];if(f){if(s[jt]>>11<s[zi]>>16&&(3&s[jt])===a){s[jt]+=2048,ai(4,U,E);try{E.call(U)}finally{ai(5,U,E)}}}else{ai(4,U,E);try{E.call(U)}finally{ai(5,U,E)}}}const Ur=-1;class Br{constructor(a,c,l){this.factory=a,this.resolving=!1,this.canSeeViewProviders=c,this.injectImpl=l}}function ps(s,a,c){let l=0;for(;l<c.length;){const f=c[l];if("number"==typeof f){if(0!==f)break;l++;const E=c[l++],x=c[l++],U=c[l++];s.setAttribute(a,x,U,E)}else{const E=f,x=c[++l];B(E)?s.setProperty(a,E,x):s.setAttribute(a,E,x),l++}}return l}function j(s){return 3===s||4===s||6===s}function B(s){return 64===s.charCodeAt(0)}function Q(s,a){if(null!==a&&0!==a.length)if(null===s||0===s.length)s=a.slice();else{let c=-1;for(let l=0;l<a.length;l++){const f=a[l];"number"==typeof f?c=f:0===c||se(s,c,f,null,-1===c||2===c?a[++l]:null)}}return s}function se(s,a,c,l,f){let E=0,x=s.length;if(-1===a)x=-1;else for(;E<s.length;){const U=s[E++];if("number"==typeof U){if(U===a){x=-1;break}if(U>a){x=E-1;break}}}for(;E<s.length;){const U=s[E];if("number"==typeof U)break;if(U===c){if(null===l)return void(null!==f&&(s[E+1]=f));if(l===s[E+1])return void(s[E+2]=f)}E++,null!==l&&E++,null!==f&&E++}-1!==x&&(s.splice(x,0,a),E=x+1),s.splice(E++,0,c),null!==l&&s.splice(E++,0,l),null!==f&&s.splice(E++,0,f)}function xe(s){return s!==Ur}function St(s){return 32767&s}function Hn(s,a){let c=function an(s){return s>>16}(s),l=a;for(;c>0;)l=l[oi],c--;return l}let $n=!0;function Zi(s){const a=$n;return $n=s,a}const Ul=255,eh=5;let zu=0;const Ki={};function th(s,a){const c=bp(s,a);if(-1!==c)return c;const l=a[ft];l.firstCreatePass&&(s.injectorIndex=a.length,Jc(l.data,s),Jc(a,null),Jc(l.blueprint,null));const f=Tp(s,a),E=s.injectorIndex;if(xe(f)){const x=St(f),U=Hn(f,a),$=U[ft].data;for(let K=0;K<8;K++)a[E+K]=U[x+K]|$[x+K]}return a[E+8]=f,E}function Jc(s,a){s.push(0,0,0,0,0,0,0,0,a)}function bp(s,a){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===a[s.injectorIndex+8]?-1:s.injectorIndex}function Tp(s,a){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let c=0,l=null,f=a;for(;null!==f;){if(l=Gu(f),null===l)return Ur;if(c++,f=f[oi],-1!==l.injectorIndex)return l.injectorIndex|c<<16}return Ur}function Ls(s,a,c){!function Ip(s,a,c){let l;"string"==typeof c?l=c.charCodeAt(0)||0:c.hasOwnProperty(on)&&(l=c[on]),null==l&&(l=c[on]=zu++);const f=l&Ul;a.data[s+(f>>eh)]|=1<<f}(s,a,c)}function Hu(s,a,c){if(c&at.Optional||void 0!==s)return s;ke()}function Bl(s,a,c,l){if(c&at.Optional&&void 0===l&&(l=null),!(c&(at.Self|at.Host))){const f=s[Zo],E=Vn(void 0);try{return f?f.get(a,l,c&at.Optional):Vt(a,l,c&at.Optional)}finally{Vn(E)}}return Hu(l,0,c)}function nh(s,a,c,l=at.Default,f){if(null!==s){if(1024&a[jt]){const x=function Pp(s,a,c,l,f){let E=s,x=a;for(;null!==E&&null!==x&&1024&x[jt]&&!(256&x[jt]);){const U=$u(E,x,c,l|at.Self,Ki);if(U!==Ki)return U;let $=E.parent;if(!$){const K=x[Lr];if(K){const ee=K.get(c,Ki,l);if(ee!==Ki)return ee}$=Gu(x),x=x[oi]}E=$}return f}(s,a,c,l,Ki);if(x!==Ki)return x}const E=$u(s,a,c,l,Ki);if(E!==Ki)return E}return Bl(a,c,l,f)}function $u(s,a,c,l,f){const E=function rh(s){if("string"==typeof s)return s.charCodeAt(0)||0;const a=s.hasOwnProperty(on)?s[on]:void 0;return"number"==typeof a?a>=0?a&Ul:ih:a}(c);if("function"==typeof E){if(!Oo(a,s,l))return l&at.Host?Hu(f,0,l):Bl(a,c,l,f);try{const x=E(l);if(null!=x||l&at.Optional)return x;ke()}finally{qa()}}else if("number"==typeof E){let x=null,U=bp(s,a),$=Ur,K=l&at.Host?a[rr][ur]:null;for((-1===U||l&at.SkipSelf)&&($=-1===U?Tp(s,a):a[U+8],$!==Ur&&Ap(l,!1)?(x=a[ft],U=St($),a=Hn($,a)):U=-1);-1!==U;){const ee=a[ft];if(Xa(E,U,ee.data)){const ie=Vr(U,a,c,x,l,K);if(ie!==Ki)return ie}$=a[U+8],$!==Ur&&Ap(l,a[ft].data[U+8]===K)&&Xa(E,U,a)?(x=ee,U=St($),a=Hn($,a)):U=-1}}return f}function Vr(s,a,c,l,f,E){const x=a[ft],U=x.data[s+8],ee=Qa(U,x,c,null==l?Qo(U)&&$n:l!=x&&0!=(3&U.type),f&at.Host&&E===U);return null!==ee?hr(a,x,ee,U):Ki}function Qa(s,a,c,l,f){const E=s.providerIndexes,x=a.data,U=1048575&E,$=s.directiveStart,ee=E>>20,me=f?U+ee:s.directiveEnd;for(let Se=l?U:U+ee;Se<me;Se++){const He=x[Se];if(Se<$&&c===He||Se>=$&&He.type===c)return Se}if(f){const Se=x[$];if(Se&&$i(Se)&&Se.type===c)return $}return null}function hr(s,a,c,l){let f=s[c];const E=a.data;if(function Qn(s){return s instanceof Br}(f)){const x=f;x.resolving&&function fe(s,a){const c=a?`. Dependency path: ${a.join(" > ")} > ${s}`:"";throw new V(-200,`Circular dependency in DI detected for ${s}${c}`)}(function ce(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():X(s)}(E[c]));const U=Zi(x.canSeeViewProviders);x.resolving=!0;const $=x.injectImpl?Vn(x.injectImpl):null;Oo(s,l,at.Default);try{f=s[c]=x.factory(void 0,E,s,l),a.firstCreatePass&&c>=l.directiveStart&&function Xd(s,a,c){const{ngOnChanges:l,ngOnInit:f,ngDoCheck:E}=a.type.prototype;if(l){const x=ss(a);(c.preOrderHooks??(c.preOrderHooks=[])).push(s,x),(c.preOrderCheckHooks??(c.preOrderCheckHooks=[])).push(s,x)}f&&(c.preOrderHooks??(c.preOrderHooks=[])).push(0-s,f),E&&((c.preOrderHooks??(c.preOrderHooks=[])).push(s,E),(c.preOrderCheckHooks??(c.preOrderCheckHooks=[])).push(s,E))}(c,E[c],a)}finally{null!==$&&Vn($),Zi(U),x.resolving=!1,qa()}}return f}function Xa(s,a,c){return!!(c[a+(s>>eh)]&1<<s)}function Ap(s,a){return!(s&at.Self||s&at.Host&&a)}class ro{constructor(a,c){this._tNode=a,this._lView=c}get(a,c,l){return nh(this._tNode,this._lView,a,je(l),c)}}function ih(){return new ro(Jn(),Re())}function sh(s){return ae(()=>{const a=s.prototype.constructor,c=a[Tn]||ec(a),l=Object.prototype;let f=Object.getPrototypeOf(s.prototype).constructor;for(;f&&f!==l;){const E=f[Tn]||ec(f);if(E&&E!==c)return E;f=Object.getPrototypeOf(f)}return E=>new E})}function ec(s){return T(s)?()=>{const a=ec(M(s));return a&&a()}:ta(s)}function Gu(s){const a=s[ft],c=a.type;return 2===c?a.declTNode:1===c?s[ur]:null}function la(s){return function Lo(s,a){if("class"===a)return s.classes;if("style"===a)return s.styles;const c=s.attrs;if(c){const l=c.length;let f=0;for(;f<l;){const E=c[f];if(j(E))break;if(0===E)f+=2;else if("number"==typeof E)for(f++;f<l&&"string"==typeof c[f];)f++;else{if(E===a)return c[f+1];f+=2}}}return null}(Jn(),s)}const Ri="__parameters__";function da(s,a,c){return ae(()=>{const l=function nc(s){return function(...c){if(s){const l=s(...c);for(const f in l)this[f]=l[f]}}}(a);function f(...E){if(this instanceof f)return l.apply(this,E),this;const x=new f(...E);return U.annotation=x,U;function U($,K,ee){const ie=$.hasOwnProperty(Ri)?$[Ri]:Object.defineProperty($,Ri,{value:[]})[Ri];for(;ie.length<=ee;)ie.push(null);return(ie[ee]=ie[ee]||[]).push(x),$}}return c&&(f.prototype=Object.create(c.prototype)),f.prototype.ngMetadataName=s,f.annotationCls=f,f})}class dn{constructor(a,c){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof c?this.__NG_ELEMENT_ID__=c:void 0!==c&&(this.\u0275prov=vt({token:this,providedIn:c.providedIn||"root",factory:c.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Fs(s,a){s.forEach(c=>Array.isArray(c)?Fs(c,a):a(c))}function uh(s,a,c){a>=s.length?s.push(c):s.splice(a,0,c)}function eu(s,a){return a>=s.length-1?s.pop():s.splice(a,1)[0]}function Ji(s,a,c){let l=An(s,a);return l>=0?s[1|l]=c:(l=~l,function Rp(s,a,c,l){let f=s.length;if(f==a)s.push(c,l);else if(1===f)s.push(l,s[0]),s[0]=c;else{for(f--,s.push(s[f-1],s[f]);f>a;)s[f]=s[f-2],f--;s[a]=c,s[a+1]=l}}(s,l,a,c)),l}function js(s,a){const c=An(s,a);if(c>=0)return s[1|c]}function An(s,a){return function gs(s,a,c){let l=0,f=s.length>>c;for(;f!==l;){const E=l+(f-l>>1),x=s[E<<c];if(a===x)return E<<c;x>a?f=E:l=E+1}return~(f<<c)}(s,a,1)}const Oi=ht(da("Optional"),8),Ju=ht(da("SkipSelf"),4);var vs=(()=>((vs=vs||{})[vs.Important=1]="Important",vs[vs.DashCase=2]="DashCase",vs))();const iu=new Map;let td=0;const Ce="__ngContext__";function Pe(s,a){Jr(a)?(s[Ce]=a[Io],function rl(s){iu.set(s[Io],s)}(a)):s[Ce]=a}let Bs;function il(s,a){return Bs(s,a)}function rd(s){const a=s[Nn];return Pi(a)?a[Nn]:a}function ou(s){return mh(s[rs])}function Fp(s){return mh(s[si])}function mh(s){for(;null!==s&&!Pi(s);)s=s[si];return s}function au(s,a,c,l,f){if(null!=l){let E,x=!1;Pi(l)?E=l:Jr(l)&&(x=!0,l=l[ii]);const U=zn(l);0===s&&null!==c?null==f?_h(a,c,U):Vo(a,c,U,f||null,!0):1===s&&null!==c?Vo(a,c,U,f||null,!0):2===s?function Hp(s,a,c){const l=Mr(s,a);l&&function Qg(s,a,c,l){s.removeChild(a,c,l)}(s,l,a,c)}(a,U,x):3===s&&a.destroyNode(U),null!=E&&function tm(s,a,c,l,f){const E=c[Fr];E!==zn(c)&&au(a,s,l,E,f);for(let U=Ar;U<c.length;U++){const $=c[U];cu($[ft],$,s,a,l,E)}}(a,s,E,c,f)}}function jp(s,a,c){return s.createElement(a,c)}function Ch(s,a){const c=s[Js],l=c.indexOf(a),f=a[Nn];512&a[jt]&&(a[jt]&=-513,ra(f,-1)),c.splice(l,1)}function ga(s,a){if(s.length<=Ar)return;const c=Ar+a,l=s[c];if(l){const f=l[Eo];null!==f&&f!==s&&Ch(f,l),a>0&&(s[c-1][si]=l[si]);const E=eu(s,Ar+a);!function Up(s,a){cu(s,a,a[Kt],2,null,null),a[ii]=null,a[ur]=null}(l[ft],l);const x=E[Ai];null!==x&&x.detachView(E[ft]),l[Nn]=null,l[si]=null,l[jt]&=-65}return l}function ma(s,a){if(!(128&a[jt])){const c=a[Kt];c.destroyNode&&cu(s,a,c,3,null,null),function Bp(s){let a=s[rs];if(!a)return sl(s[ft],s);for(;a;){let c=null;if(Jr(a))c=a[rs];else{const l=a[Ar];l&&(c=l)}if(!c){for(;a&&!a[si]&&a!==s;)Jr(a)&&sl(a[ft],a),a=a[Nn];null===a&&(a=s),Jr(a)&&sl(a[ft],a),c=a&&a[si]}a=c}}(a)}}function sl(s,a){if(!(128&a[jt])){a[jt]&=-65,a[jt]|=128,function zp(s,a){let c;if(null!=s&&null!=(c=s.destroyHooks))for(let l=0;l<c.length;l+=2){const f=a[c[l]];if(!(f instanceof Br)){const E=c[l+1];if(Array.isArray(E))for(let x=0;x<E.length;x+=2){const U=f[E[x]],$=E[x+1];ai(4,U,$);try{$.call(U)}finally{ai(5,U,$)}}else{ai(4,f,E);try{E.call(f)}finally{ai(5,f,E)}}}}}(s,a),function Vp(s,a){const c=s.cleanup,l=a[Vi];let f=-1;if(null!==c)for(let E=0;E<c.length-1;E+=2)if("string"==typeof c[E]){const x=c[E+3];x>=0?l[f=x]():l[f=-x].unsubscribe(),E+=2}else{const x=l[f=c[E+1]];c[E].call(x)}if(null!==l){for(let E=f+1;E<l.length;E++)(0,l[E])();a[Vi]=null}}(s,a),1===a[ft].type&&a[Kt].destroy();const c=a[Eo];if(null!==c&&Pi(a[Nn])){c!==a[Nn]&&Ch(c,a);const l=a[Ai];null!==l&&l.detachView(s)}!function F(s){iu.delete(s[Io])}(a)}}function Rr(s,a,c){return function va(s,a,c){let l=a;for(;null!==l&&40&l.type;)l=(a=l).parent;if(null===l)return c[ii];{const{componentOffset:f}=l;if(f>-1){const{encapsulation:E}=s.data[l.directiveStart+f];if(E===Ue.None||E===Ue.Emulated)return null}return or(l,c)}}(s,a.parent,c)}function Vo(s,a,c,l,f){s.insertBefore(a,c,l,f)}function _h(s,a,c){s.appendChild(a,c)}function sd(s,a,c,l,f){null!==l?Vo(s,a,c,l,f):_h(s,a,c)}function Mr(s,a){return s.parentNode(a)}let Sh,ad,Ca,wh=function ol(s,a,c){return 40&s.type?or(s,c):null};function od(s,a,c,l){const f=Rr(s,l,a),E=a[Kt],U=function Xg(s,a,c){return wh(s,a,c)}(l.parent||a[ur],l,a);if(null!=f)if(Array.isArray(c))for(let $=0;$<c.length;$++)sd(E,f,c[$],U,!1);else sd(E,f,c,U,!1);void 0!==Sh&&Sh(E,l,a,c,f)}function al(s,a){if(null!==a){const c=a.type;if(3&c)return or(a,s);if(4&c)return Cs(-1,s[a.index]);if(8&c){const l=a.child;if(null!==l)return al(s,l);{const f=s[a.index];return Pi(f)?Cs(-1,f):zn(f)}}if(32&c)return il(a,s)()||zn(s[a.index]);{const l=Xt(s,a);return null!==l?Array.isArray(l)?l[0]:al(rd(s[rr]),l):al(s,a.next)}}return null}function Xt(s,a){return null!==a?s[rr][ur].projection[a.projection]:null}function Cs(s,a){const c=Ar+s+1;if(c<a.length){const l=a[c],f=l[ft].firstChild;if(null!==f)return al(l,f)}return a[Fr]}function uc(s,a,c,l,f,E,x){for(;null!=c;){const U=l[c.index],$=c.type;if(x&&0===a&&(U&&Pe(zn(U),l),c.flags|=2),32!=(32&c.flags))if(8&$)uc(s,a,c.child,l,f,E,!1),au(a,s,f,U,E);else if(32&$){const K=il(c,l);let ee;for(;ee=K();)au(a,s,f,ee,E);au(a,s,f,U,E)}else 16&$?_s(s,a,l,c,f,E):au(a,s,f,U,E);c=x?c.projectionNext:c.next}}function cu(s,a,c,l,f,E){uc(c,l,s.firstChild,a,f,E,!1)}function _s(s,a,c,l,f,E){const x=c[rr],$=x[ur].projection[l.projection];if(Array.isArray($))for(let K=0;K<$.length;K++)au(a,s,f,$[K],E);else uc(s,a,$,x[Nn],f,E,!0)}function Ty(s,a,c){""===c?s.removeAttribute(a,"class"):s.setAttribute(a,"class",c)}function Xr(s,a,c){const{mergedAttrs:l,classes:f,styles:E}=c;null!==l&&ps(s,a,l),null!==f&&Ty(s,a,f),null!==E&&function Eh(s,a,c){s.setAttribute(a,"style",c)}(s,a,E)}function sm(s){ad=s}function cd(s){return function Vs(){if(void 0===Ca&&(Ca=null,Yt.trustedTypes))try{Ca=Yt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return Ca}()?.createScriptURL(s)||s}class lc{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${z})`}}function zs(s){return s instanceof lc?s.changingThisBreaksApplicationSecurity:s}function dl(s,a){const c=function dc(s){return s instanceof lc&&s.getTypeName()||null}(s);if(null!=c&&c!==a){if("ResourceURL"===c&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${c} (see ${z})`)}return c===a}const cm=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var ir=(()=>((ir=ir||{})[ir.NONE=0]="NONE",ir[ir.HTML=1]="HTML",ir[ir.STYLE=2]="STYLE",ir[ir.SCRIPT=3]="SCRIPT",ir[ir.URL=4]="URL",ir[ir.RESOURCE_URL=5]="RESOURCE_URL",ir))();function Xp(s){const a=O();return a?a.sanitize(ir.URL,s)||"":dl(s,"URL")?zs(s):function Kp(s){return(s=String(s)).match(cm)?s:"unsafe:"+s}(X(s))}function gl(s){const a=O();if(a)return cd(a.sanitize(ir.RESOURCE_URL,s)||"");if(dl(s,"ResourceURL"))return cd(zs(s));throw new V(904,!1)}function R(s,a,c){return function pd(s,a){return"src"===a&&("embed"===s||"frame"===s||"iframe"===s||"media"===s||"script"===s)||"href"===a&&("base"===s||"link"===s)?gl:Xp}(a,c)(s)}function O(){const s=Re();return s&&s[Ko]}const W=new dn("ENVIRONMENT_INITIALIZER"),Y=new dn("INJECTOR",-1),oe=new dn("INJECTOR_DEF_TYPES");class ve{get(a,c=rn){if(c===rn){const l=new Error(`NullInjectorError: No provider for ${S(a)}!`);throw l.name="NullInjectorError",l}return c}}function $e(s){return{\u0275providers:s}}function ze(...s){return{\u0275providers:ct(0,s),\u0275fromNgModule:!0}}function ct(s,...a){const c=[],l=new Set;let f;return Fs(a,E=>{const x=E;cn(x,c,[],l)&&(f||(f=[]),f.push(x))}),void 0!==f&&gt(f,c),c}function gt(s,a){for(let c=0;c<s.length;c++){const{providers:f}=s[c];Ho(f,E=>{a.push(E)})}}function cn(s,a,c,l){if(!(s=M(s)))return!1;let f=null,E=Cn(s);const x=!E&&Rt(s);if(E||x){if(x&&!x.standalone)return!1;f=s}else{const $=s.ngModule;if(E=Cn($),!E)return!1;f=$}const U=l.has(f);if(x){if(U)return!1;if(l.add(f),x.dependencies){const $="function"==typeof x.dependencies?x.dependencies():x.dependencies;for(const K of $)cn(K,a,c,l)}}else{if(!E)return!1;{if(null!=E.imports&&!U){let K;l.add(f);try{Fs(E.imports,ee=>{cn(ee,a,c,l)&&(K||(K=[]),K.push(ee))})}finally{}void 0!==K&&gt(K,a)}if(!U){const K=ta(f)||(()=>new f);a.push({provide:f,useFactory:K,deps:We},{provide:oe,useValue:f,multi:!0},{provide:W,useValue:()=>mn(f),multi:!0})}const $=E.providers;null==$||U||Ho($,ee=>{a.push(ee)})}}return f!==s&&void 0!==s.providers}function Ho(s,a){for(let c of s)N(c)&&(c=c.\u0275providers),Array.isArray(c)?Ho(c,a):a(c)}const Ph=P({provide:String,useValue:P});function fd(s){return null!==s&&"object"==typeof s&&Ph in s}function _a(s){return"function"==typeof s}const Rh=new dn("Set Injector scope."),ml={},tf={};let gd;function fc(){return void 0===gd&&(gd=new ve),gd}class Ni{}class md extends Ni{get destroyed(){return this._destroyed}constructor(a,c,l,f){super(),this.parent=c,this.source=l,this.scopes=f,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,nf(a,x=>this.processProvider(x)),this.records.set(Y,vd(void 0,this)),f.has("environment")&&this.records.set(Ni,vd(void 0,this));const E=this.records.get(Rh);null!=E&&"string"==typeof E.value&&this.scopes.add(E.value),this.injectorDefTypes=new Set(this.get(oe.multi,We,at.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const a of this._ngOnDestroyHooks)a.ngOnDestroy();for(const a of this._onDestroyHooks)a()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(a){this._onDestroyHooks.push(a)}runInContext(a){this.assertNotDestroyed();const c=Qt(this),l=Vn(void 0);try{return a()}finally{Qt(c),Vn(l)}}get(a,c=rn,l=at.Default){this.assertNotDestroyed(),l=je(l);const f=Qt(this),E=Vn(void 0);try{if(!(l&at.SkipSelf)){let U=this.records.get(a);if(void 0===U){const $=function Sw(s){return"function"==typeof s||"object"==typeof s&&s instanceof dn}(a)&&Gt(a);U=$&&this.injectableDefInScope($)?vd(fm(a),ml):null,this.records.set(a,U)}if(null!=U)return this.hydrate(a,U)}return(l&at.Self?fc():this.parent).get(a,c=l&at.Optional&&c===rn?null:c)}catch(x){if("NullInjectorError"===x.name){if((x[sn]=x[sn]||[]).unshift(S(a)),f)throw x;return function yn(s,a,c,l){const f=s[sn];throw a[ln]&&f.unshift(a[ln]),s.message=function ue(s,a,c,l=null){s=s&&"\n"===s.charAt(0)&&s.charAt(1)==cr?s.slice(2):s;let f=S(a);if(Array.isArray(a))f=a.map(S).join(" -> ");else if("object"==typeof a){let E=[];for(let x in a)if(a.hasOwnProperty(x)){let U=a[x];E.push(x+":"+("string"==typeof U?JSON.stringify(U):S(U)))}f=`{${E.join(", ")}}`}return`${c}${l?"("+l+")":""}[${f}]: ${s.replace(Dn,"\n  ")}`}("\n"+s.message,f,c,l),s[bn]=f,s[sn]=null,s}(x,a,"R3InjectorError",this.source)}throw x}finally{Vn(E),Qt(f)}}resolveInjectorInitializers(){const a=Qt(this),c=Vn(void 0);try{const l=this.get(W.multi,We,at.Self);for(const f of l)f()}finally{Qt(a),Vn(c)}}toString(){const a=[],c=this.records;for(const l of c.keys())a.push(S(l));return`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new V(205,!1)}processProvider(a){let c=_a(a=M(a))?a:M(a&&a.provide);const l=function PI(s){return fd(s)?vd(void 0,s.useValue):vd(vl(s),ml)}(a);if(_a(a)||!0!==a.multi)this.records.get(c);else{let f=this.records.get(c);f||(f=vd(void 0,ml,!0),f.factory=()=>nt(f.multi),this.records.set(c,f)),c=a,f.multi.push(a)}this.records.set(c,l)}hydrate(a,c){return c.value===ml&&(c.value=tf,c.value=c.factory()),"object"==typeof c.value&&c.value&&function gm(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(c.value)&&this._ngOnDestroyHooks.add(c.value),c.value}injectableDefInScope(a){if(!a.providedIn)return!1;const c=M(a.providedIn);return"string"==typeof c?"any"===c||this.scopes.has(c):this.injectorDefTypes.has(c)}}function fm(s){const a=Gt(s),c=null!==a?a.factory:ta(s);if(null!==c)return c;if(s instanceof dn)throw new V(204,!1);if(s instanceof Function)return function ww(s){const a=s.length;if(a>0)throw function Zu(s,a){const c=[];for(let l=0;l<s;l++)c.push(a);return c}(a,"?"),new V(204,!1);const c=function Un(s){return s&&(s[kn]||s[_n])||null}(s);return null!==c?()=>c.factory(s):()=>new s}(s);throw new V(204,!1)}function vl(s,a,c){let l;if(_a(s)){const f=M(s);return ta(f)||fm(f)}if(fd(s))l=()=>M(s.useValue);else if(function ef(s){return!(!s||!s.useFactory)}(s))l=()=>s.useFactory(...nt(s.deps||[]));else if(function Dh(s){return!(!s||!s.useExisting)}(s))l=()=>mn(M(s.useExisting));else{const f=M(s&&(s.useClass||s.provide));if(!function DI(s){return!!s.deps}(s))return ta(f)||fm(f);l=()=>new f(...nt(s.deps))}return l}function vd(s,a,c=!1){return{factory:s,value:a,multi:c?[]:void 0}}function nf(s,a){for(const c of s)Array.isArray(c)?nf(c,a):c&&N(c)?nf(c.\u0275providers,a):a(c)}class Ew{}class mm{}class RI{resolveComponentFactory(a){throw function xy(s){const a=Error(`No component factory found for ${S(s)}. Did you add it to @NgModule.entryComponents?`);return a.ngComponent=s,a}(a)}}let rf=(()=>{class s{}return s.NULL=new RI,s})();function Ny(){return yd(Jn(),Re())}function yd(s,a){return new Mh(or(s,a))}let Mh=(()=>{class s{constructor(c){this.nativeElement=c}}return s.__NG_ELEMENT_ID__=Ny,s})();function bw(s){return s instanceof Mh?s.nativeElement:s}class ky{}let MI=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function sf(){const s=Re(),c=Kn(Jn().index,s);return(Jr(c)?c:s)[Kt]}(),s})(),ym=(()=>{class s{}return s.\u0275prov=vt({token:s,providedIn:"root",factory:()=>null}),s})();class Cm{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const Tw=new Cm("15.2.9"),Ly={},af="ngOriginalError";function Pw(s){return s[af]}class _m{constructor(){this._console=console}handleError(a){const c=this._findOriginalError(a);this._console.error("ERROR",a),c&&this._console.error("ORIGINAL ERROR",c)}_findOriginalError(a){let c=a&&Pw(a);for(;c&&Pw(c);)c=Pw(c);return c||null}}function gc(s){return s instanceof Function?s():s}function Dw(s,a,c){let l=s.length;for(;;){const f=s.indexOf(a,c);if(-1===f)return f;if(0===f||s.charCodeAt(f-1)<=32){const E=a.length;if(f+E===l||s.charCodeAt(f+E)<=32)return f}c=f+1}}const Cd="ng-template";function lf(s,a,c){let l=0,f=!0;for(;l<s.length;){let E=s[l++];if("string"==typeof E&&f){const x=s[l++];if(c&&"class"===E&&-1!==Dw(x.toLowerCase(),a,0))return!0}else{if(1===E){for(;l<s.length&&"string"==typeof(E=s[l++]);)if(E.toLowerCase()===a)return!0;return!1}"number"==typeof E&&(f=!1)}}return!1}function Rw(s){return 4===s.type&&s.value!==Cd}function FI(s,a,c){return a===(4!==s.type||c?s.value:Cd)}function df(s,a,c){let l=4;const f=s.attrs||[],E=function BI(s){for(let a=0;a<s.length;a++)if(j(s[a]))return a;return s.length}(f);let x=!1;for(let U=0;U<a.length;U++){const $=a[U];if("number"!=typeof $){if(!x)if(4&l){if(l=2|1&l,""!==$&&!FI(s,$,c)||""===$&&1===a.length){if(Ss(l))return!1;x=!0}}else{const K=8&l?$:a[++U];if(8&l&&null!==s.attrs){if(!lf(s.attrs,K,c)){if(Ss(l))return!1;x=!0}continue}const ie=jI(8&l?"class":$,f,Rw(s),c);if(-1===ie){if(Ss(l))return!1;x=!0;continue}if(""!==K){let me;me=ie>E?"":f[ie+1].toLowerCase();const Se=8&l?me:null;if(Se&&-1!==Dw(Se,K,0)||2&l&&K!==me){if(Ss(l))return!1;x=!0}}}}else{if(!x&&!Ss(l)&&!Ss($))return!1;if(x&&Ss($))continue;x=!1,l=$|1&l}}return Ss(l)||x}function Ss(s){return 0==(1&s)}function jI(s,a,c,l){if(null===a)return-1;let f=0;if(l||!c){let E=!1;for(;f<a.length;){const x=a[f];if(x===s)return f;if(3===x||6===x)E=!0;else{if(1===x||2===x){let U=a[++f];for(;"string"==typeof U;)U=a[++f];continue}if(4===x)break;if(0===x){f+=4;continue}}f+=E?1:2}return-1}return function VI(s,a){let c=s.indexOf(4);if(c>-1)for(c++;c<s.length;){const l=s[c];if("number"==typeof l)return-1;if(l===a)return c;c++}return-1}(a,s)}function Mw(s,a,c=!1){for(let l=0;l<a.length;l++)if(df(s,a[l],c))return!0;return!1}function HI(s,a){return s?":not("+a.trim()+")":a}function $I(s){let a=s[0],c=1,l=2,f="",E=!1;for(;c<s.length;){let x=s[c];if("string"==typeof x)if(2&l){const U=s[++c];f+="["+x+(U.length>0?'="'+U+'"':"")+"]"}else 8&l?f+="."+x:4&l&&(f+=" "+x);else""!==f&&!Ss(x)&&(a+=HI(E,f),f=""),l=x,E=E||!Ss(l);c++}return""!==f&&(a+=HI(E,f)),a}const Zt={};function Ow(s){xw(Wt(),Re(),dr()+s,!1)}function xw(s,a,c,l){if(!l)if(3==(3&a[jt])){const E=s.preOrderCheckHooks;null!==E&&Wc(a,E,c)}else{const E=s.preOrderHooks;null!==E&&Ka(a,E,0,c)}qi(c)}function Sm(s,a=null,c=null,l){const f=By(s,a,c,l);return f.resolveInjectorInitializers(),f}function By(s,a=null,c=null,l,f=new Set){const E=[c||We,ze(s)];return l=l||("object"==typeof s?void 0:S(s)),new md(E,a||fc(),l||null,f)}let hu=(()=>{class s{static create(c,l){if(Array.isArray(c))return Sm({name:""},l,c,"");{const f=c.name??"";return Sm({name:f},c.parent,c.providers,f)}}}return s.THROW_IF_NOT_FOUND=rn,s.NULL=new ve,s.\u0275prov=vt({token:s,providedIn:"any",factory:()=>mn(Y)}),s.__NG_ELEMENT_ID__=-1,s})();function _d(s,a=at.Default){const c=Re();return null===c?mn(s,a):nh(Jn(),c,M(s),a)}function Gy(){throw new Error("invalid")}function Zw(s,a){const c=s.contentQueries;if(null!==c)for(let l=0;l<c.length;l+=2){const E=c[l+1];if(-1!==E){const x=s.data[E];Ga(c[l]),x.contentQueries(2,a[E],E)}}}function Am(s,a,c,l,f,E,x,U,$,K,ee){const ie=a.blueprint.slice();return ie[ii]=f,ie[jt]=76|l,(null!==ee||s&&1024&s[jt])&&(ie[jt]|=1024),cs(ie),ie[Nn]=ie[oi]=s,ie[Zn]=c,ie[Ti]=x||s&&s[Ti],ie[Kt]=U||s&&s[Kt],ie[Ko]=$||s&&s[Ko]||null,ie[Zo]=K||s&&s[Zo]||null,ie[ur]=E,ie[Io]=function nd(){return td++}(),ie[Lr]=ee,ie[rr]=2==a.type?s[rr]:ie,ie}function Oh(s,a,c,l,f){let E=s.data[a];if(null===E)E=function Pm(s,a,c,l,f){const E=Vc(),x=za(),$=s.data[a]=function ab(s,a,c,l,f,E){return{type:c,index:l,insertBeforeIndex:null,injectorIndex:a?a.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:E,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,x?E:E&&E.parent,c,a,l,f);return null===s.firstChild&&(s.firstChild=$),null!==E&&(x?null==E.child&&null!==$.parent&&(E.child=$):null===E.next&&(E.next=$,$.prev=E)),$}(s,a,c,l,f),function Ha(){return Ut.lFrame.inI18n}()&&(E.flags|=32);else if(64&E.type){E.type=c,E.value=l,E.attrs=f;const x=function ia(){const s=Ut.lFrame,a=s.currentTNode;return s.isParent?a:a.parent}();E.injectorIndex=null===x?-1:x.injectorIndex}return vi(E,!0),E}function wd(s,a,c,l){if(0===c)return-1;const f=a.length;for(let E=0;E<c;E++)a.push(l),s.blueprint.push(l),s.data.push(null);return f}function Dm(s,a,c){xo(a);try{const l=s.viewQuery;null!==l&&Lm(1,l,c);const f=s.template;null!==f&&Rm(s,a,f,1,c),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&Zw(s,a),s.staticViewQueries&&Lm(2,s.viewQuery,c);const E=s.components;null!==E&&function sb(s,a){for(let c=0;c<a.length;c++)a0(s,a[c])}(a,E)}catch(l){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),l}finally{a[jt]&=-5,ju()}}function pu(s,a,c,l){const f=a[jt];if(128!=(128&f)){xo(a);try{cs(a),function us(s){return Ut.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==c&&Rm(s,a,c,2,l);const x=3==(3&f);if(x){const K=s.preOrderCheckHooks;null!==K&&Wc(a,K,null)}else{const K=s.preOrderHooks;null!==K&&Ka(a,K,0,null),aa(a,0)}if(function pb(s){for(let a=ou(s);null!==a;a=Fp(a)){if(!a[xa])continue;const c=a[Js];for(let l=0;l<c.length;l++){const f=c[l];512&f[jt]||ra(f[Nn],1),f[jt]|=512}}}(a),function Jy(s){for(let a=ou(s);null!==a;a=Fp(a))for(let c=Ar;c<a.length;c++){const l=a[c],f=l[ft];as(l)&&pu(f,l,f.template,l[Zn])}}(a),null!==s.contentQueries&&Zw(s,a),x){const K=s.contentCheckHooks;null!==K&&Wc(a,K)}else{const K=s.contentHooks;null!==K&&Ka(a,K,1),aa(a,1)}!function rb(s,a){const c=s.hostBindingOpCodes;if(null!==c)try{for(let l=0;l<c.length;l++){const f=c[l];if(f<0)qi(~f);else{const E=f,x=c[++l],U=c[++l];sa(x,E),U(2,a[E])}}}finally{qi(-1)}}(s,a);const U=s.components;null!==U&&function ib(s,a){for(let c=0;c<a.length;c++)OD(s,a[c])}(a,U);const $=s.viewQuery;if(null!==$&&Lm(2,$,l),x){const K=s.viewCheckHooks;null!==K&&Wc(a,K)}else{const K=s.viewHooks;null!==K&&Ka(a,K,2),aa(a,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),a[jt]&=-41,512&a[jt]&&(a[jt]&=-513,ra(a[Nn],-1))}finally{ju()}}}function Rm(s,a,c,l,f){const E=dr(),x=2&l;try{qi(-1),x&&a.length>Fn&&xw(s,a,Fn,!1),ai(x?2:0,f),c(l,f)}finally{qi(E),ai(x?3:1,f)}}function Wy(s,a,c){if(Yo(a)){const f=a.directiveEnd;for(let E=a.directiveStart;E<f;E++){const x=s.data[E];x.contentQueries&&x.contentQueries(1,c[E],E)}}}function Mm(s,a,c){jc()&&(function yl(s,a,c,l){const f=c.directiveStart,E=c.directiveEnd;Qo(c)&&function po(s,a,c){const l=or(a,s),f=pf(c),E=s[Ti],x=Nh(s,Am(s,f,null,c.onPush?32:16,l,a,E,E.createRenderer(l,c),null,null,null));s[a.index]=x}(a,c,s.data[f+c.componentOffset]),s.firstCreatePass||th(c,a),Pe(l,a);const x=c.initialInputs;for(let U=f;U<E;U++){const $=s.data[U],K=hr(a,s,U,c);Pe(K,a),null!==x&&MD(0,U-f,K,$,0,x),$i($)&&(Kn(c.index,a)[Zn]=hr(a,s,U,c))}}(s,a,c,or(c,a)),64==(64&c.flags)&&e0(s,a,c))}function xh(s,a,c=or){const l=a.localNames;if(null!==l){let f=a.index+1;for(let E=0;E<l.length;E+=2){const x=l[E+1],U=-1===x?c(a,s):s[x];s[f++]=U}}}function pf(s){const a=s.tView;return null===a||a.incompleteFirstPass?s.tView=Om(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):a}function Om(s,a,c,l,f,E,x,U,$,K){const ee=Fn+l,ie=ee+f,me=function Kw(s,a){const c=[];for(let l=0;l<a;l++)c.push(l<s?null:Zt);return c}(ee,ie),Se="function"==typeof K?K():K;return me[ft]={type:s,blueprint:me,template:c,queries:null,viewQuery:U,declTNode:a,data:me.slice().fill(null,ee),bindingStartIndex:ee,expandoStartIndex:ie,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof E?E():E,pipeRegistry:"function"==typeof x?x():x,firstChild:null,schemas:$,consts:Se,incompleteFirstPass:!1}}function Jw(s,a,c,l){const f=fb(a);null===c?f.push(l):(f.push(c),s.firstCreatePass&&gb(s).push(l,f.length-1))}function Yw(s,a,c,l){for(let f in s)if(s.hasOwnProperty(f)){c=null===c?{}:c;const E=s[f];null===l?Qw(c,a,f,E):l.hasOwnProperty(f)&&Qw(c,a,l[f],E)}return c}function Qw(s,a,c,l){s.hasOwnProperty(c)?s[c].push(a,l):s[c]=[a,l]}function Zy(s,a,c,l){if(jc()){const f=null===l?null:{"":-1},E=function t0(s,a){const c=s.directiveRegistry;let l=null,f=null;if(c)for(let E=0;E<c.length;E++){const x=c[E];if(Mw(a,x.selectors,!1))if(l||(l=[]),$i(x))if(null!==x.findHostDirectiveDefs){const U=[];f=f||new Map,x.findHostDirectiveDefs(x,U,f),l.unshift(...U,x),n0(s,a,U.length)}else l.unshift(x),n0(s,a,0);else f=f||new Map,x.findHostDirectiveDefs?.(x,l,f),l.push(x)}return null===l?null:[l,f]}(s,c);let x,U;null===E?x=U=null:[x,U]=E,null!==x&&Xw(s,a,c,x,f,U),f&&function RD(s,a,c){if(a){const l=s.localNames=[];for(let f=0;f<a.length;f+=2){const E=c[a[f+1]];if(null==E)throw new V(-301,!1);l.push(a[f],E)}}}(c,l,f)}c.mergedAttrs=Q(c.mergedAttrs,c.attrs)}function Xw(s,a,c,l,f,E){for(let K=0;K<l.length;K++)Ls(th(c,a),s,l[K].type);!function Ky(s,a,c){s.flags|=1,s.directiveStart=a,s.directiveEnd=a+c,s.providerIndexes=a}(c,s.data.length,l.length);for(let K=0;K<l.length;K++){const ee=l[K];ee.providersResolver&&ee.providersResolver(ee)}let x=!1,U=!1,$=wd(s,a,l.length,null);for(let K=0;K<l.length;K++){const ee=l[K];c.mergedAttrs=Q(c.mergedAttrs,ee.hostAttrs),r0(s,c,a,$,ee),hb($,ee,f),null!==ee.contentQueries&&(c.flags|=4),(null!==ee.hostBindings||null!==ee.hostAttrs||0!==ee.hostVars)&&(c.flags|=64);const ie=ee.type.prototype;!x&&(ie.ngOnChanges||ie.ngOnInit||ie.ngDoCheck)&&((s.preOrderHooks??(s.preOrderHooks=[])).push(c.index),x=!0),!U&&(ie.ngOnChanges||ie.ngDoCheck)&&((s.preOrderCheckHooks??(s.preOrderCheckHooks=[])).push(c.index),U=!0),$++}!function xm(s,a,c){const f=a.directiveEnd,E=s.data,x=a.attrs,U=[];let $=null,K=null;for(let ee=a.directiveStart;ee<f;ee++){const ie=E[ee],me=c?c.get(ie):null,He=me?me.outputs:null;$=Yw(ie.inputs,ee,$,me?me.inputs:null),K=Yw(ie.outputs,ee,K,He);const rt=null===$||null===x||Rw(a)?null:s0($,ee,x);U.push(rt)}null!==$&&($.hasOwnProperty("class")&&(a.flags|=8),$.hasOwnProperty("style")&&(a.flags|=16)),a.initialInputs=U,a.inputs=$,a.outputs=K}(s,c,E)}function e0(s,a,c){const l=c.directiveStart,f=c.directiveEnd,E=c.index,x=function jl(){return Ut.lFrame.currentDirectiveIndex}();try{qi(E);for(let U=l;U<f;U++){const $=s.data[U],K=a[U];Yn(U),(null!==$.hostBindings||0!==$.hostVars||null!==$.hostAttrs)&&db($,K)}}finally{qi(-1),Yn(x)}}function db(s,a){null!==s.hostBindings&&s.hostBindings(1,a)}function n0(s,a,c){a.componentOffset=c,(s.components??(s.components=[])).push(a.index)}function hb(s,a,c){if(c){if(a.exportAs)for(let l=0;l<a.exportAs.length;l++)c[a.exportAs[l]]=s;$i(a)&&(c[""]=s)}}function r0(s,a,c,l,f){s.data[l]=f;const E=f.factory||(f.factory=ta(f.type)),x=new Br(E,$i(f),_d);s.blueprint[l]=x,c[l]=x,function wr(s,a,c,l,f){const E=f.hostBindings;if(E){let x=s.hostBindingOpCodes;null===x&&(x=s.hostBindingOpCodes=[]);const U=~a.index;(function lb(s){let a=s.length;for(;a>0;){const c=s[--a];if("number"==typeof c&&c<0)return c}return 0})(x)!=U&&x.push(U),x.push(c,l,E)}}(s,a,l,wd(s,c,f.hostVars,Zt),f)}function vc(s,a,c,l,f,E){const x=or(s,a);!function Cl(s,a,c,l,f,E,x){if(null==E)s.removeAttribute(a,f,c);else{const U=null==x?X(E):x(E,l||"",f);s.setAttribute(a,f,U,c)}}(a[Kt],x,E,s.value,c,l,f)}function MD(s,a,c,l,f,E){const x=E[a];if(null!==x){const U=l.setInput;for(let $=0;$<x.length;){const K=x[$++],ee=x[$++],ie=x[$++];null!==U?l.setInput(c,ie,K,ee):c[ee]=ie}}}function s0(s,a,c){let l=null,f=0;for(;f<c.length;){const E=c[f];if(0!==E)if(5!==E){if("number"==typeof E)break;if(s.hasOwnProperty(E)){null===l&&(l=[]);const x=s[E];for(let U=0;U<x.length;U+=2)if(x[U]===a){l.push(E,x[U+1],c[f+1]);break}}f+=2}else f+=2;else f+=4}return l}function fu(s,a,c,l){return[s,!0,!1,a,null,0,l,c,null,null]}function OD(s,a){const c=Kn(a,s);if(as(c)){const l=c[ft];48&c[jt]?pu(l,c,l.template,c[Zn]):c[gi]>0&&o0(c)}}function o0(s){for(let l=ou(s);null!==l;l=Fp(l))for(let f=Ar;f<l.length;f++){const E=l[f];if(as(E))if(512&E[jt]){const x=E[ft];pu(x,E,x.template,E[Zn])}else E[gi]>0&&o0(E)}const c=s[ft].components;if(null!==c)for(let l=0;l<c.length;l++){const f=Kn(c[l],s);as(f)&&f[gi]>0&&o0(f)}}function a0(s,a){const c=Kn(a,s),l=c[ft];(function c0(s,a){for(let c=a.length;c<s.blueprint.length;c++)a.push(s.blueprint[c])})(l,c),Dm(l,c,c[Zn])}function Nh(s,a){return s[rs]?s[Jo][si]=a:s[rs]=a,s[Jo]=a,a}function Nm(s){for(;s;){s[jt]|=32;const a=rd(s);if(bo(s)&&!a)return s;s=a}return null}function km(s,a,c,l=!0){const f=a[Ti];f.begin&&f.begin();try{pu(s,a,s.template,c)}catch(x){throw l&&kh(a,x),x}finally{f.end&&f.end()}}function Lm(s,a,c){Ga(0),a(s,c)}function fb(s){return s[Vi]||(s[Vi]=[])}function gb(s){return s.cleanup||(s.cleanup=[])}function kh(s,a){const c=s[Zo],l=c?c.get(_m,null):null;l&&l.handleError(a)}function u0(s,a,c,l,f){for(let E=0;E<c.length;){const x=c[E++],U=c[E++],$=a[x],K=s.data[x];null!==K.setInput?K.setInput($,f,l,U):$[U]=f}}function yc(s,a,c){const l=Xs(a,s);!function Kg(s,a,c){s.setValue(a,c)}(s[Kt],l,c)}function Fm(s,a,c){let l=c?s.styles:null,f=c?s.classes:null,E=0;if(null!==a)for(let x=0;x<a.length;x++){const U=a[x];"number"==typeof U?E=U:1==E?f=h(f,U):2==E&&(l=h(l,U+": "+a[++x]+";"))}c?s.styles=l:s.stylesWithoutHost=l,c?s.classes=f:s.classesWithoutHost=f}function jm(s,a,c,l,f=!1){for(;null!==c;){const E=a[c.index];if(null!==E&&l.push(zn(E)),Pi(E))for(let U=Ar;U<E.length;U++){const $=E[U],K=$[ft].firstChild;null!==K&&jm($[ft],$,K,l)}const x=c.type;if(8&x)jm(s,a,c.child,l);else if(32&x){const U=il(c,a);let $;for(;$=U();)l.push($)}else if(16&x){const U=Xt(a,c);if(Array.isArray(U))l.push(...U);else{const $=rd(a[rr]);jm($[ft],$,U,l,!0)}}c=f?c.projectionNext:c.next}return l}class Sd{get rootNodes(){const a=this._lView,c=a[ft];return jm(c,a,c.firstChild,[])}constructor(a,c){this._lView=a,this._cdRefInjectingView=c,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Zn]}set context(a){this._lView[Zn]=a}get destroyed(){return 128==(128&this._lView[jt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[Nn];if(Pi(a)){const c=a[Os],l=c?c.indexOf(this):-1;l>-1&&(ga(a,l),eu(c,l))}this._attachedToViewContainer=!1}ma(this._lView[ft],this._lView)}onDestroy(a){Jw(this._lView[ft],this._lView,null,a)}markForCheck(){Nm(this._cdRefInjectingView||this._lView)}detach(){this._lView[jt]&=-65}reattach(){this._lView[jt]|=64}detectChanges(){km(this._lView[ft],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new V(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Iy(s,a){cu(s,a,a[Kt],2,null,null)}(this._lView[ft],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new V(902,!1);this._appRef=a}}class vb extends Sd{constructor(a){super(a),this._view=a}detectChanges(){const a=this._view;km(a[ft],a,a[Zn],!1)}checkNoChanges(){}get context(){return null}}class l0 extends rf{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const c=Rt(a);return new Lh(c,this.ngModule)}}function d0(s){const a=[];for(let c in s)s.hasOwnProperty(c)&&a.push({propName:s[c],templateName:c});return a}class Cb{constructor(a,c){this.injector=a,this.parentInjector=c}get(a,c,l){l=je(l);const f=this.injector.get(a,Ly,l);return f!==Ly||c===Ly?f:this.parentInjector.get(a,c,l)}}class Lh extends mm{get inputs(){return d0(this.componentDef.inputs)}get outputs(){return d0(this.componentDef.outputs)}constructor(a,c){super(),this.componentDef=a,this.ngModule=c,this.componentType=a.type,this.selector=function Uy(s){return s.map($I).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!c}create(a,c,l,f){let E=(f=f||this.ngModule)instanceof Ni?f:f?.injector;E&&null!==this.componentDef.getStandaloneInjector&&(E=this.componentDef.getStandaloneInjector(E)||E);const x=E?new Cb(a,E):a,U=x.get(ky,null);if(null===U)throw new V(407,!1);const $=x.get(ym,null),K=U.createRenderer(null,this.componentDef),ee=this.componentDef.selectors[0][0]||"div",ie=l?function ob(s,a,c){return s.selectRootElement(a,c===Ue.ShadowDom)}(K,l,this.componentDef.encapsulation):jp(K,ee,function yb(s){const a=s.toLowerCase();return"svg"===a?Qs:"math"===a?"math":null}(ee)),me=this.componentDef.onPush?288:272,Se=Om(0,null,null,1,0,null,null,null,null,null),He=Am(null,Se,null,me,null,null,U,K,$,x,null);let rt,mt;xo(He);try{const At=this.componentDef;let Bt,Ze=null;At.findHostDirectiveDefs?(Bt=[],Ze=new Map,At.findHostDirectiveDefs(At,Bt,Ze),Bt.push(At)):Bt=[At];const nn=function wb(s,a){const c=s[ft],l=Fn;return s[l]=a,Oh(c,l,2,"#host",null)}(He,ie),vr=function wa(s,a,c,l,f,E,x,U){const $=f[ft];!function h0(s,a,c,l){for(const f of s)a.mergedAttrs=Q(a.mergedAttrs,f.hostAttrs);null!==a.mergedAttrs&&(Fm(a,a.mergedAttrs,!0),null!==c&&Xr(l,c,a))}(l,s,a,x);const K=E.createRenderer(a,c),ee=Am(f,pf(c),null,c.onPush?32:16,f[s.index],s,E,K,U||null,null,null);return $.firstCreatePass&&n0($,s,l.length-1),Nh(f,ee),f[s.index]=ee}(nn,ie,At,Bt,He,U,K);mt=Fc(Se,Fn),ie&&function p0(s,a,c,l){if(l)ps(s,c,["ng-version",Tw.full]);else{const{attrs:f,classes:E}=function wm(s){const a=[],c=[];let l=1,f=2;for(;l<s.length;){let E=s[l];if("string"==typeof E)2===f?""!==E&&a.push(E,s[++l]):8===f&&c.push(E);else{if(!Ss(f))break;f=E}l++}return{attrs:a,classes:c}}(a.selectors[0]);f&&ps(s,c,f),E&&E.length>0&&Ty(s,c,E.join(" "))}}(K,At,ie,l),void 0!==c&&function Sb(s,a,c){const l=s.projection=[];for(let f=0;f<a.length;f++){const E=c[f];l.push(null!=E?Array.from(E):null)}}(mt,this.ngContentSelectors,c),rt=function Yy(s,a,c,l,f,E){const x=Jn(),U=f[ft],$=or(x,f);Xw(U,f,x,c,null,l);for(let ee=0;ee<c.length;ee++)Pe(hr(f,U,x.directiveStart+ee,x),f);e0(U,f,x),$&&Pe($,f);const K=hr(f,U,x.directiveStart+x.componentOffset,x);if(s[Zn]=f[Zn]=K,null!==E)for(const ee of E)ee(K,a);return Wy(U,x,s),K}(vr,At,Bt,Ze,He,[Um]),Dm(Se,He,null)}finally{ju()}return new _b(this.componentType,rt,yd(mt,He),He,mt)}}class _b extends Ew{constructor(a,c,l,f,E){super(),this.location=l,this._rootLView=f,this._tNode=E,this.instance=c,this.hostView=this.changeDetectorRef=new vb(f),this.componentType=a}setInput(a,c){const l=this._tNode.inputs;let f;if(null!==l&&(f=l[a])){const E=this._rootLView;u0(E[ft],E,f,a,c),Nm(Kn(this._tNode.index,E))}}get injector(){return new ro(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}function Um(){const s=Jn();No(Re()[ft],s)}function Qy(s){let a=function f0(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),c=!0;const l=[s];for(;a;){let f;if($i(s))f=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new V(903,!1);f=a.\u0275dir}if(f){if(c){l.push(f);const x=s;x.inputs=ff(s.inputs),x.declaredInputs=ff(s.declaredInputs),x.outputs=ff(s.outputs);const U=f.hostBindings;U&&nC(s,U);const $=f.viewQuery,K=f.contentQueries;if($&&eC(s,$),K&&tC(s,K),w(s.inputs,f.inputs),w(s.declaredInputs,f.declaredInputs),w(s.outputs,f.outputs),$i(f)&&f.data.animation){const ee=s.data;ee.animation=(ee.animation||[]).concat(f.data.animation)}}const E=f.features;if(E)for(let x=0;x<E.length;x++){const U=E[x];U&&U.ngInherit&&U(s),U===Qy&&(c=!1)}}a=Object.getPrototypeOf(a)}!function Xy(s){let a=0,c=null;for(let l=s.length-1;l>=0;l--){const f=s[l];f.hostVars=a+=f.hostVars,f.hostAttrs=Q(f.hostAttrs,c=Q(c,f.hostAttrs))}}(l)}function ff(s){return s===Ie?{}:s===We?[]:s}function eC(s,a){const c=s.viewQuery;s.viewQuery=c?(l,f)=>{a(l,f),c(l,f)}:a}function tC(s,a){const c=s.contentQueries;s.contentQueries=c?(l,f,E)=>{a(l,f,E),c(l,f,E)}:a}function nC(s,a){const c=s.hostBindings;s.hostBindings=c?(l,f)=>{a(l,f),c(l,f)}:a}function Ed(s){return!!rC(s)&&(Array.isArray(s)||!(s instanceof Map)&&Symbol.iterator in s)}function rC(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Sa(s,a,c){return s[a]=c}function Rn(s,a,c){return!Object.is(s[a],c)&&(s[a]=c,!0)}function Li(s,a,c,l){const f=Rn(s,a,c);return Rn(s,a+1,l)||f}function iC(s,a,c,l){const f=Re();return Rn(f,ls(),a)&&(Wt(),vc(jn(),f,s,a,c,l)),iC}function wl(s,a,c,l,f,E){const U=Li(s,function jr(){return Ut.lFrame.bindingIndex}(),c,f);return ci(2),U?a+X(c)+l+X(f)+E:Zt}function oC(s,a,c,l,f,E,x,U){const $=Re(),K=Wt(),ee=s+Fn,ie=K.firstCreatePass?function sC(s,a,c,l,f,E,x,U,$){const K=a.consts,ee=Oh(a,s,4,x||null,_r(K,U));Zy(a,c,ee,_r(K,$)),No(a,ee);const ie=ee.tView=Om(2,ee,l,f,E,a.directiveRegistry,a.pipeRegistry,null,a.schemas,K);return null!==a.queries&&(a.queries.template(a,ee),ie.queries=a.queries.embeddedTView(ee)),ee}(ee,K,$,a,c,l,f,E,x):K.data[ee];vi(ie,!1);const me=$[Kt].createComment("");od(K,$,me,ie),Pe(me,$),Nh($,$[ee]=fu(me,$,me,ie)),Na(ie)&&Mm(K,$,ie),null!=x&&xh($,ie,U)}function Sr(s){return Yr(function Fu(){return Ut.lFrame.contextLView}(),Fn+s)}function aC(s,a,c){const l=Re();return Rn(l,ls(),a)&&function ho(s,a,c,l,f,E,x,U){const $=or(a,c);let ee,K=a.inputs;!U&&null!=K&&(ee=K[l])?(u0(s,c,ee,l,f),Qo(a)&&function qy(s,a){const c=Kn(a,s);16&c[jt]||(c[jt]|=32)}(c,a.index)):3&a.type&&(l=function cb(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(l),f=null!=x?x(f,a.value||"",l):f,E.setProperty($,l,f))}(Wt(),jn(),l,s,a,l[Kt],c,!1),aC}function Vh(s,a,c,l,f){const x=f?"class":"style";u0(s,c,a.inputs[x],x,l)}function Bm(s,a,c,l){const f=Re(),E=Wt(),x=Fn+s,U=f[Kt],$=E.firstCreatePass?function cC(s,a,c,l,f,E){const x=a.consts,$=Oh(a,s,2,l,_r(x,f));return Zy(a,c,$,_r(x,E)),null!==$.attrs&&Fm($,$.attrs,!1),null!==$.mergedAttrs&&Fm($,$.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,$),$}(x,E,f,a,c,l):E.data[x],K=f[x]=jp(U,a,function Gc(){return Ut.lFrame.currentNamespace}()),ee=Na($);return vi($,!0),Xr(U,K,$),32!=(32&$.flags)&&od(E,f,K,$),0===function eo(){return Ut.lFrame.elementDepthCount}()&&Pe(K,f),function Lu(){Ut.lFrame.elementDepthCount++}(),ee&&(Mm(E,f,$),Wy(E,$,f)),null!==l&&xh(f,$),Bm}function Vm(){let s=Jn();za()?function to(){Ut.lFrame.isParent=!1}():(s=s.parent,vi(s,!1));const a=s;!function Va(){Ut.lFrame.elementDepthCount--}();const c=Wt();return c.firstCreatePass&&(No(c,s),Yo(s)&&c.queries.elementEnd(s)),null!=a.classesWithoutHost&&function qc(s){return 0!=(8&s.flags)}(a)&&Vh(c,a,Re(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function Zc(s){return 0!=(16&s.flags)}(a)&&Vh(c,a,Re(),a.stylesWithoutHost,!1),Vm}function uC(s,a,c,l){return Bm(s,a,c,l),Vm(),uC}function C0(){return Re()}function li(s){return!!s&&"function"==typeof s.then}function Sf(s){return!!s&&"function"==typeof s.subscribe}const zm=Sf;function Ef(s,a,c,l){const f=Re(),E=Wt(),x=Jn();return function $m(s,a,c,l,f,E,x){const U=Na(l),K=s.firstCreatePass&&gb(s),ee=a[Zn],ie=fb(a);let me=!0;if(3&l.type||x){const rt=or(l,a),mt=x?x(rt):rt,At=ie.length,Bt=x?nn=>x(zn(nn[l.index])):l.index;let Ze=null;if(!x&&U&&(Ze=function Hm(s,a,c,l){const f=s.cleanup;if(null!=f)for(let E=0;E<f.length-1;E+=2){const x=f[E];if(x===c&&f[E+1]===l){const U=a[Vi],$=f[E+2];return U.length>$?U[$]:null}"string"==typeof x&&(E+=2)}return null}(s,a,f,l.index)),null!==Ze)(Ze.__ngLastListenerFn__||Ze).__ngNextListenerFn__=E,Ze.__ngLastListenerFn__=E,me=!1;else{E=w0(l,a,ee,E,!1);const nn=c.listen(mt,f,E);ie.push(E,nn),K&&K.push(f,Bt,At,At+1)}}else E=w0(l,a,ee,E,!1);const Se=l.outputs;let He;if(me&&null!==Se&&(He=Se[f])){const rt=He.length;if(rt)for(let mt=0;mt<rt;mt+=2){const vr=a[He[mt]][He[mt+1]].subscribe(E),Zr=ie.length;ie.push(E,vr),K&&K.push(f,l.index,Zr,-(Zr+1))}}}(E,f,f[Kt],x,s,a,l),Ef}function _0(s,a,c,l){try{return ai(6,a,c),!1!==c(l)}catch(f){return kh(s,f),!1}finally{ai(7,a,c)}}function w0(s,a,c,l,f){return function E(x){if(x===Function)return l;Nm(s.componentOffset>-1?Kn(s.index,a):a);let $=_0(a,c,l,x),K=E.__ngNextListenerFn__;for(;K;)$=_0(a,c,K,x)&&$,K=K.__ngNextListenerFn__;return f&&!1===$&&(x.preventDefault(),x.returnValue=!1),$}}function hC(s=1){return function Hc(s){return(Ut.lFrame.contextLView=function Uu(s,a){for(;s>0;)a=a[oi],s--;return a}(s,Ut.lFrame.contextLView))[Zn]}(s)}function Hh(s,a){return s<<17|a<<2}function Cu(s){return s>>17&32767}function Af(s){return 2|s}function _u(s){return(131068&s)>>2}function vC(s,a){return-131069&s|a<<2}function Pf(s){return 1|s}function P0(s,a,c,l,f){const E=s[c+1],x=null===a;let U=l?Cu(E):_u(E),$=!1;for(;0!==U&&(!1===$||x);){const ee=s[U+1];Wm(s[U],a)&&($=!0,s[U+1]=l?Pf(ee):Af(ee)),U=l?Cu(ee):_u(ee)}$&&(s[c+1]=l?Af(E):Pf(E))}function Wm(s,a){return null===s||null==a||(Array.isArray(s)?s[1]:s)===a||!(!Array.isArray(s)||"string"!=typeof a)&&An(s,a)>=0}function EC(s,a){return function $o(s,a,c,l){const f=Re(),E=Wt(),x=ci(2);E.firstUpdatePass&&function L0(s,a,c,l){const f=s.data;if(null===f[c+1]){const E=f[dr()],x=function k0(s,a){return a>=s.expandoStartIndex}(s,c);(function bC(s,a){return 0!=(s.flags&(a?8:16))})(E,l)&&null===a&&!x&&(a=!1),a=function zb(s,a,c,l){const f=function $a(s){const a=Ut.lFrame.currentDirectiveIndex;return-1===a?null:s[a]}(s);let E=l?a.residualClasses:a.residualStyles;if(null===f)0===(l?a.classBindings:a.styleBindings)&&(c=$h(c=Km(null,s,a,c,l),a.attrs,l),E=null);else{const x=a.directiveStylingLast;if(-1===x||s[x]!==f)if(c=Km(f,s,a,c,l),null===E){let $=function F0(s,a,c){const l=c?a.classBindings:a.styleBindings;if(0!==_u(l))return s[Cu(l)]}(s,a,l);void 0!==$&&Array.isArray($)&&($=Km(null,s,a,$[1],l),$=$h($,a.attrs,l),function j0(s,a,c,l){s[Cu(c?a.classBindings:a.styleBindings)]=l}(s,a,l,$))}else E=function U0(s,a,c){let l;const f=a.directiveEnd;for(let E=1+a.directiveStylingLast;E<f;E++)l=$h(l,s[E].hostAttrs,c);return $h(l,a.attrs,c)}(s,a,l)}return void 0!==E&&(l?a.residualClasses=E:a.residualStyles=E),c}(f,E,a,l),function Fb(s,a,c,l,f,E){let x=E?a.classBindings:a.styleBindings,U=Cu(x),$=_u(x);s[l]=c;let ee,K=!1;if(Array.isArray(c)?(ee=c[1],(null===ee||An(c,ee)>0)&&(K=!0)):ee=c,f)if(0!==$){const me=Cu(s[U+1]);s[l+1]=Hh(me,U),0!==me&&(s[me+1]=vC(s[me+1],l)),s[U+1]=function Lb(s,a){return 131071&s|a<<17}(s[U+1],l)}else s[l+1]=Hh(U,0),0!==U&&(s[U+1]=vC(s[U+1],l)),U=l;else s[l+1]=Hh($,0),0===U?U=l:s[$+1]=vC(s[$+1],l),$=l;K&&(s[l+1]=Af(s[l+1])),P0(s,ee,l,!0),P0(s,ee,l,!1),function jb(s,a,c,l,f){const E=f?s.residualClasses:s.residualStyles;null!=E&&"string"==typeof a&&An(E,a)>=0&&(c[l+1]=Pf(c[l+1]))}(a,ee,s,l,E),x=Hh(U,$),E?a.classBindings=x:a.styleBindings=x}(f,E,a,c,x,l)}}(E,s,x,l),a!==Zt&&Rn(f,x,a)&&function Jm(s,a,c,l,f,E,x,U){if(!(3&a.type))return;const $=s.data,K=$[U+1],ee=function yC(s){return 1==(1&s)}(K)?Hb($,a,c,f,_u(K),x):void 0;IC(ee)||(IC(E)||function Tf(s){return 2==(2&s)}(K)&&(E=Hb($,null,c,f,U,x)),function nm(s,a,c,l,f){if(a)f?s.addClass(c,l):s.removeClass(c,l);else{let E=-1===l.indexOf("-")?void 0:vs.DashCase;null==f?s.removeStyle(c,l,E):("string"==typeof f&&f.endsWith("!important")&&(f=f.slice(0,-10),E|=vs.Important),s.setStyle(c,l,f,E))}}(l,x,Xs(dr(),c),f,E))}(E,E.data[dr()],f,f[Kt],s,f[x+1]=function $b(s,a){return null==s||""===s||("string"==typeof a?s+=a:"object"==typeof s&&(s=S(zs(s)))),s}(a,c),l,x)}(s,a,null,!0),EC}function Km(s,a,c,l,f){let E=null;const x=c.directiveEnd;let U=c.directiveStylingLast;for(-1===U?U=c.directiveStart:U++;U<x&&(E=a[U],l=$h(l,E.hostAttrs,f),E!==s);)U++;return null!==s&&(c.directiveStylingLast=U),l}function $h(s,a,c){const l=c?1:2;let f=-1;if(null!==a)for(let E=0;E<a.length;E++){const x=a[E];"number"==typeof x?f=x:f===l&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),Ji(s,x,!!c||a[++E]))}return void 0===s?null:s}function Hb(s,a,c,l,f,E){const x=null===a;let U;for(;f>0;){const $=s[f],K=Array.isArray($),ee=K?$[1]:$,ie=null===ee;let me=c[f+1];me===Zt&&(me=ie?We:void 0);let Se=ie?js(me,l):ee===l?me:void 0;if(K&&!IC(Se)&&(Se=js($,l)),IC(Se)&&(U=Se,x))return U;const He=s[f+1];f=x?Cu(He):_u(He)}if(null!==a){let $=E?a.residualClasses:a.residualStyles;null!=$&&(U=js($,l))}return U}function IC(s){return void 0!==s}function V0(s,a=""){const c=Re(),l=Wt(),f=s+Fn,E=l.firstCreatePass?Oh(l,f,1,a,null):l.data[f],x=c[f]=function vh(s,a){return s.createText(a)}(c[Kt],a);od(l,c,x,E),vi(E,!1)}function Ym(s){return Gh("",s,""),Ym}function Gh(s,a,c){const l=Re(),f=function Fh(s,a,c,l){return Rn(s,ls(),c)?a+X(c)+l:Zt}(l,s,a,c);return f!==Zt&&yc(l,dr(),f),Gh}function Df(s,a,c,l,f){const E=Re(),x=wl(E,s,a,c,l,f);return x!==Zt&&yc(E,dr(),x),Df}const wu=void 0;var ev=["en",[["a","p"],["AM","PM"],wu],[["AM","PM"],wu,wu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],wu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],wu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",wu,"{1} 'at' {0}",wu],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function en(s){const c=Math.floor(Math.abs(s)),l=s.toString().replace(/^[^.]*\.?/,"").length;return 1===c&&0===l?1:5}];let _c={};function Mf(s){const a=function Ci(s){return s.toLowerCase().replace(/_/g,"-")}(s);let c=oS(a);if(c)return c;const l=a.split("-")[0];if(c=oS(l),c)return c;if("en"===l)return ev;throw new V(701,!1)}function sS(s){return Mf(s)[Lt.PluralCase]}function oS(s){return s in _c||(_c[s]=Yt.ng&&Yt.ng.common&&Yt.ng.common.locales&&Yt.ng.common.locales[s]),_c[s]}var Lt=(()=>((Lt=Lt||{})[Lt.LocaleId=0]="LocaleId",Lt[Lt.DayPeriodsFormat=1]="DayPeriodsFormat",Lt[Lt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Lt[Lt.DaysFormat=3]="DaysFormat",Lt[Lt.DaysStandalone=4]="DaysStandalone",Lt[Lt.MonthsFormat=5]="MonthsFormat",Lt[Lt.MonthsStandalone=6]="MonthsStandalone",Lt[Lt.Eras=7]="Eras",Lt[Lt.FirstDayOfWeek=8]="FirstDayOfWeek",Lt[Lt.WeekendRange=9]="WeekendRange",Lt[Lt.DateFormat=10]="DateFormat",Lt[Lt.TimeFormat=11]="TimeFormat",Lt[Lt.DateTimeFormat=12]="DateTimeFormat",Lt[Lt.NumberSymbols=13]="NumberSymbols",Lt[Lt.NumberFormats=14]="NumberFormats",Lt[Lt.CurrencyCode=15]="CurrencyCode",Lt[Lt.CurrencySymbol=16]="CurrencySymbol",Lt[Lt.CurrencyName=17]="CurrencyName",Lt[Lt.Currencies=18]="Currencies",Lt[Lt.Directionality=19]="Directionality",Lt[Lt.PluralCase=20]="PluralCase",Lt[Lt.ExtraData=21]="ExtraData",Lt))();const Td="en-US";let xf=Td;function Pd(s,a,c,l,f){if(s=M(s),Array.isArray(s))for(let E=0;E<s.length;E++)Pd(s[E],a,c,l,f);else{const E=Wt(),x=Re();let U=_a(s)?s:M(s.provide),$=vl(s);const K=Jn(),ee=1048575&K.providerIndexes,ie=K.directiveStart,me=K.providerIndexes>>20;if(_a(s)||!s.multi){const Se=new Br($,f,_d),He=zf(U,a,f?ee:ee+me,ie);-1===He?(Ls(th(K,x),E,U),Qh(E,s,a.length),a.push(U),K.directiveStart++,K.directiveEnd++,f&&(K.providerIndexes+=1048576),c.push(Se),x.push(Se)):(c[He]=Se,x[He]=Se)}else{const Se=zf(U,a,ee+me,ie),He=zf(U,a,ee,ee+me),mt=He>=0&&c[He];if(f&&!mt||!f&&!(Se>=0&&c[Se])){Ls(th(K,x),E,U);const At=function KC(s,a,c,l,f){const E=new Br(s,c,_d);return E.multi=[],E.index=a,E.componentProviders=0,ZC(E,f,l&&!c),E}(f?PS:AS,c.length,f,l,$);!f&&mt&&(c[He].providerFactory=At),Qh(E,s,a.length,0),a.push(U),K.directiveStart++,K.directiveEnd++,f&&(K.providerIndexes+=1048576),c.push(At),x.push(At)}else Qh(E,s,Se>-1?Se:He,ZC(c[f?He:Se],$,!f&&l));!f&&l&&mt&&c[He].componentProviders++}}}function Qh(s,a,c,l){const f=_a(a),E=function pm(s){return!!s.useClass}(a);if(f||E){const $=(E?M(a.useClass):a).prototype.ngOnDestroy;if($){const K=s.destroyHooks||(s.destroyHooks=[]);if(!f&&a.multi){const ee=K.indexOf(c);-1===ee?K.push(c,[l,$]):K[ee+1].push(l,$)}else K.push(c,$)}}}function ZC(s,a,c){return c&&s.componentProviders++,s.multi.push(a)-1}function zf(s,a,c,l){for(let f=c;f<l;f++)if(a[f]===s)return f;return-1}function AS(s,a,c,l){return Dd(this.multi,[])}function PS(s,a,c,l){const f=this.multi;let E;if(this.providerFactory){const x=this.providerFactory.componentProviders,U=hr(c,c[ft],this.providerFactory.index,l);E=U.slice(0,x),Dd(f,E);for(let $=x;$<U.length;$++)E.push(U[$])}else E=[],Dd(f,E);return E}function Dd(s,a){for(let c=0;c<s.length;c++)a.push((0,s[c])());return a}function lv(s,a=[]){return c=>{c.providersResolver=(l,f)=>function TS(s,a,c){const l=Wt();if(l.firstCreatePass){const f=$i(s);Pd(c,l.data,l.blueprint,f,!0),Pd(a,l.data,l.blueprint,f,!1)}}(l,f?f(s):s,a)}}class bl{}class Hf{}function $f(s,a){return new DS(s,a??null)}class DS extends bl{constructor(a,c){super(),this._parent=c,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new l0(this);const l=nr(a);this._bootstrapComponents=gc(l.bootstrap),this._r3Injector=By(a,c,[{provide:bl,useValue:this},{provide:rf,useValue:this.componentFactoryResolver}],S(a),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(a)}get injector(){return this._r3Injector}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(c=>c()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class Gf extends Hf{constructor(a){super(),this.moduleType=a}create(a){return new DS(this.moduleType,a)}}class dv extends bl{constructor(a,c,l){super(),this.componentFactoryResolver=new l0(this),this.instance=null;const f=new md([...a,{provide:bl,useValue:this},{provide:rf,useValue:this.componentFactoryResolver}],c||fc(),l,new Set(["environment"]));this.injector=f,f.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(a){this.injector.onDestroy(a)}}function Wf(s,a,c=null){return new dv(s,a,c).injector}let RS=(()=>{class s{constructor(c){this._injector=c,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(c){if(!c.standalone)return null;if(!this.cachedInjectors.has(c.id)){const l=ct(0,c.type),f=l.length>0?Wf([l],this._injector,`Standalone[${c.type.name}]`):null;this.cachedInjectors.set(c.id,f)}return this.cachedInjectors.get(c.id)}ngOnDestroy(){try{for(const c of this.cachedInjectors.values())null!==c&&c.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=vt({token:s,providedIn:"environment",factory:()=>new s(mn(Ni))}),s})();function JC(s){s.getStandaloneInjector=a=>a.get(RS).getOrCreateStandaloneInjector(s)}function Kf(s,a,c,l,f){return function Eu(s,a,c,l,f,E,x){const U=a+c;return Li(s,U,f,E)?Sa(s,U+2,x?l.call(x,f,E):l(f,E)):Qf(s,U+2)}(Re(),lr(),s,a,c,l,f)}function Qf(s,a){const c=s[a];return c===Zt?void 0:c}function Od(s,a){const c=Wt();let l;const f=s+Fn;c.firstCreatePass?(l=function CT(s,a){if(a)for(let c=a.length-1;c>=0;c--){const l=a[c];if(s===l.name)return l}}(a,c.pipeRegistry),c.data[f]=l,l.onDestroy&&(c.destroyHooks??(c.destroyHooks=[])).push(f,l.onDestroy)):l=c.data[f];const E=l.factory||(l.factory=ta(l.type)),x=Vn(_d);try{const U=Zi(!1),$=E();return Zi(U),function xb(s,a,c,l){c>=s.data.length&&(s.data[c]=null,s.blueprint[c]=null),a[c]=l}(c,Re(),f,$),$}finally{Vn(x)}}function r_(s,a,c){const l=s+Fn,f=Re(),E=Yr(f,l);return function xd(s,a){return s[ft].data[a].pure}(f,l)?function ep(s,a,c,l,f,E){const x=a+c;return Rn(s,x,f)?Sa(s,x+1,E?l.call(E,f):l(f)):Qf(s,x+1)}(f,lr(),a,E.transform,c,E):E.transform(c)}function gv(s){return a=>{setTimeout(s,void 0,a)}}const wc=class FS extends o.x{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,c,l){let f=a,E=c||(()=>null),x=l;if(a&&"object"==typeof a){const $=a;f=$.next?.bind($),E=$.error?.bind($),x=$.complete?.bind($)}this.__isAsync&&(E=gv(E),f&&(f=gv(f)),x&&(x=gv(x)));const U=super.subscribe({next:f,error:E,complete:x});return a instanceof v.w0&&a.add(U),U}};function wT(){return this._results[Symbol.iterator]()}class s_{get changes(){return this._changes||(this._changes=new wc)}constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const c=s_.prototype;c[Symbol.iterator]||(c[Symbol.iterator]=wT)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,c){return this._results.reduce(a,c)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,c){const l=this;l.dirty=!1;const f=function fs(s){return s.flat(Number.POSITIVE_INFINITY)}(a);(this._changesDetected=!function Xc(s,a,c){if(s.length!==a.length)return!1;for(let l=0;l<s.length;l++){let f=s[l],E=a[l];if(c&&(f=c(f),E=c(E)),E!==f)return!1}return!0}(l._results,f,c))&&(l._results=f,l.length=f.length,l.last=f[this.length-1],l.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Xf=(()=>{class s{}return s.__NG_ELEMENT_ID__=vv,s})();const mv=Xf,eg=class extends mv{constructor(a,c,l){super(),this._declarationLView=a,this._declarationTContainer=c,this.elementRef=l}createEmbeddedView(a,c){const l=this._declarationTContainer.tView,f=Am(this._declarationLView,l,a,16,null,l.declTNode,null,null,null,null,c||null);f[Eo]=this._declarationLView[this._declarationTContainer.index];const x=this._declarationLView[Ai];return null!==x&&(f[Ai]=x.createEmbeddedView(l)),Dm(l,f,a),new Sd(f)}};function vv(){return tp(Jn(),Re())}function tp(s,a){return 4&s.type?new eg(a,s,yd(s,a)):null}let tg=(()=>{class s{}return s.__NG_ELEMENT_ID__=ng,s})();function ng(){return US(Jn(),Re())}const rg=tg,jS=class extends rg{constructor(a,c,l){super(),this._lContainer=a,this._hostTNode=c,this._hostLView=l}get element(){return yd(this._hostTNode,this._hostLView)}get injector(){return new ro(this._hostTNode,this._hostLView)}get parentInjector(){const a=Tp(this._hostTNode,this._hostLView);if(xe(a)){const c=Hn(a,this._hostLView),l=St(a);return new ro(c[ft].data[l+8],c)}return new ro(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const c=Er(this._lContainer);return null!==c&&c[a]||null}get length(){return this._lContainer.length-Ar}createEmbeddedView(a,c,l){let f,E;"number"==typeof l?f=l:null!=l&&(f=l.index,E=l.injector);const x=a.createEmbeddedView(c||{},E);return this.insert(x,f),x}createComponent(a,c,l,f,E){const x=a&&!function Qc(s){return"function"==typeof s}(a);let U;if(x)U=c;else{const ie=c||{};U=ie.index,l=ie.injector,f=ie.projectableNodes,E=ie.environmentInjector||ie.ngModuleRef}const $=x?a:new Lh(Rt(a)),K=l||this.parentInjector;if(!E&&null==$.ngModule){const me=(x?K:this.parentInjector).get(Ni,null);me&&(E=me)}const ee=$.create(K,f,void 0,E);return this.insert(ee.hostView,U),ee}insert(a,c){const l=a._lView,f=l[ft];if(function Gi(s){return Pi(s[Nn])}(l)){const ee=this.indexOf(a);if(-1!==ee)this.detach(ee);else{const ie=l[Nn],me=new jS(ie,ie[ur],ie[Nn]);me.detach(me.indexOf(a))}}const E=this._adjustIndex(c),x=this._lContainer;!function yh(s,a,c,l){const f=Ar+l,E=c.length;l>0&&(c[f-1][si]=a),l<E-Ar?(a[si]=c[f],uh(c,Ar+l,a)):(c.push(a),a[si]=null),a[Nn]=c;const x=a[Eo];null!==x&&c!==x&&function Yg(s,a){const c=s[Js];a[rr]!==a[Nn][Nn][rr]&&(s[xa]=!0),null===c?s[Js]=[a]:c.push(a)}(x,a);const U=a[Ai];null!==U&&U.insertView(s),a[jt]|=64}(f,l,x,E);const U=Cs(E,x),$=l[Kt],K=Mr($,x[Fr]);return null!==K&&function id(s,a,c,l,f,E){l[ii]=f,l[ur]=a,cu(s,l,c,1,f,E)}(f,x[ur],$,l,K,U),a.attachToViewContainerRef(),uh(yv(x),E,a),a}move(a,c){return this.insert(a,c)}indexOf(a){const c=Er(this._lContainer);return null!==c?c.indexOf(a):-1}remove(a){const c=this._adjustIndex(a,-1),l=ga(this._lContainer,c);l&&(eu(yv(this._lContainer),c),ma(l[ft],l))}detach(a){const c=this._adjustIndex(a,-1),l=ga(this._lContainer,c);return l&&null!=eu(yv(this._lContainer),c)?new Sd(l):null}_adjustIndex(a,c=0){return a??this.length+c}};function Er(s){return s[Os]}function yv(s){return s[Os]||(s[Os]=[])}function US(s,a){let c;const l=a[s.index];if(Pi(l))c=l;else{let f;if(8&s.type)f=zn(l);else{const E=a[Kt];f=E.createComment("");const x=or(s,a);Vo(E,Mr(E,x),f,function ya(s,a){return s.nextSibling(a)}(E,x),!1)}a[s.index]=c=fu(l,a,f,s),Nh(a,c)}return new jS(c,s,a)}class o_{constructor(a){this.queryList=a,this.matches=null}clone(){return new o_(this.queryList)}setDirty(){this.queryList.setDirty()}}class a_{constructor(a=[]){this.queries=a}createEmbeddedView(a){const c=a.queries;if(null!==c){const l=null!==a.contentQueries?a.contentQueries[0]:c.length,f=[];for(let E=0;E<l;E++){const x=c.getByIndex(E);f.push(this.queries[x.indexInDeclarationView].clone())}return new a_(f)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let c=0;c<this.queries.length;c++)null!==d_(a,c).matches&&this.queries[c].setDirty()}}class c_{constructor(a,c,l=null){this.predicate=a,this.flags=c,this.read=l}}class Cv{constructor(a=[]){this.queries=a}elementStart(a,c){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(a,c)}elementEnd(a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementEnd(a)}embeddedTView(a){let c=null;for(let l=0;l<this.length;l++){const f=null!==c?c.length:0,E=this.getByIndex(l).embeddedTView(a,f);E&&(E.indexInDeclarationView=l,null!==c?c.push(E):c=[E])}return null!==c?new Cv(c):null}template(a,c){for(let l=0;l<this.queries.length;l++)this.queries[l].template(a,c)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class _v{constructor(a,c=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=c}elementStart(a,c){this.isApplyingToNode(c)&&this.matchTNode(a,c)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,c){this.elementStart(a,c)}embeddedTView(a,c){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,c),new _v(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const c=this._declarationNodeIndex;let l=a.parent;for(;null!==l&&8&l.type&&l.index!==c;)l=l.parent;return c===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(a,c){const l=this.metadata.predicate;if(Array.isArray(l))for(let f=0;f<l.length;f++){const E=l[f];this.matchTNodeWithReadOption(a,c,wv(c,E)),this.matchTNodeWithReadOption(a,c,Qa(c,a,E,!1,!1))}else l===Xf?4&c.type&&this.matchTNodeWithReadOption(a,c,-1):this.matchTNodeWithReadOption(a,c,Qa(c,a,l,!1,!1))}matchTNodeWithReadOption(a,c,l){if(null!==l){const f=this.metadata.read;if(null!==f)if(f===Mh||f===tg||f===Xf&&4&c.type)this.addMatch(c.index,-2);else{const E=Qa(c,a,f,!1,!1);null!==E&&this.addMatch(c.index,E)}else this.addMatch(c.index,l)}}addMatch(a,c){null===this.matches?this.matches=[a,c]:this.matches.push(a,c)}}function wv(s,a){const c=s.localNames;if(null!==c)for(let l=0;l<c.length;l+=2)if(c[l]===a)return c[l+1];return null}function Sc(s,a,c,l){return-1===c?function BS(s,a){return 11&s.type?yd(s,a):4&s.type?tp(s,a):null}(a,s):-2===c?function VS(s,a,c){return c===Mh?yd(a,s):c===Xf?tp(a,s):c===tg?US(a,s):void 0}(s,a,l):hr(s,s[ft],c,a)}function zS(s,a,c,l){const f=a[Ai].queries[l];if(null===f.matches){const E=s.data,x=c.matches,U=[];for(let $=0;$<x.length;$+=2){const K=x[$];U.push(K<0?null:Sc(a,E[K],x[$+1],c.metadata.read))}f.matches=U}return f.matches}function Sv(s,a,c,l){const f=s.queries.getByIndex(c),E=f.matches;if(null!==E){const x=zS(s,a,f,c);for(let U=0;U<E.length;U+=2){const $=E[U];if($>0)l.push(x[U/2]);else{const K=E[U+1],ee=a[-$];for(let ie=Ar;ie<ee.length;ie++){const me=ee[ie];me[Eo]===me[Nn]&&Sv(me[ft],me,K,l)}if(null!==ee[Js]){const ie=ee[Js];for(let me=0;me<ie.length;me++){const Se=ie[me];Sv(Se[ft],Se,K,l)}}}}}return l}function Ev(s){const a=Re(),c=Wt(),l=Mo();Ga(l+1);const f=d_(c,l);if(s.dirty&&function ku(s){return 4==(4&s[jt])}(a)===(2==(2&f.metadata.flags))){if(null===f.matches)s.reset([]);else{const E=f.crossesNgTemplate?Sv(c,a,l,[]):zS(c,a,f,l);s.reset(E,bw),s.notifyOnChanges()}return!0}return!1}function np(s,a,c){const l=Wt();l.firstCreatePass&&(ig(l,new c_(s,a,c),-1),2==(2&a)&&(l.staticViewQueries=!0)),l_(l,Re(),a)}function u_(s,a,c,l){const f=Wt();if(f.firstCreatePass){const E=Jn();ig(f,new c_(a,c,l),E.index),function ST(s,a){const c=s.contentQueries||(s.contentQueries=[]);a!==(c.length?c[c.length-1]:-1)&&c.push(s.queries.length-1,a)}(f,s),2==(2&c)&&(f.staticContentQueries=!0)}l_(f,Re(),c)}function Iv(){return function bv(s,a){return s[Ai].queries[a].queryList}(Re(),Mo())}function l_(s,a,c){const l=new s_(4==(4&c));Jw(s,a,l,l.destroy),null===a[Ai]&&(a[Ai]=new a_),a[Ai].queries.push(new o_(l))}function ig(s,a,c){null===s.queries&&(s.queries=new Cv),s.queries.track(new _v(a,c))}function d_(s,a){return s.queries.getByIndex(a)}function Tv(s){return!!nr(s)}function _t(...s){}const tE=new dn("Application Initializer");let pt=(()=>{class s{constructor(c){this.appInits=c,this.resolve=_t,this.reject=_t,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,f)=>{this.resolve=l,this.reject=f})}runInitializers(){if(this.initialized)return;const c=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const E=this.appInits[f]();if(li(E))c.push(E);else if(zm(E)){const x=new Promise((U,$)=>{E.subscribe({complete:U,error:$})});c.push(x)}}Promise.all(c).then(()=>{l()}).catch(f=>{this.reject(f)}),0===c.length&&l(),this.initialized=!0}}return s.\u0275fac=function(c){return new(c||s)(mn(tE,8))},s.\u0275prov=vt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const Me=new dn("AppId",{providedIn:"root",factory:function Ge(){return`${Ov()}${Ov()}${Ov()}`}});function Ov(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const nE=new dn("Platform Initializer"),DT=new dn("Platform ID",{providedIn:"platform",factory:()=>"unknown"});let RT=(()=>{class s{log(c){console.log(c)}warn(c){console.warn(c)}}return s.\u0275fac=function(c){return new(c||s)},s.\u0275prov=vt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const xv=new dn("LocaleId",{providedIn:"root",factory:()=>de(xv,at.Optional|at.SkipSelf)||function rE(){return typeof $localize<"u"&&$localize.locale||Td}()}),XD=new dn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class sp{constructor(a,c){this.ngModuleFactory=a,this.componentFactories=c}}let iE=(()=>{class s{compileModuleSync(c){return new Gf(c)}compileModuleAsync(c){return Promise.resolve(this.compileModuleSync(c))}compileModuleAndAllComponentsSync(c){const l=this.compileModuleSync(c),E=gc(nr(c).declarations).reduce((x,U)=>{const $=Rt(U);return $&&x.push(new Lh($)),x},[]);return new sp(l,E)}compileModuleAndAllComponentsAsync(c){return Promise.resolve(this.compileModuleAndAllComponentsSync(c))}clearCache(){}clearCacheFor(c){}getModuleId(c){}}return s.\u0275fac=function(c){return new(c||s)},s.\u0275prov=vt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const Nv=(()=>Promise.resolve(0))();function hg(s){typeof Zone>"u"?Nv.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class Ts{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:c=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new wc(!1),this.onMicrotaskEmpty=new wc(!1),this.onStable=new wc(!1),this.onError=new wc(!1),typeof Zone>"u")throw new V(908,!1);Zone.assertZonePatched();const f=this;f._nesting=0,f._outer=f._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!l&&c,f.shouldCoalesceRunChangeDetection=l,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function Bd(){let s=Yt.requestAnimationFrame,a=Yt.cancelAnimationFrame;if(typeof Zone<"u"&&s&&a){const c=s[Zone.__symbol__("OriginalDelegate")];c&&(s=c);const l=a[Zone.__symbol__("OriginalDelegate")];l&&(a=l)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function aE(s){const a=()=>{!function oE(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Yt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,As(s),s.isCheckStableRunning=!0,Vd(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),As(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(c,l,f,E,x,U)=>{try{return kv(s),c.invokeTask(f,E,x,U)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===E.type||s.shouldCoalesceRunChangeDetection)&&a(),w_(s)}},onInvoke:(c,l,f,E,x,U,$)=>{try{return kv(s),c.invoke(f,E,x,U,$)}finally{s.shouldCoalesceRunChangeDetection&&a(),w_(s)}},onHasTask:(c,l,f,E)=>{c.hasTask(f,E),l===f&&("microTask"==E.change?(s._hasPendingMicrotasks=E.microTask,As(s),Vd(s)):"macroTask"==E.change&&(s.hasPendingMacrotasks=E.macroTask))},onHandleError:(c,l,f,E)=>(c.handleError(f,E),s.runOutsideAngular(()=>s.onError.emit(E)),!1)})}(f)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ts.isInAngularZone())throw new V(909,!1)}static assertNotInAngularZone(){if(Ts.isInAngularZone())throw new V(909,!1)}run(a,c,l){return this._inner.run(a,c,l)}runTask(a,c,l,f){const E=this._inner,x=E.scheduleEventTask("NgZoneEvent: "+f,a,OT,_t,_t);try{return E.runTask(x,c,l)}finally{E.cancelTask(x)}}runGuarded(a,c,l){return this._inner.runGuarded(a,c,l)}runOutsideAngular(a){return this._outer.run(a)}}const OT={};function Vd(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function As(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function kv(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function w_(s){s._nesting--,Vd(s)}class cE{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new wc,this.onMicrotaskEmpty=new wc,this.onStable=new wc,this.onError=new wc}run(a,c,l){return a.apply(c,l)}runGuarded(a,c,l){return a.apply(c,l)}runOutsideAngular(a){return a()}runTask(a,c,l,f){return a.apply(c,l)}}const bu=new dn(""),Lv=new dn("");let S_,Te=(()=>{class s{constructor(c,l,f){this._ngZone=c,this.registry=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,S_||(function Ra(s){S_=s}(f),f.addToWindow(l)),this._watchAngularEvents(),c.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ts.assertNotInAngularZone(),hg(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())hg(()=>{for(;0!==this._callbacks.length;){let c=this._callbacks.pop();clearTimeout(c.timeoutId),c.doneCb(this._didWork)}this._didWork=!1});else{let c=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(c)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(c=>({source:c.source,creationLocation:c.creationLocation,data:c.data})):[]}addCallback(c,l,f){let E=-1;l&&l>0&&(E=setTimeout(()=>{this._callbacks=this._callbacks.filter(x=>x.timeoutId!==E),c(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:c,timeoutId:E,updateCb:f})}whenStable(c,l,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(c,l,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(c){this.registry.registerApplication(c,this)}unregisterApplication(c){this.registry.unregisterApplication(c)}findProviders(c,l,f){return[]}}return s.\u0275fac=function(c){return new(c||s)(mn(Ts),mn(pg),mn(Lv))},s.\u0275prov=vt({token:s,factory:s.\u0275fac}),s})(),pg=(()=>{class s{constructor(){this._applications=new Map}registerApplication(c,l){this._applications.set(c,l)}unregisterApplication(c){this._applications.delete(c)}unregisterAllApplications(){this._applications.clear()}getTestability(c){return this._applications.get(c)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(c,l=!0){return S_?.findTestabilityInTree(this,c,l)??null}}return s.\u0275fac=function(c){return new(c||s)},s.\u0275prov=vt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const mo=!1;let Ps=null;const uE=new dn("AllowMultipleToken"),Tu=new dn("PlatformDestroyListeners"),E_=new dn("appBootstrapListener");class vo{constructor(a,c){this.name=a,this.token=c}}function lE(s,a,c=[]){const l=`Platform: ${a}`,f=new dn(l);return(E=[])=>{let x=op();if(!x||x.injector.get(uE,!1)){const U=[...c,...E,{provide:f,useValue:!0}];s?s(U):function fg(s){if(Ps&&!Ps.get(uE,!1))throw new V(400,!1);Ps=s;const a=s.get(T_);(function b_(s){const a=s.get(nE,null);a&&a.forEach(c=>c())})(s)}(function Ma(s=[],a){return hu.create({name:a,providers:[{provide:Rh,useValue:"platform"},{provide:Tu,useValue:new Set([()=>Ps=null])},...s]})}(U,l))}return function dE(s){const a=op();if(!a)throw new V(401,!1);return a}()}}function op(){return Ps?.get(T_)??null}let T_=(()=>{class s{constructor(c){this._injector=c,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(c,l){const f=function pE(s,a){let c;return c="noop"===s?new cE:("zone.js"===s?void 0:s)||new Ts(a),c}(l?.ngZone,function hE(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(l)),E=[{provide:Ts,useValue:f}];return f.run(()=>{const x=hu.create({providers:E,parent:this.injector,name:c.moduleType.name}),U=c.create(x),$=U.injector.get(_m,null);if(!$)throw new V(402,!1);return f.runOutsideAngular(()=>{const K=f.onError.subscribe({next:ee=>{$.handleError(ee)}});U.onDestroy(()=>{jv(this._modules,U),K.unsubscribe()})}),function fE(s,a,c){try{const l=c();return li(l)?l.catch(f=>{throw a.runOutsideAngular(()=>s.handleError(f)),f}):l}catch(l){throw a.runOutsideAngular(()=>s.handleError(l)),l}}($,f,()=>{const K=U.injector.get(pt);return K.runInitializers(),K.donePromise.then(()=>(function ba(s){be(s,"Expected localeId to be defined"),"string"==typeof s&&(xf=s.toLowerCase().replace(/_/g,"-"))}(U.injector.get(xv,Td)||Td),this._moduleDoBootstrap(U),U))})})}bootstrapModule(c,l=[]){const f=gE({},l);return function I_(s,a,c){const l=new Gf(c);return Promise.resolve(l)}(0,0,c).then(E=>this.bootstrapModuleFactory(E,f))}_moduleDoBootstrap(c){const l=c.injector.get(Fv);if(c._bootstrapComponents.length>0)c._bootstrapComponents.forEach(f=>l.bootstrap(f));else{if(!c.instance.ngDoBootstrap)throw new V(-403,!1);c.instance.ngDoBootstrap(l)}this._modules.push(c)}onDestroy(c){this._destroyListeners.push(c)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new V(404,!1);this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const c=this._injector.get(Tu,null);c&&(c.forEach(l=>l()),c.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(c){return new(c||s)(mn(hu))},s.\u0275prov=vt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function gE(s,a){return Array.isArray(a)?a.reduce(gE,s):{...s,...a}}let Fv=(()=>{class s{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(c,l,f){this._zone=c,this._injector=l,this._exceptionHandler=f,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const E=new _.y(U=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{U.next(this._stable),U.complete()})}),x=new _.y(U=>{let $;this._zone.runOutsideAngular(()=>{$=this._zone.onStable.subscribe(()=>{Ts.assertNotInAngularZone(),hg(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,U.next(!0))})})});const K=this._zone.onUnstable.subscribe(()=>{Ts.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{U.next(!1)}))});return()=>{$.unsubscribe(),K.unsubscribe()}});this.isStable=(0,A.T)(E,x.pipe((0,b.B)()))}bootstrap(c,l){const f=c instanceof mm;if(!this._injector.get(pt).done){!f&&Kr(c);throw new V(405,mo)}let x;x=f?c:this._injector.get(rf).resolveComponentFactory(c),this.componentTypes.push(x.componentType);const U=function xT(s){return s.isBoundToModule}(x)?void 0:this._injector.get(bl),K=x.create(hu.NULL,[],l||x.selector,U),ee=K.location.nativeElement,ie=K.injector.get(bu,null);return ie?.registerApplication(ee),K.onDestroy(()=>{this.detachView(K.hostView),jv(this.components,K),ie?.unregisterApplication(ee)}),this._loadComponent(K),K}tick(){if(this._runningTick)throw new V(101,!1);try{this._runningTick=!0;for(let c of this._views)c.detectChanges()}catch(c){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(c))}finally{this._runningTick=!1}}attachView(c){const l=c;this._views.push(l),l.attachToAppRef(this)}detachView(c){const l=c;jv(this._views,l),l.detachFromAppRef()}_loadComponent(c){this.attachView(c.hostView),this.tick(),this.components.push(c);const l=this._injector.get(E_,[]);l.push(...this._bootstrapListeners),l.forEach(f=>f(c))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(c=>c()),this._views.slice().forEach(c=>c.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(c){return this._destroyListeners.push(c),()=>jv(this._destroyListeners,c)}destroy(){if(this._destroyed)throw new V(406,!1);const c=this._injector;c.destroy&&!c.destroyed&&c.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(c){return new(c||s)(mn(Ts),mn(Ni),mn(_m))},s.\u0275prov=vt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function jv(s,a){const c=s.indexOf(a);c>-1&&s.splice(c,1)}function LT(){return!1}let FT=(()=>{class s{}return s.__NG_ELEMENT_ID__=jT,s})();function jT(s){return function yE(s,a,c){if(Qo(s)&&!c){const l=Kn(s.index,a);return new Sd(l,l)}return 47&s.type?new Sd(a[rr],a):null}(Jn(),Re(),16==(16&s))}class Ic{constructor(){}supports(a){return Ed(a)}create(a){return new Hv(a)}}const zv=(s,a)=>a;class Hv{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||zv}forEachItem(a){let c;for(c=this._itHead;null!==c;c=c._next)a(c)}forEachOperation(a){let c=this._itHead,l=this._removalsHead,f=0,E=null;for(;c||l;){const x=!l||c&&c.currentIndex<Pu(l,f,E)?c:l,U=Pu(x,f,E),$=x.currentIndex;if(x===l)f--,l=l._nextRemoved;else if(c=c._next,null==x.previousIndex)f++;else{E||(E=[]);const K=U-f,ee=$-f;if(K!=ee){for(let me=0;me<K;me++){const Se=me<E.length?E[me]:E[me]=0,He=Se+me;ee<=He&&He<K&&(E[me]=Se+1)}E[x.previousIndex]=ee-K}}U!==$&&a(x,U,$)}}forEachPreviousItem(a){let c;for(c=this._previousItHead;null!==c;c=c._nextPrevious)a(c)}forEachAddedItem(a){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)a(c)}forEachMovedItem(a){let c;for(c=this._movesHead;null!==c;c=c._nextMoved)a(c)}forEachRemovedItem(a){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)a(c)}forEachIdentityChange(a){let c;for(c=this._identityChangesHead;null!==c;c=c._nextIdentityChange)a(c)}diff(a){if(null==a&&(a=[]),!Ed(a))throw new V(900,!1);return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let f,E,x,c=this._itHead,l=!1;if(Array.isArray(a)){this.length=a.length;for(let U=0;U<this.length;U++)E=a[U],x=this._trackByFn(U,E),null!==c&&Object.is(c.trackById,x)?(l&&(c=this._verifyReinsertion(c,E,x,U)),Object.is(c.item,E)||this._addIdentityChange(c,E)):(c=this._mismatch(c,E,x,U),l=!0),c=c._next}else f=0,function Tb(s,a){if(Array.isArray(s))for(let c=0;c<s.length;c++)a(s[c]);else{const c=s[Symbol.iterator]();let l;for(;!(l=c.next()).done;)a(l.value)}}(a,U=>{x=this._trackByFn(f,U),null!==c&&Object.is(c.trackById,x)?(l&&(c=this._verifyReinsertion(c,U,x,f)),Object.is(c.item,U)||this._addIdentityChange(c,U)):(c=this._mismatch(c,U,x,f),l=!0),c=c._next,f++}),this.length=f;return this._truncate(c),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,c,l,f){let E;return null===a?E=this._itTail:(E=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(a.item,c)||this._addIdentityChange(a,c),this._reinsertAfter(a,E,f)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(l,f))?(Object.is(a.item,c)||this._addIdentityChange(a,c),this._moveAfter(a,E,f)):a=this._addAfter(new vg(c,l),E,f),a}_verifyReinsertion(a,c,l,f){let E=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==E?a=this._reinsertAfter(E,a._prev,f):a.currentIndex!=f&&(a.currentIndex=f,this._addToMoves(a,f)),a}_truncate(a){for(;null!==a;){const c=a._next;this._addToRemovals(this._unlink(a)),a=c}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,c,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const f=a._prevRemoved,E=a._nextRemoved;return null===f?this._removalsHead=E:f._nextRemoved=E,null===E?this._removalsTail=f:E._prevRemoved=f,this._insertAfter(a,c,l),this._addToMoves(a,l),a}_moveAfter(a,c,l){return this._unlink(a),this._insertAfter(a,c,l),this._addToMoves(a,l),a}_addAfter(a,c,l){return this._insertAfter(a,c,l),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,c,l){const f=null===c?this._itHead:c._next;return a._next=f,a._prev=c,null===f?this._itTail=a:f._prev=a,null===c?this._itHead=a:c._next=a,null===this._linkedRecords&&(this._linkedRecords=new Au),this._linkedRecords.put(a),a.currentIndex=l,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const c=a._prev,l=a._next;return null===c?this._itHead=l:c._next=l,null===l?this._itTail=c:l._prev=c,a}_addToMoves(a,c){return a.previousIndex===c||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Au),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,c){return a.item=c,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class vg{constructor(a,c){this.item=a,this.trackById=c,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class VT{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,c){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===c||c<=l.currentIndex)&&Object.is(l.trackById,a))return l;return null}remove(a){const c=a._prevDup,l=a._nextDup;return null===c?this._head=l:c._nextDup=l,null===l?this._tail=c:l._prevDup=c,null===this._head}}class Au{constructor(){this.map=new Map}put(a){const c=a.trackById;let l=this.map.get(c);l||(l=new VT,this.map.set(c,l)),l.add(a)}get(a,c){const f=this.map.get(a);return f?f.get(a,c):null}remove(a){const c=a.trackById;return this.map.get(c).remove(a)&&this.map.delete(c),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Pu(s,a,c){const l=s.previousIndex;if(null===l)return l;let f=0;return c&&l<c.length&&(f=c[l]),l+a+f}class yg{constructor(){}supports(a){return a instanceof Map||rC(a)}create(){return new Pl}}class Pl{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let c;for(c=this._mapHead;null!==c;c=c._next)a(c)}forEachPreviousItem(a){let c;for(c=this._previousMapHead;null!==c;c=c._nextPrevious)a(c)}forEachChangedItem(a){let c;for(c=this._changesHead;null!==c;c=c._nextChanged)a(c)}forEachAddedItem(a){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)a(c)}forEachRemovedItem(a){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)a(c)}diff(a){if(a){if(!(a instanceof Map||rC(a)))throw new V(900,!1)}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let c=this._mapHead;if(this._appendAfter=null,this._forEach(a,(l,f)=>{if(c&&c.key===f)this._maybeAddToChanges(c,l),this._appendAfter=c,c=c._next;else{const E=this._getOrCreateRecordForKey(f,l);c=this._insertBeforeOrAppend(c,E)}}),c){c._prev&&(c._prev._next=null),this._removalsHead=c;for(let l=c;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,c){if(a){const l=a._prev;return c._next=a,c._prev=l,a._prev=c,l&&(l._next=c),a===this._mapHead&&(this._mapHead=c),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=c,c._prev=this._appendAfter):this._mapHead=c,this._appendAfter=c,null}_getOrCreateRecordForKey(a,c){if(this._records.has(a)){const f=this._records.get(a);this._maybeAddToChanges(f,c);const E=f._prev,x=f._next;return E&&(E._next=x),x&&(x._prev=E),f._next=null,f._prev=null,f}const l=new bc(a);return this._records.set(a,l),l.currentValue=c,this._addToAdditions(l),l}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,c){Object.is(c,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=c,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,c){a instanceof Map?a.forEach(c):Object.keys(a).forEach(l=>c(a[l],l))}}class bc{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function cp(){return new Tc([new Ic])}let Tc=(()=>{class s{constructor(c){this.factories=c}static create(c,l){if(null!=l){const f=l.factories.slice();c=c.concat(f)}return new s(c)}static extend(c){return{provide:s,useFactory:l=>s.create(c,l||cp()),deps:[[s,new Ju,new Oi]]}}find(c){const l=this.factories.find(f=>f.supports(c));if(null!=l)return l;throw new V(901,!1)}}return s.\u0275prov=vt({token:s,providedIn:"root",factory:cp}),s})();function Hd(){return new Cg([new yg])}let Cg=(()=>{class s{constructor(c){this.factories=c}static create(c,l){if(l){const f=l.factories.slice();c=c.concat(f)}return new s(c)}static extend(c){return{provide:s,useFactory:l=>s.create(c,l||Hd()),deps:[[s,new Ju,new Oi]]}}find(c){const l=this.factories.find(f=>f.supports(c));if(l)return l;throw new V(901,!1)}}return s.\u0275prov=vt({token:s,providedIn:"root",factory:Hd}),s})();const SE=lE(null,"core",[]);let EE=(()=>{class s{constructor(c){}}return s.\u0275fac=function(c){return new(c||s)(mn(Fv))},s.\u0275mod=Zs({type:s}),s.\u0275inj=Dt({}),s})();function Wv(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}},6101:(ne,p,y)=>{"use strict";y.d(p,{Z:()=>L});var o=y(2090),v=y(4859),_=y(9752);y(1877);class b{constructor(V,q){this._delegate=V,this.firebase=q,(0,_._addComponent)(V,new v.wA("app-compat",()=>this,"PUBLIC")),this.container=V.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(V){this._delegate.automaticDataCollectionEnabled=V}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(V=>{this._delegate.checkDestroyed(),V()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,_.deleteApp)(this._delegate)))}_getService(V,q=_._DEFAULT_ENTRY_NAME){var X;this._delegate.checkDestroyed();const ce=this._delegate.container.getProvider(V);return!ce.isInitialized()&&"EXPLICIT"===(null===(X=ce.getComponent())||void 0===X?void 0:X.instantiationMode)&&ce.initialize(),ce.getImmediate({identifier:q})}_removeServiceInstance(V,q=_._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(V).clearInstance(q)}_addComponent(V){(0,_._addComponent)(this._delegate,V)}_addOrOverwriteComponent(V){(0,_._addOrOverwriteComponent)(this._delegate,V)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const w=new o.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."});function h(){const z=function S(z){const V={},q={__esModule:!0,initializeApp:function fe(Fe,we={}){const Le=_.initializeApp(Fe,we);if((0,o.r3)(V,Le.name))return V[Le.name];const tt=new z(Le,q);return V[Le.name]=tt,tt},app:ce,registerVersion:_.registerVersion,setLogLevel:_.setLogLevel,onLog:_.onLog,apps:null,SDK_VERSION:_.SDK_VERSION,INTERNAL:{registerComponent:function Ae(Fe){const we=Fe.name,Le=we.replace("-compat","");if(_._registerComponent(Fe)&&"PUBLIC"===Fe.type){const tt=(Ye=ce())=>{if("function"!=typeof Ye[Le])throw w.create("invalid-app-argument",{appName:we});return Ye[Le]()};void 0!==Fe.serviceProps&&(0,o.ZB)(tt,Fe.serviceProps),q[Le]=tt,z.prototype[Le]=function(...Ye){return this._getService.bind(this,we).apply(this,Fe.multipleInstances?Ye:[])}}return"PUBLIC"===Fe.type?q[Le]:null},removeApp:function X(Fe){delete V[Fe]},useAsService:function ke(Fe,we){return"serverAuth"===we?null:we},modularAPIs:_}};function ce(Fe){if(!(0,o.r3)(V,Fe=Fe||_._DEFAULT_ENTRY_NAME))throw w.create("no-app",{appName:Fe});return V[Fe]}return q.default=q,Object.defineProperty(q,"apps",{get:function pe(){return Object.keys(V).map(Fe=>V[Fe])}}),ce.App=z,q}(b);return z.INTERNAL=Object.assign(Object.assign({},z.INTERNAL),{createFirebaseNamespace:h,extendNamespace:function V(q){(0,o.ZB)(z,q)},createSubscribe:o.ne,ErrorFactory:o.LL,deepExtend:o.ZB}),z}const m=h();(0,o.jU)()&&void 0!==self.firebase&&self;const L=m},9752:(ne,p,y)=>{"use strict";y.r(p),y.d(p,{FirebaseError:()=>A.ZR,SDK_VERSION:()=>Un,_DEFAULT_ENTRY_NAME:()=>Ee,_addComponent:()=>Ke,_addOrOverwriteComponent:()=>Qe,_apps:()=>be,_clearComponents:()=>Dt,_components:()=>_e,_getProvider:()=>vt,_registerComponent:()=>dt,_removeServiceInstance:()=>Sn,deleteApp:()=>_n,getApp:()=>kn,getApps:()=>Ve,initializeApp:()=>Cn,onLog:()=>Tr,registerVersion:()=>at,setLogLevel:()=>Bi});var o=y(5861),v=y(4859),_=y(1877),A=y(2090);y(8766);const m=new _.Yd("@firebase/app"),Ee="[DEFAULT]",De={"@firebase/app":"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},be=new Map,_e=new Map;function Ke(Ne,de){try{Ne.container.addComponent(de)}catch(je){m.debug(`Component ${de.name} failed to register with FirebaseApp ${Ne.name}`,je)}}function Qe(Ne,de){Ne.container.addOrOverwriteComponent(de)}function dt(Ne){const de=Ne.name;if(_e.has(de))return m.debug(`There were multiple attempts to register component ${de}.`),!1;_e.set(de,Ne);for(const je of be.values())Ke(je,Ne);return!0}function vt(Ne,de){const je=Ne.container.getProvider("heartbeat").getImmediate({optional:!0});return je&&je.triggerHeartbeat(),Ne.container.getProvider(de)}function Sn(Ne,de,je=Ee){vt(Ne,de).clearInstance(je)}function Dt(){_e.clear()}const Pt=new A.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Ft{constructor(de,je,nt){this._isDeleted=!1,this._options=Object.assign({},de),this._config=Object.assign({},je),this._name=je.name,this._automaticDataCollectionEnabled=je.automaticDataCollectionEnabled,this._container=nt,this.container.addComponent(new v.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(de){this.checkDestroyed(),this._automaticDataCollectionEnabled=de}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(de){this._isDeleted=de}checkDestroyed(){if(this.isDeleted)throw Pt.create("app-deleted",{appName:this._name})}}const Un="9.23.0";function Cn(Ne,de={}){let je=Ne;"object"!=typeof de&&(de={name:de});const nt=Object.assign({name:Ee,automaticDataCollectionEnabled:!1},de),ht=nt.name;if("string"!=typeof ht||!ht)throw Pt.create("bad-app-name",{appName:String(ht)});if(je||(je=(0,A.aH)()),!je)throw Pt.create("no-options");const wt=be.get(ht);if(wt){if((0,A.vZ)(je,wt.options)&&(0,A.vZ)(nt,wt.config))return wt;throw Pt.create("duplicate-app",{appName:ht})}const yn=new v.H0(ht);for(const ae of _e.values())yn.addComponent(ae);const ue=new Ft(je,nt,yn);return be.set(ht,ue),ue}function kn(Ne=Ee){const de=be.get(Ne);if(!de&&Ne===Ee&&(0,A.aH)())return Cn();if(!de)throw Pt.create("no-app",{appName:Ne});return de}function Ve(){return Array.from(be.values())}function _n(Ne){return fn.apply(this,arguments)}function fn(){return(fn=(0,o.Z)(function*(Ne){const de=Ne.name;be.has(de)&&(be.delete(de),yield Promise.all(Ne.container.getProviders().map(je=>je.delete())),Ne.isDeleted=!0)})).apply(this,arguments)}function at(Ne,de,je){var nt;let ht=null!==(nt=De[Ne])&&void 0!==nt?nt:Ne;je&&(ht+=`-${je}`);const wt=ht.match(/\s|\//),yn=de.match(/\s|\//);if(wt||yn){const ue=[`Unable to register library "${ht}" with version "${de}":`];return wt&&ue.push(`library name "${ht}" contains illegal characters (whitespace or "/")`),wt&&yn&&ue.push("and"),yn&&ue.push(`version name "${de}" contains illegal characters (whitespace or "/")`),void m.warn(ue.join(" "))}dt(new v.wA(`${ht}-version`,()=>({library:ht,version:de}),"VERSION"))}function Tr(Ne,de){if(null!==Ne&&"function"!=typeof Ne)throw Pt.create("invalid-log-argument");(0,_.Am)(Ne,de)}function Bi(Ne){(0,_.Ub)(Ne)}},8140:(ne,p,y)=>{"use strict";y.d(p,{C6:()=>o.getApps,Mq:()=>o.getApp});var o=y(9752)},1274:(ne,p,y)=>{"use strict";y.d(p,{Z:()=>o.Z});var o=y(6101)},1146:(ne,p,y)=>{"use strict";y.r(p);var o=y(5861),v=y(6101),_=y(2090),A=y(9752);function S(R,g){var C={};for(var O in R)Object.prototype.hasOwnProperty.call(R,O)&&g.indexOf(O)<0&&(C[O]=R[O]);if(null!=R&&"function"==typeof Object.getOwnPropertySymbols){var W=0;for(O=Object.getOwnPropertySymbols(R);W<O.length;W++)g.indexOf(O[W])<0&&Object.prototype.propertyIsEnumerable.call(R,O[W])&&(C[O[W]]=R[O[W]])}return C}var Xe=y(1877);y(4859);const vn={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};function _e(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Qe=_e,dt=new _.LL("auth","Firebase",_e()),Sn=new Xe.Yd("@firebase/auth");function Gt(R,...g){Sn.logLevel<=Xe.in.ERROR&&Sn.error(`Auth (${A.SDK_VERSION}): ${R}`,...g)}function Pt(R,...g){throw kn(R,...g)}function Ft(R,...g){return kn(R,...g)}function Un(R,g,C){const O=Object.assign(Object.assign({},Qe()),{[g]:C});return new _.LL("auth","Firebase",O).create(g,{appName:R.name})}function Cn(R,g,C){if(!(g instanceof C))throw C.name!==g.constructor.name&&Pt(R,"argument-error"),Un(R,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function kn(R,...g){if("string"!=typeof R){const C=g[0],O=[...g.slice(1)];return O[0]&&(O[0].appName=R.name),R._errorFactory.create(C,...O)}return dt.create(R,...g)}function Ve(R,g,...C){if(!R)throw kn(g,...C)}function _n(R){const g="INTERNAL ASSERTION FAILED: "+R;throw Gt(g),new Error(g)}function fn(R,g){R||_n(g)}function at(){var R;return typeof self<"u"&&(null===(R=self.location)||void 0===R?void 0:R.href)||""}function Bi(){var R;return typeof self<"u"&&(null===(R=self.location)||void 0===R?void 0:R.protocol)||null}class gn{constructor(g,C){this.shortDelay=g,this.longDelay=C,fn(C>g,"Short delay should be less than long delay!"),this.isMobile=(0,_.uI)()||(0,_.b$)()}get(){return function Vn(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function Tr(){return"http:"===Bi()||"https:"===Bi()}()||(0,_.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Yt(R,g){fn(R.emulator,"Emulator should always be set here");const{url:C}=R.emulator;return g?`${C}${g.startsWith("/")?g.slice(1):g}`:C}class Jt{static initialize(g,C,O){this.fetchImpl=g,C&&(this.headersImpl=C),O&&(this.responseImpl=O)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void _n("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void _n("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void _n("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const lt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Ct=new gn(3e4,6e4);function rn(R,g){return R.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:R.tenantId}):g}function zt(R,g,C,O){return sn.apply(this,arguments)}function sn(){return(sn=(0,o.Z)(function*(R,g,C,O,W={}){return bn(R,W,(0,o.Z)(function*(){let Y={},oe={};O&&("GET"===g?oe=O:Y={body:JSON.stringify(O)});const ve=(0,_.xO)(Object.assign({key:R.config.apiKey},oe)).slice(1),$e=yield R._getAdditionalHeaders();return $e["Content-Type"]="application/json",R.languageCode&&($e["X-Firebase-Locale"]=R.languageCode),Jt.fetch()(ti(R,R.config.apiHost,C,ve),Object.assign({method:g,headers:$e,referrerPolicy:"no-referrer"},Y))}))})).apply(this,arguments)}function bn(R,g,C){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,o.Z)(function*(R,g,C){R._canInitEmulator=!1;const O=Object.assign(Object.assign({},lt),g);try{const W=new Qt(R),Y=yield Promise.race([C(),W.promise]);W.clearNetworkTimeout();const oe=yield Y.json();if("needConfirmation"in oe)throw tr(R,"account-exists-with-different-credential",oe);if(Y.ok&&!("errorMessage"in oe))return oe;{const ve=Y.ok?oe.errorMessage:oe.error.message,[$e,ze]=ve.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===$e)throw tr(R,"credential-already-in-use",oe);if("EMAIL_EXISTS"===$e)throw tr(R,"email-already-in-use",oe);if("USER_DISABLED"===$e)throw tr(R,"user-disabled",oe);const ct=O[$e]||$e.toLowerCase().replace(/[_\s]+/g,"-");if(ze)throw Un(R,ct,ze);Pt(R,ct)}}catch(W){if(W instanceof _.ZR)throw W;Pt(R,"network-request-failed",{message:String(W)})}})).apply(this,arguments)}function cr(R,g,C,O){return ln.apply(this,arguments)}function ln(){return(ln=(0,o.Z)(function*(R,g,C,O,W={}){const Y=yield zt(R,g,C,O,W);return"mfaPendingCredential"in Y&&Pt(R,"multi-factor-auth-required",{_serverResponse:Y}),Y})).apply(this,arguments)}function ti(R,g,C,O){const W=`${g}${C}?${O}`;return R.config.emulator?Yt(R.config,W):`${R.config.apiScheme}://${W}`}class Qt{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((C,O)=>{this.timer=setTimeout(()=>O(Ft(this.auth,"network-request-failed")),Ct.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function tr(R,g,C){const O={appName:R.name};C.email&&(O.email=C.email),C.phoneNumber&&(O.phoneNumber=C.phoneNumber);const W=Ft(R,g,O);return W.customData._tokenResponse=C,W}function Ne(){return(Ne=(0,o.Z)(function*(R,g){return zt(R,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function je(){return(je=(0,o.Z)(function*(R,g){return zt(R,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function ht(){return(ht=(0,o.Z)(function*(R,g){return zt(R,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function wt(R){if(R)try{const g=new Date(Number(R));if(!isNaN(g.getTime()))return g.toUTCString()}catch{}}function ae(){return(ae=(0,o.Z)(function*(R,g=!1){const C=(0,_.m9)(R),O=yield C.getIdToken(g),W=Ue(O);Ve(W&&W.exp&&W.auth_time&&W.iat,C.auth,"internal-error");const Y="object"==typeof W.firebase?W.firebase:void 0,oe=Y?.sign_in_provider;return{claims:W,token:O,authTime:wt(ge(W.auth_time)),issuedAtTime:wt(ge(W.iat)),expirationTime:wt(ge(W.exp)),signInProvider:oe||null,signInSecondFactor:Y?.sign_in_second_factor||null}})).apply(this,arguments)}function ge(R){return 1e3*Number(R)}function Ue(R){const[g,C,O]=R.split(".");if(void 0===g||void 0===C||void 0===O)return Gt("JWT malformed, contained fewer than 3 sections"),null;try{const W=(0,_.tV)(C);return W?JSON.parse(W):(Gt("Failed to decode base64 JWT payload"),null)}catch(W){return Gt("Caught error parsing JWT payload as JSON",W?.toString()),null}}function We(R,g){return kt.apply(this,arguments)}function kt(){return(kt=(0,o.Z)(function*(R,g,C=!1){if(C)return g;try{return yield g}catch(O){throw O instanceof _.ZR&&function En({code:R}){return"auth/user-disabled"===R||"auth/user-token-expired"===R}(O)&&R.auth.currentUser===R&&(yield R.auth.signOut()),O}})).apply(this,arguments)}class sr{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var C;if(g){const O=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),O}{this.errorBackoff=3e4;const W=(null!==(C=this.user.stsTokenManager.expirationTime)&&void 0!==C?C:0)-Date.now()-3e5;return Math.max(0,W)}}schedule(g=!1){var C=this;if(!this.isRunning)return;const O=this.getInterval(g);this.timerId=setTimeout((0,o.Z)(function*(){yield C.iteration()}),O)}iteration(){var g=this;return(0,o.Z)(function*(){try{yield g.user.getIdToken(!0)}catch(C){return void("auth/network-request-failed"===C?.code&&g.schedule(!0))}g.schedule()})()}}class Ln{constructor(g,C){this.createdAt=g,this.lastLoginAt=C,this._initializeTime()}_initializeTime(){this.lastSignInTime=wt(this.lastLoginAt),this.creationTime=wt(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Tn(R){return on.apply(this,arguments)}function on(){return on=(0,o.Z)(function*(R){var g;const C=R.auth,O=yield R.getIdToken(),W=yield We(R,function nt(R,g){return ht.apply(this,arguments)}(C,{idToken:O}));Ve(W?.users.length,C,"internal-error");const Y=W.users[0];R._notifyReloadListener(Y);const oe=null!==(g=Y.providerUserInfo)&&void 0!==g&&g.length?function Pc(R){return R.map(g=>{var{providerId:C}=g,O=S(g,["providerId"]);return{providerId:C,uid:O.rawId||"",displayName:O.displayName||null,email:O.email||null,phoneNumber:O.phoneNumber||null,photoURL:O.photoUrl||null}})}(Y.providerUserInfo):[],ve=function So(R,g){return[...R.filter(O=>!g.some(W=>W.providerId===O.providerId)),...g]}(R.providerData,oe),ct=!!R.isAnonymous&&!(R.email&&Y.passwordHash||ve?.length),gt={uid:Y.localId,displayName:Y.displayName||null,photoURL:Y.photoUrl||null,email:Y.email||null,emailVerified:Y.emailVerified||!1,phoneNumber:Y.phoneNumber||null,tenantId:Y.tenantId||null,providerData:ve,metadata:new Ln(Y.createdAt,Y.lastLoginAt),isAnonymous:ct};Object.assign(R,gt)}),on.apply(this,arguments)}function bi(){return(bi=(0,o.Z)(function*(R){const g=(0,_.m9)(R);yield Tn(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function Zs(){return(Zs=(0,o.Z)(function*(R,g){const C=yield bn(R,{},(0,o.Z)(function*(){const O=(0,_.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:W,apiKey:Y}=R.config,oe=ti(R,W,"/v1/token",`key=${Y}`),ve=yield R._getAdditionalHeaders();return ve["Content-Type"]="application/x-www-form-urlencoded",Jt.fetch()(oe,{method:"POST",headers:ve,body:O})}));return{accessToken:C.access_token,expiresIn:C.expires_in,refreshToken:C.refresh_token}})).apply(this,arguments)}class Ms{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){Ve(g.idToken,"internal-error"),Ve(typeof g.idToken<"u","internal-error"),Ve(typeof g.refreshToken<"u","internal-error");const C="expiresIn"in g&&typeof g.expiresIn<"u"?Number(g.expiresIn):function Ie(R){const g=Ue(R);return Ve(g,"internal-error"),Ve(typeof g.exp<"u","internal-error"),Ve(typeof g.iat<"u","internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,C)}getToken(g,C=!1){var O=this;return(0,o.Z)(function*(){return Ve(!O.accessToken||O.refreshToken,g,"user-token-expired"),C||!O.accessToken||O.isExpired?O.refreshToken?(yield O.refresh(g,O.refreshToken),O.accessToken):null:O.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,C){var O=this;return(0,o.Z)(function*(){const{accessToken:W,refreshToken:Y,expiresIn:oe}=yield function Dc(R,g){return Zs.apply(this,arguments)}(g,C);O.updateTokensAndExpiration(W,Y,Number(oe))})()}updateTokensAndExpiration(g,C,O){this.refreshToken=C||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*O}static fromJSON(g,C){const{refreshToken:O,accessToken:W,expirationTime:Y}=C,oe=new Ms;return O&&(Ve("string"==typeof O,"internal-error",{appName:g}),oe.refreshToken=O),W&&(Ve("string"==typeof W,"internal-error",{appName:g}),oe.accessToken=W),Y&&(Ve("number"==typeof Y,"internal-error",{appName:g}),oe.expirationTime=Y),oe}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new Ms,this.toJSON())}_performRefresh(){return _n("not implemented")}}function ni(R,g){Ve("string"==typeof R||typeof R>"u","internal-error",{appName:g})}class ri{constructor(g){var{uid:C,auth:O,stsTokenManager:W}=g,Y=S(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new sr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=C,this.auth=O,this.stsTokenManager=W,this.accessToken=W.accessToken,this.displayName=Y.displayName||null,this.email=Y.email||null,this.emailVerified=Y.emailVerified||!1,this.phoneNumber=Y.phoneNumber||null,this.photoURL=Y.photoURL||null,this.isAnonymous=Y.isAnonymous||!1,this.tenantId=Y.tenantId||null,this.providerData=Y.providerData?[...Y.providerData]:[],this.metadata=new Ln(Y.createdAt||void 0,Y.lastLoginAt||void 0)}getIdToken(g){var C=this;return(0,o.Z)(function*(){const O=yield We(C,C.stsTokenManager.getToken(C.auth,g));return Ve(O,C.auth,"internal-error"),C.accessToken!==O&&(C.accessToken=O,yield C.auth._persistUserIfCurrent(C),C.auth._notifyListenersIfCurrent(C)),O})()}getIdTokenResult(g){return function ue(R){return ae.apply(this,arguments)}(this,g)}reload(){return function Nr(R){return bi.apply(this,arguments)}(this)}_assign(g){this!==g&&(Ve(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(C=>Object.assign({},C)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){const C=new ri(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}));return C.metadata._copy(this.metadata),C}_onReload(g){Ve(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,C=!1){var O=this;return(0,o.Z)(function*(){let W=!1;g.idToken&&g.idToken!==O.stsTokenManager.accessToken&&(O.stsTokenManager.updateFromServerResponse(g),W=!0),C&&(yield Tn(O)),yield O.auth._persistUserIfCurrent(O),W&&O.auth._notifyListenersIfCurrent(O)})()}delete(){var g=this;return(0,o.Z)(function*(){const C=yield g.getIdToken();return yield We(g,function mn(R,g){return Ne.apply(this,arguments)}(g.auth,{idToken:C})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,C){var O,W,Y,oe,ve,$e,ze,ct;const gt=null!==(O=C.displayName)&&void 0!==O?O:void 0,cn=null!==(W=C.email)&&void 0!==W?W:void 0,ui=null!==(Y=C.phoneNumber)&&void 0!==Y?Y:void 0,Ho=null!==(oe=C.photoURL)&&void 0!==oe?oe:void 0,Ph=null!==(ve=C.tenantId)&&void 0!==ve?ve:void 0,fd=null!==($e=C._redirectEventId)&&void 0!==$e?$e:void 0,Dh=null!==(ze=C.createdAt)&&void 0!==ze?ze:void 0,ef=null!==(ct=C.lastLoginAt)&&void 0!==ct?ct:void 0,{uid:_a,emailVerified:pm,isAnonymous:Rh,providerData:ml,stsTokenManager:tf}=C;Ve(_a&&tf,g,"internal-error");const gd=Ms.fromJSON(this.name,tf);Ve("string"==typeof _a,g,"internal-error"),ni(gt,g.name),ni(cn,g.name),Ve("boolean"==typeof pm,g,"internal-error"),Ve("boolean"==typeof Rh,g,"internal-error"),ni(ui,g.name),ni(Ho,g.name),ni(Ph,g.name),ni(fd,g.name),ni(Dh,g.name),ni(ef,g.name);const fc=new ri({uid:_a,auth:g,email:cn,emailVerified:pm,displayName:gt,isAnonymous:Rh,photoURL:Ho,phoneNumber:ui,tenantId:Ph,stsTokenManager:gd,createdAt:Dh,lastLoginAt:ef});return ml&&Array.isArray(ml)&&(fc.providerData=ml.map(Ni=>Object.assign({},Ni))),fd&&(fc._redirectEventId=fd),fc}static _fromIdTokenResponse(g,C,O=!1){return(0,o.Z)(function*(){const W=new Ms;W.updateFromServerResponse(C);const Y=new ri({uid:C.localId,auth:g,stsTokenManager:W,isAnonymous:O});return yield Tn(Y),Y})()}}const Ks=new Map;function Rt(R){fn(R instanceof Function,"Expected a class definition");let g=Ks.get(R);return g?(fn(g instanceof R,"Instance stored in cache mismatched with class"),g):(g=new R,Ks.set(R,g),g)}function Kr(R,g,C){return`firebase:${R}:${g}:${C}`}function ns(R=(0,_.z$)()){const g=R.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function jt(R=(0,_.z$)()){return/android/i.test(R)}function gi(R=(0,_.z$)()){return/iphone|ipad|ipod/i.test(R)||/macintosh/i.test(R)&&/mobile/i.test(R)}function Zo(R=(0,_.z$)()){return gi(R)||jt(R)||function si(R=(0,_.z$)()){return/webos/i.test(R)}(R)||function Nn(R=(0,_.z$)()){return/blackberry/i.test(R)}(R)||/windows phone/i.test(R)||function ft(R=(0,_.z$)()){return/iemobile/i.test(R)}(R)}function Bn(R){return(0,_.m9)(R)}class Xo{constructor(g,C){this.providerId=g,this.signInMethod=C}toJSON(){return _n("not implemented")}_getIdTokenResponse(g){return _n("not implemented")}_linkToIdToken(g,C){return _n("not implemented")}_getReauthenticationResolver(g){return _n("not implemented")}}function xs(R,g){return xc.apply(this,arguments)}function xc(){return(xc=(0,o.Z)(function*(R,g){return zt(R,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function ea(R,g){return Ou.apply(this,arguments)}function Ou(){return(Ou=(0,o.Z)(function*(R,g){return zt(R,"POST","/v1/accounts:sendOobCode",rn(R,g))})).apply(this,arguments)}function is(){return(is=(0,o.Z)(function*(R,g){return ea(R,g)})).apply(this,arguments)}function kc(){return(kc=(0,o.Z)(function*(R,g){return ea(R,g)})).apply(this,arguments)}function Di(R,g){return na.apply(this,arguments)}function na(){return(na=(0,o.Z)(function*(R,g){return cr(R,"POST","/v1/accounts:signInWithIdp",rn(R,g))})).apply(this,arguments)}class mi extends Xo{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const C=new mi(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(C.idToken=g.idToken),g.accessToken&&(C.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(C.nonce=g.nonce),g.pendingToken&&(C.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(C.accessToken=g.oauthToken,C.secret=g.oauthTokenSecret):Pt("argument-error"),C}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const C="string"==typeof g?JSON.parse(g):g,{providerId:O,signInMethod:W}=C,Y=S(C,["providerId","signInMethod"]);if(!O||!W)return null;const oe=new mi(O,W);return oe.idToken=Y.idToken||void 0,oe.accessToken=Y.accessToken||void 0,oe.secret=Y.secret,oe.nonce=Y.nonce,oe.pendingToken=Y.pendingToken||null,oe}_getIdTokenResponse(g){return Di(g,this.buildRequest())}_linkToIdToken(g,C){const O=this.buildRequest();return O.idToken=C,Di(g,O)}_getReauthenticationResolver(g){const C=this.buildRequest();return C.autoCreate=!1,Di(g,C)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const C={};this.idToken&&(C.id_token=this.idToken),this.accessToken&&(C.access_token=this.accessToken),this.secret&&(C.oauth_token_secret=this.secret),C.providerId=this.providerId,this.nonce&&!this.pendingToken&&(C.nonce=this.nonce),g.postBody=(0,_.xO)(C)}return g}}function os(){return(os=(0,o.Z)(function*(R,g){return zt(R,"POST","/v1/accounts:sendVerificationCode",rn(R,g))})).apply(this,arguments)}function Qs(){return(Qs=(0,o.Z)(function*(R,g){return cr(R,"POST","/v1/accounts:signInWithPhoneNumber",rn(R,g))})).apply(this,arguments)}function zn(){return(zn=(0,o.Z)(function*(R,g){const C=yield cr(R,"POST","/v1/accounts:signInWithPhoneNumber",rn(R,g));if(C.temporaryProof)throw tr(R,"account-exists-with-different-credential",C);return C})).apply(this,arguments)}const Ua={USER_NOT_FOUND:"user-not-found"};function or(){return(or=(0,o.Z)(function*(R,g){return cr(R,"POST","/v1/accounts:signInWithPhoneNumber",rn(R,Object.assign(Object.assign({},g),{operation:"REAUTH"})),Ua)})).apply(this,arguments)}class Ns extends Xo{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,C){return new Ns({verificationId:g,verificationCode:C})}static _fromTokenResponse(g,C){return new Ns({phoneNumber:g,temporaryProof:C})}_getIdTokenResponse(g){return function ai(R,g){return Qs.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,C){return function Po(R,g){return zn.apply(this,arguments)}(g,Object.assign({idToken:C},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function Xs(R,g){return or.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:C,verificationId:O,verificationCode:W}=this.params;return g&&C?{temporaryProof:g,phoneNumber:C}:{sessionInfo:O,code:W}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:C,verificationCode:O,phoneNumber:W,temporaryProof:Y}=g;return O||C||W||Y?new Ns({verificationId:C,verificationCode:O,phoneNumber:W,temporaryProof:Y}):null}}class Gi{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class _r extends Gi{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class cs extends _r{static credentialFromJSON(g){const C="string"==typeof g?JSON.parse(g):g;return Ve("providerId"in C&&"signInMethod"in C,"argument-error"),mi._fromParams(C)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return Ve(g.idToken||g.accessToken,"argument-error"),mi._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return cs.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return cs.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:C,oauthAccessToken:O,oauthTokenSecret:W,pendingToken:Y,nonce:oe,providerId:ve}=g;if(!O&&!W&&!C&&!Y||!ve)return null;try{return new cs(ve)._credential({idToken:C,accessToken:O,nonce:oe,pendingToken:Y})}catch{return null}}}let ra=(()=>{class R extends _r{constructor(){super("facebook.com")}static credential(C){return mi._fromParams({providerId:R.PROVIDER_ID,signInMethod:R.FACEBOOK_SIGN_IN_METHOD,accessToken:C})}static credentialFromResult(C){return R.credentialFromTaggedObject(C)}static credentialFromError(C){return R.credentialFromTaggedObject(C.customData||{})}static credentialFromTaggedObject({_tokenResponse:C}){if(!C||!("oauthAccessToken"in C)||!C.oauthAccessToken)return null;try{return R.credential(C.oauthAccessToken)}catch{return null}}}return R.FACEBOOK_SIGN_IN_METHOD="facebook.com",R.PROVIDER_ID="facebook.com",R})(),Ut=(()=>{class R extends _r{constructor(){super("google.com"),this.addScope("profile")}static credential(C,O){return mi._fromParams({providerId:R.PROVIDER_ID,signInMethod:R.GOOGLE_SIGN_IN_METHOD,idToken:C,accessToken:O})}static credentialFromResult(C){return R.credentialFromTaggedObject(C)}static credentialFromError(C){return R.credentialFromTaggedObject(C.customData||{})}static credentialFromTaggedObject({_tokenResponse:C}){if(!C)return null;const{oauthIdToken:O,oauthAccessToken:W}=C;if(!O&&!W)return null;try{return R.credential(O,W)}catch{return null}}}return R.GOOGLE_SIGN_IN_METHOD="google.com",R.PROVIDER_ID="google.com",R})(),Ba=(()=>{class R extends _r{constructor(){super("github.com")}static credential(C){return mi._fromParams({providerId:R.PROVIDER_ID,signInMethod:R.GITHUB_SIGN_IN_METHOD,accessToken:C})}static credentialFromResult(C){return R.credentialFromTaggedObject(C)}static credentialFromError(C){return R.credentialFromTaggedObject(C.customData||{})}static credentialFromTaggedObject({_tokenResponse:C}){if(!C||!("oauthAccessToken"in C)||!C.oauthAccessToken)return null;try{return R.credential(C.oauthAccessToken)}catch{return null}}}return R.GITHUB_SIGN_IN_METHOD="github.com",R.PROVIDER_ID="github.com",R})();class eo extends Xo{constructor(g,C){super(g,g),this.pendingToken=C}_getIdTokenResponse(g){return Di(g,this.buildRequest())}_linkToIdToken(g,C){const O=this.buildRequest();return O.idToken=C,Di(g,O)}_getReauthenticationResolver(g){const C=this.buildRequest();return C.autoCreate=!1,Di(g,C)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const C="string"==typeof g?JSON.parse(g):g,{providerId:O,signInMethod:W,pendingToken:Y}=C;return O&&W&&Y&&O===W?new eo(O,Y):null}static _create(g,C){return new eo(g,C)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}let jc=(()=>{class R extends _r{constructor(){super("twitter.com")}static credential(C,O){return mi._fromParams({providerId:R.PROVIDER_ID,signInMethod:R.TWITTER_SIGN_IN_METHOD,oauthToken:C,oauthTokenSecret:O})}static credentialFromResult(C){return R.credentialFromTaggedObject(C)}static credentialFromError(C){return R.credentialFromTaggedObject(C.customData||{})}static credentialFromTaggedObject({_tokenResponse:C}){if(!C)return null;const{oauthAccessToken:O,oauthTokenSecret:W}=C;if(!O||!W)return null;try{return R.credential(O,W)}catch{return null}}}return R.TWITTER_SIGN_IN_METHOD="twitter.com",R.PROVIDER_ID="twitter.com",R})();class Re{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,C,O,W=!1){return(0,o.Z)(function*(){const Y=yield ri._fromIdTokenResponse(g,O,W),oe=Wt(O);return new Re({user:Y,providerId:oe,_tokenResponse:O,operationType:C})})()}static _forOperation(g,C,O){return(0,o.Z)(function*(){yield g._updateTokensIfNecessary(O,!0);const W=Wt(O);return new Re({user:g,providerId:W,_tokenResponse:O,operationType:C})})()}}function Wt(R){return R.providerId?R.providerId:"phoneNumber"in R?"phone":null}class Jn extends _.ZR{constructor(g,C,O,W){var Y;super(C.code,C.message),this.operationType=O,this.user=W,Object.setPrototypeOf(this,Jn.prototype),this.customData={appName:g.name,tenantId:null!==(Y=g.tenantId)&&void 0!==Y?Y:void 0,_serverResponse:C.customData._serverResponse,operationType:O}}static _fromErrorAndOperation(g,C,O,W){return new Jn(g,C,O,W)}}function Vc(R,g,C,O){return("reauthenticate"===g?C._getReauthenticationResolver(R):C._getIdTokenResponse(R)).catch(Y=>{throw"auth/multi-factor-auth-required"===Y.code?Jn._fromErrorAndOperation(R,Y,g,O):Y})}function ia(R){return new Set(R.map(({providerId:g})=>g).filter(g=>!!g))}function za(){return za=(0,o.Z)(function*(R,g){const C=(0,_.m9)(R);yield Wi(!0,C,g);const{providerUserInfo:O}=yield function de(R,g){return je.apply(this,arguments)}(C.auth,{idToken:yield C.getIdToken(),deleteProvider:[g]}),W=ia(O||[]);return C.providerData=C.providerData.filter(Y=>W.has(Y.providerId)),W.has("phone")||(C.phoneNumber=null),yield C.auth._persistUserIfCurrent(C),C}),za.apply(this,arguments)}function to(R,g){return Fu.apply(this,arguments)}function Fu(){return(Fu=(0,o.Z)(function*(R,g,C=!1){const O=yield We(R,g._linkToIdToken(R.auth,yield R.getIdToken()),C);return Re._forOperation(R,"link",O)})).apply(this,arguments)}function Wi(R,g,C){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,o.Z)(function*(R,g,C){yield Tn(g);const W=!1===R?"provider-already-linked":"no-such-provider";Ve(ia(g.providerData).has(C)===R,g.auth,W)})).apply(this,arguments)}function lr(R,g){return jr.apply(this,arguments)}function jr(){return(jr=(0,o.Z)(function*(R,g,C=!1){const{auth:O}=R,W="reauthenticate";try{const Y=yield We(R,Vc(O,W,g,R),C);Ve(Y.idToken,O,"internal-error");const oe=Ue(Y.idToken);Ve(oe,O,"internal-error");const{sub:ve}=oe;return Ve(R.uid===ve,O,"user-mismatch"),Re._forOperation(R,W,Y)}catch(Y){throw"auth/user-not-found"===Y?.code&&Pt(O,"user-mismatch"),Y}})).apply(this,arguments)}function us(R,g){return ls.apply(this,arguments)}function ls(){return(ls=(0,o.Z)(function*(R,g,C=!1){const O="signIn",W=yield Vc(R,O,g),Y=yield Re._fromIdTokenResponse(R,O,W);return C||(yield R._updateCurrentUser(Y.user)),Y})).apply(this,arguments)}function no(R,g){return sa.apply(this,arguments)}function sa(){return(sa=(0,o.Z)(function*(R,g){const C=(0,_.m9)(R);return yield Wi(!1,C,g.providerId),to(C,g)})).apply(this,arguments)}function jl(R,g){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,o.Z)(function*(R,g){return lr((0,_.m9)(R),g)})).apply(this,arguments)}class Oo{constructor(g,C){this.factorId=g,this.uid=C.mfaEnrollmentId,this.enrollmentTime=new Date(C.enrolledAt).toUTCString(),this.displayName=C.displayName}static _fromServerResponse(g,C){return"phoneInfo"in C?xo._fromServerResponse(g,C):"totpInfo"in C?oa._fromServerResponse(g,C):Pt(g,"internal-error")}}class xo extends Oo{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,C){return new xo(C)}}class oa extends Oo{constructor(g){super("totp",g)}static _fromServerResponse(g,C){return new oa(C)}}function ds(R,g,C){var O;Ve((null===(O=C.url)||void 0===O?void 0:O.length)>0,R,"invalid-continue-uri"),Ve(typeof C.dynamicLinkDomain>"u"||C.dynamicLinkDomain.length>0,R,"invalid-dynamic-link-domain"),g.continueUrl=C.url,g.dynamicLinkDomain=C.dynamicLinkDomain,g.canHandleCodeInApp=C.handleCodeInApp,C.iOS&&(Ve(C.iOS.bundleId.length>0,R,"missing-ios-bundle-id"),g.iOSBundleId=C.iOS.bundleId),C.android&&(Ve(C.android.packageName.length>0,R,"missing-android-pkg-name"),g.androidInstallApp=C.android.installApp,g.androidMinimumVersionCode=C.android.minimumVersion,g.androidPackageName=C.android.packageName)}function Ya(){return Ya=(0,o.Z)(function*(R,g){const C=(0,_.m9)(R),W={requestType:"VERIFY_EMAIL",idToken:yield R.getIdToken()};g&&ds(C.auth,W,g);const{email:Y}=yield function Ys(R,g){return is.apply(this,arguments)}(C.auth,W);Y!==R.email&&(yield R.reload())}),Ya.apply(this,arguments)}function Vu(){return Vu=(0,o.Z)(function*(R,g,C){const O=(0,_.m9)(R),Y={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield R.getIdToken(),newEmail:g};C&&ds(O.auth,Y,C);const{email:oe}=yield function Ep(R,g){return kc.apply(this,arguments)}(O.auth,Y);oe!==R.email&&(yield R.reload())}),Vu.apply(this,arguments)}function Zc(){return(Zc=(0,o.Z)(function*(R,g){return zt(R,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function ko(){return ko=(0,o.Z)(function*(R,{displayName:g,photoURL:C}){if(void 0===g&&void 0===C)return;const O=(0,_.m9)(R),Y={idToken:yield O.getIdToken(),displayName:g,photoUrl:C,returnSecureToken:!0},oe=yield We(O,function qc(R,g){return Zc.apply(this,arguments)}(O.auth,Y));O.displayName=oe.displayName||null,O.photoURL=oe.photoUrl||null;const ve=O.providerData.find(({providerId:$e})=>"password"===$e);ve&&(ve.displayName=O.displayName,ve.photoURL=O.photoURL),yield O._updateTokensIfNecessary(oe)}),ko.apply(this,arguments)}function B(R,g,C){return Q.apply(this,arguments)}function Q(){return(Q=(0,o.Z)(function*(R,g,C){const{auth:O}=R,Y={idToken:yield R.getIdToken(),returnSecureToken:!0};g&&(Y.email=g),C&&(Y.password=C);const oe=yield We(R,xs(O,Y));yield R._updateTokensIfNecessary(oe,!0)})).apply(this,arguments)}class xe{constructor(g,C,O={}){this.isNewUser=g,this.providerId=C,this.profile=O}}class St extends xe{constructor(g,C,O,W){super(g,C,O),this.username=W}}class an extends xe{constructor(g,C){super(g,"facebook.com",C)}}class Hn extends St{constructor(g,C){super(g,"github.com",C,"string"==typeof C?.login?C?.login:null)}}class $n extends xe{constructor(g,C){super(g,"google.com",C)}}class Zi extends St{constructor(g,C,O){super(g,"twitter.com",C,O)}}function Kc(R){const{user:g,_tokenResponse:C}=R;return g.isAnonymous&&!C?{providerId:null,isNewUser:!1,profile:null}:function se(R){var g,C;if(!R)return null;const{providerId:O}=R,W=R.rawUserInfo?JSON.parse(R.rawUserInfo):{},Y=R.isNewUser||"identitytoolkit#SignupNewUserResponse"===R.kind;if(!O&&R?.idToken){const oe=null===(C=null===(g=Ue(R.idToken))||void 0===g?void 0:g.firebase)||void 0===C?void 0:C.sign_in_provider;if(oe)return new xe(Y,"anonymous"!==oe&&"custom"!==oe?oe:null)}if(!O)return null;switch(O){case"facebook.com":return new an(Y,W);case"github.com":return new Hn(Y,W);case"google.com":return new $n(Y,W);case"twitter.com":return new Zi(Y,W,R.screenName||null);case"custom":case"anonymous":return new xe(Y,null);default:return new xe(Y,O,W)}}(C)}class Lo{constructor(g,C,O){this.type=g,this.credential=C,this.auth=O}static _fromIdtoken(g,C){return new Lo("enroll",g,C)}static _fromMfaPendingCredential(g){return new Lo("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var C,O;if(g?.multiFactorSession){if(null!==(C=g.multiFactorSession)&&void 0!==C&&C.pendingCredential)return Lo._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null!==(O=g.multiFactorSession)&&void 0!==O&&O.idToken)return Lo._fromIdtoken(g.multiFactorSession.idToken)}return null}}class Hu{constructor(g,C,O){this.session=g,this.hints=C,this.signInResolver=O}static _fromError(g,C){const O=Bn(g),W=C.customData._serverResponse,Y=(W.mfaInfo||[]).map(ve=>Oo._fromServerResponse(O,ve));Ve(W.mfaPendingCredential,O,"internal-error");const oe=Lo._fromMfaPendingCredential(W.mfaPendingCredential);return new Hu(oe,Y,function(){var ve=(0,o.Z)(function*($e){const ze=yield $e._process(O,oe);delete W.mfaInfo,delete W.mfaPendingCredential;const ct=Object.assign(Object.assign({},W),{idToken:ze.idToken,refreshToken:ze.refreshToken});switch(C.operationType){case"signIn":const gt=yield Re._fromIdTokenResponse(O,C.operationType,ct);return yield O._updateCurrentUser(gt.user),gt;case"reauthenticate":return Ve(C.user,O,"internal-error"),Re._forOperation(C.user,C.operationType,ct);default:Pt(O,"internal-error")}});return function($e){return ve.apply(this,arguments)}}())}resolveSignIn(g){var C=this;return(0,o.Z)(function*(){return C.signInResolver(g)})()}}class rh{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(C=>{C.mfaInfo&&(this.enrolledFactors=C.mfaInfo.map(O=>Oo._fromServerResponse(g.auth,O)))})}static _fromUser(g){return new rh(g)}getSession(){var g=this;return(0,o.Z)(function*(){return Lo._fromIdtoken(yield g.user.getIdToken(),g.user.auth)})()}enroll(g,C){var O=this;return(0,o.Z)(function*(){const W=g,Y=yield O.getSession(),oe=yield We(O.user,W._process(O.user.auth,Y,C));return yield O.user._updateTokensIfNecessary(oe),O.user.reload()})()}unenroll(g){var C=this;return(0,o.Z)(function*(){const O="string"==typeof g?g:g.uid,W=yield C.user.getIdToken();try{const Y=yield We(C.user,function hr(R,g){return zt(R,"POST","/v2/accounts/mfaEnrollment:withdraw",rn(R,g))}(C.user.auth,{idToken:W,mfaEnrollmentId:O}));C.enrolledFactors=C.enrolledFactors.filter(({uid:oe})=>oe!==O),yield C.user._updateTokensIfNecessary(Y),yield C.user.reload()}catch(Y){throw Y}})()}}const Xa=new WeakMap;class ih{constructor(g,C){this.storageRetriever=g,this.type=C}_isAvailable(){try{return this.storage?(this.storage.setItem("__sak","1"),this.storage.removeItem("__sak"),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(g,C){return this.storage.setItem(g,JSON.stringify(C)),Promise.resolve()}_get(g){const C=this.storage.getItem(g);return Promise.resolve(C?JSON.parse(C):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const la=(()=>{class R extends ih{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(C,O)=>this.onStorageEvent(C,O),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function sh(){const R=(0,_.z$)();return ns(R)||gi(R)}()&&function Ti(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Zo(),this._shouldAllowMigration=!0}forAllChangedKeys(C){for(const O of Object.keys(this.listeners)){const W=this.storage.getItem(O),Y=this.localCache[O];W!==Y&&C(O,Y,W)}}onStorageEvent(C,O=!1){if(!C.key)return void this.forAllChangedKeys((ve,$e,ze)=>{this.notifyListeners(ve,ze)});const W=C.key;if(O?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ve=this.storage.getItem(W);if(C.newValue!==ve)null!==C.newValue?this.storage.setItem(W,C.newValue):this.storage.removeItem(W);else if(this.localCache[W]===C.newValue&&!O)return}const Y=()=>{const ve=this.storage.getItem(W);!O&&this.localCache[W]===ve||this.notifyListeners(W,ve)},oe=this.storage.getItem(W);!function Zn(){return(0,_.w1)()&&10===document.documentMode}()||oe===C.newValue||C.newValue===C.oldValue?Y():setTimeout(Y,10)}notifyListeners(C,O){this.localCache[C]=O;const W=this.listeners[C];if(W)for(const Y of Array.from(W))Y(O&&JSON.parse(O))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((C,O,W)=>{this.onStorageEvent(new StorageEvent("storage",{key:C,oldValue:O,newValue:W}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(C,O){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[C]||(this.listeners[C]=new Set,this.localCache[C]=this.storage.getItem(C)),this.listeners[C].add(O)}_removeListener(C,O){this.listeners[C]&&(this.listeners[C].delete(O),0===this.listeners[C].size&&delete this.listeners[C]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(C,O){var W=()=>super._set,Y=this;return(0,o.Z)(function*(){yield W().call(Y,C,O),Y.localCache[C]=JSON.stringify(O)})()}_get(C){var O=()=>super._get,W=this;return(0,o.Z)(function*(){const Y=yield O().call(W,C);return W.localCache[C]=JSON.stringify(Y),Y})()}_remove(C){var O=()=>super._remove,W=this;return(0,o.Z)(function*(){yield O().call(W,C),delete W.localCache[C]})()}}return R.type="LOCAL",R})(),Ri=(()=>{class R extends ih{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(C,O){}_removeListener(C,O){}}return R.type="SESSION",R})();function nc(R="",g=10){let C="";for(let O=0;O<g;O++)C+=Math.floor(10*Math.random());return R+C}function pr(){return window}const tu="recaptcha";class $l{constructor(g,C){this.verificationId=g,this.onConfirmation=C}confirm(g){const C=Ns._fromVerification(this.verificationId,g);return this.onConfirmation(C)}}function sc(){return(sc=(0,o.Z)(function*(R,g,C){const O=(0,_.m9)(R);yield Wi(!1,O,"phone");const W=yield jo(O.auth,g,(0,_.m9)(C));return new $l(W,Y=>no(O,Y))})).apply(this,arguments)}function xp(){return(xp=(0,o.Z)(function*(R,g,C){const O=(0,_.m9)(R),W=yield jo(O.auth,g,(0,_.m9)(C));return new $l(W,Y=>jl(O,Y))})).apply(this,arguments)}function jo(R,g,C){return oc.apply(this,arguments)}function oc(){return oc=(0,o.Z)(function*(R,g,C){var O;const W=yield C.verify();try{let Y;if(Ve("string"==typeof W,R,"argument-error"),Ve(C.type===tu,R,"argument-error"),Y="string"==typeof g?{phoneNumber:g}:g,"session"in Y){const oe=Y.session;if("phoneNumber"in Y)return Ve("enroll"===oe.type,R,"internal-error"),(yield function nh(R,g){return zt(R,"POST","/v2/accounts/mfaEnrollment:start",rn(R,g))}(R,{idToken:oe.credential,phoneEnrollmentInfo:{phoneNumber:Y.phoneNumber,recaptchaToken:W}})).phoneSessionInfo.sessionInfo;{Ve("signin"===oe.type,R,"internal-error");const ve=(null===(O=Y.multiFactorHint)||void 0===O?void 0:O.uid)||Y.multiFactorUid;return Ve(ve,R,"missing-multi-factor-info"),(yield function Rp(R,g){return zt(R,"POST","/v2/accounts/mfaSignIn:start",rn(R,g))}(R,{mfaPendingCredential:oe.credential,mfaEnrollmentId:ve,phoneSignInInfo:{recaptchaToken:W}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:oe}=yield function Lc(R,g){return os.apply(this,arguments)}(R,{phoneNumber:Y.phoneNumber,recaptchaToken:W});return oe}}finally{C._reset()}}),oc.apply(this,arguments)}function Gl(){return(Gl=(0,o.Z)(function*(R,g){yield to((0,_.m9)(R),g)})).apply(this,arguments)}let ac=(()=>{class R{constructor(C){this.providerId=R.PROVIDER_ID,this.auth=Bn(C)}verifyPhoneNumber(C,O){return jo(this.auth,C,(0,_.m9)(O))}static credential(C,O){return Ns._fromVerification(C,O)}static credentialFromResult(C){return R.credentialFromTaggedObject(C)}static credentialFromError(C){return R.credentialFromTaggedObject(C.customData||{})}static credentialFromTaggedObject({_tokenResponse:C}){if(!C)return null;const{phoneNumber:O,temporaryProof:W}=C;return O&&W?Ns._fromTokenResponse(O,W):null}}return R.PROVIDER_ID="phone",R.PHONE_SIGN_IN_METHOD="phone",R})();function Uo(R,g){return g?Rt(g):(Ve(R._popupRedirectResolver,R,"argument-error"),R._popupRedirectResolver)}class ha extends Xo{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return Di(g,this._buildIdpRequest())}_linkToIdToken(g,C){return Di(g,this._buildIdpRequest(C))}_getReauthenticationResolver(g){return Di(g,this._buildIdpRequest())}_buildIdpRequest(g){const C={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(C.idToken=g),C}}function fr(R){return us(R.auth,new ha(R),R.bypassAuthState)}function Wl(R){const{auth:g,user:C}=R;return Ve(C,g,"internal-error"),lr(C,new ha(R),R.bypassAuthState)}function ql(R){return oo.apply(this,arguments)}function oo(){return(oo=(0,o.Z)(function*(R){const{auth:g,user:C}=R;return Ve(C,g,"internal-error"),to(C,new ha(R),R.bypassAuthState)})).apply(this,arguments)}class Qu{constructor(g,C,O,W,Y=!1){this.auth=g,this.resolver=O,this.user=W,this.bypassAuthState=Y,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(C)?C:[C]}execute(){var g=this;return new Promise(function(){var C=(0,o.Z)(function*(O,W){g.pendingPromise={resolve:O,reject:W};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(Y){g.reject(Y)}});return function(O,W){return C.apply(this,arguments)}}())}onAuthEvent(g){var C=this;return(0,o.Z)(function*(){const{urlResponse:O,sessionId:W,postBody:Y,tenantId:oe,error:ve,type:$e}=g;if(ve)return void C.reject(ve);const ze={auth:C.auth,requestUri:O,sessionId:W,tenantId:oe||void 0,postBody:Y||void 0,user:C.user,bypassAuthState:C.bypassAuthState};try{C.resolve(yield C.getIdpTask($e)(ze))}catch(ct){C.reject(ct)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return fr;case"linkViaPopup":case"linkViaRedirect":return ql;case"reauthViaPopup":case"reauthViaRedirect":return Wl;default:Pt(this.auth,"internal-error")}}resolve(g){fn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){fn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Zl=new gn(2e3,1e4);function hh(){return(hh=(0,o.Z)(function*(R,g,C){const O=(0,_.m9)(R);Cn(O.auth,g,Gi);const W=Uo(O.auth,C);return new fa(O.auth,"reauthViaPopup",g,W,O).executeNotNull()})).apply(this,arguments)}function pa(){return(pa=(0,o.Z)(function*(R,g,C){const O=(0,_.m9)(R);Cn(O.auth,g,Gi);const W=Uo(O.auth,C);return new fa(O.auth,"linkViaPopup",g,W,O).executeNotNull()})).apply(this,arguments)}let fa=(()=>{class R extends Qu{constructor(C,O,W,Y,oe){super(C,O,Y,oe),this.provider=W,this.authWindow=null,this.pollId=null,R.currentPopupAction&&R.currentPopupAction.cancel(),R.currentPopupAction=this}executeNotNull(){var C=this;return(0,o.Z)(function*(){const O=yield C.execute();return Ve(O,C.auth,"internal-error"),O})()}onExecution(){var C=this;return(0,o.Z)(function*(){fn(1===C.filter.length,"Popup operations only handle one event");const O=nc();C.authWindow=yield C.resolver._openPopup(C.auth,C.provider,C.filter[0],O),C.authWindow.associatedEvent=O,C.resolver._originValidation(C.auth).catch(W=>{C.reject(W)}),C.resolver._isIframeWebStorageSupported(C.auth,W=>{W||C.reject(Ft(C.auth,"web-storage-unsupported"))}),C.pollUserCancellation()})()}get eventId(){var C;return(null===(C=this.authWindow)||void 0===C?void 0:C.associatedEvent)||null}cancel(){this.reject(Ft(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,R.currentPopupAction=null}pollUserCancellation(){const C=()=>{var O,W;this.pollId=null!==(W=null===(O=this.authWindow)||void 0===O?void 0:O.window)&&void 0!==W&&W.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ft(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(C,Zl.get())};C()}}return R.currentPopupAction=null,R})();const Jl="pendingRedirect",ru=new Map;class Xu extends Qu{constructor(g,C,O=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],C,void 0,O),this.eventId=null}execute(){var g=()=>super.execute,C=this;return(0,o.Z)(function*(){let O=ru.get(C.auth._key());if(!O){try{const Y=(yield function kp(R,g){return Yl.apply(this,arguments)}(C.resolver,C.auth))?yield g().call(C):null;O=()=>Promise.resolve(Y)}catch(W){O=()=>Promise.reject(W)}ru.set(C.auth._key(),O)}return C.bypassAuthState||ru.set(C.auth._key(),()=>Promise.resolve(null)),O()})()}onAuthEvent(g){var C=()=>super.onAuthEvent,O=this;return(0,o.Z)(function*(){if("signInViaRedirect"===g.type)return C().call(O,g);if("unknown"!==g.type){if(g.eventId){const W=yield O.auth._redirectUserForId(g.eventId);if(W)return O.user=W,C().call(O,g);O.resolve(null)}}else O.resolve(null)})()}onExecution(){return(0,o.Z)(function*(){})()}cleanUp(){}}function Yl(){return(Yl=(0,o.Z)(function*(R,g){const C=tl(g),O=el(R);if(!(yield O._isAvailable()))return!1;const W="true"===(yield O._get(C));return yield O._remove(C),W})).apply(this,arguments)}function Ql(R,g){return qg.apply(this,arguments)}function qg(){return(qg=(0,o.Z)(function*(R,g){return el(R)._set(tl(g),"true")})).apply(this,arguments)}function fh(R,g){ru.set(R._key(),g)}function el(R){return Rt(R._redirectPersistence)}function tl(R){return Kr(Jl,R.config.apiKey,R.name)}function vs(R,g,C){return function ao(R,g,C){return ed.apply(this,arguments)}(R,g,C)}function ed(){return(ed=(0,o.Z)(function*(R,g,C){const O=(0,_.m9)(R);Cn(O.auth,g,Gi),yield O.auth._initializationPromise;const W=Uo(O.auth,C);yield Ql(W,O.auth);const Y=yield F(O);return W._openRedirect(O.auth,g,"reauthViaRedirect",Y)})).apply(this,arguments)}function Bo(R,g,C){return function Lp(R,g,C){return iu.apply(this,arguments)}(R,g,C)}function iu(){return(iu=(0,o.Z)(function*(R,g,C){const O=(0,_.m9)(R);Cn(O.auth,g,Gi),yield O.auth._initializationPromise;const W=Uo(O.auth,C);yield Wi(!1,O,g.providerId),yield Ql(W,O.auth);const Y=yield F(O);return W._openRedirect(O.auth,g,"linkViaRedirect",Y)})).apply(this,arguments)}function rl(R,g){return gh.apply(this,arguments)}function gh(){return(gh=(0,o.Z)(function*(R,g,C=!1){const O=Bn(R),W=Uo(O,g),oe=yield new Xu(O,W,C).execute();return oe&&!C&&(delete oe.user._redirectEventId,yield O._persistUserIfCurrent(oe.user),yield O._setRedirectUser(null,g)),oe})).apply(this,arguments)}function F(R){return H.apply(this,arguments)}function H(){return(H=(0,o.Z)(function*(R){const g=nc(`${R.uid}:::`);return R._redirectEventId=g,yield R.auth._setRedirectUser(R),yield R.auth._persistUserIfCurrent(R),g})).apply(this,arguments)}class re{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let C=!1;return this.consumers.forEach(O=>{this.isEventForConsumer(g,O)&&(C=!0,this.sendToConsumer(g,O),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function Pe(R){switch(R.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ce(R);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,C||(this.queuedRedirectEvent=g,C=!0)),C}sendToConsumer(g,C){var O;if(g.error&&!Ce(g)){const W=(null===(O=g.error.code)||void 0===O?void 0:O.split("auth/")[1])||"internal-error";C.onError(Ft(this.auth,W))}else C.onAuthEvent(g)}isEventForConsumer(g,C){const O=null===C.eventId||!!g.eventId&&g.eventId===C.eventId;return C.filter.includes(g.type)&&O}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(he(g))}saveEventToCache(g){this.cachedEventUids.add(he(g)),this.lastProcessedEventTime=Date.now()}}function he(R){return[R.type,R.eventId,R.sessionId,R.tenantId].filter(g=>g).join("-")}function Ce({type:R,error:g}){return"unknown"===R&&"auth/no-auth-event"===g?.code}function ut(R){return it.apply(this,arguments)}function it(){return(it=(0,o.Z)(function*(R,g={}){return zt(R,"GET","/v1/projects",g)})).apply(this,arguments)}const Tt=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,qt=/^https?/;function xi(){return(xi=(0,o.Z)(function*(R){if(R.config.emulator)return;const{authorizedDomains:g}=yield ut(R);for(const C of g)try{if(Hr(C))return}catch{}Pt(R,"unauthorized-domain")})).apply(this,arguments)}function Hr(R){const g=at(),{protocol:C,hostname:O}=new URL(g);if(R.startsWith("chrome-extension://")){const oe=new URL(R);return""===oe.hostname&&""===O?"chrome-extension:"===C&&R.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===C&&oe.hostname===O}if(!qt.test(C))return!1;if(Tt.test(R))return O===R;const W=R.replace(/\./g,"\\.");return new RegExp("^(.+\\."+W+"|"+W+")$","i").test(O)}const ys=new gn(3e4,6e4);function Qr(){const R=pr().___jsl;if(R?.H)for(const g of Object.keys(R.H))if(R.H[g].r=R.H[g].r||[],R.H[g].L=R.H[g].L||[],R.H[g].r=[...R.H[g].L],R.CP)for(let C=0;C<R.CP.length;C++)R.CP[C]=null}let $r=null;function Bs(R){return $r=$r||function su(R){return new Promise((g,C)=>{var O,W,Y;function oe(){Qr(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{Qr(),C(Ft(R,"network-request-failed"))},timeout:ys.get()})}if(null!==(W=null===(O=pr().gapi)||void 0===O?void 0:O.iframes)&&void 0!==W&&W.Iframe)g(gapi.iframes.getContext());else{if(null===(Y=pr().gapi)||void 0===Y||!Y.load){const ve=function Lr(R){return`__${R}${Math.floor(1e6*Math.random())}`}("iframefcb");return pr()[ve]=()=>{gapi.load?oe():C(Ft(R,"network-request-failed"))},function Io(R){return new Promise((g,C)=>{const O=document.createElement("script");O.setAttribute("src",R),O.onload=g,O.onerror=W=>{const Y=Ft("internal-error");Y.customData=W,C(Y)},O.type="text/javascript",O.charset="UTF-8",function Ai(){var R,g;return null!==(g=null===(R=document.getElementsByTagName("head"))||void 0===R?void 0:R[0])&&void 0!==g?g:document}().appendChild(O)})}(`https://apis.google.com/js/api.js?onload=${ve}`).catch($e=>C($e))}oe()}}).catch(g=>{throw $r=null,g})}(R),$r}const il=new gn(5e3,15e3),Sy="__/auth/iframe",rd="emulator/auth/iframe",Zg={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ey=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ou(R){const g=R.config;Ve(g.authDomain,R,"auth-domain-config-required");const C=g.emulator?Yt(g,rd):`https://${R.config.authDomain}/${Sy}`,O={apiKey:g.apiKey,appName:R.name,v:A.SDK_VERSION},W=Ey.get(R.config.apiHost);W&&(O.eid=W);const Y=R._getFrameworks();return Y.length&&(O.fw=Y.join(",")),`${C}?${(0,_.xO)(O).slice(1)}`}function mh(){return mh=(0,o.Z)(function*(R){const g=yield Bs(R),C=pr().gapi;return Ve(C,R,"internal-error"),g.open({where:document.body,url:ou(R),messageHandlersFilter:C.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Zg,dontclear:!0},O=>new Promise(function(){var W=(0,o.Z)(function*(Y,oe){yield O.restyle({setHideOnLeave:!1});const ve=Ft(R,"network-request-failed"),$e=pr().setTimeout(()=>{oe(ve)},il.get());function ze(){pr().clearTimeout($e),Y(O)}O.ping(ze).then(ze,()=>{oe(ve)})});return function(Y,oe){return W.apply(this,arguments)}}()))}),mh.apply(this,arguments)}const au={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},vh=500,Kg=600,Jg="_blank",jp="http://localhost";class Up{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function id(R,g,C,O=vh,W=Kg){const Y=Math.max((window.screen.availHeight-W)/2,0).toString(),oe=Math.max((window.screen.availWidth-O)/2,0).toString();let ve="";const $e=Object.assign(Object.assign({},au),{width:O.toString(),height:W.toString(),top:Y,left:oe}),ze=(0,_.z$)().toLowerCase();C&&(ve=function ii(R=(0,_.z$)()){return/crios\//i.test(R)}(ze)?Jg:C),function Du(R=(0,_.z$)()){return/firefox\//i.test(R)}(ze)&&(g=g||jp,$e.scrollbars="yes");const ct=Object.entries($e).reduce((cn,[ui,Ho])=>`${cn}${ui}=${Ho},`,"");if(function Vi(R=(0,_.z$)()){var g;return gi(R)&&!(null===(g=window.navigator)||void 0===g||!g.standalone)}(ze)&&"_self"!==ve)return function Iy(R,g){const C=document.createElement("a");C.href=R,C.target=g;const O=document.createEvent("MouseEvent");O.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),C.dispatchEvent(O)}(g||"",ve),new Up(null);const gt=window.open(g||"",ve,ct);Ve(gt,R,"popup-blocked");try{gt.focus()}catch{}return new Up(gt)}const Bp="__/auth/handler",yh="emulator/auth/handler",Yg=encodeURIComponent("fac");function Ch(R,g,C,O,W,Y){return ga.apply(this,arguments)}function ga(){return(ga=(0,o.Z)(function*(R,g,C,O,W,Y){Ve(R.config.authDomain,R,"auth-domain-config-required"),Ve(R.config.apiKey,R,"invalid-api-key");const oe={apiKey:R.config.apiKey,appName:R.name,authType:C,redirectUrl:O,v:A.SDK_VERSION,eventId:W};if(g instanceof Gi){g.setDefaultLanguage(R.languageCode),oe.providerId=g.providerId||"",(0,_.xb)(g.getCustomParameters())||(oe.customParameters=JSON.stringify(g.getCustomParameters()));for(const[ct,gt]of Object.entries(Y||{}))oe[ct]=gt}if(g instanceof _r){const ct=g.getScopes().filter(gt=>""!==gt);ct.length>0&&(oe.scopes=ct.join(","))}R.tenantId&&(oe.tid=R.tenantId);const ve=oe;for(const ct of Object.keys(ve))void 0===ve[ct]&&delete ve[ct];const $e=yield R._getAppCheckToken(),ze=$e?`#${Yg}=${encodeURIComponent($e)}`:"";return`${function ma({config:R}){return R.emulator?Yt(R,yh):`https://${R.authDomain}/${Bp}`}(R)}?${(0,_.xO)(ve).slice(1)}${ze}`})).apply(this,arguments)}const sl="webStorageSupport",zp=class Vp{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ri,this._completeRedirectFn=rl,this._overrideRedirectResult=fh}_openPopup(g,C,O,W){var Y=this;return(0,o.Z)(function*(){var oe;fn(null===(oe=Y.eventManagers[g._key()])||void 0===oe?void 0:oe.manager,"_initialize() not called before _openPopup()");const ve=yield Ch(g,C,O,at(),W);return id(g,ve,nc())})()}_openRedirect(g,C,O,W){var Y=this;return(0,o.Z)(function*(){return yield Y._originValidation(g),function ah(R){pr().location.href=R}(yield Ch(g,C,O,at(),W)),new Promise(()=>{})})()}_initialize(g){const C=g._key();if(this.eventManagers[C]){const{manager:W,promise:Y}=this.eventManagers[C];return W?Promise.resolve(W):(fn(Y,"If manager is not set, promise should be"),Y)}const O=this.initAndGetManager(g);return this.eventManagers[C]={promise:O},O.catch(()=>{delete this.eventManagers[C]}),O}initAndGetManager(g){var C=this;return(0,o.Z)(function*(){const O=yield function Fp(R){return mh.apply(this,arguments)}(g),W=new re(g);return O.register("authEvent",Y=>(Ve(Y?.authEvent,g,"invalid-auth-event"),{status:W.onEvent(Y.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),C.eventManagers[g._key()]={manager:W},C.iframes[g._key()]=O,W})()}_isIframeWebStorageSupported(g,C){this.iframes[g._key()].send(sl,{type:sl},W=>{var Y;const oe=null===(Y=W?.[0])||void 0===Y?void 0:Y[sl];void 0!==oe&&C(!!oe),Pt(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const C=g._key();return this.originValidationPromises[C]||(this.originValidationPromises[C]=function Ht(R){return xi.apply(this,arguments)}(g)),this.originValidationPromises[C]}get _shouldInitProactively(){return Zo()||ns()||gi()}};function Cs(){return window}const Hp=2e3;function cu(){return cu=(0,o.Z)(function*(R,g,C){var O;const{BuildInfo:W}=Cs();fn(g.sessionId,"AuthEvent did not contain a session ID");const Y=yield function Xr(R){return ws.apply(this,arguments)}(g.sessionId),oe={};return gi()?oe.ibi=W.packageName:jt()?oe.apn=W.packageName:Pt(R,"operation-not-supported-in-this-environment"),W.displayName&&(oe.appDisplayName=W.displayName),oe.sessionId=Y,Ch(R,C,g.type,void 0,null!==(O=g.eventId)&&void 0!==O?O:void 0,oe)}),cu.apply(this,arguments)}function _s(){return(_s=(0,o.Z)(function*(R){const{BuildInfo:g}=Cs(),C={};gi()?C.iosBundleId=g.packageName:jt()?C.androidPackageName=g.packageName:Pt(R,"operation-not-supported-in-this-environment"),yield ut(R,C)})).apply(this,arguments)}function Eh(){return(Eh=(0,o.Z)(function*(R,g,C){const{cordova:O}=Cs();let W=()=>{};try{yield new Promise((Y,oe)=>{let ve=null;function $e(){var gt;Y();const cn=null===(gt=O.plugins.browsertab)||void 0===gt?void 0:gt.close;"function"==typeof cn&&cn(),"function"==typeof C?.close&&C.close()}function ze(){ve||(ve=window.setTimeout(()=>{oe(Ft(R,"redirect-cancelled-by-user"))},Hp))}function ct(){"visible"===document?.visibilityState&&ze()}g.addPassiveListener($e),document.addEventListener("resume",ze,!1),jt()&&document.addEventListener("visibilitychange",ct,!1),W=()=>{g.removePassiveListener($e),document.removeEventListener("resume",ze,!1),document.removeEventListener("visibilitychange",ct,!1),ve&&window.clearTimeout(ve)}})}finally{W()}})).apply(this,arguments)}function ws(){return(ws=(0,o.Z)(function*(R){const g=function cl(R){if(fn(/[0-9a-zA-Z]+/.test(R),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(R);const g=new ArrayBuffer(R.length),C=new Uint8Array(g);for(let O=0;O<R.length;O++)C[O]=R.charCodeAt(O);return C}(R),C=yield crypto.subtle.digest("SHA-256",g);return Array.from(new Uint8Array(C)).map(W=>W.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}const ul=20;class rm extends re{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(g=>{this.resolveInialized=g})}addPassiveListener(g){this.passiveListeners.add(g)}removePassiveListener(g){this.passiveListeners.delete(g)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(g){return this.resolveInialized(),this.passiveListeners.forEach(C=>C(g)),super.onEvent(g)}initialized(){var g=this;return(0,o.Z)(function*(){yield g.initPromise})()}}function $p(R){return ad.apply(this,arguments)}function ad(){return(ad=(0,o.Z)(function*(R){const g=yield Ca()._get(Vs(R));return g&&(yield Ca()._remove(Vs(R))),g})).apply(this,arguments)}function Gp(){const R=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let C=0;C<ul;C++){const O=Math.floor(Math.random()*g.length);R.push(g.charAt(O))}return R.join("")}function Ca(){return Rt(la)}function Vs(R){return Kr("authEvent",R.config.apiKey,R.name)}function cd(R){if(!R?.includes("?"))return{};const[g,...C]=R.split("?");return(0,_.zd)(C.join("?"))}const ud=class Ay{constructor(){this._redirectPersistence=Ri,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=rl,this._overrideRedirectResult=fh}_initialize(g){var C=this;return(0,o.Z)(function*(){const O=g._key();let W=C.eventManagers.get(O);return W||(W=new rm(g),C.eventManagers.set(O,W),C.attachCallbackListeners(g,W)),W})()}_openPopup(g){Pt(g,"operation-not-supported-in-this-environment")}_openRedirect(g,C,O,W){var Y=this;return(0,o.Z)(function*(){!function Ty(R){var g,C,O,W,Y,oe,ve,$e,ze,ct;const gt=Cs();Ve("function"==typeof(null===(g=gt?.universalLinks)||void 0===g?void 0:g.subscribe),R,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Ve(typeof(null===(C=gt?.BuildInfo)||void 0===C?void 0:C.packageName)<"u",R,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Ve("function"==typeof(null===(Y=null===(W=null===(O=gt?.cordova)||void 0===O?void 0:O.plugins)||void 0===W?void 0:W.browsertab)||void 0===Y?void 0:Y.openUrl),R,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ve("function"==typeof(null===($e=null===(ve=null===(oe=gt?.cordova)||void 0===oe?void 0:oe.plugins)||void 0===ve?void 0:ve.browsertab)||void 0===$e?void 0:$e.isAvailable),R,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ve("function"==typeof(null===(ct=null===(ze=gt?.cordova)||void 0===ze?void 0:ze.InAppBrowser)||void 0===ct?void 0:ct.open),R,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(g);const oe=yield Y._initialize(g);yield oe.initialized(),oe.resetRedirect(),function wy(){ru.clear()}(),yield Y._originValidation(g);const ve=function im(R,g,C=null){return{type:g,eventId:C,urlResponse:null,sessionId:Gp(),postBody:null,tenantId:R.tenantId,error:Ft(R,"no-auth-event")}}(g,O,W);yield function yw(R,g){return Ca()._set(Vs(R),g)}(g,ve);const $e=yield function uc(R,g,C){return cu.apply(this,arguments)}(g,ve,C),ze=yield function tm(R){const{cordova:g}=Cs();return new Promise(C=>{g.plugins.browsertab.isAvailable(O=>{let W=null;O?g.plugins.browsertab.openUrl(R):W=g.InAppBrowser.open(R,function ur(R=(0,_.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(R)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(R)}()?"_blank":"_system","location=yes"),C(W)})})}($e);return function nm(R,g,C){return Eh.apply(this,arguments)}(g,oe,ze)})()}_isIframeWebStorageSupported(g,C){throw new Error("Method not implemented.")}_originValidation(g){const C=g._key();return this.originValidationPromises[C]||(this.originValidationPromises[C]=function by(R){return _s.apply(this,arguments)}(g)),this.originValidationPromises[C]}attachCallbackListeners(g,C){const{universalLinks:O,handleOpenURL:W,BuildInfo:Y}=Cs(),oe=setTimeout((0,o.Z)(function*(){yield $p(g),C.onEvent(Ih())}),500),ve=function(){var ct=(0,o.Z)(function*(gt){clearTimeout(oe);const cn=yield $p(g);let ui=null;cn&&gt?.url&&(ui=function sm(R,g){var C,O;const W=function ll(R){const g=cd(R),C=g.link?decodeURIComponent(g.link):void 0,O=cd(C).link,W=g.deep_link_id?decodeURIComponent(g.deep_link_id):void 0;return cd(W).link||W||O||C||R}(g);if(W.includes("/__/auth/callback")){const Y=cd(W),oe=Y.firebaseError?function un(R){try{return JSON.parse(R)}catch{return null}}(decodeURIComponent(Y.firebaseError)):null,ve=null===(O=null===(C=oe?.code)||void 0===C?void 0:C.split("auth/"))||void 0===O?void 0:O[1],$e=ve?Ft(ve):null;return $e?{type:R.type,eventId:R.eventId,tenantId:R.tenantId,error:$e,urlResponse:null,sessionId:null,postBody:null}:{type:R.type,eventId:R.eventId,tenantId:R.tenantId,sessionId:R.sessionId,urlResponse:W,postBody:null}}return null}(cn,gt.url)),C.onEvent(ui||Ih())});return function(cn){return ct.apply(this,arguments)}}();typeof O<"u"&&"function"==typeof O.subscribe&&O.subscribe(null,ve);const $e=W,ze=`${Y.packageName.toLowerCase()}://`;Cs().handleOpenURL=function(){var ct=(0,o.Z)(function*(gt){if(gt.toLowerCase().startsWith(ze)&&ve({url:gt}),"function"==typeof $e)try{$e(gt)}catch(cn){console.error(cn)}});return function(gt){return ct.apply(this,arguments)}}()}};function Ih(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ft("no-auth-event")}}const dl=1e3;function dc(){var R;return(null===(R=self?.location)||void 0===R?void 0:R.protocol)||null}function cm(){return function Wp(R=(0,_.z$)()){return!("file:"!==dc()&&"ionic:"!==dc()&&"capacitor:"!==dc()||!R.toLowerCase().match(/iphone|ipad|ipod|android/))}()&&typeof document<"u"}function uo(){return(uo=(0,o.Z)(function*(){return!!cm()&&new Promise(R=>{const g=setTimeout(()=>{R(!1)},dl);document.addEventListener("deviceready",()=>{clearTimeout(g),R(!0)})})})).apply(this,arguments)}const pl="persistence";function pc(R){return Th.apply(this,arguments)}function Th(){return(Th=(0,o.Z)(function*(R){yield R._initializationPromise;const g=function dd(){var R;try{return(null===(R=function ld(){return typeof window<"u"?window:null}())||void 0===R?void 0:R.sessionStorage)||null}catch{return null}}(),C=Kr(pl,R.config.apiKey,R.name);g&&g.setItem(C,R._getPersistence())})).apply(this,arguments)}const My=Ve;class uu{constructor(){this.browserResolver=Rt(zp),this.cordovaResolver=Rt(ud),this.underlyingResolver=null,this._redirectPersistence=Ri,this._completeRedirectFn=rl,this._overrideRedirectResult=fh}_initialize(g){var C=this;return(0,o.Z)(function*(){return yield C.selectUnderlyingResolver(),C.assertedUnderlyingResolver._initialize(g)})()}_openPopup(g,C,O,W){var Y=this;return(0,o.Z)(function*(){return yield Y.selectUnderlyingResolver(),Y.assertedUnderlyingResolver._openPopup(g,C,O,W)})()}_openRedirect(g,C,O,W){var Y=this;return(0,o.Z)(function*(){return yield Y.selectUnderlyingResolver(),Y.assertedUnderlyingResolver._openRedirect(g,C,O,W)})()}_isIframeWebStorageSupported(g,C){this.assertedUnderlyingResolver._isIframeWebStorageSupported(g,C)}_originValidation(g){return this.assertedUnderlyingResolver._originValidation(g)}get _shouldInitProactively(){return cm()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return My(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var g=this;return(0,o.Z)(function*(){if(g.underlyingResolver)return;const C=yield function Kp(){return uo.apply(this,arguments)}();g.underlyingResolver=C?g.cordovaResolver:g.browserResolver})()}}function lu(R){return R.unwrap()}function fl(R){return Jp(R)}function Jp(R){const{_tokenResponse:g}=R instanceof _.ZR?R.customData:R;if(!g)return null;if(!(R instanceof _.ZR)&&"temporaryProof"in g&&"phoneNumber"in g)return ac.credentialFromResult(R);const C=g.providerId;if(!C||C===vn.PASSWORD)return null;let O;switch(C){case vn.GOOGLE:O=Ut;break;case vn.FACEBOOK:O=ra;break;case vn.GITHUB:O=Ba;break;case vn.TWITTER:O=jc;break;default:const{oauthIdToken:W,oauthAccessToken:Y,oauthTokenSecret:oe,pendingToken:ve,nonce:$e}=g;return Y||oe||W||ve?ve?C.startsWith("saml.")?eo._create(C,ve):mi._fromParams({providerId:C,signInMethod:C,pendingToken:ve,idToken:W,accessToken:Y}):new cs(C).credential({idToken:W,accessToken:Y,rawNonce:$e}):null}return R instanceof _.ZR?O.credentialFromError(R):O.credentialFromResult(R)}function yi(R,g){return g.catch(C=>{throw C instanceof _.ZR&&function lm(R,g){var C;const O=null===(C=g.customData)||void 0===C?void 0:C._tokenResponse;if("auth/multi-factor-auth-required"===g?.code)g.resolver=new Qp(R,function Bl(R,g){var C;const O=(0,_.m9)(R),W=g;return Ve(g.customData.operationType,O,"argument-error"),Ve(null===(C=W.customData._serverResponse)||void 0===C?void 0:C.mfaPendingCredential,O,"argument-error"),Hu._fromError(O,W)}(R,g));else if(O){const W=Jp(g),Y=g;W&&(Y.credential=W,Y.tenantId=O.tenantId||void 0,Y.email=O.email||void 0,Y.phoneNumber=O.phoneNumber||void 0)}}(R,C),C}).then(C=>{const W=C.user;return{operationType:C.operationType,credential:fl(C),additionalUserInfo:Kc(C),user:zo.getOrCreate(W)}})}function lo(R,g){return Yp.apply(this,arguments)}function Yp(){return(Yp=(0,o.Z)(function*(R,g){const C=yield g;return{verificationId:C.verificationId,confirm:O=>yi(R,C.confirm(O))}})).apply(this,arguments)}class Qp{constructor(g,C){this.resolver=C,this.auth=function hd(R){return R.wrapped()}(g)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(g){return yi(lu(this.auth),this.resolver.resolveSignIn(g))}}class zo{constructor(g){this._delegate=g,this.multiFactor=function Ap(R){const g=(0,_.m9)(R);return Xa.has(g)||Xa.set(g,rh._fromUser(g)),Xa.get(g)}(g)}static getOrCreate(g){return zo.USER_MAP.has(g)||zo.USER_MAP.set(g,new zo(g)),zo.USER_MAP.get(g)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(g){return this._delegate.getIdTokenResult(g)}getIdToken(g){return this._delegate.getIdToken(g)}linkAndRetrieveDataWithCredential(g){return this.linkWithCredential(g)}linkWithCredential(g){var C=this;return(0,o.Z)(function*(){return yi(C.auth,no(C._delegate,g))})()}linkWithPhoneNumber(g,C){var O=this;return(0,o.Z)(function*(){return lo(O.auth,function Yu(R,g,C){return sc.apply(this,arguments)}(O._delegate,g,C))})()}linkWithPopup(g){var C=this;return(0,o.Z)(function*(){return yi(C.auth,function ph(R,g,C){return pa.apply(this,arguments)}(C._delegate,g,uu))})()}linkWithRedirect(g){var C=this;return(0,o.Z)(function*(){return yield pc(Bn(C.auth)),Bo(C._delegate,g,uu)})()}reauthenticateAndRetrieveDataWithCredential(g){return this.reauthenticateWithCredential(g)}reauthenticateWithCredential(g){var C=this;return(0,o.Z)(function*(){return yi(C.auth,jl(C._delegate,g))})()}reauthenticateWithPhoneNumber(g,C){return lo(this.auth,function Us(R,g,C){return xp.apply(this,arguments)}(this._delegate,g,C))}reauthenticateWithPopup(g){return yi(this.auth,function dh(R,g,C){return hh.apply(this,arguments)}(this._delegate,g,uu))}reauthenticateWithRedirect(g){var C=this;return(0,o.Z)(function*(){return yield pc(Bn(C.auth)),vs(C._delegate,g,uu)})()}sendEmailVerification(g){return function Qn(R,g){return Ya.apply(this,arguments)}(this._delegate,g)}unlink(g){var C=this;return(0,o.Z)(function*(){return yield function vi(R,g){return za.apply(this,arguments)}(C._delegate,g),C})()}updateEmail(g){return function ps(R,g){return B((0,_.m9)(R),g,null)}(this._delegate,g)}updatePassword(g){return function j(R,g){return B((0,_.m9)(R),null,g)}(this._delegate,g)}updatePhoneNumber(g){return function Np(R,g){return Gl.apply(this,arguments)}(this._delegate,g)}updateProfile(g){return function ua(R,g){return ko.apply(this,arguments)}(this._delegate,g)}verifyBeforeUpdateEmail(g,C){return function ca(R,g,C){return Vu.apply(this,arguments)}(this._delegate,g,C)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}zo.USER_MAP=new WeakMap;class gl{constructor(){this.providerId="phone",this._delegate=new ac(lu(v.Z.auth()))}static credential(g,C){return ac.credential(g,C)}verifyPhoneNumber(g,C){return this._delegate.verifyPhoneNumber(g,C)}unwrap(){return this._delegate}}gl.PHONE_SIGN_IN_METHOD=ac.PHONE_SIGN_IN_METHOD,gl.PROVIDER_ID=ac.PROVIDER_ID},9681:(ne,p,y)=>{"use strict";y.d(p,{Jn:()=>Un,KN:()=>at,Xd:()=>dt,ZF:()=>Cn,qX:()=>vt});var o=y(5861),v=y(4859),_=y(1877),A=y(2090),b=y(8766);class P{constructor(de){this.container=de}getPlatformInfoString(){return this.container.getProviders().map(je=>{if(function w(Ne){return"VERSION"===Ne.getComponent()?.type}(je)){const nt=je.getImmediate();return`${nt.library}/${nt.version}`}return null}).filter(je=>je).join(" ")}}const S="@firebase/app",h="0.9.16",m=new _.Yd("@firebase/app"),Ee="[DEFAULT]",De={[S]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},be=new Map,_e=new Map;function Ke(Ne,de){try{Ne.container.addComponent(de)}catch(je){m.debug(`Component ${de.name} failed to register with FirebaseApp ${Ne.name}`,je)}}function dt(Ne){const de=Ne.name;if(_e.has(de))return m.debug(`There were multiple attempts to register component ${de}.`),!1;_e.set(de,Ne);for(const je of be.values())Ke(je,Ne);return!0}function vt(Ne,de){const je=Ne.container.getProvider("heartbeat").getImmediate({optional:!0});return je&&je.triggerHeartbeat(),Ne.container.getProvider(de)}const Pt=new A.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Ft{constructor(de,je,nt){this._isDeleted=!1,this._options=Object.assign({},de),this._config=Object.assign({},je),this._name=je.name,this._automaticDataCollectionEnabled=je.automaticDataCollectionEnabled,this._container=nt,this.container.addComponent(new v.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(de){this.checkDestroyed(),this._automaticDataCollectionEnabled=de}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(de){this._isDeleted=de}checkDestroyed(){if(this.isDeleted)throw Pt.create("app-deleted",{appName:this._name})}}const Un="10.2.0";function Cn(Ne,de={}){let je=Ne;"object"!=typeof de&&(de={name:de});const nt=Object.assign({name:Ee,automaticDataCollectionEnabled:!1},de),ht=nt.name;if("string"!=typeof ht||!ht)throw Pt.create("bad-app-name",{appName:String(ht)});if(je||(je=(0,A.aH)()),!je)throw Pt.create("no-options");const wt=be.get(ht);if(wt){if((0,A.vZ)(je,wt.options)&&(0,A.vZ)(nt,wt.config))return wt;throw Pt.create("duplicate-app",{appName:ht})}const yn=new v.H0(ht);for(const ae of _e.values())yn.addComponent(ae);const ue=new Ft(je,nt,yn);return be.set(ht,ue),ue}function at(Ne,de,je){var nt;let ht=null!==(nt=De[Ne])&&void 0!==nt?nt:Ne;je&&(ht+=`-${je}`);const wt=ht.match(/\s|\//),yn=de.match(/\s|\//);if(wt||yn){const ue=[`Unable to register library "${ht}" with version "${de}":`];return wt&&ue.push(`library name "${ht}" contains illegal characters (whitespace or "/")`),wt&&yn&&ue.push("and"),yn&&ue.push(`version name "${de}" contains illegal characters (whitespace or "/")`),void m.warn(ue.join(" "))}dt(new v.wA(`${ht}-version`,()=>({library:ht,version:de}),"VERSION"))}const Vn="firebase-heartbeat-database",Vt=1,gn="firebase-heartbeat-store";let Yt=null;function Jt(){return Yt||(Yt=(0,b.X3)(Vn,Vt,{upgrade:(Ne,de)=>{0===de&&Ne.createObjectStore(gn)}}).catch(Ne=>{throw Pt.create("idb-open",{originalErrorMessage:Ne.message})})),Yt}function Ct(){return(Ct=(0,o.Z)(function*(Ne){try{return yield(yield Jt()).transaction(gn).objectStore(gn).get(sn(Ne))}catch(de){if(de instanceof A.ZR)m.warn(de.message);else{const je=Pt.create("idb-get",{originalErrorMessage:de?.message});m.warn(je.message)}}})).apply(this,arguments)}function rn(Ne,de){return zt.apply(this,arguments)}function zt(){return(zt=(0,o.Z)(function*(Ne,de){try{const nt=(yield Jt()).transaction(gn,"readwrite");yield nt.objectStore(gn).put(de,sn(Ne)),yield nt.done}catch(je){if(je instanceof A.ZR)m.warn(je.message);else{const nt=Pt.create("idb-set",{originalErrorMessage:je?.message});m.warn(nt.message)}}})).apply(this,arguments)}function sn(Ne){return`${Ne.name}!${Ne.options.appId}`}class cr{constructor(de){this.container=de,this._heartbeatsCache=null;const je=this.container.getProvider("app").getImmediate();this._storage=new Qt(je),this._heartbeatsCachePromise=this._storage.read().then(nt=>(this._heartbeatsCache=nt,nt))}triggerHeartbeat(){var de=this;return(0,o.Z)(function*(){const nt=de.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),ht=ln();if(null===de._heartbeatsCache&&(de._heartbeatsCache=yield de._heartbeatsCachePromise),de._heartbeatsCache.lastSentHeartbeatDate!==ht&&!de._heartbeatsCache.heartbeats.some(wt=>wt.date===ht))return de._heartbeatsCache.heartbeats.push({date:ht,agent:nt}),de._heartbeatsCache.heartbeats=de._heartbeatsCache.heartbeats.filter(wt=>{const yn=new Date(wt.date).valueOf();return Date.now()-yn<=2592e6}),de._storage.overwrite(de._heartbeatsCache)})()}getHeartbeatsHeader(){var de=this;return(0,o.Z)(function*(){if(null===de._heartbeatsCache&&(yield de._heartbeatsCachePromise),null===de._heartbeatsCache||0===de._heartbeatsCache.heartbeats.length)return"";const je=ln(),{heartbeatsToSend:nt,unsentEntries:ht}=function ti(Ne,de=1024){const je=[];let nt=Ne.slice();for(const ht of Ne){const wt=je.find(yn=>yn.agent===ht.agent);if(wt){if(wt.dates.push(ht.date),tr(je)>de){wt.dates.pop();break}}else if(je.push({agent:ht.agent,dates:[ht.date]}),tr(je)>de){je.pop();break}nt=nt.slice(1)}return{heartbeatsToSend:je,unsentEntries:nt}}(de._heartbeatsCache.heartbeats),wt=(0,A.L)(JSON.stringify({version:2,heartbeats:nt}));return de._heartbeatsCache.lastSentHeartbeatDate=je,ht.length>0?(de._heartbeatsCache.heartbeats=ht,yield de._storage.overwrite(de._heartbeatsCache)):(de._heartbeatsCache.heartbeats=[],de._storage.overwrite(de._heartbeatsCache)),wt})()}}function ln(){return(new Date).toISOString().substring(0,10)}class Qt{constructor(de){this.app=de,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,o.Z)(function*(){return!!(0,A.hl)()&&(0,A.eu)().then(()=>!0).catch(()=>!1)})()}read(){var de=this;return(0,o.Z)(function*(){return(yield de._canUseIndexedDBPromise)&&(yield function lt(Ne){return Ct.apply(this,arguments)}(de.app))||{heartbeats:[]}})()}overwrite(de){var je=this;return(0,o.Z)(function*(){var nt;if(yield je._canUseIndexedDBPromise){const wt=yield je.read();return rn(je.app,{lastSentHeartbeatDate:null!==(nt=de.lastSentHeartbeatDate)&&void 0!==nt?nt:wt.lastSentHeartbeatDate,heartbeats:de.heartbeats})}})()}add(de){var je=this;return(0,o.Z)(function*(){var nt;if(yield je._canUseIndexedDBPromise){const wt=yield je.read();return rn(je.app,{lastSentHeartbeatDate:null!==(nt=de.lastSentHeartbeatDate)&&void 0!==nt?nt:wt.lastSentHeartbeatDate,heartbeats:[...wt.heartbeats,...de.heartbeats]})}})()}}function tr(Ne){return(0,A.L)(JSON.stringify({version:2,heartbeats:Ne})).length}!function mn(Ne){dt(new v.wA("platform-logger",de=>new P(de),"PRIVATE")),dt(new v.wA("heartbeat",de=>new cr(de),"PRIVATE")),at(S,h,Ne),at(S,h,"esm2017"),at("fire-js","")}("")},4859:(ne,p,y)=>{"use strict";y.d(p,{H0:()=>S,wA:()=>_});var o=y(5861),v=y(2090);class _{constructor(m,I,M){this.name=m,this.instanceFactory=I,this.type=M,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(m){return this.instantiationMode=m,this}setMultipleInstances(m){return this.multipleInstances=m,this}setServiceProps(m){return this.serviceProps=m,this}setInstanceCreatedCallback(m){return this.onInstanceCreated=m,this}}const A="[DEFAULT]";class b{constructor(m,I){this.name=m,this.container=I,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(m){const I=this.normalizeInstanceIdentifier(m);if(!this.instancesDeferred.has(I)){const M=new v.BH;if(this.instancesDeferred.set(I,M),this.isInitialized(I)||this.shouldAutoInitialize())try{const T=this.getOrInitializeService({instanceIdentifier:I});T&&M.resolve(T)}catch{}}return this.instancesDeferred.get(I).promise}getImmediate(m){var I;const M=this.normalizeInstanceIdentifier(m?.identifier),T=null!==(I=m?.optional)&&void 0!==I&&I;if(!this.isInitialized(M)&&!this.shouldAutoInitialize()){if(T)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:M})}catch(N){if(T)return null;throw N}}getComponent(){return this.component}setComponent(m){if(m.name!==this.name)throw Error(`Mismatching Component ${m.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=m,this.shouldAutoInitialize()){if(function w(h){return"EAGER"===h.instantiationMode}(m))try{this.getOrInitializeService({instanceIdentifier:A})}catch{}for(const[I,M]of this.instancesDeferred.entries()){const T=this.normalizeInstanceIdentifier(I);try{const N=this.getOrInitializeService({instanceIdentifier:T});M.resolve(N)}catch{}}}}clearInstance(m=A){this.instancesDeferred.delete(m),this.instancesOptions.delete(m),this.instances.delete(m)}delete(){var m=this;return(0,o.Z)(function*(){const I=Array.from(m.instances.values());yield Promise.all([...I.filter(M=>"INTERNAL"in M).map(M=>M.INTERNAL.delete()),...I.filter(M=>"_delete"in M).map(M=>M._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(m=A){return this.instances.has(m)}getOptions(m=A){return this.instancesOptions.get(m)||{}}initialize(m={}){const{options:I={}}=m,M=this.normalizeInstanceIdentifier(m.instanceIdentifier);if(this.isInitialized(M))throw Error(`${this.name}(${M}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const T=this.getOrInitializeService({instanceIdentifier:M,options:I});for(const[N,L]of this.instancesDeferred.entries())M===this.normalizeInstanceIdentifier(N)&&L.resolve(T);return T}onInit(m,I){var M;const T=this.normalizeInstanceIdentifier(I),N=null!==(M=this.onInitCallbacks.get(T))&&void 0!==M?M:new Set;N.add(m),this.onInitCallbacks.set(T,N);const L=this.instances.get(T);return L&&m(L,T),()=>{N.delete(m)}}invokeOnInitCallbacks(m,I){const M=this.onInitCallbacks.get(I);if(M)for(const T of M)try{T(m,I)}catch{}}getOrInitializeService({instanceIdentifier:m,options:I={}}){let M=this.instances.get(m);if(!M&&this.component&&(M=this.component.instanceFactory(this.container,{instanceIdentifier:(h=m,h===A?void 0:h),options:I}),this.instances.set(m,M),this.instancesOptions.set(m,I),this.invokeOnInitCallbacks(M,m),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,m,M)}catch{}var h;return M||null}normalizeInstanceIdentifier(m=A){return this.component?this.component.multipleInstances?m:A:m}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class S{constructor(m){this.name=m,this.providers=new Map}addComponent(m){const I=this.getProvider(m.name);if(I.isComponentSet())throw new Error(`Component ${m.name} has already been registered with ${this.name}`);I.setComponent(m)}addOrOverwriteComponent(m){this.getProvider(m.name).isComponentSet()&&this.providers.delete(m.name),this.addComponent(m)}getProvider(m){if(this.providers.has(m))return this.providers.get(m);const I=new b(m,this);return this.providers.set(m,I),I}getProviders(){return Array.from(this.providers.values())}}},1877:(ne,p,y)=>{"use strict";y.d(p,{Am:()=>h,Ub:()=>S,Yd:()=>w,in:()=>v});const o=[];var v=(()=>{return(m=v||(v={}))[m.DEBUG=0]="DEBUG",m[m.VERBOSE=1]="VERBOSE",m[m.INFO=2]="INFO",m[m.WARN=3]="WARN",m[m.ERROR=4]="ERROR",m[m.SILENT=5]="SILENT",v;var m})();const _={debug:v.DEBUG,verbose:v.VERBOSE,info:v.INFO,warn:v.WARN,error:v.ERROR,silent:v.SILENT},A=v.INFO,b={[v.DEBUG]:"log",[v.VERBOSE]:"log",[v.INFO]:"info",[v.WARN]:"warn",[v.ERROR]:"error"},P=(m,I,...M)=>{if(I<m.logLevel)return;const T=(new Date).toISOString(),N=b[I];if(!N)throw new Error(`Attempted to log a message with an invalid logType (value: ${I})`);console[N](`[${T}]  ${m.name}:`,...M)};class w{constructor(I){this.name=I,this._logLevel=A,this._logHandler=P,this._userLogHandler=null,o.push(this)}get logLevel(){return this._logLevel}set logLevel(I){if(!(I in v))throw new TypeError(`Invalid value "${I}" assigned to \`logLevel\``);this._logLevel=I}setLogLevel(I){this._logLevel="string"==typeof I?_[I]:I}get logHandler(){return this._logHandler}set logHandler(I){if("function"!=typeof I)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=I}get userLogHandler(){return this._userLogHandler}set userLogHandler(I){this._userLogHandler=I}debug(...I){this._userLogHandler&&this._userLogHandler(this,v.DEBUG,...I),this._logHandler(this,v.DEBUG,...I)}log(...I){this._userLogHandler&&this._userLogHandler(this,v.VERBOSE,...I),this._logHandler(this,v.VERBOSE,...I)}info(...I){this._userLogHandler&&this._userLogHandler(this,v.INFO,...I),this._logHandler(this,v.INFO,...I)}warn(...I){this._userLogHandler&&this._userLogHandler(this,v.WARN,...I),this._logHandler(this,v.WARN,...I)}error(...I){this._userLogHandler&&this._userLogHandler(this,v.ERROR,...I),this._logHandler(this,v.ERROR,...I)}}function S(m){o.forEach(I=>{I.setLogLevel(m)})}function h(m,I){for(const M of o){let T=null;I&&I.level&&(T=_[I.level]),M.userLogHandler=null===m?null:(N,L,...z)=>{const V=z.map(q=>{if(null==q)return null;if("string"==typeof q)return q;if("number"==typeof q||"boolean"==typeof q)return q.toString();if(q instanceof Error)return q.message;try{return JSON.stringify(q)}catch{return null}}).filter(q=>q).join(" ");L>=(T??N.logLevel)&&m({level:v[L].toLowerCase(),message:V,args:z,type:N.name})}}}},8766:(ne,p,y)=>{"use strict";y.d(p,{X3:()=>ce});var o=y(5861);const v=(we,Le)=>Le.some(tt=>we instanceof tt);let _,A;const w=new WeakMap,S=new WeakMap,h=new WeakMap,m=new WeakMap,I=new WeakMap;let N={get(we,Le,tt){if(we instanceof IDBTransaction){if("done"===Le)return S.get(we);if("objectStoreNames"===Le)return we.objectStoreNames||h.get(we);if("store"===Le)return tt.objectStoreNames[1]?void 0:tt.objectStore(tt.objectStoreNames[0])}return q(we[Le])},set:(we,Le,tt)=>(we[Le]=tt,!0),has:(we,Le)=>we instanceof IDBTransaction&&("done"===Le||"store"===Le)||Le in we};function V(we){return"function"==typeof we?function z(we){return we!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function P(){return A||(A=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(we)?function(...Le){return we.apply(X(this),Le),q(w.get(this))}:function(...Le){return q(we.apply(X(this),Le))}:function(Le,...tt){const Ye=we.call(X(this),Le,...tt);return h.set(Ye,Le.sort?Le.sort():[Le]),q(Ye)}}(we):(we instanceof IDBTransaction&&function T(we){if(S.has(we))return;const Le=new Promise((tt,Ye)=>{const ot=()=>{we.removeEventListener("complete",Xe),we.removeEventListener("error",wn),we.removeEventListener("abort",wn)},Xe=()=>{tt(),ot()},wn=()=>{Ye(we.error||new DOMException("AbortError","AbortError")),ot()};we.addEventListener("complete",Xe),we.addEventListener("error",wn),we.addEventListener("abort",wn)});S.set(we,Le)}(we),v(we,function b(){return _||(_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(we,N):we)}function q(we){if(we instanceof IDBRequest)return function M(we){const Le=new Promise((tt,Ye)=>{const ot=()=>{we.removeEventListener("success",Xe),we.removeEventListener("error",wn)},Xe=()=>{tt(q(we.result)),ot()},wn=()=>{Ye(we.error),ot()};we.addEventListener("success",Xe),we.addEventListener("error",wn)});return Le.then(tt=>{tt instanceof IDBCursor&&w.set(tt,we)}).catch(()=>{}),I.set(Le,we),Le}(we);if(m.has(we))return m.get(we);const Le=V(we);return Le!==we&&(m.set(we,Le),I.set(Le,we)),Le}const X=we=>I.get(we);function ce(we,Le,{blocked:tt,upgrade:Ye,blocking:ot,terminated:Xe}={}){const wn=indexedDB.open(we,Le),yr=q(wn);return Ye&&wn.addEventListener("upgradeneeded",vn=>{Ye(q(wn.result),vn.oldVersion,vn.newVersion,q(wn.transaction),vn)}),tt&&wn.addEventListener("blocked",vn=>tt(vn.oldVersion,vn.newVersion,vn)),yr.then(vn=>{Xe&&vn.addEventListener("close",()=>Xe()),ot&&vn.addEventListener("versionchange",Cr=>ot(Cr.oldVersion,Cr.newVersion,Cr))}).catch(()=>{}),yr}const pe=["get","getKey","getAll","getAllKeys","count"],Ae=["put","add","delete","clear"],ke=new Map;function Fe(we,Le){if(!(we instanceof IDBDatabase)||Le in we||"string"!=typeof Le)return;if(ke.get(Le))return ke.get(Le);const tt=Le.replace(/FromIndex$/,""),Ye=Le!==tt,ot=Ae.includes(tt);if(!(tt in(Ye?IDBIndex:IDBObjectStore).prototype)||!ot&&!pe.includes(tt))return;const Xe=function(){var wn=(0,o.Z)(function*(yr,...vn){const Cr=this.transaction(yr,ot?"readwrite":"readonly");let Ee=Cr.store;return Ye&&(Ee=Ee.index(vn.shift())),(yield Promise.all([Ee[tt](...vn),ot&&Cr.done]))[0]});return function(vn){return wn.apply(this,arguments)}}();return ke.set(Le,Xe),Xe}!function L(we){N=we(N)}(we=>({...we,get:(Le,tt,Ye)=>Fe(Le,tt)||we.get(Le,tt,Ye),has:(Le,tt)=>!!Fe(Le,tt)||we.has(Le,tt)}))},5861:(ne,p,y)=>{"use strict";function o(_,A,b,P,w,S,h){try{var m=_[S](h),I=m.value}catch(M){return void b(M)}m.done?A(I):Promise.resolve(I).then(P,w)}function v(_){return function(){var A=this,b=arguments;return new Promise(function(P,w){var S=_.apply(A,b);function h(I){o(S,P,w,h,m,"next",I)}function m(I){o(S,P,w,h,m,"throw",I)}h(void 0)})}}y.d(p,{Z:()=>v})},7582:(ne,p,y)=>{"use strict";function M(Ee,De,be,_e){return new(be||(be=Promise))(function(Qe,dt){function vt(Gt){try{Dt(_e.next(Gt))}catch(Pt){dt(Pt)}}function Sn(Gt){try{Dt(_e.throw(Gt))}catch(Pt){dt(Pt)}}function Dt(Gt){Gt.done?Qe(Gt.value):function Ke(Qe){return Qe instanceof be?Qe:new be(function(dt){dt(Qe)})}(Gt.value).then(vt,Sn)}Dt((_e=_e.apply(Ee,De||[])).next())})}function fe(Ee){return this instanceof fe?(this.v=Ee,this):new fe(Ee)}function pe(Ee,De,be){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ke,_e=be.apply(Ee,De||[]),Qe=[];return Ke={},dt("next"),dt("throw"),dt("return"),Ke[Symbol.asyncIterator]=function(){return this},Ke;function dt(Ft){_e[Ft]&&(Ke[Ft]=function(Un){return new Promise(function(Cn,kn){Qe.push([Ft,Un,Cn,kn])>1||vt(Ft,Un)})})}function vt(Ft,Un){try{!function Sn(Ft){Ft.value instanceof fe?Promise.resolve(Ft.value.v).then(Dt,Gt):Pt(Qe[0][2],Ft)}(_e[Ft](Un))}catch(Cn){Pt(Qe[0][3],Cn)}}function Dt(Ft){vt("next",Ft)}function Gt(Ft){vt("throw",Ft)}function Pt(Ft,Un){Ft(Un),Qe.shift(),Qe.length&&vt(Qe[0][0],Qe[0][1])}}function ke(Ee){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var be,De=Ee[Symbol.asyncIterator];return De?De.call(Ee):(Ee=function z(Ee){var De="function"==typeof Symbol&&Symbol.iterator,be=De&&Ee[De],_e=0;if(be)return be.call(Ee);if(Ee&&"number"==typeof Ee.length)return{next:function(){return Ee&&_e>=Ee.length&&(Ee=void 0),{value:Ee&&Ee[_e++],done:!Ee}}};throw new TypeError(De?"Object is not iterable.":"Symbol.iterator is not defined.")}(Ee),be={},_e("next"),_e("throw"),_e("return"),be[Symbol.asyncIterator]=function(){return this},be);function _e(Qe){be[Qe]=Ee[Qe]&&function(dt){return new Promise(function(vt,Sn){!function Ke(Qe,dt,vt,Sn){Promise.resolve(Sn).then(function(Dt){Qe({value:Dt,done:vt})},dt)}(vt,Sn,(dt=Ee[Qe](dt)).done,dt.value)})}}}y.d(p,{FC:()=>pe,KL:()=>ke,mG:()=>M,qq:()=>fe}),"function"==typeof SuppressedError&&SuppressedError}},ne=>{ne(ne.s=6657)}]);